var T=typeof setImmediate!="undefined"?setImmediate:typeof process!="undefined"?process.nextTick:setTimeout,S=n;function n(f,t){this.fork=f,this.cleanup=t||function(){}}n.prototype.of=function(t){return new n(function(e,u){return u(t)})};n.of=n.prototype.of;n.prototype.rejected=function(t){return new n(function(e){return e(t)})};n.rejected=n.prototype.rejected;n.prototype.map=function(t){var e=this.fork,u=this.cleanup;return new n(function(a,o){return e(function(r){return a(r)},function(r){return o(t(r))})},u)};n.prototype.chain=function(t){var e=this.fork,u=this.cleanup;return new n(function(a,o){return e(function(r){return a(r)},function(r){return t(r).fork(a,o)})},u)};n.prototype.ap=function(t){var e=this.fork,u=t.fork,a=this.cleanup,o=t.cleanup;function r(c){a(c[0]),o(c[1])}return new n(function(c,v){var s,l=!1,h,k=!1,i=!1,d,y=e(w,_(function(p){l=!0,s=p})),j=u(w,_(function(p){k=!0,h=p}));function _(p){return function(m){if(!i)return p(m),l&&k?(T(function(){r(d)}),v(s(h))):m}}function w(p){if(!i)return i=!0,c(p)}return d=[y,j]},r)};n.prototype.concat=function(t){var e=this.fork,u=t.fork,a=this.cleanup,o=t.cleanup;function r(c){a(c[0]),o(c[1])}return new n(function(c,v){var s=!1,l,h=e(i(c),i(v)),k=u(i(c),i(v));return l=[h,k];function i(d){return function(y){if(!s)return s=!0,T(function(){r(l)}),d(y)}}},r)};n.empty=function(){return new n(function(){})};n.prototype.empty=n.empty;n.prototype.toString=function(){return"Task"};n.prototype.orElse=function(t){var e=this.fork,u=this.cleanup;return new n(function(a,o){return e(function(r){return t(r).fork(a,o)},function(r){return o(r)})},u)};n.prototype.fold=function(t,e){var u=this.fork,a=this.cleanup;return new n(function(o,r){return u(function(c){return r(t(c))},function(c){return r(e(c))})},a)};n.prototype.cata=function(t){return this.fold(t.Rejected,t.Resolved)};n.prototype.swap=function(){var t=this.fork,e=this.cleanup;return new n(function(u,a){return t(function(o){return a(o)},function(o){return u(o)})},e)};n.prototype.bimap=function(t,e){var u=this.fork,a=this.cleanup;return new n(function(o,r){return u(function(c){return o(t(c))},function(c){return r(e(c))})},a)};n.prototype.rejectedMap=function(t){var e=this.fork,u=this.cleanup;return new n(function(a,o){return e(function(r){return a(t(r))},function(r){return o(r)})},u)};var g=S;export{g as l};
