import{g as nm}from"../@boazblake/fun-config.a785f683.js";var Me={};function xe(r){this.content=r}xe.prototype={constructor:xe,find:function(r){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===r)return t;return-1},get:function(r){var t=this.find(r);return t==-1?void 0:this.content[t+1]},update:function(r,t,e){var n=e&&e!=r?this.remove(e):this,i=n.find(r),a=n.content.slice();return i==-1?a.push(e||r,t):(a[i+1]=t,e&&(a[i]=e)),new xe(a)},remove:function(r){var t=this.find(r);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new xe(e)},addToStart:function(r,t){return new xe([r,t].concat(this.remove(r).content))},addToEnd:function(r,t){var e=this.remove(r).content.slice();return e.push(r,t),new xe(e)},addBefore:function(r,t,e){var n=this.remove(t),i=n.content.slice(),a=n.find(r);return i.splice(a==-1?i.length:a,0,t,e),new xe(i)},forEach:function(r){for(var t=0;t<this.content.length;t+=2)r(this.content[t],this.content[t+1])},prepend:function(r){return r=xe.from(r),r.size?new xe(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=xe.from(r),r.size?new xe(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var t=this;r=xe.from(r);for(var e=0;e<r.content.length;e+=2)t=t.remove(r.content[e]);return t},get size(){return this.content.length>>1}};xe.from=function(r){if(r instanceof xe)return r;var t=[];if(r)for(var e in r)t.push(e,r[e]);return new xe(t)};var im=xe;function Li(){return typeof Reflect!="undefined"&&Reflect.get?Li=Reflect.get:Li=function(t,e,n){var i=am(t,e);if(!!i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},Li.apply(this,arguments)}function am(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=xr(r),r!==null););return r}function vd(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Gn(r,t)}function md(r){var t=gd();return function(){var n=xr(r),i;if(t){var a=xr(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return om(this,i)}}function om(r,t){if(t&&(er(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sm(r)}function sm(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _o(r){var t=typeof Map=="function"?new Map:void 0;return _o=function(n){if(n===null||!lm(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return Ai(n,arguments,xr(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Gn(i,n)},_o(r)}function Ai(r,t,e){return gd()?Ai=Reflect.construct:Ai=function(i,a,o){var s=[null];s.push.apply(s,a);var l=Function.bind.apply(i,s),u=new l;return o&&Gn(u,o.prototype),u},Ai.apply(null,arguments)}function gd(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lm(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Gn(r,t){return Gn=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Gn(r,t)}function xr(r){return xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xr(r)}function fe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ql(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function de(r,t,e){return t&&Ql(r.prototype,t),e&&Ql(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function er(r){return er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(r)}Object.defineProperty(Me,"__esModule",{value:!0});var um=im;function cm(r){return r&&er(r)==="object"&&"default"in r?r:{default:r}}var Xl=cm(um);function yd(r,t,e){for(var n=0;;n++){if(n==r.childCount||n==t.childCount)return r.childCount==t.childCount?null:e;var i=r.child(n),a=t.child(n);if(i==a){e+=i.nodeSize;continue}if(!i.sameMarkup(a))return e;if(i.isText&&i.text!=a.text){for(var o=0;i.text[o]==a.text[o];o++)e++;return e}if(i.content.size||a.content.size){var s=yd(i.content,a.content,e+1);if(s!=null)return s}e+=i.nodeSize}}function bd(r,t,e,n){for(var i=r.childCount,a=t.childCount;;){if(i==0||a==0)return i==a?null:{a:e,b:n};var o=r.child(--i),s=t.child(--a),l=o.nodeSize;if(o==s){e-=l,n-=l;continue}if(!o.sameMarkup(s))return{a:e,b:n};if(o.isText&&o.text!=s.text){for(var u=0,c=Math.min(o.text.length,s.text.length);u<c&&o.text[o.text.length-u-1]==s.text[s.text.length-u-1];)u++,e--,n--;return{a:e,b:n}}if(o.content.size||s.content.size){var f=bd(o.content,s.content,e-1,n-1);if(f)return f}e-=l,n-=l}}var oe=function(){function r(t,e){if(fe(this,r),this.content=t,this.size=e||0,e==null)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize}return de(r,[{key:"nodesBetween",value:function(e,n,i){for(var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,s=0,l=0;l<n;s++){var u=this.content[s],c=l+u.nodeSize;if(c>e&&i(u,a+l,o||null,s)!==!1&&u.content.size){var f=l+1;u.nodesBetween(Math.max(0,e-f),Math.min(u.content.size,n-f),i,a+f)}l=c}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,n,i,a){var o="",s=!0;return this.nodesBetween(e,n,function(l,u){l.isText?(o+=l.text.slice(Math.max(e,u)-u,n-u),s=!i):l.isLeaf?(a?o+=typeof a=="function"?a(l):a:l.type.spec.leafText&&(o+=l.type.spec.leafText(l)),s=!i):!s&&l.isBlock&&(o+=i,s=!0)},0),o}},{key:"append",value:function(e){if(!e.size)return this;if(!this.size)return e;var n=this.lastChild,i=e.firstChild,a=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(i)&&(a[a.length-1]=n.withText(n.text+i.text),o=1);o<e.content.length;o++)a.push(e.content[o]);return new r(a,this.size+e.size)}},{key:"cut",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.size;if(e==0&&n==this.size)return this;var i=[],a=0;if(n>e)for(var o=0,s=0;s<n;o++){var l=this.content[o],u=s+l.nodeSize;u>e&&((s<e||u>n)&&(l.isText?l=l.cut(Math.max(0,e-s),Math.min(l.text.length,n-s)):l=l.cut(Math.max(0,e-s-1),Math.min(l.content.size,n-s-1))),i.push(l),a+=l.nodeSize),s=u}return new r(i,a)}},{key:"cutByIndex",value:function(e,n){return e==n?r.empty:e==0&&n==this.content.length?this:new r(this.content.slice(e,n))}},{key:"replaceChild",value:function(e,n){var i=this.content[e];if(i==n)return this;var a=this.content.slice(),o=this.size+n.nodeSize-i.nodeSize;return a[e]=n,new r(a,o)}},{key:"addToStart",value:function(e){return new r([e].concat(this.content),this.size+e.nodeSize)}},{key:"addToEnd",value:function(e){return new r(this.content.concat(e),this.size+e.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(e){var n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}},{key:"maybeChild",value:function(e){return this.content[e]||null}},{key:"forEach",value:function(e){for(var n=0,i=0;n<this.content.length;n++){var a=this.content[n];e(a,i,n),i+=a.nodeSize}}},{key:"findDiffStart",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return yd(this,e,n)}},{key:"findDiffEnd",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.size,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.size;return bd(this,e,n,i)}},{key:"findIndex",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1;if(e==0)return gi(0,e);if(e==this.size)return gi(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var i=0,a=0;;i++){var o=this.child(i),s=a+o.nodeSize;if(s>=e)return s==e||n>0?gi(i+1,s):gi(i,a);a=s}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map(function(e){return e.toJSON()}):null}}],[{key:"fromJSON",value:function(e,n){if(!n)return r.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new r(n.map(e.nodeFromJSON))}},{key:"fromArray",value:function(e){if(!e.length)return r.empty;for(var n,i=0,a=0;a<e.length;a++){var o=e[a];i+=o.nodeSize,a&&o.isText&&e[a-1].sameMarkup(o)?(n||(n=e.slice(0,a)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new r(n||e,i)}},{key:"from",value:function(e){if(!e)return r.empty;if(e instanceof r)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new r([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),r}();oe.empty=new oe([],0);var Qa={index:0,offset:0};function gi(r,t){return Qa.index=r,Qa.offset=t,Qa}function zi(r,t){if(r===t)return!0;if(!(r&&er(r)=="object")||!(t&&er(t)=="object"))return!1;var e=Array.isArray(r);if(Array.isArray(t)!=e)return!1;if(e){if(r.length!=t.length)return!1;for(var n=0;n<r.length;n++)if(!zi(r[n],t[n]))return!1}else{for(var i in r)if(!(i in t)||!zi(r[i],t[i]))return!1;for(var a in t)if(!(a in r))return!1}return!0}var W=function(){function r(t,e){fe(this,r),this.type=t,this.attrs=e}return de(r,[{key:"addToSet",value:function(e){for(var n,i=!1,a=0;a<e.length;a++){var o=e[a];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,a));else{if(o.type.excludes(this.type))return e;!i&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,a)),n.push(this),i=!0),n&&n.push(o)}}return n||(n=e.slice()),i||n.push(this),n}},{key:"removeFromSet",value:function(e){for(var n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}},{key:"isInSet",value:function(e){for(var n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&zi(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var n in this.attrs){e.attrs=this.attrs;break}return e}}],[{key:"fromJSON",value:function(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");var i=e.marks[n.type];if(!i)throw new RangeError("There is no mark type ".concat(n.type," in this schema"));return i.create(n.attrs)}},{key:"sameSet",value:function(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].eq(n[i]))return!1;return!0}},{key:"setFrom",value:function(e){if(!e||Array.isArray(e)&&e.length==0)return r.none;if(e instanceof r)return[e];var n=e.slice();return n.sort(function(i,a){return i.type.rank-a.type.rank}),n}}]),r}();W.none=[];var Jn=function(r){vd(e,r);var t=md(e);function e(){return fe(this,e),t.apply(this,arguments)}return de(e)}(_o(Error)),sn=function(){function r(t,e,n){fe(this,r),this.content=t,this.openStart=e,this.openEnd=n}return de(r,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(e,n){var i=wd(this.content,e+this.openStart,n);return i&&new r(i,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(e,n){return new r(kd(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}}],[{key:"fromJSON",value:function(e,n){if(!n)return r.empty;var i=n.openStart||0,a=n.openEnd||0;if(typeof i!="number"||typeof a!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new r(oe.fromJSON(e,n.content),i,a)}},{key:"maxOpen",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=0,a=0,o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)i++;for(var s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)a++;return new r(e,i,a)}}]),r}();sn.empty=new sn(oe.empty,0,0);function kd(r,t,e){var n=r.findIndex(t),i=n.index,a=n.offset,o=r.maybeChild(i),s=r.findIndex(e),l=s.index,u=s.offset;if(a==t||o.isText){if(u!=e&&!r.child(l).isText)throw new RangeError("Removing non-flat range");return r.cut(0,t).append(r.cut(e))}if(i!=l)throw new RangeError("Removing non-flat range");return r.replaceChild(i,o.copy(kd(o.content,t-a-1,e-a-1)))}function wd(r,t,e,n){var i=r.findIndex(t),a=i.index,o=i.offset,s=r.maybeChild(a);if(o==t||s.isText)return n&&!n.canReplace(a,a,e)?null:r.cut(0,t).append(e).append(r.cut(t));var l=wd(s.content,t-o-1,e);return l&&r.replaceChild(a,s.copy(l))}function fm(r,t,e){if(e.openStart>r.depth)throw new Jn("Inserted content deeper than insertion position");if(r.depth-e.openStart!=t.depth-e.openEnd)throw new Jn("Inconsistent open depths");return Cd(r,t,e,0)}function Cd(r,t,e,n){var i=r.index(n),a=r.node(n);if(i==t.index(n)&&n<r.depth-e.openStart){var o=Cd(r,t,e,n+1);return a.copy(a.content.replaceChild(i,o))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&r.depth==n&&t.depth==n){var s=r.parent,l=s.content;return mr(s,l.cut(0,r.parentOffset).append(e.content).append(l.cut(t.parentOffset)))}else{var u=dm(e,r),c=u.start,f=u.end;return mr(a,xd(r,c,f,t,n))}else return mr(a,Vi(r,t,n))}function Td(r,t){if(!t.type.compatibleContent(r.type))throw new Jn("Cannot join "+t.type.name+" onto "+r.type.name)}function $o(r,t,e){var n=r.node(e);return Td(n,t.node(e)),n}function vr(r,t){var e=t.length-1;e>=0&&r.isText&&r.sameMarkup(t[e])?t[e]=r.withText(t[e].text+r.text):t.push(r)}function _n(r,t,e,n){var i=(t||r).node(e),a=0,o=t?t.index(e):i.childCount;r&&(a=r.index(e),r.depth>e?a++:r.textOffset&&(vr(r.nodeAfter,n),a++));for(var s=a;s<o;s++)vr(i.child(s),n);t&&t.depth==e&&t.textOffset&&vr(t.nodeBefore,n)}function mr(r,t){if(!r.type.validContent(t))throw new Jn("Invalid content for node "+r.type.name);return r.copy(t)}function xd(r,t,e,n,i){var a=r.depth>i&&$o(r,t,i+1),o=n.depth>i&&$o(e,n,i+1),s=[];return _n(null,r,i,s),a&&o&&t.index(i)==e.index(i)?(Td(a,o),vr(mr(a,xd(r,t,e,n,i+1)),s)):(a&&vr(mr(a,Vi(r,t,i+1)),s),_n(t,e,i,s),o&&vr(mr(o,Vi(e,n,i+1)),s)),_n(n,null,i,s),new oe(s)}function Vi(r,t,e){var n=[];if(_n(null,r,e,n),r.depth>e){var i=$o(r,t,e+1);vr(mr(i,Vi(r,t,e+1)),n)}return _n(t,null,e,n),new oe(n)}function dm(r,t){for(var e=t.depth-r.openStart,n=t.node(e),i=n.copy(r.content),a=e-1;a>=0;a--)i=t.node(a).copy(oe.from(i));return{start:i.resolveNoCache(r.openStart+e),end:i.resolveNoCache(i.content.size-r.openEnd-e)}}var zo=function(){function r(t,e,n){fe(this,r),this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}return de(r,[{key:"resolveDepth",value:function(e){return e==null?this.depth:e<0?this.depth+e:e}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(e){return this.path[this.resolveDepth(e)*3]}},{key:"index",value:function(e){return this.path[this.resolveDepth(e)*3+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}},{key:"start",value:function(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}},{key:"after",value:function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;var i=this.pos-this.path[this.path.length-1],a=e.child(n);return i?e.child(n).cut(i):a}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}},{key:"posAtIndex",value:function(e,n){n=this.resolveDepth(n);for(var i=this.path[n*3],a=n==0?0:this.path[n*3-1]+1,o=0;o<e;o++)a+=i.child(o).nodeSize;return a}},{key:"marks",value:function(){var e=this.parent,n=this.index();if(e.content.size==0)return W.none;if(this.textOffset)return e.child(n).marks;var i=e.maybeChild(n-1),a=e.maybeChild(n);if(!i){var o=i;i=a,a=o}for(var s=i.marks,l=0;l<s.length;l++)s[l].type.spec.inclusive===!1&&(!a||!s[l].isInSet(a.marks))&&(s=s[l--].removeFromSet(s));return s}},{key:"marksAcross",value:function(e){var n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;for(var i=n.marks,a=e.parent.maybeChild(e.index()),o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!a||!i[o].isInSet(a.marks))&&(i=i[o--].removeFromSet(i));return i}},{key:"sharedDepth",value:function(e){for(var n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this,n=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new Sd(this,e,i);return null}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}}],[{key:"resolve",value:function(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");for(var i=[],a=0,o=n,s=e;;){var l=s.content.findIndex(o),u=l.index,c=l.offset,f=o-c;if(i.push(s,u,a+c),!f||(s=s.child(u),s.isText))break;o=f-1,a+=c+1}return new r(n,i,o)}},{key:"resolveCached",value:function(e,n){for(var i=0;i<Xa.length;i++){var a=Xa[i];if(a.pos==n&&a.doc==e)return a}var o=Xa[Ya]=r.resolve(e,n);return Ya=(Ya+1)%hm,o}}]),r}(),Xa=[],Ya=0,hm=12,Sd=function(){function r(t,e,n){fe(this,r),this.$from=t,this.$to=e,this.depth=n}return de(r,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),r}(),pm=Object.create(null),gr=function(){function r(t,e,n){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:W.none;fe(this,r),this.type=t,this.attrs=e,this.marks=i,this.content=n||oe.empty}return de(r,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;this.content.nodesBetween(e,n,i,a,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(e,n,i,a){return this.content.textBetween(e,n,i,a)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,n,i){return this.type==e&&zi(this.attrs,n||e.defaultAttrs||pm)&&W.sameSet(this.marks,i||W.none)}},{key:"copy",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return e==this.content?this:new r(this.type,this.attrs,e,this.marks)}},{key:"mark",value:function(e){return e==this.marks?this:new r(this.type,this.attrs,this.content,e)}},{key:"cut",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.content.size;return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}},{key:"slice",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.content.size,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e==n)return sn.empty;var a=this.resolve(e),o=this.resolve(n),s=i?0:a.sharedDepth(n),l=a.start(s),u=a.node(s),c=u.content.cut(a.pos-l,o.pos-l);return new sn(c,a.depth-s,o.depth-s)}},{key:"replace",value:function(e,n,i){return fm(this.resolve(e),this.resolve(n),i)}},{key:"nodeAt",value:function(e){for(var n=this;;){var i=n.content.findIndex(e),a=i.index,o=i.offset;if(n=n.maybeChild(a),!n)return null;if(o==e||n.isText)return n;e-=o+1}}},{key:"childAfter",value:function(e){var n=this.content.findIndex(e),i=n.index,a=n.offset;return{node:this.content.maybeChild(i),index:i,offset:a}}},{key:"childBefore",value:function(e){if(e==0)return{node:null,index:0,offset:0};var n=this.content.findIndex(e),i=n.index,a=n.offset;if(a<e)return{node:this.content.child(i),index:i,offset:a};var o=this.content.child(i-1);return{node:o,index:i-1,offset:a-o.nodeSize}}},{key:"resolve",value:function(e){return zo.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return zo.resolve(this,e)}},{key:"rangeHasMark",value:function(e,n,i){var a=!1;return n>e&&this.nodesBetween(e,n,function(o){return i.isInSet(o.marks)&&(a=!0),!a}),a}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ed(this.marks,e)}},{key:"contentMatchAt",value:function(e){var n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}},{key:"canReplace",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oe.empty,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:i.childCount,s=this.contentMatchAt(e).matchFragment(i,a,o),l=s&&s.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(var u=a;u<o;u++)if(!this.type.allowsMarks(i.child(u).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,n,i,a){if(a&&!this.type.allowsMarks(a))return!1;var o=this.contentMatchAt(e).matchType(i),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node ".concat(this.type.name,": ").concat(this.content.toString().slice(0,50)));for(var e=W.none,n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!W.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map(function(i){return i.type.name})));this.content.forEach(function(i){return i.check()})}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(function(i){return i.toJSON()})),e}}],[{key:"fromJSON",value:function(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");var i=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}var a=oe.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,a,i)}}]),r}();gr.prototype.text=void 0;var vm=function(r){vd(e,r);var t=md(e);function e(n,i,a,o){var s;if(fe(this,e),s=t.call(this,n,i,null,o),!a)throw new RangeError("Empty text nodes are not allowed");return s.text=a,s}return de(e,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ed(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(i,a){return this.text.slice(i,a)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(i){return i==this.marks?this:new e(this.type,this.attrs,this.text,i)}},{key:"withText",value:function(i){return i==this.text?this:new e(this.type,this.attrs,i,this.marks)}},{key:"cut",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.text.length;return i==0&&a==this.text.length?this:this.withText(this.text.slice(i,a))}},{key:"eq",value:function(i){return this.sameMarkup(i)&&this.text==i.text}},{key:"toJSON",value:function(){var i=Li(xr(e.prototype),"toJSON",this).call(this);return i.text=this.text,i}}]),e}(gr);function Ed(r,t){for(var e=r.length-1;e>=0;e--)t=r[e].type.name+"("+t+")";return t}var ln=function(){function r(t){fe(this,r),this.validEnd=t,this.next=[],this.wrapCache=[]}return de(r,[{key:"matchType",value:function(e){for(var n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}},{key:"matchFragment",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.childCount,a=this,o=n;a&&o<i;o++)a=a.matchType(e.child(o).type);return a}},{key:"inlineContent",get:function(){return this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e++){var n=this.next[e].type;if(!(n.isText||n.hasRequiredAttrs()))return n}return null}},{key:"compatible",value:function(e){for(var n=0;n<this.next.length;n++)for(var i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}},{key:"fillBefore",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=[this];function o(s,l){var u=s.matchFragment(e,i);if(u&&(!n||u.validEnd))return oe.from(l.map(function(v){return v.createAndFill()}));for(var c=0;c<s.next.length;c++){var f=s.next[c],d=f.type,h=f.next;if(!(d.isText||d.hasRequiredAttrs())&&a.indexOf(h)==-1){a.push(h);var p=o(h,l.concat(d));if(p)return p}}return null}return o(this,[])}},{key:"findWrapping",value:function(e){for(var n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];var i=this.computeWrapping(e);return this.wrapCache.push(e,i),i}},{key:"computeWrapping",value:function(e){for(var n=Object.create(null),i=[{match:this,type:null,via:null}];i.length;){var a=i.shift(),o=a.match;if(o.matchType(e)){for(var s=[],l=a;l.type;l=l.via)s.push(l.type);return s.reverse()}for(var u=0;u<o.next.length;u++){var c=o.next[u],f=c.type,d=c.next;!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in n)&&(!a.type||d.validEnd)&&(i.push({match:f.contentMatch,type:f,via:a}),n[f.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}},{key:"toString",value:function(){var e=[];function n(i){e.push(i);for(var a=0;a<i.next.length;a++)e.indexOf(i.next[a].next)==-1&&n(i.next[a].next)}return n(this),e.map(function(i,a){for(var o=a+(i.validEnd?"*":" ")+" ",s=0;s<i.next.length;s++)o+=(s?", ":"")+i.next[s].type.name+"->"+e.indexOf(i.next[s].next);return o}).join(`
`)}}],[{key:"parse",value:function(e,n){var i=new mm(e,n);if(i.next==null)return r.empty;var a=Md(i);i.next&&i.err("Unexpected trailing text");var o=Tm(Cm(a));return xm(o,i),o}}]),r}();ln.empty=new ln(!0);var mm=function(){function r(t,e){fe(this,r),this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}return de(r,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}]),r}();function Md(r){var t=[];do t.push(gm(r));while(r.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function gm(r){var t=[];do t.push(ym(r));while(r.next&&r.next!=")"&&r.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function ym(r){for(var t=wm(r);;)if(r.eat("+"))t={type:"plus",expr:t};else if(r.eat("*"))t={type:"star",expr:t};else if(r.eat("?"))t={type:"opt",expr:t};else if(r.eat("{"))t=bm(r,t);else break;return t}function Yl(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");var t=Number(r.next);return r.pos++,t}function bm(r,t){var e=Yl(r),n=e;return r.eat(",")&&(r.next!="}"?n=Yl(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:e,max:n,expr:t}}function km(r,t){var e=r.nodeTypes,n=e[t];if(n)return[n];var i=[];for(var a in e){var o=e[a];o.groups.indexOf(t)>-1&&i.push(o)}return i.length==0&&r.err("No node type or group '"+t+"' found"),i}function wm(r){if(r.eat("(")){var t=Md(r);return r.eat(")")||r.err("Missing closing paren"),t}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{var e=km(r,r.next).map(function(n){return r.inline==null?r.inline=n.isInline:r.inline!=n.isInline&&r.err("Mixing inline and block content"),{type:"name",value:n}});return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Cm(r){var t=[[]];return i(a(r,0),e()),t;function e(){return t.push([])-1}function n(o,s,l){var u={term:l,to:s};return t[o].push(u),u}function i(o,s){o.forEach(function(l){return l.to=s})}function a(o,s){if(o.type=="choice")return o.exprs.reduce(function(g,k){return g.concat(a(k,s))},[]);if(o.type=="seq")for(var l=0;;l++){var u=a(o.exprs[l],s);if(l==o.exprs.length-1)return u;i(u,s=e())}else if(o.type=="star"){var c=e();return n(s,c),i(a(o.expr,c),c),[n(c)]}else if(o.type=="plus"){var f=e();return i(a(o.expr,s),f),i(a(o.expr,f),f),[n(f)]}else{if(o.type=="opt")return[n(s)].concat(a(o.expr,s));if(o.type=="range"){for(var d=s,h=0;h<o.min;h++){var p=e();i(a(o.expr,d),p),d=p}if(o.max==-1)i(a(o.expr,d),d);else for(var v=o.min;v<o.max;v++){var m=e();n(d,m),i(a(o.expr,d),m),d=m}return[n(d)]}else{if(o.type=="name")return[n(s,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Od(r,t){return t-r}function Zl(r,t){var e=[];return n(t),e.sort(Od);function n(i){var a=r[i];if(a.length==1&&!a[0].term)return n(a[0].to);e.push(i);for(var o=0;o<a.length;o++){var s=a[o],l=s.term,u=s.to;!l&&e.indexOf(u)==-1&&n(u)}}}function Tm(r){var t=Object.create(null);return e(Zl(r,0));function e(n){var i=[];n.forEach(function(l){r[l].forEach(function(u){var c=u.term,f=u.to;if(!!c){for(var d,h=0;h<i.length;h++)i[h][0]==c&&(d=i[h][1]);Zl(r,f).forEach(function(p){d||i.push([c,d=[]]),d.indexOf(p)==-1&&d.push(p)})}})});for(var a=t[n.join(",")]=new ln(n.indexOf(r.length-1)>-1),o=0;o<i.length;o++){var s=i[o][1].sort(Od);a.next.push({type:i[o][0],next:t[s.join(",")]||e(s)})}return a}}function xm(r,t){for(var e=0,n=[r];e<n.length;e++){for(var i=n[e],a=!i.validEnd,o=[],s=0;s<i.next.length;s++){var l=i.next[s],u=l.type,c=l.next;o.push(u.name),a&&!(u.isText||u.hasRequiredAttrs())&&(a=!1),n.indexOf(c)==-1&&n.push(c)}a&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Nd(r){var t=Object.create(null);for(var e in r){var n=r[e];if(!n.hasDefault)return null;t[e]=n.default}return t}function Dd(r,t){var e=Object.create(null);for(var n in r){var i=t&&t[n];if(i===void 0){var a=r[n];if(a.hasDefault)i=a.default;else throw new RangeError("No value supplied for attribute "+n)}e[n]=i}return e}function Ld(r){var t=Object.create(null);if(r)for(var e in r)t[e]=new Sm(r[e]);return t}var Vo=function(){function r(t,e,n){fe(this,r),this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Ld(n.attrs),this.defaultAttrs=Nd(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||t=="text"),this.isText=t=="text"}return de(r,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==ln.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:Dd(this.attrs,e)}},{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new gr(this,this.computeAttrs(e),oe.from(n),W.setFrom(i))}},{key:"createChecked",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(n=oe.from(n),!this.validContent(n))throw new RangeError("Invalid content for node "+this.name);return new gr(this,this.computeAttrs(e),n,W.setFrom(i))}},{key:"createAndFill",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),n=oe.from(n),n.size){var a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}var o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(oe.empty,!0);return s?new gr(this,e,n.append(s),W.setFrom(i)):null}},{key:"validContent",value:function(e){var n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(var i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}},{key:"allowsMarkType",value:function(e){return this.markSet==null||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(this.markSet==null)return!0;for(var n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(this.markSet==null)return e;for(var n,i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:W.none:e}}],[{key:"compile",value:function(e,n){var i=Object.create(null);e.forEach(function(s,l){return i[s]=new r(s,n,l)});var a=n.spec.topNode||"doc";if(!i[a])throw new RangeError("Schema is missing its top node type ('"+a+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(var o in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}]),r}(),Sm=function(){function r(t){fe(this,r),this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}return de(r,[{key:"isRequired",get:function(){return!this.hasDefault}}]),r}(),Ad=function(){function r(t,e,n,i){fe(this,r),this.name=t,this.rank=e,this.schema=n,this.spec=i,this.attrs=Ld(i.attrs),this.excluded=null;var a=Nd(this.attrs);this.instance=a?new W(this,a):null}return de(r,[{key:"create",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return!e&&this.instance?this.instance:new W(this,Dd(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}},{key:"isInSet",value:function(e){for(var n=0;n<e.length;n++)if(e[n].type==this)return e[n]}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(e,n){var i=Object.create(null),a=0;return e.forEach(function(o,s){return i[o]=new r(o,a++,n,s)}),i}}]),r}(),Em=function(){function r(t){fe(this,r),this.cached=Object.create(null),this.spec={nodes:Xl.default.from(t.nodes),marks:Xl.default.from(t.marks||{}),topNode:t.topNode},this.nodes=Vo.compile(this.spec.nodes,this),this.marks=Ad.compile(this.spec.marks,this);var e=Object.create(null);for(var n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");var i=this.nodes[n],a=i.spec.content||"",o=i.spec.marks;i.contentMatch=e[a]||(e[a]=ln.parse(a,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet=o=="_"?null:o?eu(this,o.split(" ")):o==""||!i.inlineContent?[]:null}for(var s in this.marks){var l=this.marks[s],u=l.spec.excludes;l.excluded=u==null?[l]:u==""?[]:eu(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}return de(r,[{key:"node",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Vo){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,i,a)}},{key:"text",value:function(e,n){var i=this.nodes.text;return new vm(i,i.defaultAttrs,e,W.setFrom(n))}},{key:"mark",value:function(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}},{key:"nodeFromJSON",value:function(e){return gr.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return W.fromJSON(this,e)}},{key:"nodeType",value:function(e){var n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}]),r}();function eu(r,t){for(var e=[],n=0;n<t.length;n++){var i=t[n],a=r.marks[i],o=a;if(a)e.push(a);else for(var s in r.marks){var l=r.marks[s];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&e.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return e}var Mm=function(){function r(t,e){var n=this;fe(this,r),this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(i){i.tag?n.tags.push(i):i.style&&n.styles.push(i)}),this.normalizeLists=!this.tags.some(function(i){if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;var a=t.nodes[i.node];return a.contentMatch.matchType(a)})}return de(r,[{key:"parse",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new ru(this,n,!1);return i.addAll(e,n.from,n.to),i.finish()}},{key:"parseSlice",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new ru(this,n,!0);return i.addAll(e,n.from,n.to),sn.maxOpen(i.finish())}},{key:"matchTag",value:function(e,n,i){for(var a=i?this.tags.indexOf(i)+1:0;a<this.tags.length;a++){var o=this.tags[a];if(Dm(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){var s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}},{key:"matchStyle",value:function(e,n,i,a){for(var o=a?this.styles.indexOf(a)+1:0;o<this.styles.length;o++){var s=this.styles[o],l=s.style;if(!(l.indexOf(e)!=0||s.context&&!i.matchesContext(s.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(s.getAttrs){var u=s.getAttrs(n);if(u===!1)continue;s.attrs=u||void 0}return s}}}}],[{key:"schemaRules",value:function(e){var n=[];function i(u){for(var c=u.priority==null?50:u.priority,f=0;f<n.length;f++){var d=n[f],h=d.priority==null?50:d.priority;if(h<c)break}n.splice(f,0,u)}var a=function(c){var f=e.marks[c].spec.parseDOM;f&&f.forEach(function(d){i(d=nu(d)),d.mark=c})};for(var o in e.marks)a(o);var s=function(c){var f=e.nodes[c].spec.parseDOM;f&&f.forEach(function(d){i(d=nu(d)),d.node=c})};for(var l in e.nodes)s(l);return n}},{key:"fromSchema",value:function(e){return e.cached.domParser||(e.cached.domParser=new r(e,r.schemaRules(e)))}}]),r}(),Id={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Om={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Rd={ol:!0,ul:!0},Ui=1,Wi=2,$n=4;function tu(r,t,e){return t!=null?(t?Ui:0)|(t==="full"?Wi:0):r&&r.whitespace=="pre"?Ui|Wi:e&~$n}var yi=function(){function r(t,e,n,i,a,o,s){fe(this,r),this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=i,this.solid=a,this.options=s,this.content=[],this.activeMarks=W.none,this.stashMarks=[],this.match=o||(s&$n?null:t.contentMatch)}return de(r,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var n=this.type.contentMatch.fillBefore(oe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{var i=this.type.contentMatch,a;return(a=i.findWrapping(e.type))?(this.match=i,a):null}}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(this.options&Ui)){var n=this.content[this.content.length-1],i;if(n&&n.isText&&(i=/[ \t\r\n\u000c]+$/.exec(n.text))){var a=n;n.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-i[0].length))}}var o=oe.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(oe.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"popFromStashMark",value:function(e){for(var n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}},{key:"applyPending",value:function(e){for(var n=0,i=this.pendingMarks;n<i.length;n++){var a=i[n];(this.type?this.type.allowsMarkType(a.type):Am(a.type,e))&&!a.isInSet(this.activeMarks)&&(this.activeMarks=a.addToSet(this.activeMarks),this.pendingMarks=a.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Id.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}]),r}(),ru=function(){function r(t,e,n){fe(this,r),this.parser=t,this.options=e,this.isOpen=n,this.open=0;var i=e.topNode,a,o=tu(null,e.preserveWhitespace,0)|(n?$n:0);i?a=new yi(i.type,i.attrs,W.none,W.none,!0,e.topMatch||i.type.contentMatch,o):n?a=new yi(null,null,W.none,W.none,!0,null,o):a=new yi(t.schema.topNodeType,null,W.none,W.none,!0,null,o),this.nodes=[a],this.find=e.findPositions,this.needsBlock=!1}return de(r,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(e){if(e.nodeType==3)this.addTextNode(e);else if(e.nodeType==1){var n=e.getAttribute("style"),i=n?this.readStyles(Lm(n)):null,a=this.top;if(i!=null)for(var o=0;o<i.length;o++)this.addPendingMark(i[o]);if(this.addElement(e),i!=null)for(var s=0;s<i.length;s++)this.removePendingMark(i[s],a)}}},{key:"addTextNode",value:function(e){var n=e.nodeValue,i=this.top;if(i.options&Wi||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i.options&Ui)i.options&Wi?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){var a=i.content[i.content.length-1],o=e.previousSibling;(!a||o&&o.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e,n){var i=e.nodeName.toLowerCase(),a;Rd.hasOwnProperty(i)&&this.parser.normalizeLists&&Nm(e);var o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));if(o?o.ignore:Om.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);var s,l=this.top,u=this.needsBlock;if(Id.hasOwnProperty(i))s=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}this.addAll(e),s&&this.sync(l),this.needsBlock=u}else this.addElementByRule(e,o,o.consuming===!1?a:void 0)}},{key:"leafFallback",value:function(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}},{key:"ignoreFallback",value:function(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(e){var n=W.none;e:for(var i=0;i<e.length;i+=2)for(var a=void 0;;){var o=this.parser.matchStyle(e[i],e[i+1],this,a);if(!o)continue e;if(o.ignore)return null;if(n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)a=o;else break}return n}},{key:"addElementByRule",value:function(e,n,i){var a=this,o,s,l;if(n.node)s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):o=this.enter(s,n.attrs||null,n.preserveWhitespace);else{var u=this.parser.schema.marks[n.mark];l=u.create(n.attrs),this.addPendingMark(l)}var c=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(function(d){return a.insertNode(d)});else{var f=e;typeof n.contentElement=="string"?f=e.querySelector(n.contentElement):typeof n.contentElement=="function"?f=n.contentElement(e):n.contentElement&&(f=n.contentElement),this.findAround(e,f,!0),this.addAll(f)}o&&this.sync(c)&&this.open--,l&&this.removePendingMark(l,c)}},{key:"addAll",value:function(e,n,i){for(var a=n||0,o=n?e.childNodes[n]:e.firstChild,s=i==null?null:e.childNodes[i];o!=s;o=o.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(o);this.findAtPoint(e,a)}},{key:"findPlace",value:function(e){for(var n,i,a=this.open;a>=0;a--){var o=this.nodes[a],s=o.findWrapping(e);if(s&&(!n||n.length>s.length)&&(n=s,i=o,!s.length)||o.solid)break}if(!n)return!1;this.sync(i);for(var l=0;l<n.length;l++)this.enterInner(n[l],null,!1);return!0}},{key:"insertNode",value:function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();var i=this.top;i.applyPending(e.type),i.match&&(i.match=i.match.matchType(e.type));for(var a=i.activeMarks,o=0;o<e.marks.length;o++)(!i.type||i.type.allowsMarkType(e.marks[o].type))&&(a=e.marks[o].addToSet(a));return i.content.push(e.mark(a)),!0}return!1}},{key:"enter",value:function(e,n,i){var a=this.findPlace(e.create(n));return a&&this.enterInner(e,n,!0,i),a}},{key:"enterInner",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3?arguments[3]:void 0;this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);var s=tu(e,a,o.options);o.options&$n&&o.content.length==0&&(s|=$n),this.nodes.push(new yi(e,n,o.activeMarks,o.pendingMarks,i,null,s)),this.open++}},{key:"closeExtra",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(e){for(var n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,n=this.open;n>=0;n--){for(var i=this.nodes[n].content,a=i.length-1;a>=0;a--)e+=i[a].nodeSize;n&&e++}return e}},{key:"findAtPoint",value:function(e,n){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}},{key:"findAround",value:function(e,n,i){if(e!=n&&this.find){for(var a=0;a<this.find.length;a++)if(this.find[a].pos==null&&e.nodeType==1&&e.contains(this.find[a].node)){var o=n.compareDocumentPosition(this.find[a].node);o&(i?2:4)&&(this.find[a].pos=this.currentPos)}}}},{key:"findInText",value:function(e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}},{key:"matchesContext",value:function(e){var n=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var i=e.split("/"),a=this.options.context,o=!this.isOpen&&(!a||a.parent.type==this.nodes[0].type),s=-(a?a.depth+1:0)+(o?0:1),l=function u(c,f){for(;c>=0;c--){var d=i[c];if(d==""){if(c==i.length-1||c==0)continue;for(;f>=s;f--)if(u(c-1,f))return!0;return!1}else{var h=f>0||f==0&&o?n.nodes[f].type:a&&f>=s?a.node(f-s).type:null;if(!h||h.name!=d&&h.groups.indexOf(d)==-1)return!1;f--}}return!0};return l(i.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var n=e.depth;n>=0;n--){var i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(var a in this.parser.schema.nodes){var o=this.parser.schema.nodes[a];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"addPendingMark",value:function(e){var n=Im(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(e,n){for(var i=this.open;i>=0;i--){var a=this.nodes[i],o=a.pendingMarks.lastIndexOf(e);if(o>-1)a.pendingMarks=e.removeFromSet(a.pendingMarks);else{a.activeMarks=e.removeFromSet(a.activeMarks);var s=a.popFromStashMark(e);s&&a.type&&a.type.allowsMarkType(s.type)&&(a.activeMarks=s.addToSet(a.activeMarks))}if(a==n)break}}}]),r}();function Nm(r){for(var t=r.firstChild,e=null;t;t=t.nextSibling){var n=t.nodeType==1?t.nodeName.toLowerCase():null;n&&Rd.hasOwnProperty(n)&&e?(e.appendChild(t),t=e):n=="li"?e=t:n&&(e=null)}}function Dm(r,t){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,t)}function Lm(r){for(var t=/\s*([\w-]+)\s*:\s*([^;]+)/g,e,n=[];e=t.exec(r);)n.push(e[1],e[2].trim());return n}function nu(r){var t={};for(var e in r)t[e]=r[e];return t}function Am(r,t){var e=t.schema.nodes,n=function(s){var l=e[s];if(!l.allowsMarkType(r))return"continue";var u=[],c=function f(d){u.push(d);for(var h=0;h<d.edgeCount;h++){var p=d.edge(h),v=p.type,m=p.next;if(v==t||u.indexOf(m)<0&&f(m))return!0}};if(c(l.contentMatch))return{v:!0}};for(var i in e){var a=n(i);if(a!=="continue"&&er(a)==="object")return a.v}}function Im(r,t){for(var e=0;e<t.length;e++)if(r.eq(t[e]))return t[e]}var Rm=function(){function r(t,e){fe(this,r),this.nodes=t,this.marks=e}return de(r,[{key:"serializeFragment",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;a||(a=Za(i).createDocumentFragment());var o=a,s=[];return e.forEach(function(l){if(s.length||l.marks.length){for(var u=0,c=0;u<s.length&&c<l.marks.length;){var f=l.marks[c];if(!n.marks[f.type.name]){c++;continue}if(!f.eq(s[u][0])||f.type.spec.spanning===!1)break;u++,c++}for(;u<s.length;)o=s.pop()[1];for(;c<l.marks.length;){var d=l.marks[c++],h=n.serializeMark(d,l.isInline,i);h&&(s.push([d,o]),o.appendChild(h.dom),o=h.contentDOM||h.dom)}}o.appendChild(n.serializeNodeInner(l,i))}),a}},{key:"serializeNodeInner",value:function(e,n){var i=r.renderSpec(Za(n),this.nodes[e.type.name](e)),a=i.dom,o=i.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return a}},{key:"serializeNode",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.serializeNodeInner(e,n),a=e.marks.length-1;a>=0;a--){var o=this.serializeMark(e.marks[a],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(i),i=o.dom)}return i}},{key:"serializeMark",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.marks[e.type.name];return a&&r.renderSpec(Za(i),a(e,n))}}],[{key:"renderSpec",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;var a=n[0],o=a.indexOf(" ");o>0&&(i=a.slice(0,o),a=a.slice(o+1));var s,l=i?e.createElementNS(i,a):e.createElement(a),u=n[1],c=1;if(u&&er(u)=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(var f in u)if(u[f]!=null){var d=f.indexOf(" ");d>0?l.setAttributeNS(f.slice(0,d),f.slice(d+1),u[f]):l.setAttribute(f,u[f])}}for(var h=c;h<n.length;h++){var p=n[h];if(p===0){if(h<n.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{var v=r.renderSpec(e,p,i),m=v.dom,g=v.contentDOM;if(l.appendChild(m),g){if(s)throw new RangeError("Multiple content holes");s=g}}}return{dom:l,contentDOM:s}}},{key:"fromSchema",value:function(e){return e.cached.domSerializer||(e.cached.domSerializer=new r(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(e){var n=iu(e.nodes);return n.text||(n.text=function(i){return i.text}),n}},{key:"marksFromSchema",value:function(e){return iu(e.marks)}}]),r}();function iu(r){var t={};for(var e in r){var n=r[e].spec.toDOM;n&&(t[e]=n)}return t}function Za(r){return r.document||window.document}Me.ContentMatch=ln;var Pd=Me.DOMParser=Mm;Me.DOMSerializer=Rm;var L=Me.Fragment=oe,ji=Me.Mark=W,Pm=Me.MarkType=Ad,Bm=Me.Node=gr,Uo=Me.NodeRange=Sd;Me.NodeType=Vo;var Hm=Me.ReplaceError=Jn;Me.ResolvedPos=zo;var Bd=Me.Schema=Em,I=Me.Slice=sn,Rr={},We={};const Hd=65535,Fd=Math.pow(2,16);function Fm(r,t){return r+t*Fd}function au(r){return r&Hd}function qm(r){return(r-(r&Hd))/Fd}const qd=1,_d=2,Ii=4,$d=8;class Gi{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(this.delInfo&$d)>0}get deletedBefore(){return(this.delInfo&(qd|Ii))>0}get deletedAfter(){return(this.delInfo&(_d|Ii))>0}get deletedAcross(){return(this.delInfo&Ii)>0}}class Be{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&Be.empty)return Be.empty}recover(t){let e=0,n=au(t);if(!this.inverted)for(let i=0;i<n;i++)e+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[n*3]+e+qm(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let i=0,a=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?i:0);if(l>t)break;let u=this.ranges[s+a],c=this.ranges[s+o],f=l+u;if(t<=f){let d=u?t==l?-1:t==f?1:e:e,h=l+i+(d<0?0:c);if(n)return h;let p=t==(e<0?l:f)?null:Fm(s/3,t-l),v=t==l?_d:t==f?qd:Ii;return(e<0?t!=l:t!=f)&&(v|=$d),new Gi(h,v,p)}i+=c-u}return n?t+i:new Gi(t+i,0,null)}touches(t,e){let n=0,i=au(e),a=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?n:0);if(l>t)break;let u=this.ranges[s+a],c=l+u;if(t<=c&&s==i*3)return!0;n+=this.ranges[s+o]-u}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,a=0;i<this.ranges.length;i+=3){let o=this.ranges[i],s=o-(this.inverted?a:0),l=o+(this.inverted?0:a),u=this.ranges[i+e],c=this.ranges[i+n];t(s,s+u,l,l+c),a+=c-u}}invert(){return new Be(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Be.empty:new Be(t<0?[0,-t,0]:[0,0,t])}}Be.empty=new Be([]);class yr{constructor(t=[],e,n=0,i=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=i}slice(t=0,e=this.maps.length){return new yr(this.maps,this.mirror,t,e)}copy(){return new yr(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),e!=null&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let i=t.getMirror(e);this.appendMap(t.maps[e],i!=null&&i<e?n+i:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let i=t.getMirror(e);this.appendMap(t.maps[e].invert(),i!=null&&i>e?n-i-1:void 0)}}invert(){let t=new yr;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let i=0;for(let a=this.from;a<this.to;a++){let o=this.maps[a],s=o.mapResult(t,e);if(s.recover!=null){let l=this.getMirror(a);if(l!=null&&l>a&&l<this.to){a=l,t=this.maps[l].recover(s.recover);continue}}i|=s.delInfo,t=s.pos}return n?t:new Gi(t,i,null)}}const eo=Object.create(null);class Pe{getMap(){return Be.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=eo[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in eo)throw new RangeError("Duplicate use of step JSON ID "+t);return eo[t]=e,e.prototype.jsonID=t,e}}class te{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new te(t,null)}static fail(t){return new te(null,t)}static fromReplace(t,e,n,i){try{return te.ok(t.replace(e,n,i))}catch(a){if(a instanceof Hm)return te.fail(a.message);throw a}}}function Is(r,t,e){let n=[];for(let i=0;i<r.childCount;i++){let a=r.child(i);a.content.size&&(a=a.copy(Is(a.content,t,a))),a.isInline&&(a=t(a,e,i)),n.push(a)}return L.fromArray(n)}class Lt extends Pe{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),a=new I(Is(e.content,(o,s)=>!o.isAtom||!s.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),e.openStart,e.openEnd);return te.fromReplace(t,this.from,this.to,a)}invert(){return new rt(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Lt(e.pos,n.pos,this.mark)}merge(t){return t instanceof Lt&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Lt(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Lt(e.from,e.to,t.markFromJSON(e.mark))}}Pe.jsonID("addMark",Lt);class rt extends Pe{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new I(Is(e.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),e.openStart,e.openEnd);return te.fromReplace(t,this.from,this.to,n)}invert(){return new Lt(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new rt(e.pos,n.pos,this.mark)}merge(t){return t instanceof rt&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new rt(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new rt(e.from,e.to,t.markFromJSON(e.mark))}}Pe.jsonID("removeMark",rt);class At extends Pe{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return te.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return te.fromReplace(t,this.pos,this.pos+1,new I(L.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let n=this.mark.addToSet(e.marks);if(n.length==e.marks.length){for(let i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(n))return new At(this.pos,e.marks[i]);return new At(this.pos,this.mark)}}return new Sr(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new At(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new At(e.pos,t.markFromJSON(e.mark))}}Pe.jsonID("addNodeMark",At);class Sr extends Pe{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return te.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return te.fromReplace(t,this.pos,this.pos+1,new I(L.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new At(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Sr(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Sr(e.pos,t.markFromJSON(e.mark))}}Pe.jsonID("removeNodeMark",Sr);class Ne extends Pe{constructor(t,e,n,i=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=i}apply(t){return this.structure&&Wo(t,this.from,this.to)?te.fail("Structure replace would overwrite content"):te.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Be([this.from,this.to-this.from,this.slice.size])}invert(t){return new Ne(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new Ne(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof Ne)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?I.empty:new I(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Ne(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?I.empty:new I(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Ne(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ne(e.from,e.to,I.fromJSON(t,e.slice),!!e.structure)}}Pe.jsonID("replace",Ne);class ce extends Pe{constructor(t,e,n,i,a,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=i,this.slice=a,this.insert=o,this.structure=s}apply(t){if(this.structure&&(Wo(t,this.from,this.gapFrom)||Wo(t,this.gapTo,this.to)))return te.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return te.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?te.fromReplace(t,this.from,this.to,n):te.fail("Content does not fit in gap")}getMap(){return new Be([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new ce(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),a=t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||i<e.pos||a>n.pos?null:new ce(e.pos,n.pos,i,a,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ce(e.from,e.to,e.gapFrom,e.gapTo,I.fromJSON(t,e.slice),e.insert,!!e.structure)}}Pe.jsonID("replaceAround",ce);function Wo(r,t,e){let n=r.resolve(t),i=e-t,a=n.depth;for(;i>0&&a>0&&n.indexAfter(a)==n.node(a).childCount;)a--,i--;if(i>0){let o=n.node(a).maybeChild(n.indexAfter(a));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function _m(r,t,e,n){let i=[],a=[],o,s;r.doc.nodesBetween(t,e,(l,u,c)=>{if(!l.isInline)return;let f=l.marks;if(!n.isInSet(f)&&c.type.allowsMarkType(n.type)){let d=Math.max(u,t),h=Math.min(u+l.nodeSize,e),p=n.addToSet(f);for(let v=0;v<f.length;v++)f[v].isInSet(p)||(o&&o.to==d&&o.mark.eq(f[v])?o.to=h:i.push(o=new rt(d,h,f[v])));s&&s.to==d?s.to=h:a.push(s=new Lt(d,h,n))}}),i.forEach(l=>r.step(l)),a.forEach(l=>r.step(l))}function $m(r,t,e,n){let i=[],a=0;r.doc.nodesBetween(t,e,(o,s)=>{if(!o.isInline)return;a++;let l=null;if(n instanceof Pm){let u=o.marks,c;for(;c=n.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let u=Math.min(s+o.nodeSize,e);for(let c=0;c<l.length;c++){let f=l[c],d;for(let h=0;h<i.length;h++){let p=i[h];p.step==a-1&&f.eq(i[h].style)&&(d=p)}d?(d.to=u,d.step=a):i.push({style:f,from:Math.max(s,t),to:u,step:a})}}}),i.forEach(o=>r.step(new rt(o.from,o.to,o.style)))}function zm(r,t,e,n=e.contentMatch){let i=r.doc.nodeAt(t),a=[],o=t+1;for(let s=0;s<i.childCount;s++){let l=i.child(s),u=o+l.nodeSize,c=n.matchType(l.type);if(!c)a.push(new Ne(o,u,I.empty));else{n=c;for(let f=0;f<l.marks.length;f++)e.allowsMarkType(l.marks[f].type)||r.step(new rt(o,u,l.marks[f]))}o=u}if(!n.validEnd){let s=n.fillBefore(L.empty,!0);r.replace(o,o,new I(s,0,0))}for(let s=a.length-1;s>=0;s--)r.step(a[s])}function Vm(r,t,e){return(t==0||r.canReplace(t,r.childCount))&&(e==r.childCount||r.canReplace(0,e))}function ni(r){let e=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let n=r.depth;;--n){let i=r.$from.node(n),a=r.$from.index(n),o=r.$to.indexAfter(n);if(n<r.depth&&i.canReplace(a,o,e))return n;if(n==0||i.type.spec.isolating||!Vm(i,a,o))break}return null}function Um(r,t,e){let{$from:n,$to:i,depth:a}=t,o=n.before(a+1),s=i.after(a+1),l=o,u=s,c=L.empty,f=0;for(let p=a,v=!1;p>e;p--)v||n.index(p)>0?(v=!0,c=L.from(n.node(p).copy(c)),f++):l--;let d=L.empty,h=0;for(let p=a,v=!1;p>e;p--)v||i.after(p+1)<i.end(p)?(v=!0,d=L.from(i.node(p).copy(d)),h++):u++;r.step(new ce(l,u,o,s,new I(c.append(d),f,h),c.size-f,!0))}function zd(r,t,e=null,n=r){let i=Wm(r,t),a=i&&jm(n,t);return a?i.map(ou).concat({type:t,attrs:e}).concat(a.map(ou)):null}function ou(r){return{type:r,attrs:null}}function Wm(r,t){let{parent:e,startIndex:n,endIndex:i}=r,a=e.contentMatchAt(n).findWrapping(t);if(!a)return null;let o=a.length?a[0]:t;return e.canReplaceWith(n,i,o)?a:null}function jm(r,t){let{parent:e,startIndex:n,endIndex:i}=r,a=e.child(n),o=t.contentMatch.findWrapping(a.type);if(!o)return null;let l=(o.length?o[o.length-1]:t).contentMatch;for(let u=n;l&&u<i;u++)l=l.matchType(e.child(u).type);return!l||!l.validEnd?null:o}function Gm(r,t,e){let n=L.empty;for(let o=e.length-1;o>=0;o--){if(n.size){let s=e[o].type.contentMatch.matchFragment(n);if(!s||!s.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=L.from(e[o].type.create(e[o].attrs,n))}let i=t.start,a=t.end;r.step(new ce(i,a,i,a,new I(n,0,0),e.length,!0))}function Jm(r,t,e,n,i){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=r.steps.length;r.doc.nodesBetween(t,e,(o,s)=>{if(o.isTextblock&&!o.hasMarkup(n,i)&&Km(r.doc,r.mapping.slice(a).map(s),n)){r.clearIncompatible(r.mapping.slice(a).map(s,1),n);let l=r.mapping.slice(a),u=l.map(s,1),c=l.map(s+o.nodeSize,1);return r.step(new ce(u,c,u+1,c-1,new I(L.from(n.create(i,null,o.marks)),0,0),1,!0)),!1}})}function Km(r,t,e){let n=r.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,e)}function Qm(r,t,e,n,i){let a=r.doc.nodeAt(t);if(!a)throw new RangeError("No node at given position");e||(e=a.type);let o=e.create(n,null,i||a.marks);if(a.isLeaf)return r.replaceWith(t,t+a.nodeSize,o);if(!e.validContent(a.content))throw new RangeError("Invalid content for node type "+e.name);r.step(new ce(t,t+a.nodeSize,t+1,t+a.nodeSize-1,new I(L.from(o),0,0),1,!0))}function br(r,t,e=1,n){let i=r.resolve(t),a=i.depth-e,o=n&&n[n.length-1]||i.parent;if(a<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let u=i.depth-1,c=e-2;u>a;u--,c--){let f=i.node(u),d=i.index(u);if(f.type.spec.isolating)return!1;let h=f.content.cutByIndex(d,f.childCount),p=n&&n[c]||f;if(p!=f&&(h=h.replaceChild(0,p.type.create(p.attrs))),!f.canReplace(d+1,f.childCount)||!p.type.validContent(h))return!1}let s=i.indexAfter(a),l=n&&n[0];return i.node(a).canReplaceWith(s,s,l?l.type:i.node(a+1).type)}function Xm(r,t,e=1,n){let i=r.doc.resolve(t),a=L.empty,o=L.empty;for(let s=i.depth,l=i.depth-e,u=e-1;s>l;s--,u--){a=L.from(i.node(s).copy(a));let c=n&&n[u];o=L.from(c?c.type.create(c.attrs,o):i.node(s).copy(o))}r.step(new Ne(t,t,new I(a.append(o),e,e),!0))}function Rs(r,t){let e=r.resolve(t),n=e.index();return Vd(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(n,n+1)}function Vd(r,t){return!!(r&&t&&!r.isLeaf&&r.canAppend(t))}function Ym(r,t,e=-1){let n=r.resolve(t);for(let i=n.depth;;i--){let a,o,s=n.index(i);if(i==n.depth?(a=n.nodeBefore,o=n.nodeAfter):e>0?(a=n.node(i+1),s++,o=n.node(i).maybeChild(s)):(a=n.node(i).maybeChild(s-1),o=n.node(i+1)),a&&!a.isTextblock&&Vd(a,o)&&n.node(i).canReplace(s,s+1))return t;if(i==0)break;t=e<0?n.before(i):n.after(i)}}function Zm(r,t,e){let n=new Ne(t-e,t+e,I.empty,!0);r.step(n)}function Ud(r,t,e){let n=r.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),e))return t;if(n.parentOffset==0)for(let i=n.depth-1;i>=0;i--){let a=n.index(i);if(n.node(i).canReplaceWith(a,a,e))return n.before(i+1);if(a>0)return null}if(n.parentOffset==n.parent.content.size)for(let i=n.depth-1;i>=0;i--){let a=n.indexAfter(i);if(n.node(i).canReplaceWith(a,a,e))return n.after(i+1);if(a<n.node(i).childCount)return null}return null}function eg(r,t,e){let n=r.resolve(t);if(!e.content.size)return t;let i=e.content;for(let a=0;a<e.openStart;a++)i=i.firstChild.content;for(let a=1;a<=(e.openStart==0&&e.size?2:1);a++)for(let o=n.depth;o>=0;o--){let s=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(s>0?1:0),u=n.node(o),c=!1;if(a==1)c=u.canReplace(l,l,i);else{let f=u.contentMatchAt(l).findWrapping(i.firstChild.type);c=f&&u.canReplaceWith(l,l,f[0])}if(c)return s==0?n.pos:s<0?n.before(o+1):n.after(o+1)}return null}function ga(r,t,e=t,n=I.empty){if(t==e&&!n.size)return null;let i=r.resolve(t),a=r.resolve(e);return Wd(i,a,n)?new Ne(t,e,n):new tg(i,a,n).fit()}function Wd(r,t,e){return!e.openStart&&!e.openEnd&&r.start()==t.start()&&r.parent.canReplace(r.index(),t.index(),e.content)}class tg{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=L.empty;for(let i=0;i<=t.depth;i++){let a=t.node(i);this.frontier.push({type:a.type,match:a.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=L.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let a=this.placed,o=n.depth,s=i.depth;for(;o&&s&&a.childCount==1;)a=a.firstChild.content,o--,s--;let l=new I(a,o,s);return t>-1?new ce(n.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||n.pos!=this.$to.pos?new Ne(n.pos,i.pos,l):null}findFittable(){for(let t=1;t<=2;t++)for(let e=this.unplaced.openStart;e>=0;e--){let n,i=null;e?(i=to(this.unplaced.content,e-1).firstChild,n=i.content):n=this.unplaced.content;let a=n.firstChild;for(let o=this.depth;o>=0;o--){let{type:s,match:l}=this.frontier[o],u,c=null;if(t==1&&(a?l.matchType(a.type)||(c=l.fillBefore(L.from(a),!1)):i&&s.compatibleContent(i.type)))return{sliceDepth:e,frontierDepth:o,parent:i,inject:c};if(t==2&&a&&(u=l.findWrapping(a.type)))return{sliceDepth:e,frontierDepth:o,parent:i,wrap:u};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=to(t,e);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new I(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=to(t,e);if(i.childCount<=1&&e>0){let a=t.size-e<=e+i.size;this.unplaced=new I(Pn(t,e-1,1),e-1,a?e-1:n)}else this.unplaced=new I(Pn(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:a}){for(;this.depth>e;)this.closeFrontierNode();if(a)for(let v=0;v<a.length;v++)this.openFrontierNode(a[v]);let o=this.unplaced,s=n?n.content:o.content,l=o.openStart-t,u=0,c=[],{match:f,type:d}=this.frontier[e];if(i){for(let v=0;v<i.childCount;v++)c.push(i.child(v));f=f.matchFragment(i)}let h=s.size+t-(o.content.size-o.openEnd);for(;u<s.childCount;){let v=s.child(u),m=f.matchType(v.type);if(!m)break;u++,(u>1||l==0||v.content.size)&&(f=m,c.push(jd(v.mark(d.allowedMarks(v.marks)),u==1?l:0,u==s.childCount?h:-1)))}let p=u==s.childCount;p||(h=-1),this.placed=Bn(this.placed,e,L.from(c)),this.frontier[e].match=f,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,m=s;v<h;v++){let g=m.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),m=g.content}this.unplaced=p?t==0?I.empty:new I(Pn(o.content,t-1,1),t-1,h<0?o.openEnd:t-1):new I(Pn(o.content,t,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!ro(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:i}=this.frontier[e],a=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=ro(t,e,i,n,a);if(!!o){for(let s=e-1;s>=0;s--){let{match:l,type:u}=this.frontier[s],c=ro(t,s,u,l,!0);if(!c||c.childCount)continue e}return{depth:e,fit:o,move:a?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Bn(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let i=t.node(n),a=i.type.contentMatch.fillBefore(i.content,!0,t.index(n));this.openFrontierNode(i.type,i.attrs,a)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Bn(this.placed,this.depth,L.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(L.empty,!0);e.childCount&&(this.placed=Bn(this.placed,this.frontier.length,e))}}function Pn(r,t,e){return t==0?r.cutByIndex(e,r.childCount):r.replaceChild(0,r.firstChild.copy(Pn(r.firstChild.content,t-1,e)))}function Bn(r,t,e){return t==0?r.append(e):r.replaceChild(r.childCount-1,r.lastChild.copy(Bn(r.lastChild.content,t-1,e)))}function to(r,t){for(let e=0;e<t;e++)r=r.firstChild.content;return r}function jd(r,t,e){if(t<=0)return r;let n=r.content;return t>1&&(n=n.replaceChild(0,jd(n.firstChild,t-1,n.childCount==1?e-1:0))),t>0&&(n=r.type.contentMatch.fillBefore(n).append(n),e<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(L.empty,!0)))),r.copy(n)}function ro(r,t,e,n,i){let a=r.node(t),o=i?r.indexAfter(t):r.index(t);if(o==a.childCount&&!e.compatibleContent(a.type))return null;let s=n.fillBefore(a.content,!0,o);return s&&!rg(e,a.content,o)?s:null}function rg(r,t,e){for(let n=e;n<t.childCount;n++)if(!r.allowsMarks(t.child(n).marks))return!0;return!1}function ng(r){return r.spec.defining||r.spec.definingForContent}function ig(r,t,e,n){if(!n.size)return r.deleteRange(t,e);let i=r.doc.resolve(t),a=r.doc.resolve(e);if(Wd(i,a,n))return r.step(new Ne(t,e,n));let o=Jd(i,r.doc.resolve(e));o[o.length-1]==0&&o.pop();let s=-(i.depth+1);o.unshift(s);for(let d=i.depth,h=i.pos-1;d>0;d--,h--){let p=i.node(d).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;o.indexOf(d)>-1?s=d:i.before(d)==h&&o.splice(1,0,-d)}let l=o.indexOf(s),u=[],c=n.openStart;for(let d=n.content,h=0;;h++){let p=d.firstChild;if(u.push(p),h==n.openStart)break;d=p.content}for(let d=c-1;d>=0;d--){let h=u[d].type,p=ng(h);if(p&&i.node(l).type!=h)c=d;else if(p||!h.isTextblock)break}for(let d=n.openStart;d>=0;d--){let h=(d+c+1)%(n.openStart+1),p=u[h];if(!!p)for(let v=0;v<o.length;v++){let m=o[(v+l)%o.length],g=!0;m<0&&(g=!1,m=-m);let k=i.node(m-1),b=i.index(m-1);if(k.canReplaceWith(b,b,p.type,p.marks))return r.replace(i.before(m),g?a.after(m):e,new I(Gd(n.content,0,n.openStart,h),h,n.openEnd))}}let f=r.steps.length;for(let d=o.length-1;d>=0&&(r.replace(t,e,n),!(r.steps.length>f));d--){let h=o[d];h<0||(t=i.before(h),e=a.after(h))}}function Gd(r,t,e,n,i){if(t<e){let a=r.firstChild;r=r.replaceChild(0,a.copy(Gd(a.content,t+1,e,n,a)))}if(t>n){let a=i.contentMatchAt(0),o=a.fillBefore(r).append(r);r=o.append(a.matchFragment(o).fillBefore(L.empty,!0))}return r}function ag(r,t,e,n){if(!n.isInline&&t==e&&r.doc.resolve(t).parent.content.size){let i=Ud(r.doc,t,n.type);i!=null&&(t=e=i)}r.replaceRange(t,e,new I(L.from(n),0,0))}function og(r,t,e){let n=r.doc.resolve(t),i=r.doc.resolve(e),a=Jd(n,i);for(let o=0;o<a.length;o++){let s=a[o],l=o==a.length-1;if(l&&s==0||n.node(s).type.contentMatch.validEnd)return r.delete(n.start(s),i.end(s));if(s>0&&(l||n.node(s-1).canReplace(n.index(s-1),i.indexAfter(s-1))))return r.delete(n.before(s),i.after(s))}for(let o=1;o<=n.depth&&o<=i.depth;o++)if(t-n.start(o)==n.depth-o&&e>n.end(o)&&i.end(o)-e!=i.depth-o)return r.delete(n.before(o),e);r.delete(t,e)}function Jd(r,t){let e=[],n=Math.min(r.depth,t.depth);for(let i=n;i>=0;i--){let a=r.start(i);if(a<r.pos-(r.depth-i)||t.end(i)>t.pos+(t.depth-i)||r.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(a==t.start(i)||i==r.depth&&i==t.depth&&r.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==a-1)&&e.push(i)}return e}class kr extends Pe{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return te.fail("No node at attribute step's position");let n=Object.create(null);for(let a in e.attrs)n[a]=e.attrs[a];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return te.fromReplace(t,this.pos,this.pos+1,new I(L.from(i),0,e.isLeaf?0:1))}getMap(){return Be.empty}invert(t){return new kr(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new kr(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new kr(e.pos,e.attr,e.value)}}Pe.jsonID("attr",kr);let Er=class extends Error{};Er=function r(t){let e=Error.call(this,t);return e.__proto__=r.prototype,e};Er.prototype=Object.create(Error.prototype);Er.prototype.constructor=Er;Er.prototype.name="TransformError";class sg{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new yr}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new Er(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=I.empty){let i=ga(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new I(L.from(n),0,0))}delete(t,e){return this.replace(t,e,I.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return ig(this,t,e,n),this}replaceRangeWith(t,e,n){return ag(this,t,e,n),this}deleteRange(t,e){return og(this,t,e),this}lift(t,e){return Um(this,t,e),this}join(t,e=1){return Zm(this,t,e),this}wrap(t,e){return Gm(this,t,e),this}setBlockType(t,e=t,n,i=null){return Jm(this,t,e,n,i),this}setNodeMarkup(t,e,n=null,i=[]){return Qm(this,t,e,n,i),this}setNodeAttribute(t,e,n){return this.step(new kr(t,e,n)),this}addNodeMark(t,e){return this.step(new At(t,e)),this}removeNodeMark(t,e){if(!(e instanceof ji)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(e=e.isInSet(n.marks),!e)return this}return this.step(new Sr(t,e)),this}split(t,e=1,n){return Xm(this,t,e,n),this}addMark(t,e,n){return _m(this,t,e,n),this}removeMark(t,e,n){return $m(this,t,e,n),this}clearIncompatible(t,e,n){return zm(this,t,e,n),this}}var lg=Object.freeze(Object.defineProperty({__proto__:null,AddMarkStep:Lt,AddNodeMarkStep:At,AttrStep:kr,MapResult:Gi,Mapping:yr,RemoveMarkStep:rt,RemoveNodeMarkStep:Sr,ReplaceAroundStep:ce,ReplaceStep:Ne,Step:Pe,StepMap:Be,StepResult:te,Transform:sg,get TransformError(){return Er},canJoin:Rs,canSplit:br,dropPoint:eg,findWrapping:zd,insertPoint:Ud,joinPoint:Ym,liftTarget:ni,replaceStep:ga},Symbol.toStringTag,{value:"Module"})),Ps=nm(lg);function Ji(r){return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ji(r)}function nn(){return typeof Reflect!="undefined"&&Reflect.get?nn=Reflect.get:nn=function(t,e,n){var i=ug(t,e);if(!!i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},nn.apply(this,arguments)}function ug(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=tr(r),r!==null););return r}function ya(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&jo(r,t)}function jo(r,t){return jo=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},jo(r,t)}function ba(r){var t=dg();return function(){var n=tr(r),i;if(t){var a=tr(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return cg(this,i)}}function cg(r,t){if(t&&(Ji(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fg(r)}function fg(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function dg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tr(r){return tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tr(r)}function je(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function su(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ge(r,t,e){return t&&su(r.prototype,t),e&&su(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}Object.defineProperty(We,"__esModule",{value:!0});var st=Me,Go=Ps,no=Object.create(null),Y=function(){function r(t,e,n){je(this,r),this.$anchor=t,this.$head=e,this.ranges=n||[new Kd(t.min(e),t.max(e))]}return Ge(r,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:st.Slice.empty,i=n.content.lastChild,a=null,o=0;o<n.openEnd;o++)a=i,i=i.lastChild;for(var s=e.steps.length,l=this.ranges,u=0;u<l.length;u++){var c=l[u],f=c.$from,d=c.$to,h=e.mapping.slice(s);e.replaceRange(h.map(f.pos),h.map(d.pos),u?st.Slice.empty:n),u==0&&cu(e,s,(i?i.isInline:a&&a.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,n){for(var i=e.steps.length,a=this.ranges,o=0;o<a.length;o++){var s=a[o],l=s.$from,u=s.$to,c=e.mapping.slice(i),f=c.map(l.pos),d=c.map(u.pos);o?e.deleteRange(f,d):(e.replaceRangeWith(f,d,n),cu(e,i,n.isInline?-1:1))}}},{key:"getBookmark",value:function(){return un.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=e.parent.inlineContent?new un(e):Qr(e.node(0),e.parent,e.pos,e.index(),n,i);if(a)return a;for(var o=e.depth-1;o>=0;o--){var s=n<0?Qr(e.node(0),e.node(o),e.before(o+1),e.index(o),n,i):Qr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,i);if(s)return s}return null}},{key:"near",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this.findFrom(e,n)||this.findFrom(e,-n)||new an(e.node(0))}},{key:"atStart",value:function(e){return Qr(e,e,0,0,1)||new an(e)}},{key:"atEnd",value:function(e){return Qr(e,e,e.content.size,e.childCount,-1)||new an(e)}},{key:"fromJSON",value:function(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");var i=no[n.type];if(!i)throw new RangeError("No selection type ".concat(n.type," defined"));return i.fromJSON(e,n)}},{key:"jsonID",value:function(e,n){if(e in no)throw new RangeError("Duplicate use of selection JSON ID "+e);return no[e]=n,n.prototype.jsonID=e,n}}]),r}();Y.prototype.visible=!0;var Kd=Ge(function r(t,e){je(this,r),this.$from=t,this.$to=e}),lu=!1;function uu(r){!lu&&!r.parent.inlineContent&&(lu=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}var un=function(r){ya(e,r);var t=ba(e);function e(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return je(this,e),uu(n),uu(i),t.call(this,n,i)}return Ge(e,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(i,a){var o=i.resolve(a.map(this.head));if(!o.parent.inlineContent)return Y.near(o);var s=i.resolve(a.map(this.anchor));return new e(s.parent.inlineContent?s:o,o)}},{key:"replace",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:st.Slice.empty;if(nn(tr(e.prototype),"replace",this).call(this,i,a),a==st.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&i.ensureMarks(o)}}},{key:"eq",value:function(i){return i instanceof e&&i.anchor==this.anchor&&i.head==this.head}},{key:"getBookmark",value:function(){return new Qd(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(i,a){if(typeof a.anchor!="number"||typeof a.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(i.resolve(a.anchor),i.resolve(a.head))}},{key:"create",value:function(i,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,s=i.resolve(a);return new this(s,o==a?s:i.resolve(o))}},{key:"between",value:function(i,a,o){var s=i.pos-a.pos;if((!o||s)&&(o=s>=0?1:-1),!a.parent.inlineContent){var l=Y.findFrom(a,o,!0)||Y.findFrom(a,-o,!0);if(l)a=l.$head;else return Y.near(a,o)}return i.parent.inlineContent||(s==0?i=a:(i=(Y.findFrom(i,-o,!0)||Y.findFrom(i,o,!0)).$anchor,i.pos<a.pos!=s<0&&(i=a))),new e(i,a)}}]),e}(Y);Y.jsonID("text",un);var Qd=function(){function r(t,e){je(this,r),this.anchor=t,this.head=e}return Ge(r,[{key:"map",value:function(e){return new r(e.map(this.anchor),e.map(this.head))}},{key:"resolve",value:function(e){return un.between(e.resolve(this.anchor),e.resolve(this.head))}}]),r}(),Mr=function(r){ya(e,r);var t=ba(e);function e(n){var i;je(this,e);var a=n.nodeAfter,o=n.node(0).resolve(n.pos+a.nodeSize);return i=t.call(this,n,o),i.node=a,i}return Ge(e,[{key:"map",value:function(i,a){var o=a.mapResult(this.anchor),s=o.deleted,l=o.pos,u=i.resolve(l);return s?Y.near(u):new e(u)}},{key:"content",value:function(){return new st.Slice(st.Fragment.from(this.node),0,0)}},{key:"eq",value:function(i){return i instanceof e&&i.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new hg(this.anchor)}}],[{key:"fromJSON",value:function(i,a){if(typeof a.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(i.resolve(a.anchor))}},{key:"create",value:function(i,a){return new e(i.resolve(a))}},{key:"isSelectable",value:function(i){return!i.isText&&i.type.spec.selectable!==!1}}]),e}(Y);Mr.prototype.visible=!1;Y.jsonID("node",Mr);var hg=function(){function r(t){je(this,r),this.anchor=t}return Ge(r,[{key:"map",value:function(e){var n=e.mapResult(this.anchor),i=n.deleted,a=n.pos;return i?new Qd(a,a):new r(a)}},{key:"resolve",value:function(e){var n=e.resolve(this.anchor),i=n.nodeAfter;return i&&Mr.isSelectable(i)?new Mr(n):Y.near(n)}}]),r}(),an=function(r){ya(e,r);var t=ba(e);function e(n){return je(this,e),t.call(this,n.resolve(0),n.resolve(n.content.size))}return Ge(e,[{key:"replace",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:st.Slice.empty;if(a==st.Slice.empty){i.delete(0,i.doc.content.size);var o=Y.atStart(i.doc);o.eq(i.selection)||i.setSelection(o)}else nn(tr(e.prototype),"replace",this).call(this,i,a)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(i){return new e(i)}},{key:"eq",value:function(i){return i instanceof e}},{key:"getBookmark",value:function(){return pg}}],[{key:"fromJSON",value:function(i){return new e(i)}}]),e}(Y);Y.jsonID("all",an);var pg={map:function(){return this},resolve:function(t){return new an(t)}};function Qr(r,t,e,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(t.inlineContent)return un.create(r,e);for(var o=n-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){var s=t.child(o);if(s.isAtom){if(!a&&Mr.isSelectable(s))return Mr.create(r,e-(i<0?s.nodeSize:0))}else{var l=Qr(r,s,e+i,i<0?s.childCount:0,i,a);if(l)return l}e+=s.nodeSize*i}return null}function cu(r,t,e){var n=r.steps.length-1;if(!(n<t)){var i=r.steps[n];if(i instanceof Go.ReplaceStep||i instanceof Go.ReplaceAroundStep){var a=r.mapping.maps[n],o;a.forEach(function(s,l,u,c){o==null&&(o=c)}),r.setSelection(Y.near(r.doc.resolve(o),e))}}}var fu=1,bi=2,du=4,Xd=function(r){ya(e,r);var t=ba(e);function e(n){var i;return je(this,e),i=t.call(this,n.doc),i.curSelectionFor=0,i.updated=0,i.meta=Object.create(null),i.time=Date.now(),i.curSelection=n.selection,i.storedMarks=n.storedMarks,i}return Ge(e,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(i){if(i.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=i,this.curSelectionFor=this.steps.length,this.updated=(this.updated|fu)&~bi,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(this.updated&fu)>0}},{key:"setStoredMarks",value:function(i){return this.storedMarks=i,this.updated|=bi,this}},{key:"ensureMarks",value:function(i){return st.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),i)||this.setStoredMarks(i),this}},{key:"addStoredMark",value:function(i){return this.ensureMarks(i.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(i){return this.ensureMarks(i.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(this.updated&bi)>0}},{key:"addStep",value:function(i,a){nn(tr(e.prototype),"addStep",this).call(this,i,a),this.updated=this.updated&~bi,this.storedMarks=null}},{key:"setTime",value:function(i){return this.time=i,this}},{key:"replaceSelection",value:function(i){return this.selection.replace(this,i),this}},{key:"replaceSelectionWith",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=this.selection;return a&&(i=i.mark(this.storedMarks||(o.empty?o.$from.marks():o.$from.marksAcross(o.$to)||st.Mark.none))),o.replaceWith(this,i),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(i,a,o){var s=this.doc.type.schema;if(a==null)return i?this.replaceSelectionWith(s.text(i),!0):this.deleteSelection();if(o==null&&(o=a),o=o==null?a:o,!i)return this.deleteRange(a,o);var l=this.storedMarks;if(!l){var u=this.doc.resolve(a);l=o==a?u.marks():u.marksAcross(this.doc.resolve(o))}return this.replaceRangeWith(a,o,s.text(i,l)),this.selection.empty||this.setSelection(Y.near(this.selection.$to)),this}},{key:"setMeta",value:function(i,a){return this.meta[typeof i=="string"?i:i.key]=a,this}},{key:"getMeta",value:function(i){return this.meta[typeof i=="string"?i:i.key]}},{key:"isGeneric",get:function(){for(var i in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=du,this}},{key:"scrolledIntoView",get:function(){return(this.updated&du)>0}}]),e}(Go.Transform);function hu(r,t){return!t||!r?r:r.bind(t)}var Hn=Ge(function r(t,e,n){je(this,r),this.name=t,this.init=hu(e.init,n),this.apply=hu(e.apply,n)}),vg=[new Hn("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new Hn("selection",{init:function(t,e){return t.selection||Y.atStart(e.doc)},apply:function(t){return t.selection}}),new Hn("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new Hn("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],io=Ge(function r(t,e){var n=this;je(this,r),this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=vg.slice(),e&&e.forEach(function(i){if(n.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");n.plugins.push(i),n.pluginsByKey[i.key]=i,i.spec.state&&n.fields.push(new Hn(i.key,i.spec.state,i))})}),mg=function(){function r(t){je(this,r),this.config=t}return Ge(r,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=0;i<this.config.plugins.length;i++)if(i!=n){var a=this.config.plugins[i];if(a.spec.filterTransaction&&!a.spec.filterTransaction.call(a,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var n=[e],i=this.applyInner(e),a=null;;){for(var o=!1,s=0;s<this.config.plugins.length;s++){var l=this.config.plugins[s];if(l.spec.appendTransaction){var u=a?a[s].n:0,c=a?a[s].state:this,f=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,c,i);if(f&&i.filterTransaction(f,s)){if(f.setMeta("appendedTransaction",e),!a){a=[];for(var d=0;d<this.config.plugins.length;d++)a.push(d<s?{state:i,n:n.length}:{state:this,n:0})}n.push(f),i=i.applyInner(f),o=!0}a&&(a[s]={state:i,n:n.length})}}if(!o)return{state:i,transactions:n}}}},{key:"applyInner",value:function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new r(this.config),i=this.config.fields,a=0;a<i.length;a++){var o=i[a];n[o.name]=o.apply(e,this[o.name],this,n)}return n}},{key:"tr",get:function(){return new Xd(this)}},{key:"reconfigure",value:function(e){for(var n=new io(this.schema,e.plugins),i=n.fields,a=new r(n),o=0;o<i.length;o++){var s=i[o].name;a[s]=this.hasOwnProperty(s)?this[s]:i[o].init(e,a)}return a}},{key:"toJSON",value:function(e){var n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(function(s){return s.toJSON()})),e&&Ji(e)=="object")for(var i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");var a=e[i],o=a.spec.state;o&&o.toJSON&&(n[i]=o.toJSON.call(a,this[a.key]))}return n}}],[{key:"create",value:function(e){for(var n=new io(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new r(n),a=0;a<n.fields.length;a++)i[n.fields[a].name]=n.fields[a].init(e,i);return i}},{key:"fromJSON",value:function(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var a=new io(e.schema,e.plugins),o=new r(a);return a.fields.forEach(function(s){if(s.name=="doc")o.doc=st.Node.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=Y.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(var l in i){var u=i[l],c=u.spec.state;if(u.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[s.name]=c.fromJSON.call(u,e,n[l],o);return}}o[s.name]=s.init(e,o)}}),o}}]),r}();function Yd(r,t,e){for(var n in r){var i=r[n];i instanceof Function?i=i.bind(t):n=="handleDOMEvents"&&(i=Yd(i,t,{})),e[n]=i}return e}var gg=function(){function r(t){je(this,r),this.spec=t,this.props={},t.props&&Yd(t.props,this,this.props),this.key=t.key?t.key.key:Zd("plugin")}return Ge(r,[{key:"getState",value:function(e){return e[this.key]}}]),r}(),ao=Object.create(null);function Zd(r){return r in ao?r+"$"+ ++ao[r]:(ao[r]=0,r+"$")}var yg=function(){function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"key";je(this,r),this.key=Zd(t)}return Ge(r,[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}]),r}(),ii=We.AllSelection=an,eh=We.EditorState=mg,bt=We.NodeSelection=Mr,Xe=We.Plugin=gg,ai=We.PluginKey=yg,Ct=We.Selection=Y,bg=We.SelectionRange=Kd,_t=We.TextSelection=un;We.Transaction=Xd;function cn(r){return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(r)}function _e(){return typeof Reflect!="undefined"&&Reflect.get?_e=Reflect.get:_e=function(t,e,n){var i=kg(t,e);if(!!i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:n):a.value}},_e.apply(this,arguments)}function kg(r,t){for(;!Object.prototype.hasOwnProperty.call(r,t)&&(r=De(r),r!==null););return r}function Pr(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&Jo(r,t)}function Jo(r,t){return Jo=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Jo(r,t)}function Br(r){var t=Cg();return function(){var n=De(r),i;if(t){var a=De(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return wg(this,i)}}function wg(r,t){if(t&&(cn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return th(r)}function th(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Cg(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function De(r){return De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},De(r)}function Z(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function pu(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function ee(r,t,e){return t&&pu(r.prototype,t),e&&pu(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}Object.defineProperty(Rr,"__esModule",{value:!0});var H=We,j=Me,Tg=Ps,rr=typeof navigator!="undefined"?navigator:null,vu=typeof document!="undefined"?document:null,ar=rr&&rr.userAgent||"",Ko=/Edge\/(\d+)/.exec(ar),rh=/MSIE \d/.exec(ar),Qo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ar),He=!!(rh||Qo||Ko),Xt=rh?document.documentMode:Qo?+Qo[1]:Ko?+Ko[1]:0,lt=!He&&/gecko\/(\d+)/i.test(ar);lt&&+(/Firefox\/(\d+)/.exec(ar)||[0,0])[1];var Xo=!He&&/Chrome\/(\d+)/.exec(ar),Le=!!Xo,xg=Xo?+Xo[1]:0,Fe=!He&&!!rr&&/Apple Computer/.test(rr.vendor),fn=Fe&&(/Mobile\/\w+/.test(ar)||!!rr&&rr.maxTouchPoints>2),Ke=fn||(rr?/Mac/.test(rr.platform):!1),vt=/Android \d/.test(ar),ka=!!vu&&"webkitFontSmoothing"in vu.documentElement.style,Sg=ka?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,$e=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Bs=function(t){var e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e},mu=null,Ot=function(t,e,n){var i=mu||(mu=document.createRange());return i.setEnd(t,n==null?t.nodeValue.length:n),i.setStart(t,e||0),i},Kn=function(t,e,n,i){return n&&(gu(t,e,n,i,-1)||gu(t,e,n,i,1))},Eg=/^(img|br|input|textarea|hr)$/i;function gu(r,t,e,n,i){for(;;){if(r==e&&t==n)return!0;if(t==(i<0?0:mt(r))){var a=r.parentNode;if(!a||a.nodeType!=1||Og(r)||Eg.test(r.nodeName)||r.contentEditable=="false")return!1;t=$e(r)+(i<0?0:1),r=a}else if(r.nodeType==1){if(r=r.childNodes[t+(i<0?-1:0)],r.contentEditable=="false")return!1;t=i<0?mt(r):0}else return!1}}function mt(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Mg(r,t,e){for(var n=t==0,i=t==mt(r);n||i;){if(r==e)return!0;var a=$e(r);if(r=r.parentNode,!r)return!1;n=n&&a==0,i=i&&a==mt(r)}}function Og(r){for(var t,e=r;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==r||t.contentDOM==r)}var wa=function(t){var e=t.isCollapsed;return e&&Le&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function Zr(r,t){var e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=r,e.key=e.code=t,e}function Ng(r){return{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function Wt(r,t){return typeof r=="number"?r:r[t]}function Dg(r){var t=r.getBoundingClientRect(),e=t.width/r.offsetWidth||1,n=t.height/r.offsetHeight||1;return{left:t.left,right:t.left+r.clientWidth*e,top:t.top,bottom:t.top+r.clientHeight*n}}function yu(r,t,e){for(var n=r.someProp("scrollThreshold")||0,i=r.someProp("scrollMargin")||5,a=r.dom.ownerDocument,o=e||r.dom;o;o=Bs(o))if(o.nodeType==1){var s=o,l=s==a.body,u=l?Ng(a):Dg(s),c=0,f=0;if(t.top<u.top+Wt(n,"top")?f=-(u.top-t.top+Wt(i,"top")):t.bottom>u.bottom-Wt(n,"bottom")&&(f=t.bottom-u.bottom+Wt(i,"bottom")),t.left<u.left+Wt(n,"left")?c=-(u.left-t.left+Wt(i,"left")):t.right>u.right-Wt(n,"right")&&(c=t.right-u.right+Wt(i,"right")),c||f)if(l)a.defaultView.scrollBy(c,f);else{var d=s.scrollLeft,h=s.scrollTop;f&&(s.scrollTop+=f),c&&(s.scrollLeft+=c);var p=s.scrollLeft-d,v=s.scrollTop-h;t={left:t.left-p,top:t.top-v,right:t.right-p,bottom:t.bottom-v}}if(l)break}}function Lg(r){for(var t=r.dom.getBoundingClientRect(),e=Math.max(0,t.top),n,i,a=(t.left+t.right)/2,o=e+1;o<Math.min(innerHeight,t.bottom);o+=5){var s=r.root.elementFromPoint(a,o);if(!(!s||s==r.dom||!r.dom.contains(s))){var l=s.getBoundingClientRect();if(l.top>=e-20){n=s,i=l.top;break}}}return{refDOM:n,refTop:i,stack:nh(r.dom)}}function nh(r){for(var t=[],e=r.ownerDocument,n=r;n&&(t.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),r!=e);n=Bs(n));return t}function Ag(r){var t=r.refDOM,e=r.refTop,n=r.stack,i=t?t.getBoundingClientRect().top:0;ih(n,i==0?0:i-e)}function ih(r,t){for(var e=0;e<r.length;e++){var n=r[e],i=n.dom,a=n.top,o=n.left;i.scrollTop!=a+t&&(i.scrollTop=a+t),i.scrollLeft!=o&&(i.scrollLeft=o)}}var jr=null;function Ig(r){if(r.setActive)return r.setActive();if(jr)return r.focus(jr);var t=nh(r);r.focus(jr==null?{get preventScroll(){return jr={preventScroll:!0},!0}}:void 0),jr||(jr=!1,ih(t,0))}function ah(r,t){for(var e,n=2e8,i,a=0,o=t.top,s=t.top,l=r.firstChild,u=0;l;l=l.nextSibling,u++){var c=void 0;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Ot(l).getClientRects();else continue;for(var f=0;f<c.length;f++){var d=c[f];if(d.top<=o&&d.bottom>=s){o=Math.max(d.bottom,o),s=Math.min(d.top,s);var h=d.left>t.left?d.left-t.left:d.right<t.left?t.left-d.right:0;if(h<n){e=l,n=h,i=h&&e.nodeType==3?{left:d.right<t.left?d.right:d.left,top:t.top}:t,l.nodeType==1&&h&&(a=u+(t.left>=(d.left+d.right)/2?1:0));continue}}!e&&(t.left>=d.right&&t.top>=d.top||t.left>=d.left&&t.top>=d.bottom)&&(a=u+1)}}return e&&e.nodeType==3?Rg(e,i):!e||n&&e.nodeType==1?{node:r,offset:a}:ah(e,i)}function Rg(r,t){for(var e=r.nodeValue.length,n=document.createRange(),i=0;i<e;i++){n.setEnd(r,i+1),n.setStart(r,i);var a=Gt(n,1);if(a.top!=a.bottom&&Hs(t,a))return{node:r,offset:i+(t.left>=(a.left+a.right)/2?1:0)}}return{node:r,offset:0}}function Hs(r,t){return r.left>=t.left-1&&r.left<=t.right+1&&r.top>=t.top-1&&r.top<=t.bottom+1}function Pg(r,t){var e=r.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<r.getBoundingClientRect().left?e:r}function Bg(r,t,e){var n=ah(t,e),i=n.node,a=n.offset,o=-1;if(i.nodeType==1&&!i.firstChild){var s=i.getBoundingClientRect();o=s.left!=s.right&&e.left>(s.left+s.right)/2?1:-1}return r.docView.posFromDOM(i,a,o)}function Hg(r,t,e,n){for(var i=-1,a=t;a!=r.dom;){var o=r.docView.nearestDesc(a,!0);if(!o)return null;if(o.node.isBlock&&o.parent){var s=o.dom.getBoundingClientRect();if(s.left>n.left||s.top>n.top)i=o.posBefore;else if(s.right<n.left||s.bottom<n.top)i=o.posAfter;else break}a=o.dom.parentNode}return i>-1?i:r.docView.posFromDOM(t,e,1)}function oh(r,t,e){var n=r.childNodes.length;if(n&&e.top<e.bottom)for(var i=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-e.top)/(e.bottom-e.top))-2)),a=i;;){var o=r.childNodes[a];if(o.nodeType==1)for(var s=o.getClientRects(),l=0;l<s.length;l++){var u=s[l];if(Hs(t,u))return oh(o,t,u)}if((a=(a+1)%n)==i)break}return r}function Fg(r,t){var e=r.dom.ownerDocument,n,i=0;if(e.caretPositionFromPoint)try{var a=e.caretPositionFromPoint(t.left,t.top);a&&(n=a.offsetNode,i=a.offset)}catch{}if(!n&&e.caretRangeFromPoint){var o=e.caretRangeFromPoint(t.left,t.top);o&&(n=o.startContainer,i=o.startOffset)}var s=(r.root.elementFromPoint?r.root:e).elementFromPoint(t.left,t.top),l;if(!s||!r.dom.contains(s.nodeType!=1?s.parentNode:s)){var u=r.dom.getBoundingClientRect();if(!Hs(t,u)||(s=oh(r.dom,t,u),!s))return null}if(Fe)for(var c=s;n&&c;c=Bs(c))c.draggable&&(n=void 0);if(s=Pg(s,t),n){if(lt&&n.nodeType==1&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){var f=n.childNodes[i],d;f.nodeName=="IMG"&&(d=f.getBoundingClientRect()).right<=t.left&&d.bottom>t.top&&i++}n==r.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom?l=r.state.doc.content.size:(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR")&&(l=Hg(r,n,i,t))}l==null&&(l=Bg(r,s,t));var h=r.docView.nearestDesc(s,!0);return{pos:l,inside:h?h.posAtStart-h.border:-1}}function Gt(r,t){var e=r.getClientRects();return e.length?e[t<0?0:e.length-1]:r.getBoundingClientRect()}var qg=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function sh(r,t,e){var n=r.docView.domFromPos(t,e<0?-1:1),i=n.node,a=n.offset,o=n.atom,s=ka||lt;if(i.nodeType==3)if(s&&(qg.test(i.nodeValue)||(e<0?!a:a==i.nodeValue.length))){var l=Gt(Ot(i,a,a),e);if(lt&&a&&/\s/.test(i.nodeValue[a-1])&&a<i.nodeValue.length){var u=Gt(Ot(i,a-1,a-1),-1);if(u.top==l.top){var c=Gt(Ot(i,a,a+1),-1);if(c.top!=l.top)return Nn(c,c.left<u.left)}}return l}else{var f=a,d=a,h=e<0?1:-1;return e<0&&!a?(d++,h=-1):e>=0&&a==i.nodeValue.length?(f--,h=1):e<0?f--:d++,Nn(Gt(Ot(i,f,d),1),h<0)}var p=r.state.doc.resolve(t-(o||0));if(!p.parent.inlineContent){if(o==null&&a&&(e<0||a==mt(i))){var v=i.childNodes[a-1];if(v.nodeType==1)return oo(v.getBoundingClientRect(),!1)}if(o==null&&a<mt(i)){var m=i.childNodes[a];if(m.nodeType==1)return oo(m.getBoundingClientRect(),!0)}return oo(i.getBoundingClientRect(),e>=0)}if(o==null&&a&&(e<0||a==mt(i))){var g=i.childNodes[a-1],k=g.nodeType==3?Ot(g,mt(g)-(s?0:1)):g.nodeType==1&&(g.nodeName!="BR"||!g.nextSibling)?g:null;if(k)return Nn(Gt(k,1),!1)}if(o==null&&a<mt(i)){for(var b=i.childNodes[a];b.pmViewDesc&&b.pmViewDesc.ignoreForCoords;)b=b.nextSibling;var C=b?b.nodeType==3?Ot(b,0,s?0:1):b.nodeType==1?b:null:null;if(C)return Nn(Gt(C,-1),!0)}return Nn(Gt(i.nodeType==3?Ot(i):i,-e),e>=0)}function Nn(r,t){if(r.width==0)return r;var e=t?r.left:r.right;return{top:r.top,bottom:r.bottom,left:e,right:e}}function oo(r,t){if(r.height==0)return r;var e=t?r.top:r.bottom;return{top:e,bottom:e,left:r.left,right:r.right}}function lh(r,t,e){var n=r.state,i=r.root.activeElement;n!=t&&r.updateState(t),i!=r.dom&&r.focus();try{return e()}finally{n!=t&&r.updateState(n),i!=r.dom&&i&&i.focus()}}function _g(r,t,e){var n=t.selection,i=e=="up"?n.$from:n.$to;return lh(r,t,function(){for(var a=r.docView.domFromPos(i.pos,e=="up"?-1:1),o=a.node;;){var s=r.docView.nearestDesc(o,!0);if(!s)break;if(s.node.isBlock){o=s.dom;break}o=s.dom.parentNode}for(var l=sh(r,i.pos,1),u=o.firstChild;u;u=u.nextSibling){var c=void 0;if(u.nodeType==1)c=u.getClientRects();else if(u.nodeType==3)c=Ot(u,0,u.nodeValue.length).getClientRects();else continue;for(var f=0;f<c.length;f++){var d=c[f];if(d.bottom>d.top+1&&(e=="up"?l.top-d.top>(d.bottom-l.top)*2:d.bottom-l.bottom>(l.bottom-d.top)*2))return!1}}return!0})}var $g=/[\u0590-\u08ac]/;function zg(r,t,e){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var i=n.parentOffset,a=!i,o=i==n.parent.content.size,s=r.domSelection();return!$g.test(n.parent.textContent)||!s.modify?e=="left"||e=="backward"?a:o:lh(r,t,function(){var l=s.getRangeAt(0),u=s.focusNode,c=s.focusOffset,f=s.caretBidiLevel;s.modify("move",e,"character");var d=n.depth?r.docView.domAfterPos(n.before()):r.dom,h=!d.contains(s.focusNode.nodeType==1?s.focusNode:s.focusNode.parentNode)||u==s.focusNode&&c==s.focusOffset;return s.removeAllRanges(),s.addRange(l),f!=null&&(s.caretBidiLevel=f),h})}var bu=null,ku=null,wu=!1;function Vg(r,t,e){return bu==t&&ku==e?wu:(bu=t,ku=e,wu=e=="up"||e=="down"?_g(r,t,e):zg(r,t,e))}var it=0,Cu=1,en=2,kt=3,oi=function(){function r(t,e,n,i){Z(this,r),this.parent=t,this.children=e,this.dom=n,this.contentDOM=i,this.dirty=it,n.pmViewDesc=this}return ee(r,[{key:"matchesWidget",value:function(e){return!1}},{key:"matchesMark",value:function(e){return!1}},{key:"matchesNode",value:function(e,n,i){return!1}},{key:"matchesHack",value:function(e){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(e){return!1}},{key:"size",get:function(){for(var e=0,n=0;n<this.children.length;n++)e+=this.children[n].size;return e}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var n=0,i=this.posAtStart;;n++){var a=this.children[n];if(a==e)return i;i+=a.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(e,n,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){var a,o;if(e==this.contentDOM)a=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((o=a.pmViewDesc)&&o.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(o)+o.size:this.posAtStart}else{var s,l;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(l):this.posAtEnd}var u;if(e==this.dom&&this.contentDOM)u=n>$e(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))u=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(var c=e;;c=c.parentNode){if(c==this.dom){u=!1;break}if(c.previousSibling)break}if(u==null&&n==e.childNodes.length)for(var f=e;;f=f.parentNode){if(f==this.dom){u=!0;break}if(f.nextSibling)break}}return(u==null?i>0:u)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=!0,a=e;a;a=a.parentNode){var o=this.getDesc(a),s=void 0;if(o&&(!n||o.node))if(i&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))i=!1;else return o}}},{key:"getDesc",value:function(e){for(var n=e.pmViewDesc,i=n;i;i=i.parent)if(i==this)return n}},{key:"posFromDOM",value:function(e,n,i){for(var a=e;a;a=a.parentNode){var o=this.getDesc(a);if(o)return o.localPosFromDOM(e,n,i)}return-1}},{key:"descAt",value:function(e){for(var n=0,i=0;n<this.children.length;n++){var a=this.children[n],o=i+a.size;if(i==e&&o!=i){for(;!a.border&&a.children.length;)a=a.children[0];return a}if(e<o)return a.descAt(e-i-a.border);i=o}}},{key:"domFromPos",value:function(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};for(var i=0,a=0,o=0;i<this.children.length;i++){var s=this.children[i],l=o+s.size;if(l>e||s instanceof fh){a=e-o;break}o=l}if(a)return this.children[i].domFromPos(a-this.children[i].border,n);for(var u;i&&!(u=this.children[i-1]).size&&u instanceof uh&&u.side>=0;i--);if(n<=0){for(var c,f=!0;c=i?this.children[i-1]:null,!(!c||c.dom.parentNode==this.contentDOM);i--,f=!1);return c&&n&&f&&!c.border&&!c.domAtom?c.domFromPos(c.size,n):{node:this.contentDOM,offset:c?$e(c.dom)+1:0}}else{for(var d,h=!0;d=i<this.children.length?this.children[i]:null,!(!d||d.dom.parentNode==this.contentDOM);i++,h=!1);return d&&h&&!d.border&&!d.domAtom?d.domFromPos(0,n):{node:this.contentDOM,offset:d?$e(d.dom):this.contentDOM.childNodes.length}}}},{key:"parseRange",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var a=-1,o=-1,s=i,l=0;;l++){var u=this.children[l],c=s+u.size;if(a==-1&&e<=c){var f=s+u.border;if(e>=f&&n<=c-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,f);e=s;for(var d=l;d>0;d--){var h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){a=$e(h.dom)+1;break}e-=h.size}a==-1&&(a=0)}if(a>-1&&(c>n||l==this.children.length-1)){n=c;for(var p=l+1;p<this.children.length;p++){var v=this.children[p];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(-1)){o=$e(v.dom);break}n+=v.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:a,toOffset:o}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var n=this.domFromPos(e,0),i=n.node,a=n.offset;if(i.nodeType!=1||a==i.childNodes.length)throw new RangeError("No node after pos "+e);return i.childNodes[a]}},{key:"setSelection",value:function(e,n,i){for(var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=Math.min(e,n),s=Math.max(e,n),l=0,u=0;l<this.children.length;l++){var c=this.children[l],f=u+c.size;if(o>u&&s<f)return c.setSelection(e-u-c.border,n-u-c.border,i,a);u=f}var d=this.domFromPos(e,e?-1:1),h=n==e?d:this.domFromPos(n,n?-1:1),p=i.getSelection(),v=!1;if((lt||Fe)&&e==n){var m=d,g=m.node,k=m.offset;if(g.nodeType==3){if(v=!!(k&&g.nodeValue[k-1]==`
`),v&&k==g.nodeValue.length)for(var b=g,C;b;b=b.parentNode){if(C=b.nextSibling){C.nodeName=="BR"&&(d=h={node:C.parentNode,offset:$e(C)+1});break}var T=b.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{var S=g.childNodes[k-1];v=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(lt&&p.focusNode&&p.focusNode!=h.node&&p.focusNode.nodeType==1){var M=p.focusNode.childNodes[p.focusOffset];M&&M.contentEditable=="false"&&(a=!0)}if(!(!(a||v&&Fe)&&Kn(d.node,d.offset,p.anchorNode,p.anchorOffset)&&Kn(h.node,h.offset,p.focusNode,p.focusOffset))){var N=!1;if((p.extend||e==n)&&!v){p.collapse(d.node,d.offset);try{e!=n&&p.extend(h.node,h.offset),N=!0}catch(V){if(!(V instanceof DOMException))throw V}}if(!N){if(e>n){var R=d;d=h,h=R}var P=document.createRange();P.setEnd(h.node,h.offset),P.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(P)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&e.type!="selection"}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(e,n){for(var i=0,a=0;a<this.children.length;a++){var o=this.children[a],s=i+o.size;if(i==s?e<=s&&n>=i:e<s&&n>i){var l=i+o.border,u=s-o.border;if(e>=l&&n<=u){this.dirty=e==i||n==s?en:Cu,e==l&&n==u&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=kt:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?en:kt}i=s}this.dirty=en}},{key:"markParentsDirty",value:function(){for(var e=1,n=this.parent;n;n=n.parent,e++){var i=e==1?en:Cu;n.dirty<i&&(n.dirty=i)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}}]),r}(),uh=function(r){Pr(e,r);var t=Br(e);function e(n,i,a,o){var s;Z(this,e);var l,u=i.type.toDOM;if(typeof u=="function"&&(u=u(a,function(){if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)})),!i.type.spec.raw){if(u.nodeType!=1){var c=document.createElement("span");c.appendChild(u),u=c}u.contentEditable="false",u.classList.add("ProseMirror-widget")}return s=t.call(this,n,[],u,null),s.widget=i,s.widget=i,l=th(s),s}return ee(e,[{key:"matchesWidget",value:function(i){return this.dirty==it&&i.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(i){var a=this.widget.spec.stopEvent;return a?a(i):!1}},{key:"ignoreMutation",value:function(i){return i.type!="selection"||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),_e(De(e.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"side",get:function(){return this.widget.type.side}}]),e}(oi),Ug=function(r){Pr(e,r);var t=Br(e);function e(n,i,a,o){var s;return Z(this,e),s=t.call(this,n,[],i,null),s.textDOM=a,s.text=o,s}return ee(e,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(i,a){return i!=this.textDOM?this.posAtStart+(a?this.size:0):this.posAtStart+a}},{key:"domFromPos",value:function(i){return{node:this.textDOM,offset:i}}},{key:"ignoreMutation",value:function(i){return i.type==="characterData"&&i.target.nodeValue==i.oldValue}}]),e}(oi),Ki=function(r){Pr(e,r);var t=Br(e);function e(n,i,a,o){var s;return Z(this,e),s=t.call(this,n,[],a,o),s.mark=i,s}return ee(e,[{key:"parseRule",value:function(){return this.dirty&kt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}},{key:"matchesMark",value:function(i){return this.dirty!=kt&&this.mark.eq(i)}},{key:"markDirty",value:function(i,a){if(_e(De(e.prototype),"markDirty",this).call(this,i,a),this.dirty!=it){for(var o=this.parent;!o.node;)o=o.parent;o.dirty<this.dirty&&(o.dirty=this.dirty),this.dirty=it}}},{key:"slice",value:function(i,a,o){var s=e.create(this.parent,this.mark,!0,o),l=this.children,u=this.size;a<u&&(l=es(l,a,u,o)),i>0&&(l=es(l,0,i,o));for(var c=0;c<l.length;c++)l[c].parent=s;return s.children=l,s}}],[{key:"create",value:function(i,a,o,s){var l=s.nodeViews[a.type.name],u=l&&l(a,s,o);return(!u||!u.dom)&&(u=j.DOMSerializer.renderSpec(document,a.type.spec.toDOM(a,o))),new e(i,a,u.dom,u.contentDOM||u.dom)}}]),e}(oi),Qn=function(r){Pr(e,r);var t=Br(e);function e(n,i,a,o,s,l,u,c,f){var d;return Z(this,e),d=t.call(this,n,[],s,l),d.node=i,d.outerDeco=a,d.innerDeco=o,d.nodeDOM=u,l&&d.updateChildren(c,f),d}return ee(e,[{key:"parseRule",value:function(){var i=this;if(this.node.type.spec.reparseInView)return null;var a={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(a.preserveWhitespace="full"),!this.contentDOM)a.getContent=function(){return i.node.content};else if(!this.contentLost)a.contentElement=this.contentDOM;else{for(var o=this.children.length-1;o>=0;o--){var s=this.children[o];if(this.dom.contains(s.dom.parentNode)){a.contentElement=s.dom.parentNode;break}}a.contentElement||(a.getContent=function(){return j.Fragment.empty})}return a}},{key:"matchesNode",value:function(i,a,o){return this.dirty==it&&i.eq(this.node)&&Zo(a,this.outerDeco)&&o.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(i,a){var o=this,s=this.node.inlineContent,l=a,u=i.composing?this.localCompositionInfo(i,a):null,c=u&&u.pos>-1?u:null,f=u&&u.pos<0,d=new Gg(this,c&&c.node,i);Qg(this.node,this.innerDeco,function(h,p,v){h.spec.marks?d.syncToMarks(h.spec.marks,s,i):h.type.side>=0&&!v&&d.syncToMarks(p==o.node.childCount?j.Mark.none:o.node.child(p).marks,s,i),d.placeWidget(h,i,l)},function(h,p,v,m){d.syncToMarks(h.marks,s,i);var g;d.findNodeMatch(h,p,v,m)||f&&i.state.selection.from>l&&i.state.selection.to<l+h.nodeSize&&(g=d.findIndexWithChild(u.node))>-1&&d.updateNodeAt(h,p,v,g,i)||d.updateNextNode(h,p,v,i,m)||d.addNode(h,p,v,i,l),l+=h.nodeSize}),d.syncToMarks([],s,i),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==en)&&(c&&this.protectLocalComposition(i,c),dh(this.contentDOM,this.children,i),fn&&Xg(this.dom))}},{key:"localCompositionInfo",value:function(i,a){var o=i.state.selection,s=o.from,l=o.to;if(!(i.state.selection instanceof H.TextSelection)||s<a||l>a+this.node.content.size)return null;var u=i.domSelection(),c=Yg(u.focusNode,u.focusOffset);if(!c||!this.dom.contains(c.parentNode))return null;if(this.node.inlineContent){var f=c.nodeValue,d=Zg(this.node.content,f,s-a,l-a);return d<0?null:{node:c,pos:d,text:f}}else return{node:c,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(i,a){var o=a.node,s=a.pos,l=a.text;if(!this.getDesc(o)){for(var u=o;u.parentNode!=this.contentDOM;u=u.parentNode){for(;u.previousSibling;)u.parentNode.removeChild(u.previousSibling);for(;u.nextSibling;)u.parentNode.removeChild(u.nextSibling);u.pmViewDesc&&(u.pmViewDesc=void 0)}var c=new Ug(this,u,o,l);i.input.compositionNodes.push(c),this.children=es(this.children,s,s+l.length,i,c)}}},{key:"update",value:function(i,a,o,s){return this.dirty==kt||!i.sameMarkup(this.node)?!1:(this.updateInner(i,a,o,s),!0)}},{key:"updateInner",value:function(i,a,o,s){this.updateOuterDeco(a),this.node=i,this.innerDeco=o,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=it}},{key:"updateOuterDeco",value:function(i){if(!Zo(i,this.outerDeco)){var a=this.nodeDOM.nodeType!=1,o=this.dom;this.dom=hh(this.dom,this.nodeDOM,Yo(this.outerDeco,this.node,a),Yo(i,this.node,a)),this.dom!=o&&(o.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=i}}},{key:"selectNode",value:function(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(i,a,o,s,l,u){var c=l.nodeViews[a.type.name],f,d=c&&c(a,l,function(){if(!f)return u;if(f.parent)return f.parent.posBeforeChild(f)},o,s),h=d&&d.dom,p=d&&d.contentDOM;if(a.isText){if(!h)h=document.createTextNode(a.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else if(!h){var v=j.DOMSerializer.renderSpec(document,a.type.spec.toDOM(a));h=v.dom,p=v.contentDOM}!p&&!a.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),a.type.spec.draggable&&(h.draggable=!0));var m=h;return h=ph(h,o,a),d?f=new Wg(i,a,o,s,h,p||null,m,d,l,u+1):a.isText?new ch(i,a,o,s,h,m,l):new e(i,a,o,s,h,p||null,m,l,u+1)}}]),e}(oi);function Tu(r,t,e,n,i){return ph(n,t,r),new Qn(void 0,r,t,e,n,n,n,i,0)}var ch=function(r){Pr(e,r);var t=Br(e);function e(n,i,a,o,s,l,u){return Z(this,e),t.call(this,n,i,a,o,s,null,l,u,0)}return ee(e,[{key:"parseRule",value:function(){for(var i=this.nodeDOM.parentNode;i&&i!=this.dom&&!i.pmIsDeco;)i=i.parentNode;return{skip:i||!0}}},{key:"update",value:function(i,a,o,s){return this.dirty==kt||this.dirty!=it&&!this.inParent()||!i.sameMarkup(this.node)?!1:(this.updateOuterDeco(a),(this.dirty!=it||i.text!=this.node.text)&&i.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=i.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=i,this.dirty=it,!0)}},{key:"inParent",value:function(){for(var i=this.parent.contentDOM,a=this.nodeDOM;a;a=a.parentNode)if(a==i)return!0;return!1}},{key:"domFromPos",value:function(i){return{node:this.nodeDOM,offset:i}}},{key:"localPosFromDOM",value:function(i,a,o){return i==this.nodeDOM?this.posAtStart+Math.min(a,this.node.text.length):_e(De(e.prototype),"localPosFromDOM",this).call(this,i,a,o)}},{key:"ignoreMutation",value:function(i){return i.type!="characterData"&&i.type!="selection"}},{key:"slice",value:function(i,a,o){var s=this.node.cut(i,a),l=document.createTextNode(s.text);return new e(this.parent,s,this.outerDeco,this.innerDeco,l,l,o)}},{key:"markDirty",value:function(i,a){_e(De(e.prototype),"markDirty",this).call(this,i,a),this.dom!=this.nodeDOM&&(i==0||a==this.nodeDOM.nodeValue.length)&&(this.dirty=kt)}},{key:"domAtom",get:function(){return!1}}]),e}(Qn),fh=function(r){Pr(e,r);var t=Br(e);function e(){return Z(this,e),t.apply(this,arguments)}return ee(e,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(i){return this.dirty==it&&this.dom.nodeName==i}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return this.dom.nodeName=="IMG"}}]),e}(oi),Wg=function(r){Pr(e,r);var t=Br(e);function e(n,i,a,o,s,l,u,c,f,d){var h;return Z(this,e),h=t.call(this,n,i,a,o,s,l,u,f,d),h.spec=c,h}return ee(e,[{key:"update",value:function(i,a,o,s){if(this.dirty==kt)return!1;if(this.spec.update){var l=this.spec.update(i,a,o);return l&&this.updateInner(i,a,o,s),l}else return!this.contentDOM&&!i.isLeaf?!1:_e(De(e.prototype),"update",this).call(this,i,a,o,s)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():_e(De(e.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():_e(De(e.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(i,a,o,s){this.spec.setSelection?this.spec.setSelection(i,a,o):_e(De(e.prototype),"setSelection",this).call(this,i,a,o,s)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),_e(De(e.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(i){return this.spec.stopEvent?this.spec.stopEvent(i):!1}},{key:"ignoreMutation",value:function(i){return this.spec.ignoreMutation?this.spec.ignoreMutation(i):_e(De(e.prototype),"ignoreMutation",this).call(this,i)}}]),e}(Qn);function dh(r,t,e){for(var n=r.firstChild,i=!1,a=0;a<t.length;a++){var o=t[a],s=o.dom;if(s.parentNode==r){for(;s!=n;)n=xu(n),i=!0;n=n.nextSibling}else i=!0,r.insertBefore(s,n);if(o instanceof Ki){var l=n?n.previousSibling:r.lastChild;dh(o.contentDOM,o.children,e),n=l?l.nextSibling:r.firstChild}}for(;n;)n=xu(n),i=!0;i&&e.trackWrites==r&&(e.trackWrites=null)}var zn=function(t){t&&(this.nodeName=t)};zn.prototype=Object.create(null);var pr=[new zn];function Yo(r,t,e){if(r.length==0)return pr;for(var n=e?pr[0]:new zn,i=[n],a=0;a<r.length;a++){var o=r[a].type.attrs;if(!!o){o.nodeName&&i.push(n=new zn(o.nodeName));for(var s in o){var l=o[s];l!=null&&(e&&i.length==1&&i.push(n=new zn(t.isInline?"span":"div")),s=="class"?n.class=(n.class?n.class+" ":"")+l:s=="style"?n.style=(n.style?n.style+";":"")+l:s!="nodeName"&&(n[s]=l))}}}return i}function hh(r,t,e,n){if(e==pr&&n==pr)return t;for(var i=t,a=0;a<n.length;a++){var o=n[a],s=e[a];if(a){var l=void 0;s&&s.nodeName==o.nodeName&&i!=r&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),s=pr[0]),i=l}jg(i,s||pr[0],o)}return i}function jg(r,t,e){for(var n in t)n!="class"&&n!="style"&&n!="nodeName"&&!(n in e)&&r.removeAttribute(n);for(var i in e)i!="class"&&i!="style"&&i!="nodeName"&&e[i]!=t[i]&&r.setAttribute(i,e[i]);if(t.class!=e.class){for(var a=t.class?t.class.split(" ").filter(Boolean):[],o=e.class?e.class.split(" ").filter(Boolean):[],s=0;s<a.length;s++)o.indexOf(a[s])==-1&&r.classList.remove(a[s]);for(var l=0;l<o.length;l++)a.indexOf(o[l])==-1&&r.classList.add(o[l]);r.classList.length==0&&r.removeAttribute("class")}if(t.style!=e.style){if(t.style)for(var u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,c;c=u.exec(t.style);)r.style.removeProperty(c[1]);e.style&&(r.style.cssText+=e.style)}}function ph(r,t,e){return hh(r,r,pr,Yo(t,e,r.nodeType!=1))}function Zo(r,t){if(r.length!=t.length)return!1;for(var e=0;e<r.length;e++)if(!r[e].type.eq(t[e].type))return!1;return!0}function xu(r){var t=r.nextSibling;return r.parentNode.removeChild(r),t}var Gg=function(){function r(t,e,n){Z(this,r),this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=Jg(t.node.content,t)}return ee(r,[{key:"destroyBetween",value:function(e,n){if(e!=n){for(var i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,n,i){for(var a=0,o=this.stack.length>>1,s=Math.min(o,e.length);a<s&&(a==o-1?this.top:this.stack[a+1<<1]).matchesMark(e[a])&&e[a].type.spec.spanning!==!1;)a++;for(;a<o;)this.destroyRest(),this.top.dirty=it,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var l=-1,u=this.index;u<Math.min(this.index+3,this.top.children.length);u++)if(this.top.children[u].matchesMark(e[o])){l=u;break}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{var c=Ki.create(this.top,e[o],n,i);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(e,n,i,a){var o=-1,s;if(a>=this.preMatch.index&&(s=this.preMatch.matches[a-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,i))o=this.top.children.indexOf(s,this.index);else for(var l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){var c=this.top.children[l];if(c.matchesNode(e,n,i)&&!this.preMatch.matched.has(c)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}},{key:"updateNodeAt",value:function(e,n,i,a,o){var s=this.top.children[a];return s.dirty==kt&&s.dom==s.contentDOM&&(s.dirty=en),s.update(e,n,i,o)?(this.destroyBetween(this.index,a),this.index++,!0):!1}},{key:"findIndexWithChild",value:function(e){for(;;){var n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){var i=e.pmViewDesc;if(i){for(var a=this.index;a<this.top.children.length;a++)if(this.top.children[a]==i)return a}return-1}e=n}}},{key:"updateNextNode",value:function(e,n,i,a,o){for(var s=this.index;s<this.top.children.length;s++){var l=this.top.children[s];if(l instanceof Qn){var u=this.preMatch.matched.get(l);if(u!=null&&u!=o)return!1;var c=l.dom,f=this.lock&&(c==this.lock||c.nodeType==1&&c.contains(this.lock.parentNode))&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=kt&&Zo(n,l.outerDeco));if(!f&&l.update(e,n,i,a))return this.destroyBetween(this.index,s),l.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1}},{key:"addNode",value:function(e,n,i,a,o){this.top.children.splice(this.index++,0,Qn.create(this.top,e,n,i,a,o)),this.changed=!0}},{key:"placeWidget",value:function(e,n,i){var a=this.index<this.top.children.length?this.top.children[this.index]:null;if(a&&a.matchesWidget(e)&&(e==a.widget||!a.widget.type.toDOM.parentNode))this.index++;else{var o=new uh(this.top,e,n,i);this.top.children.splice(this.index++,0,o),this.changed=!0}}},{key:"addTextblockHacks",value:function(){for(var e=this.top.children[this.index-1],n=this.top;e instanceof Ki;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof ch)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Fe||Le)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{var i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");var a=new fh(this.top,[],i,null);n!=this.top?n.children.push(a):n.children.splice(this.index++,0,a),this.changed=!0}}}]),r}();function Jg(r,t){var e=t,n=e.children.length,i=r.childCount,a=new Map,o=[];e:for(;i>0;){for(var s=void 0;;)if(n){var l=e.children[n-1];if(l instanceof Ki)e=l,n=l.children.length;else{s=l,n--;break}}else{if(e==t)break e;n=e.parent.children.indexOf(e),e=e.parent}var u=s.node;if(!!u){if(u!=r.child(i-1))break;--i,a.set(s,i),o.push(s)}}return{index:i,matched:a,matches:o.reverse()}}function Kg(r,t){return r.type.side-t.type.side}function Qg(r,t,e,n){var i=t.locals(r),a=0;if(i.length==0){for(var o=0;o<r.childCount;o++){var s=r.child(o);n(s,i,t.forChild(a,s),o),a+=s.nodeSize}return}for(var l=0,u=[],c=null,f=0;;){if(l<i.length&&i[l].to==a){for(var d=i[l++],h=void 0;l<i.length&&i[l].to==a;)(h||(h=[d])).push(i[l++]);if(h){h.sort(Kg);for(var p=0;p<h.length;p++)e(h[p],f,!!c)}else e(d,f,!!c)}var v=void 0,m=void 0;if(c)m=-1,v=c,c=null;else if(f<r.childCount)m=f,v=r.child(f++);else break;for(var g=0;g<u.length;g++)u[g].to<=a&&u.splice(g--,1);for(;l<i.length&&i[l].from<=a&&i[l].to>a;)u.push(i[l++]);var k=a+v.nodeSize;if(v.isText){var b=k;l<i.length&&i[l].from<b&&(b=i[l].from);for(var C=0;C<u.length;C++)u[C].to<b&&(b=u[C].to);b<k&&(c=v.cut(b-a),v=v.cut(0,b-a),k=b,m=-1)}var T=v.isInline&&!v.isLeaf?u.filter(function(S){return!S.inline}):u.slice();n(v,T,t.forChild(a,v),m),a=k}}function Xg(r){if(r.nodeName=="UL"||r.nodeName=="OL"){var t=r.style.cssText;r.style.cssText=t+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=t}}function Yg(r,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&t>0){if(r.childNodes.length>t&&r.childNodes[t].nodeType==3)return r.childNodes[t];r=r.childNodes[t-1],t=mt(r)}else if(r.nodeType==1&&t<r.childNodes.length)r=r.childNodes[t],t=0;else return null}}function Zg(r,t,e,n){for(var i=0,a=0;i<r.childCount&&a<=n;){var o=r.child(i++),s=a;if(a+=o.nodeSize,!!o.isText){for(var l=o.text;i<r.childCount;){var u=r.child(i++);if(a+=u.nodeSize,!u.isText)break;l+=u.text}if(a>=e){var c=s<n?l.lastIndexOf(t,n-s-1):-1;if(c>=0&&c+t.length+s>=e)return s+c;if(e==n&&l.length>=n+t.length-s&&l.slice(n-s,n-s+t.length)==t)return n}}}return-1}function es(r,t,e,n,i){for(var a=[],o=0,s=0;o<r.length;o++){var l=r[o],u=s,c=s+=l.size;u>=e||c<=t?a.push(l):(u<t&&a.push(l.slice(0,t-u,n)),i&&(a.push(i),i=void 0),c>e&&a.push(l.slice(e-u,l.size,n)))}return a}function Fs(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=r.domSelection(),n=r.state.doc;if(!e.focusNode)return null;var i=r.docView.nearestDesc(e.focusNode),a=i&&i.size==0,o=r.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(o<0)return null;var s=n.resolve(o),l,u;if(wa(e)){for(l=s;i&&!i.node;)i=i.parent;var c=i.node;if(i&&c.isAtom&&H.NodeSelection.isSelectable(c)&&i.parent&&!(c.isInline&&Mg(e.focusNode,e.focusOffset,i.dom))){var f=i.posBefore;u=new H.NodeSelection(o==f?s:n.resolve(f))}}else{var d=r.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(d<0)return null;l=n.resolve(d)}if(!u){var h=t=="pointer"||r.state.selection.head<s.pos&&!a?1:-1;u=qs(r,l,s,h)}return u}function vh(r){return r.editable?r.hasFocus():gh(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function Rt(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=r.state.selection;if(mh(r,e),!!vh(r)){if(!t&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&Le){var n=r.domSelection(),i=r.domObserver.currentSelection;if(n.anchorNode&&i.anchorNode&&Kn(n.anchorNode,n.anchorOffset,i.anchorNode,i.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)ty(r);else{var a=e.anchor,o=e.head,s,l;Su&&!(e instanceof H.TextSelection)&&(e.$from.parent.inlineContent||(s=Eu(r,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(l=Eu(r,e.to))),r.docView.setSelection(a,o,r.root,t),Su&&(s&&Mu(s),l&&Mu(l)),e.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&ey(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}var Su=Fe||Le&&xg<63;function Eu(r,t){var e=r.docView.domFromPos(t,0),n=e.node,i=e.offset,a=i<n.childNodes.length?n.childNodes[i]:null,o=i?n.childNodes[i-1]:null;if(Fe&&a&&a.contentEditable=="false")return so(a);if((!a||a.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(a)return so(a);if(o)return so(o)}}function so(r){return r.contentEditable="true",Fe&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function Mu(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function ey(r){var t=r.dom.ownerDocument;t.removeEventListener("selectionchange",r.input.hideSelectionGuard);var e=r.domSelection(),n=e.anchorNode,i=e.anchorOffset;t.addEventListener("selectionchange",r.input.hideSelectionGuard=function(){(e.anchorNode!=n||e.anchorOffset!=i)&&(t.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(function(){(!vh(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function ty(r){var t=r.domSelection(),e=document.createRange(),n=r.cursorWrapper.dom,i=n.nodeName=="IMG";i?e.setEnd(n.parentNode,$e(n)+1):e.setEnd(n,0),e.collapse(!1),t.removeAllRanges(),t.addRange(e),!i&&!r.state.selection.visible&&He&&Xt<=11&&(n.disabled=!0,n.disabled=!1)}function mh(r,t){if(t instanceof H.NodeSelection){var e=r.docView.descAt(t.from);e!=r.lastSelectedViewDesc&&(Ou(r),e&&e.selectNode(),r.lastSelectedViewDesc=e)}else Ou(r)}function Ou(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function qs(r,t,e,n){return r.someProp("createSelectionBetween",function(i){return i(r,t,e)})||H.TextSelection.between(t,e,n)}function Nu(r){return r.editable&&!r.hasFocus()?!1:gh(r)}function gh(r){var t=r.domSelection();if(!t.anchorNode)return!1;try{return r.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(r.editable||r.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function ry(r){var t=r.docView.domFromPos(r.state.selection.anchor,0),e=r.domSelection();return Kn(t.node,t.offset,e.anchorNode,e.anchorOffset)}function ts(r,t){var e=r.selection,n=e.$anchor,i=e.$head,a=t>0?n.max(i):n.min(i),o=a.parent.inlineContent?a.depth?r.doc.resolve(t>0?a.after():a.before()):null:a;return o&&H.Selection.findFrom(o,t)}function hr(r,t){return r.dispatch(r.state.tr.setSelection(t).scrollIntoView()),!0}function Du(r,t,e){var n=r.state.selection;if(n instanceof H.TextSelection){if(!n.empty||e.indexOf("s")>-1)return!1;if(r.endOfTextblock(t>0?"right":"left")){var i=ts(r.state,t);return i&&i instanceof H.NodeSelection?hr(r,i):!1}else if(!(Ke&&e.indexOf("m")>-1)){var a=n.$head,o=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter,s;if(!o||o.isText)return!1;var l=t<0?a.pos-o.nodeSize:a.pos;return o.isAtom||(s=r.docView.descAt(l))&&!s.contentDOM?H.NodeSelection.isSelectable(o)?hr(r,new H.NodeSelection(t<0?r.state.doc.resolve(a.pos-o.nodeSize):a)):ka?hr(r,new H.TextSelection(r.state.doc.resolve(t<0?l:l+o.nodeSize))):!1:!1}}else{if(n instanceof H.NodeSelection&&n.node.isInline)return hr(r,new H.TextSelection(t>0?n.$to:n.$from));var u=ts(r.state,t);return u?hr(r,u):!1}}function Qi(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Vn(r){var t=r.pmViewDesc;return t&&t.size==0&&(r.nextSibling||r.nodeName!="BR")}function lo(r){var t=r.domSelection(),e=t.focusNode,n=t.focusOffset;if(!!e){var i,a,o=!1;for(lt&&e.nodeType==1&&n<Qi(e)&&Vn(e.childNodes[n])&&(o=!0);;)if(n>0){if(e.nodeType!=1)break;var s=e.childNodes[n-1];if(Vn(s))i=e,a=--n;else if(s.nodeType==3)e=s,n=e.nodeValue.length;else break}else{if(yh(e))break;for(var l=e.previousSibling;l&&Vn(l);)i=e.parentNode,a=$e(l),l=l.previousSibling;if(l)e=l,n=Qi(e);else{if(e=e.parentNode,e==r.dom)break;n=0}}o?rs(r,t,e,n):i&&rs(r,t,i,a)}}function uo(r){var t=r.domSelection(),e=t.focusNode,n=t.focusOffset;if(!!e){for(var i=Qi(e),a,o;;)if(n<i){if(e.nodeType!=1)break;var s=e.childNodes[n];if(Vn(s))a=e,o=++n;else break}else{if(yh(e))break;for(var l=e.nextSibling;l&&Vn(l);)a=l.parentNode,o=$e(l)+1,l=l.nextSibling;if(l)e=l,n=0,i=Qi(e);else{if(e=e.parentNode,e==r.dom)break;n=i=0}}a&&rs(r,t,a,o)}}function yh(r){var t=r.pmViewDesc;return t&&t.node&&t.node.isBlock}function rs(r,t,e,n){if(wa(t)){var i=document.createRange();i.setEnd(e,n),i.setStart(e,n),t.removeAllRanges(),t.addRange(i)}else t.extend&&t.extend(e,n);r.domObserver.setCurSelection();var a=r.state;setTimeout(function(){r.state==a&&Rt(r)},50)}function Lu(r,t,e){var n=r.state.selection;if(n instanceof H.TextSelection&&!n.empty||e.indexOf("s")>-1||Ke&&e.indexOf("m")>-1)return!1;var i=n.$from,a=n.$to;if(!i.parent.inlineContent||r.endOfTextblock(t<0?"up":"down")){var o=ts(r.state,t);if(o&&o instanceof H.NodeSelection)return hr(r,o)}if(!i.parent.inlineContent){var s=t<0?i:a,l=n instanceof H.AllSelection?H.Selection.near(s,t):H.Selection.findFrom(s,t);return l?hr(r,l):!1}return!1}function Au(r,t){if(!(r.state.selection instanceof H.TextSelection))return!0;var e=r.state.selection,n=e.$head,i=e.$anchor,a=e.empty;if(!n.sameParent(i))return!0;if(!a)return!1;if(r.endOfTextblock(t>0?"forward":"backward"))return!0;var o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){var s=r.state.tr;return t<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),r.dispatch(s),!0}return!1}function Iu(r,t,e){r.domObserver.stop(),t.contentEditable=e,r.domObserver.start()}function ny(r){if(!Fe||r.state.selection.$head.parentOffset>0)return!1;var t=r.domSelection(),e=t.focusNode,n=t.focusOffset;if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){var i=e.firstChild;Iu(r,i,"true"),setTimeout(function(){return Iu(r,i,"false")},20)}return!1}function iy(r){var t="";return r.ctrlKey&&(t+="c"),r.metaKey&&(t+="m"),r.altKey&&(t+="a"),r.shiftKey&&(t+="s"),t}function ay(r,t){var e=t.keyCode,n=iy(t);return e==8||Ke&&e==72&&n=="c"?Au(r,-1)||lo(r):e==46||Ke&&e==68&&n=="c"?Au(r,1)||uo(r):e==13||e==27?!0:e==37||Ke&&e==66&&n=="c"?Du(r,-1,n)||lo(r):e==39||Ke&&e==70&&n=="c"?Du(r,1,n)||uo(r):e==38||Ke&&e==80&&n=="c"?Lu(r,-1,n)||lo(r):e==40||Ke&&e==78&&n=="c"?ny(r)||Lu(r,1,n)||uo(r):n==(Ke?"m":"c")&&(e==66||e==73||e==89||e==90)}function _s(r,t){r.someProp("transformCopied",function(g){t=g(t)});for(var e=[],n=t,i=n.content,a=n.openStart,o=n.openEnd;a>1&&o>1&&i.childCount==1&&i.firstChild.childCount==1;){a--,o--;var s=i.firstChild;e.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),i=s.content}var l=r.someProp("clipboardSerializer")||j.DOMSerializer.fromSchema(r.state.schema),u=Th(),c=u.createElement("div");c.appendChild(l.serializeFragment(i,{document:u}));for(var f=c.firstChild,d,h=0;f&&f.nodeType==1&&(d=Ch[f.nodeName.toLowerCase()]);){for(var p=d.length-1;p>=0;p--){for(var v=u.createElement(d[p]);c.firstChild;)v.appendChild(c.firstChild);c.appendChild(v),h++}f=c.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice","".concat(a," ").concat(o).concat(h?" -".concat(h):""," ").concat(JSON.stringify(e)));var m=r.someProp("clipboardTextSerializer",function(g){return g(t)})||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:m}}function $s(r,t,e,n,i){var a=i.parent.type.spec.code,o,s;if(!e&&!t)return null;var l=t&&(n||a||!e);if(l){if(r.someProp("transformPastedText",function(T){t=T(t,a||n)}),a)return t?new j.Slice(j.Fragment.from(r.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0):j.Slice.empty;var u=r.someProp("clipboardTextParser",function(T){return T(t,i,n)});if(u)s=u;else{var c=i.marks(),f=r.state.schema,d=j.DOMSerializer.fromSchema(f);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(function(T){var S=o.appendChild(document.createElement("p"));T&&S.appendChild(d.serializeNode(f.text(T,c)))})}}else r.someProp("transformPastedHTML",function(T){e=T(e)}),o=ly(e),ka&&uy(o);var h=o&&o.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(var v=+p[3];v>0&&o.firstChild;v--)o=o.firstChild;if(!s){var m=r.someProp("clipboardParser")||r.someProp("domParser")||j.DOMParser.fromSchema(r.state.schema);s=m.parseSlice(o,{preserveWhitespace:!!(l||p),context:i,ruleFromNode:function(S){return S.nodeName=="BR"&&!S.nextSibling&&S.parentNode&&!oy.test(S.parentNode.nodeName)?{ignore:!0}:null}})}if(p)s=cy(Ru(s,+p[1],+p[2]),p[4]);else if(s=j.Slice.maxOpen(sy(s.content,i),!0),s.openStart||s.openEnd){for(var g=0,k=0,b=s.content.firstChild;g<s.openStart&&!b.type.spec.isolating;g++,b=b.firstChild);for(var C=s.content.lastChild;k<s.openEnd&&!C.type.spec.isolating;k++,C=C.lastChild);s=Ru(s,g,k)}return r.someProp("transformPasted",function(T){s=T(s)}),s}var oy=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function sy(r,t){if(r.childCount<2)return r;for(var e=function(o){var s=t.node(o),l=s.contentMatchAt(t.index(o)),u=void 0,c=[];if(r.forEach(function(f){if(!!c){var d=l.findWrapping(f.type),h;if(!d)return c=null;if(h=c.length&&u.length&&kh(d,u,f,c[c.length-1],0))c[c.length-1]=h;else{c.length&&(c[c.length-1]=wh(c[c.length-1],u.length));var p=bh(f,d);c.push(p),l=l.matchType(p.type),u=d}}}),c)return{v:j.Fragment.from(c)}},n=t.depth;n>=0;n--){var i=e(n);if(cn(i)==="object")return i.v}return r}function bh(r,t){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=t.length-1;n>=e;n--)r=t[n].create(null,j.Fragment.from(r));return r}function kh(r,t,e,n,i){if(i<r.length&&i<t.length&&r[i]==t[i]){var a=kh(r,t,e,n.lastChild,i+1);if(a)return n.copy(n.content.replaceChild(n.childCount-1,a));var o=n.contentMatchAt(n.childCount);if(o.matchType(i==r.length-1?e.type:r[i+1]))return n.copy(n.content.append(j.Fragment.from(bh(e,r,i+1))))}}function wh(r,t){if(t==0)return r;var e=r.content.replaceChild(r.childCount-1,wh(r.lastChild,t-1)),n=r.contentMatchAt(r.childCount).fillBefore(j.Fragment.empty,!0);return r.copy(e.append(n))}function ns(r,t,e,n,i,a){var o=t<0?r.firstChild:r.lastChild,s=o.content;return i<n-1&&(s=ns(s,t,e,n,i+1,a)),i>=e&&(s=t<0?o.contentMatchAt(0).fillBefore(s,r.childCount>1||a<=i).append(s):s.append(o.contentMatchAt(o.childCount).fillBefore(j.Fragment.empty,!0))),r.replaceChild(t<0?0:r.childCount-1,o.copy(s))}function Ru(r,t,e){return t<r.openStart&&(r=new j.Slice(ns(r.content,-1,t,r.openStart,0,r.openEnd),t,r.openEnd)),e<r.openEnd&&(r=new j.Slice(ns(r.content,1,e,r.openEnd,0,0),r.openStart,e)),r}var Ch={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Pu=null;function Th(){return Pu||(Pu=document.implementation.createHTMLDocument("title"))}function ly(r){var t=/^(\s*<meta [^>]*>)*/.exec(r);t&&(r=r.slice(t[0].length));var e=Th().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),i;if((i=n&&Ch[n[1].toLowerCase()])&&(r=i.map(function(o){return"<"+o+">"}).join("")+r+i.map(function(o){return"</"+o+">"}).reverse().join("")),e.innerHTML=r,i)for(var a=0;a<i.length;a++)e=e.querySelector(i[a])||e;return e}function uy(r){for(var t=r.querySelectorAll(Le?"span:not([class]):not([style])":"span.Apple-converted-space"),e=0;e<t.length;e++){var n=t[e];n.childNodes.length==1&&n.textContent=="\xA0"&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function cy(r,t){if(!r.size)return r;var e=r.content.firstChild.type.schema,n;try{n=JSON.parse(t)}catch{return r}for(var i=r.content,a=r.openStart,o=r.openEnd,s=n.length-2;s>=0;s-=2){var l=e.nodes[n[s]];if(!l||l.hasRequiredAttrs())break;i=j.Fragment.from(l.create(n[s+1],i)),a++,o++}return new j.Slice(i,a,o)}var Ae={},Ie={},fy={touchstart:!0,touchmove:!0},dy=ee(function r(){Z(this,r),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null});function hy(r){var t=function(i){var a=Ae[i];r.dom.addEventListener(i,r.input.eventHandlers[i]=function(o){vy(r,o)&&!zs(r,o)&&(r.editable||!(o.type in Ie))&&a(r,o)},fy[i]?{passive:!0}:void 0)};for(var e in Ae)t(e);Fe&&r.dom.addEventListener("input",function(){return null}),is(r)}function Qt(r,t){r.input.lastSelectionOrigin=t,r.input.lastSelectionTime=Date.now()}function py(r){r.domObserver.stop();for(var t in r.input.eventHandlers)r.dom.removeEventListener(t,r.input.eventHandlers[t]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function is(r){r.someProp("handleDOMEvents",function(t){for(var e in t)r.input.eventHandlers[e]||r.dom.addEventListener(e,r.input.eventHandlers[e]=function(n){return zs(r,n)})})}function zs(r,t){return r.someProp("handleDOMEvents",function(e){var n=e[t.type];return n?n(r,t)||t.defaultPrevented:!1})}function vy(r,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var e=t.target;e!=r.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function my(r,t){!zs(r,t)&&Ae[t.type]&&(r.editable||!(t.type in Ie))&&Ae[t.type](r,t)}Ie.keydown=function(r,t){var e=t;if(r.input.shiftKey=e.keyCode==16||e.shiftKey,!Sh(r,e)&&(r.input.lastKeyCode=e.keyCode,r.input.lastKeyCodeTime=Date.now(),!(vt&&Le&&e.keyCode==13)))if(e.keyCode!=229&&r.domObserver.forceFlush(),fn&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){var n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(function(){r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",function(i){return i(r,Zr(13,"Enter"))}),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",function(i){return i(r,e)})||ay(r,e)?e.preventDefault():Qt(r,"key")};Ie.keyup=function(r,t){t.keyCode==16&&(r.input.shiftKey=!1)};Ie.keypress=function(r,t){var e=t;if(!(Sh(r,e)||!e.charCode||e.ctrlKey&&!e.altKey||Ke&&e.metaKey)){if(r.someProp("handleKeyPress",function(a){return a(r,e)})){e.preventDefault();return}var n=r.state.selection;if(!(n instanceof H.TextSelection)||!n.$from.sameParent(n.$to)){var i=String.fromCharCode(e.charCode);r.someProp("handleTextInput",function(a){return a(r,n.$from.pos,n.$to.pos,i)})||r.dispatch(r.state.tr.insertText(i).scrollIntoView()),e.preventDefault()}}};function Ca(r){return{left:r.clientX,top:r.clientY}}function gy(r,t){var e=t.x-r.clientX,n=t.y-r.clientY;return e*e+n*n<100}function Vs(r,t,e,n,i){if(n==-1)return!1;for(var a=r.state.doc.resolve(n),o=function(c){if(r.someProp(t,function(f){return c>a.depth?f(r,e,a.nodeAfter,a.before(c),i,!0):f(r,e,a.node(c),a.before(c),i,!1)}))return{v:!0}},s=a.depth+1;s>0;s--){var l=o(s);if(cn(l)==="object")return l.v}return!1}function on(r,t,e){r.focused||r.focus();var n=r.state.tr.setSelection(t);e=="pointer"&&n.setMeta("pointer",!0),r.dispatch(n)}function yy(r,t){if(t==-1)return!1;var e=r.state.doc.resolve(t),n=e.nodeAfter;return n&&n.isAtom&&H.NodeSelection.isSelectable(n)?(on(r,new H.NodeSelection(e),"pointer"),!0):!1}function by(r,t){if(t==-1)return!1;var e=r.state.selection,n,i;e instanceof H.NodeSelection&&(n=e.node);for(var a=r.state.doc.resolve(t),o=a.depth+1;o>0;o--){var s=o>a.depth?a.nodeAfter:a.node(o);if(H.NodeSelection.isSelectable(s)){n&&e.$from.depth>0&&o>=e.$from.depth&&a.before(e.$from.depth+1)==e.$from.pos?i=a.before(e.$from.depth):i=a.before(o);break}}return i!=null?(on(r,H.NodeSelection.create(r.state.doc,i),"pointer"),!0):!1}function ky(r,t,e,n,i){return Vs(r,"handleClickOn",t,e,n)||r.someProp("handleClick",function(a){return a(r,t,n)})||(i?by(r,e):yy(r,e))}function wy(r,t,e,n){return Vs(r,"handleDoubleClickOn",t,e,n)||r.someProp("handleDoubleClick",function(i){return i(r,t,n)})}function Cy(r,t,e,n){return Vs(r,"handleTripleClickOn",t,e,n)||r.someProp("handleTripleClick",function(i){return i(r,t,n)})||Ty(r,e,n)}function Ty(r,t,e){if(e.button!=0)return!1;var n=r.state.doc;if(t==-1)return n.inlineContent?(on(r,H.TextSelection.create(n,0,n.content.size),"pointer"),!0):!1;for(var i=n.resolve(t),a=i.depth+1;a>0;a--){var o=a>i.depth?i.nodeAfter:i.node(a),s=i.before(a);if(o.inlineContent)on(r,H.TextSelection.create(n,s+1,s+1+o.content.size),"pointer");else if(H.NodeSelection.isSelectable(o))on(r,H.NodeSelection.create(n,s),"pointer");else continue;return!0}}function Us(r){return Xn(r)}var xh=Ke?"metaKey":"ctrlKey";Ae.mousedown=function(r,t){var e=t;r.input.shiftKey=e.shiftKey;var n=Us(r),i=Date.now(),a="singleClick";i-r.input.lastClick.time<500&&gy(e,r.input.lastClick)&&!e[xh]&&(r.input.lastClick.type=="singleClick"?a="doubleClick":r.input.lastClick.type=="doubleClick"&&(a="tripleClick")),r.input.lastClick={time:i,x:e.clientX,y:e.clientY,type:a};var o=r.posAtCoords(Ca(e));!o||(a=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new xy(r,o,e,!!n)):(a=="doubleClick"?wy:Cy)(r,o.pos,o.inside,e)?e.preventDefault():Qt(r,"pointer"))};var xy=function(){function r(t,e,n,i){var a=this;Z(this,r),this.view=t,this.pos=e,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[xh],this.allowDefault=n.shiftKey;var o,s;if(e.inside>-1)o=t.state.doc.nodeAt(e.inside),s=e.inside;else{var l=t.state.doc.resolve(e.pos);o=l.parent,s=l.depth?l.before():0}var u=i?null:n.target,c=u?t.docView.nearestDesc(u,!0):null;this.target=c?c.dom:null;var f=t.state.selection;(n.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||f instanceof H.NodeSelection&&f.from<=s&&f.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&lt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){a.view.input.mouseDown==a&&a.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qt(t,"pointer")}return ee(r,[{key:"done",value:function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(function(){return Rt(e.view)}),this.view.input.mouseDown=null}},{key:"up",value:function(e){if(this.done(),!!this.view.dom.contains(e.target)){var n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ca(e))),this.updateAllowDefault(e),this.allowDefault||!n?Qt(this.view,"pointer"):ky(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Fe&&this.mightDrag&&!this.mightDrag.node.isAtom||Le&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(on(this.view,H.Selection.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Qt(this.view,"pointer")}}},{key:"move",value:function(e){this.updateAllowDefault(e),Qt(this.view,"pointer"),e.buttons==0&&this.done()}},{key:"updateAllowDefault",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}]),r}();Ae.touchstart=function(r){r.input.lastTouch=Date.now(),Us(r),Qt(r,"pointer")};Ae.touchmove=function(r){r.input.lastTouch=Date.now(),Qt(r,"pointer")};Ae.contextmenu=function(r){return Us(r)};function Sh(r,t){return r.composing?!0:Fe&&Math.abs(t.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}var Sy=vt?5e3:-1;Ie.compositionstart=Ie.compositionupdate=function(r){if(!r.composing){r.domObserver.flush();var t=r.state,e=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(function(s){return s.type.spec.inclusive===!1})))r.markCursor=r.state.storedMarks||e.marks(),Xn(r,!0),r.markCursor=null;else if(Xn(r),lt&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length)for(var n=r.domSelection(),i=n.focusNode,a=n.focusOffset;i&&i.nodeType==1&&a!=0;){var o=a<0?i.lastChild:i.childNodes[a-1];if(!o)break;if(o.nodeType==3){n.collapse(o,o.nodeValue.length);break}else i=o,a=-1}r.input.composing=!0}Eh(r,Sy)};Ie.compositionend=function(r,t){r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=t.timeStamp,Eh(r,20))};function Eh(r,t){clearTimeout(r.input.composingTimeout),t>-1&&(r.input.composingTimeout=setTimeout(function(){return Xn(r)},t))}function Mh(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=Ey());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function Ey(){var r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function Xn(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(vt&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),Mh(r),t||r.docView&&r.docView.dirty){var e=Fs(r);return e&&!e.eq(r.state.selection)?r.dispatch(r.state.tr.setSelection(e)):r.updateState(r.state),!0}return!1}}function My(r,t){if(!!r.dom.parentNode){var e=r.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),i=document.createRange();i.selectNodeContents(t),r.dom.blur(),n.removeAllRanges(),n.addRange(i),setTimeout(function(){e.parentNode&&e.parentNode.removeChild(e),r.focus()},50)}}var dn=He&&Xt<15||fn&&Sg<604;Ae.copy=Ie.cut=function(r,t){var e=t,n=r.state.selection,i=e.type=="cut";if(!n.empty){var a=dn?null:e.clipboardData,o=n.content(),s=_s(r,o),l=s.dom,u=s.text;a?(e.preventDefault(),a.clearData(),a.setData("text/html",l.innerHTML),a.setData("text/plain",u)):My(r,l),i&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}};function Oy(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function Ny(r,t){if(!!r.dom.parentNode){var e=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(function(){r.focus(),n.parentNode&&n.parentNode.removeChild(n),e?as(r,n.value,null,t):as(r,n.textContent,n.innerHTML,t)},50)}}function as(r,t,e,n){var i=$s(r,t,e,r.input.shiftKey,r.state.selection.$from);if(r.someProp("handlePaste",function(s){return s(r,n,i||j.Slice.empty)}))return!0;if(!i)return!1;var a=Oy(i),o=a?r.state.tr.replaceSelectionWith(a,r.input.shiftKey):r.state.tr.replaceSelection(i);return r.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}Ie.paste=function(r,t){var e=t;if(!(r.composing&&!vt)){var n=dn?null:e.clipboardData;n&&as(r,n.getData("text/plain"),n.getData("text/html"),e)?e.preventDefault():Ny(r,e)}};var Dy=ee(function r(t,e){Z(this,r),this.slice=t,this.move=e}),Oh=Ke?"altKey":"ctrlKey";Ae.dragstart=function(r,t){var e=t,n=r.input.mouseDown;if(n&&n.done(),!!e.dataTransfer){var i=r.state.selection,a=i.empty?null:r.posAtCoords(Ca(e));if(!(a&&a.pos>=i.from&&a.pos<=(i instanceof H.NodeSelection?i.to-1:i.to))){if(n&&n.mightDrag)r.dispatch(r.state.tr.setSelection(H.NodeSelection.create(r.state.doc,n.mightDrag.pos)));else if(e.target&&e.target.nodeType==1){var o=r.docView.nearestDesc(e.target,!0);o&&o.node.type.spec.draggable&&o!=r.docView&&r.dispatch(r.state.tr.setSelection(H.NodeSelection.create(r.state.doc,o.posBefore)))}}var s=r.state.selection.content(),l=_s(r,s),u=l.dom,c=l.text;e.dataTransfer.clearData(),e.dataTransfer.setData(dn?"Text":"text/html",u.innerHTML),e.dataTransfer.effectAllowed="copyMove",dn||e.dataTransfer.setData("text/plain",c),r.dragging=new Dy(s,!e[Oh])}};Ae.dragend=function(r){var t=r.dragging;window.setTimeout(function(){r.dragging==t&&(r.dragging=null)},50)};Ie.dragover=Ie.dragenter=function(r,t){return t.preventDefault()};Ie.drop=function(r,t){var e=t,n=r.dragging;if(r.dragging=null,!!e.dataTransfer){var i=r.posAtCoords(Ca(e));if(!!i){var a=r.state.doc.resolve(i.pos),o=n&&n.slice;o?r.someProp("transformPasted",function(v){o=v(o)}):o=$s(r,e.dataTransfer.getData(dn?"Text":"text/plain"),dn?null:e.dataTransfer.getData("text/html"),!1,a);var s=!!(n&&!e[Oh]);if(r.someProp("handleDrop",function(v){return v(r,e,o||j.Slice.empty,s)})){e.preventDefault();return}if(!!o){e.preventDefault();var l=o?Tg.dropPoint(r.state.doc,a.pos,o):a.pos;l==null&&(l=a.pos);var u=r.state.tr;s&&u.deleteSelection();var c=u.mapping.map(l),f=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,d=u.doc;if(f?u.replaceRangeWith(c,c,o.content.firstChild):u.replaceRange(c,c,o),!u.doc.eq(d)){var h=u.doc.resolve(c);if(f&&H.NodeSelection.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))u.setSelection(new H.NodeSelection(h));else{var p=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach(function(v,m,g,k){return p=k}),u.setSelection(qs(r,h,u.doc.resolve(p)))}r.focus(),r.dispatch(u.setMeta("uiEvent","drop"))}}}}};Ae.focus=function(r){r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(function(){r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelection())&&Rt(r)},20))};Ae.blur=function(r,t){var e=t;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),e.relatedTarget&&r.dom.contains(e.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};Ae.beforeinput=function(r,t){var e=t;if(Le&&vt&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();var n=r.input.domChangeCount;setTimeout(function(){if(r.input.domChangeCount==n&&(r.dom.blur(),r.focus(),!r.someProp("handleKeyDown",function(a){return a(r,Zr(8,"Backspace"))}))){var i=r.state.selection.$cursor;i&&i.pos>0&&r.dispatch(r.state.tr.delete(i.pos-1,i.pos).scrollIntoView())}},50)}};for(var Bu in Ie)Ae[Bu]=Ie[Bu];function Yn(r,t){if(r==t)return!0;for(var e in r)if(r[e]!==t[e])return!1;for(var n in t)if(!(n in r))return!1;return!0}var Ly=function(){function r(t,e){Z(this,r),this.toDOM=t,this.spec=e||wr,this.side=this.spec.side||0}return ee(r,[{key:"map",value:function(e,n,i,a){var o=e.mapResult(n.from+a,this.side<0?-1:1),s=o.pos,l=o.deleted;return l?null:new Hr(s-i,s-i,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(e){return this==e||e instanceof r&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Yn(this.spec,e.spec))}},{key:"destroy",value:function(e){this.spec.destroy&&this.spec.destroy(e)}}]),r}(),Un=function(){function r(t,e){Z(this,r),this.attrs=t,this.spec=e||wr}return ee(r,[{key:"map",value:function(e,n,i,a){var o=e.map(n.from+a,this.spec.inclusiveStart?-1:1)-i,s=e.map(n.to+a,this.spec.inclusiveEnd?1:-1)-i;return o>=s?null:new Hr(o,s,this)}},{key:"valid",value:function(e,n){return n.from<n.to}},{key:"eq",value:function(e){return this==e||e instanceof r&&Yn(this.attrs,e.attrs)&&Yn(this.spec,e.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(e){return e.type instanceof r}}]),r}(),Ay=function(){function r(t,e){Z(this,r),this.attrs=t,this.spec=e||wr}return ee(r,[{key:"map",value:function(e,n,i,a){var o=e.mapResult(n.from+a,1);if(o.deleted)return null;var s=e.mapResult(n.to+a,-1);return s.deleted||s.pos<=o.pos?null:new Hr(o.pos-i,s.pos-i,this)}},{key:"valid",value:function(e,n){var i=e.content.findIndex(n.from),a=i.index,o=i.offset,s;return o==n.from&&!(s=e.child(a)).isText&&o+s.nodeSize==n.to}},{key:"eq",value:function(e){return this==e||e instanceof r&&Yn(this.attrs,e.attrs)&&Yn(this.spec,e.spec)}},{key:"destroy",value:function(){}}]),r}(),Hr=function(){function r(t,e,n){Z(this,r),this.from=t,this.to=e,this.type=n}return ee(r,[{key:"copy",value:function(e,n){return new r(e,n,this.type)}},{key:"eq",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}},{key:"map",value:function(e,n,i){return this.type.map(e,this,n,i)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Un}}],[{key:"widget",value:function(e,n,i){return new r(e,e,new Ly(n,i))}},{key:"inline",value:function(e,n,i,a){return new r(e,n,new Un(i,a))}},{key:"node",value:function(e,n,i,a){return new r(e,n,new Ay(i,a))}}]),r}(),Xr=[],wr={},Ft=function(){function r(t,e){Z(this,r),this.local=t.length?t:Xr,this.children=e.length?e:Xr}return ee(r,[{key:"find",value:function(e,n,i){var a=[];return this.findInner(e==null?0:e,n==null?1e9:n,a,0,i),a}},{key:"findInner",value:function(e,n,i,a,o){for(var s=0;s<this.local.length;s++){var l=this.local[s];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&i.push(l.copy(l.from+a,l.to+a))}for(var u=0;u<this.children.length;u+=3)if(this.children[u]<n&&this.children[u+1]>e){var c=this.children[u]+1;this.children[u+2].findInner(e-c,n-c,i,a+c,o)}}},{key:"map",value:function(e,n,i){return this==Se||e.maps.length==0?this:this.mapInner(e,n,0,0,i||wr)}},{key:"mapInner",value:function(e,n,i,a,o){for(var s,l=0;l<this.local.length;l++){var u=this.local[l].map(e,i,a);u&&u.type.valid(n,u)?(s||(s=[])).push(u):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?Iy(this.children,s||[],e,n,i,a,o):s?new r(s.sort(Cr),Xr):Se}},{key:"add",value:function(e,n){return n.length?this==Se?r.create(e,n):this.addInner(e,n,0):this}},{key:"addInner",value:function(e,n,i){var a=this,o,s=0;e.forEach(function(c,f){var d=f+i,h;if(!!(h=Lh(n,c,d))){for(o||(o=a.children.slice());s<o.length&&o[s]<f;)s+=3;o[s]==f?o[s+2]=o[s+2].addInner(c,h,d+1):o.splice(s,0,f,f+c.nodeSize,Xi(h,c,d+1,wr)),s+=3}});for(var l=Dh(s?Ah(n):n,-i),u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new r(l.length?this.local.concat(l).sort(Cr):this.local,o||this.children)}},{key:"remove",value:function(e){return e.length==0||this==Se?this:this.removeInner(e,0)}},{key:"removeInner",value:function(e,n){for(var i=this.children,a=this.local,o=0;o<i.length;o+=3){for(var s=void 0,l=i[o]+n,u=i[o+1]+n,c=0,f;c<e.length;c++)(f=e[c])&&f.from>l&&f.to<u&&(e[c]=null,(s||(s=[])).push(f));if(!!s){i==this.children&&(i=this.children.slice());var d=i[o+2].removeInner(s,l+1);d!=Se?i[o+2]=d:(i.splice(o,3),o-=3)}}if(a.length){for(var h=0,p;h<e.length;h++)if(p=e[h])for(var v=0;v<a.length;v++)a[v].eq(p,n)&&(a==this.local&&(a=this.local.slice()),a.splice(v--,1))}return i==this.children&&a==this.local?this:a.length||i.length?new r(a,i):Se}},{key:"forChild",value:function(e,n){if(this==Se)return this;if(n.isLeaf)return r.empty;for(var i,a,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(i=this.children[o+2]);break}for(var s=e+1,l=s+n.content.size,u=0;u<this.local.length;u++){var c=this.local[u];if(c.from<l&&c.to>s&&c.type instanceof Un){var f=Math.max(s,c.from)-s,d=Math.min(l,c.to)-s;f<d&&(a||(a=[])).push(c.copy(f,d))}}if(a){var h=new r(a.sort(Cr),Xr);return i?new Nh([h,i]):h}return i||Se}},{key:"eq",value:function(e){if(this==e)return!0;if(!(e instanceof r)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(var i=0;i<this.children.length;i+=3)if(this.children[i]!=e.children[i]||this.children[i+1]!=e.children[i+1]||!this.children[i+2].eq(e.children[i+2]))return!1;return!0}},{key:"locals",value:function(e){return Ws(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==Se)return Xr;if(e.inlineContent||!this.local.some(Un.is))return this.local;for(var n=[],i=0;i<this.local.length;i++)this.local[i].type instanceof Un||n.push(this.local[i]);return n}}],[{key:"create",value:function(e,n){return n.length?Xi(n,e,0,wr):Se}}]),r}();Ft.empty=new Ft([],[]);Ft.removeOverlap=Ws;var Se=Ft.empty,Nh=function(){function r(t){Z(this,r),this.members=t}return ee(r,[{key:"map",value:function(e,n){var i=this.members.map(function(a){return a.map(e,n,wr)});return r.from(i)}},{key:"forChild",value:function(e,n){if(n.isLeaf)return Ft.empty;for(var i=[],a=0;a<this.members.length;a++){var o=this.members[a].forChild(e,n);o!=Se&&(o instanceof r?i=i.concat(o.members):i.push(o))}return r.from(i)}},{key:"eq",value:function(e){if(!(e instanceof r)||e.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var n,i=!0,a=0;a<this.members.length;a++){var o=this.members[a].localsInner(e);if(!!o.length)if(!n)n=o;else{i&&(n=n.slice(),i=!1);for(var s=0;s<o.length;s++)n.push(o[s])}}return n?Ws(i?n:n.sort(Cr)):Xr}}],[{key:"from",value:function(e){switch(e.length){case 0:return Se;case 1:return e[0];default:return new r(e)}}}]),r}();function Iy(r,t,e,n,i,a,o){for(var s=r.slice(),l=function(ft,U){var J=0;e.maps[ft].forEach(function(or,fi,di,Ha){for(var sr=Ha-di-(fi-or),Ze=0;Ze<s.length;Ze+=3){var ne=s[Ze+1];if(!(ne<0||or>ne+U-J)){var Sn=s[Ze]+U-J;fi>=Sn?s[Ze+1]=or<=Sn?-2:-1:di>=i&&sr&&(s[Ze]+=sr,s[Ze+1]+=sr)}}J+=sr}),U=e.maps[ft].map(U,-1),c=U},u=0,c=a;u<e.maps.length;u++)l(u,c);for(var f=!1,d=0;d<s.length;d+=3)if(s[d+1]<0){if(s[d+1]==-2){f=!0,s[d+1]=-1;continue}var h=e.map(r[d]+a),p=h-i;if(p<0||p>=n.content.size){f=!0;continue}var v=e.map(r[d+1]+a,-1),m=v-i,g=n.content.findIndex(p),k=g.index,b=g.offset,C=n.maybeChild(k);if(C&&b==p&&b+C.nodeSize==m){var T=s[d+2].mapInner(e,C,h+1,r[d]+a+1,o);T!=Se?(s[d]=p,s[d+1]=m,s[d+2]=T):(s[d+1]=-2,f=!0)}else f=!0}if(f){var S=Ry(s,r,t,e,i,a,o),M=Xi(S,n,0,o);t=M.local;for(var N=0;N<s.length;N+=3)s[N+1]<0&&(s.splice(N,3),N-=3);for(var R=0,P=0;R<M.children.length;R+=3){for(var V=M.children[R];P<s.length&&s[P]<V;)P+=3;s.splice(P,0,M.children[R],M.children[R+1],M.children[R+2])}}return new Ft(t.sort(Cr),s)}function Dh(r,t){if(!t||!r.length)return r;for(var e=[],n=0;n<r.length;n++){var i=r[n];e.push(new Hr(i.from+t,i.to+t,i.type))}return e}function Ry(r,t,e,n,i,a,o){function s(u,c){for(var f=0;f<u.local.length;f++){var d=u.local[f].map(n,i,c);d?e.push(d):o.onRemove&&o.onRemove(u.local[f].spec)}for(var h=0;h<u.children.length;h+=3)s(u.children[h+2],u.children[h]+c+1)}for(var l=0;l<r.length;l+=3)r[l+1]==-1&&s(r[l+2],t[l]+a+1);return e}function Lh(r,t,e){if(t.isLeaf)return null;for(var n=e+t.nodeSize,i=null,a=0,o;a<r.length;a++)(o=r[a])&&o.from>e&&o.to<n&&((i||(i=[])).push(o),r[a]=null);return i}function Ah(r){for(var t=[],e=0;e<r.length;e++)r[e]!=null&&t.push(r[e]);return t}function Xi(r,t,e,n){var i=[],a=!1;t.forEach(function(l,u){var c=Lh(r,l,u+e);if(c){a=!0;var f=Xi(c,l,e+u+1,n);f!=Se&&i.push(u,u+l.nodeSize,f)}});for(var o=Dh(a?Ah(r):r,-e).sort(Cr),s=0;s<o.length;s++)o[s].type.valid(t,o[s])||(n.onRemove&&n.onRemove(o[s].spec),o.splice(s--,1));return o.length||i.length?new Ft(o,i):Se}function Cr(r,t){return r.from-t.from||r.to-t.to}function Ws(r){for(var t=r,e=0;e<t.length-1;e++){var n=t[e];if(n.from!=n.to)for(var i=e+1;i<t.length;i++){var a=t[i];if(a.from==n.from){a.to!=n.to&&(t==r&&(t=r.slice()),t[i]=a.copy(a.from,n.to),Hu(t,i+1,a.copy(n.to,a.to)));continue}else{a.from<n.to&&(t==r&&(t=r.slice()),t[e]=n.copy(n.from,a.from),Hu(t,i,n.copy(a.from,n.to)));break}}}return t}function Hu(r,t,e){for(;t<r.length&&Cr(e,r[t])>0;)t++;r.splice(t,0,e)}function co(r){var t=[];return r.someProp("decorations",function(e){var n=e(r.state);n&&n!=Se&&t.push(n)}),r.cursorWrapper&&t.push(Ft.create(r.state.doc,[r.cursorWrapper.deco])),Nh.from(t)}var Py={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},By=He&&Xt<=11,Hy=function(){function r(){Z(this,r),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return ee(r,[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}]),r}(),Fy=function(){function r(t,e){var n=this;Z(this,r),this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Hy,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(function(i){for(var a=0;a<i.length;a++)n.queue.push(i[a]);He&&Xt<=11&&i.some(function(o){return o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length})?n.flushSoon():n.flush()}),By&&(this.onCharData=function(i){n.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}return ee(r,[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){e.flushingSoon=-1,e.flush()},20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Py)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var n=this.observer.takeRecords();if(n.length){for(var i=0;i<n.length;i++)this.queue.push(n[i]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)}},{key:"onSelectionChange",value:function(){if(!!Nu(this.view)){if(this.suppressingSelectionUpdates)return Rt(this.view);if(He&&Xt<=11&&!this.view.state.selection.empty){var e=this.view.domSelection();if(e.focusNode&&Kn(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelection())}},{key:"ignoreSelectionChange",value:function(e){if(e.rangeCount==0)return!0;var n=e.getRangeAt(0).commonAncestorContainer,i=this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}},{key:"flush",value:function(){var e=this.view;if(!(!e.docView||this.flushingSoon>-1)){var n=this.observer?this.observer.takeRecords():[];this.queue.length&&(n=this.queue.concat(n),this.queue.length=0);var i=e.domSelection(),a=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&Nu(e)&&!this.ignoreSelectionChange(i),o=-1,s=-1,l=!1,u=[];if(e.editable)for(var c=0;c<n.length;c++){var f=this.registerMutation(n[c],u);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(l=!0))}if(lt&&u.length>1){var d=u.filter(function(m){return m.nodeName=="BR"});if(d.length==2){var h=d[0],p=d[1];h.parentNode&&h.parentNode.parentNode==p.parentNode?p.remove():h.remove()}}var v=null;o<0&&a&&e.input.lastFocus>Date.now()-200&&e.input.lastTouch<Date.now()-300&&wa(i)&&(v=Fs(e))&&v.eq(H.Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Rt(e),this.currentSelection.set(i),e.scrollToSelection()):(o>-1||a)&&(o>-1&&(e.docView.markDirty(o,s),qy(e)),this.handleDOMChange(o,s,l,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Rt(e),this.currentSelection.set(i))}}},{key:"registerMutation",value:function(e,n){if(n.indexOf(e.target)>-1)return null;var i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(var a=0;a<e.addedNodes.length;a++)n.push(e.addedNodes[a]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};var o=e.previousSibling,s=e.nextSibling;if(He&&Xt<=11&&e.addedNodes.length)for(var l=0;l<e.addedNodes.length;l++){var u=e.addedNodes[l],c=u.previousSibling,f=u.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(o=c),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}var d=o&&o.parentNode==e.target?$e(o)+1:0,h=i.localPosFromDOM(e.target,d,-1),p=s&&s.parentNode==e.target?$e(s):e.target.childNodes.length,v=i.localPosFromDOM(e.target,p,1);return{from:h,to:v}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}]),r}(),Fu=new WeakMap,qu=!1;function qy(r){if(!Fu.has(r)&&(Fu.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=lt,qu)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qu=!0}}function _y(r,t,e){var n=r.docView.parseRange(t,e),i=n.node,a=n.fromOffset,o=n.toOffset,s=n.from,l=n.to,u=r.domSelection(),c,f=u.anchorNode;if(f&&r.dom.contains(f.nodeType==1?f:f.parentNode)&&(c=[{node:f,offset:u.anchorOffset}],wa(u)||c.push({node:u.focusNode,offset:u.focusOffset})),Le&&r.input.lastKeyCode===8)for(var d=o;d>a;d--){var h=i.childNodes[d-1],p=h.pmViewDesc;if(h.nodeName=="BR"&&!p){o=d;break}if(!p||p.size)break}var v=r.state.doc,m=r.someProp("domParser")||j.DOMParser.fromSchema(r.state.schema),g=v.resolve(s),k=null,b=m.parse(i,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:a,to:o,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:$y,context:g});if(c&&c[0].pos!=null){var C=c[0].pos,T=c[1]&&c[1].pos;T==null&&(T=C),k={anchor:C+s,head:T+s}}return{doc:b,sel:k,from:s,to:l}}function $y(r){var t=r.pmViewDesc;if(t)return t.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(Fe&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){var e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(r.parentNode.lastChild==r||Fe&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}function zy(r,t,e,n,i){if(t<0){var a=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,o=Fs(r,a);if(o&&!r.state.selection.eq(o)){var s=r.state.tr.setSelection(o);a=="pointer"?s.setMeta("pointer",!0):a=="key"&&s.scrollIntoView(),r.dispatch(s)}return}var l=r.state.doc.resolve(t),u=l.sharedDepth(e);t=l.before(u+1),e=r.state.doc.resolve(e).after(u+1);var c=r.state.selection,f=_y(r,t,e),d=r.state.doc,h=d.slice(f.from,f.to),p,v;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(p=r.state.selection.to,v="end"):(p=r.state.selection.from,v="start"),r.input.lastKeyCode=null;var m=Wy(h.content,f.doc.content,f.from,p,v);if((fn&&r.input.lastIOSEnter>Date.now()-225||vt)&&i.some(function(J){return J.nodeName=="DIV"||J.nodeName=="P"})&&(!m||m.endA>=m.endB)&&r.someProp("handleKeyDown",function(J){return J(r,Zr(13,"Enter"))})){r.input.lastIOSEnter=0;return}if(!m)if(n&&c instanceof H.TextSelection&&!c.empty&&c.$head.sameParent(c.$anchor)&&!r.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))m={start:c.from,endA:c.to,endB:c.to};else{if(f.sel){var g=_u(r,r.state.doc,f.sel);g&&!g.eq(r.state.selection)&&r.dispatch(r.state.tr.setSelection(g))}return}if(Le&&r.cursorWrapper&&f.sel&&f.sel.anchor==r.cursorWrapper.deco.from&&f.sel.head==f.sel.anchor){var k=m.endB-m.start;f.sel={anchor:f.sel.anchor+k,head:f.sel.anchor+k}}r.input.domChangeCount++,r.state.selection.from<r.state.selection.to&&m.start==m.endB&&r.state.selection instanceof H.TextSelection&&(m.start>r.state.selection.from&&m.start<=r.state.selection.from+2&&r.state.selection.from>=f.from?m.start=r.state.selection.from:m.endA<r.state.selection.to&&m.endA>=r.state.selection.to-2&&r.state.selection.to<=f.to&&(m.endB+=r.state.selection.to-m.endA,m.endA=r.state.selection.to)),He&&Xt<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>f.from&&f.doc.textBetween(m.start-f.from-1,m.start-f.from+1)==" \xA0"&&(m.start--,m.endA--,m.endB--);var b=f.doc.resolveNoCache(m.start-f.from),C=f.doc.resolveNoCache(m.endB-f.from),T=d.resolve(m.start),S=b.sameParent(C)&&b.parent.inlineContent&&T.end()>=m.endA,M;if((fn&&r.input.lastIOSEnter>Date.now()-225&&(!S||i.some(function(J){return J.nodeName=="DIV"||J.nodeName=="P"}))||!S&&b.pos<f.doc.content.size&&(M=H.Selection.findFrom(f.doc.resolve(b.pos+1),1,!0))&&M.head==C.pos)&&r.someProp("handleKeyDown",function(J){return J(r,Zr(13,"Enter"))})){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>m.start&&Uy(d,m.start,m.endA,b,C)&&r.someProp("handleKeyDown",function(J){return J(r,Zr(8,"Backspace"))})){vt&&Le&&r.domObserver.suppressSelectionUpdates();return}Le&&vt&&m.endB==m.start&&(r.input.lastAndroidDelete=Date.now()),vt&&!S&&b.start()!=C.start()&&C.parentOffset==0&&b.depth==C.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==m.endA&&(m.endB-=2,C=f.doc.resolveNoCache(m.endB-f.from),setTimeout(function(){r.someProp("handleKeyDown",function(J){return J(r,Zr(13,"Enter"))})},20));var N=m.start,R=m.endA,P,V,le;if(S){if(b.pos==C.pos)He&&Xt<=11&&b.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(function(){return Rt(r)},20)),P=r.state.tr.delete(N,R),V=d.resolve(m.start).marksAcross(d.resolve(m.endA));else if(m.endA==m.endB&&(le=Vy(b.parent.content.cut(b.parentOffset,C.parentOffset),T.parent.content.cut(T.parentOffset,m.endA-T.start()))))P=r.state.tr,le.type=="add"?P.addMark(N,R,le.mark):P.removeMark(N,R,le.mark);else if(b.parent.child(b.index()).isText&&b.index()==C.index()-(C.textOffset?0:1)){var ft=b.parent.textBetween(b.parentOffset,C.parentOffset);if(r.someProp("handleTextInput",function(J){return J(r,N,R,ft)}))return;P=r.state.tr.insertText(ft,N,R)}}if(P||(P=r.state.tr.replace(N,R,f.doc.slice(m.start-f.from,m.endB-f.from))),f.sel){var U=_u(r,P.doc,f.sel);U&&!(Le&&vt&&r.composing&&U.empty&&(m.start!=m.endB||r.input.lastAndroidDelete<Date.now()-100)&&(U.head==N||U.head==P.mapping.map(R)-1)||He&&U.empty&&U.head==N)&&P.setSelection(U)}V&&P.ensureMarks(V),r.dispatch(P.scrollIntoView())}function _u(r,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:qs(r,t.resolve(e.anchor),t.resolve(e.head))}function Vy(r,t){for(var e=r.firstChild.marks,n=t.firstChild.marks,i=e,a=n,o,s,l,u=0;u<n.length;u++)i=n[u].removeFromSet(i);for(var c=0;c<e.length;c++)a=e[c].removeFromSet(a);if(i.length==1&&a.length==0)s=i[0],o="add",l=function(p){return p.mark(s.addToSet(p.marks))};else if(i.length==0&&a.length==1)s=a[0],o="remove",l=function(p){return p.mark(s.removeFromSet(p.marks))};else return null;for(var f=[],d=0;d<t.childCount;d++)f.push(l(t.child(d)));if(j.Fragment.from(f).eq(r))return{mark:s,type:o}}function Uy(r,t,e,n,i){if(!n.parent.isTextblock||e-t<=i.pos-n.pos||fo(n,!0,!1)<i.pos)return!1;var a=r.resolve(t);if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;var o=r.resolve(fo(a,!0,!0));return!o.parent.isTextblock||o.pos>e||fo(o,!0,!1)<e?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function fo(r,t,e){for(var n=r.depth,i=t?r.end():r.pos;n>0&&(t||r.indexAfter(n)==r.node(n).childCount);)n--,i++,t=!1;if(e)for(var a=r.node(n).maybeChild(r.indexAfter(n));a&&!a.isLeaf;)a=a.firstChild,i++;return i}function Wy(r,t,e,n,i){var a=r.findDiffStart(t,e);if(a==null)return null;var o=r.findDiffEnd(t,e+r.size,e+t.size),s=o.a,l=o.b;if(i=="end"){var u=Math.max(0,a-Math.min(s,l));n-=s+u-a}if(s<a&&r.size<t.size){var c=n<=a&&n>=s?a-n:0;a-=c,l=a+(l-s),s=a}else if(l<a){var f=n<=a&&n>=l?a-n:0;a-=f,s=a+(s-l),l=a}return{start:a,endA:s,endB:l}}var jy=_s,Gy=$s,Jy=Xn,Ky=function(){function r(t,e){var n=this;Z(this,r),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new dy,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Wu),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Vu(this),zu(this),this.nodeViews=Uu(this),this.docView=Tu(this.state.doc,$u(this),co(this),this.dom,this),this.domObserver=new Fy(this,function(i,a,o,s){return zy(n,i,a,o,s)}),this.domObserver.start(),hy(this),this.updatePluginViews()}return ee(r,[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;this._props={};for(var n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}},{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&is(this),this._props=e,e.plugins&&(e.plugins.forEach(Wu),this.directPlugins=e.plugins),this.updateStateInner(e.state,!0)}},{key:"setProps",value:function(e){var n={};for(var i in this._props)n[i]=this._props[i];n.state=this.state;for(var a in e)n[a]=e[a];this.update(n)}},{key:"updateState",value:function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)}},{key:"updateStateInner",value:function(e,n){var i=this.state,a=!1,o=!1;if(e.storedMarks&&this.composing&&(Mh(this),o=!0),this.state=e,n){var s=Uu(this);Xy(s,this.nodeViews)&&(this.nodeViews=s,a=!0),is(this)}this.editable=Vu(this),zu(this);var l=co(this),u=$u(this),c=n?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=a||!this.docView.matchesNode(e.doc,u,l);(f||!e.selection.eq(i.selection))&&(o=!0);var d=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Lg(this);if(o){this.domObserver.stop();var h=f&&(He||Le)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Qy(i.selection,e.selection);if(f){var p=Le?this.trackWrites=this.domSelection().focusNode:null;(a||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Tu(e.doc,u,l,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&ry(this))?Rt(this,h):(mh(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&Ag(d)}},{key:"scrollToSelection",value:function(){var e=this,n=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",function(a){return a(e)}))if(this.state.selection instanceof H.NodeSelection){var i=this.docView.domAfterPos(this.state.selection.from);i.nodeType==1&&yu(this,i.getBoundingClientRect(),n)}else yu(this,this.coordsAtPos(this.state.selection.head,1),n)}},{key:"destroyPluginViews",value:function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var n=0;n<this.directPlugins.length;n++){var i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(var a=0;a<this.state.plugins.length;a++){var o=this.state.plugins[a];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}else for(var s=0;s<this.pluginViews.length;s++){var l=this.pluginViews[s];l.update&&l.update(this,e)}}},{key:"someProp",value:function(e,n){var i=this._props&&this._props[e],a;if(i!=null&&(a=n?n(i):i))return a;for(var o=0;o<this.directPlugins.length;o++){var s=this.directPlugins[o].props[e];if(s!=null&&(a=n?n(s):s))return a}var l=this.state.plugins;if(l)for(var u=0;u<l.length;u++){var c=l[u].props[e];if(c!=null&&(a=n?n(c):c))return a}}},{key:"hasFocus",value:function(){if(He){var e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&Ig(this.dom),Rt(this),this.domObserver.start()}},{key:"root",get:function(){var e=this,n=this._root;if(n==null)for(var i=function(l){if(l.nodeType==9||l.nodeType==11&&l.host)return l.getSelection||(Object.getPrototypeOf(l).getSelection=function(){return l.ownerDocument.getSelection()}),{v:e._root=l}},a=this.dom.parentNode;a;a=a.parentNode){var o=i(a);if(cn(o)==="object")return o.v}return n||document}},{key:"posAtCoords",value:function(e){return Fg(this,e)}},{key:"coordsAtPos",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return sh(this,e,n)}},{key:"domAtPos",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.docView.domFromPos(e,n)}},{key:"nodeDOM",value:function(e){var n=this.docView.descAt(e);return n?n.nodeDOM:null}},{key:"posAtDOM",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,a=this.docView.posFromDOM(e,n,i);if(a==null)throw new RangeError("DOM position not inside the editor");return a}},{key:"endOfTextblock",value:function(e,n){return Vg(this,n||this.state,e)}},{key:"destroy",value:function(){!this.docView||(py(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],co(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}},{key:"isDestroyed",get:function(){return this.docView==null}},{key:"dispatchEvent",value:function(e){return my(this,e)}},{key:"dispatch",value:function(e){var n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}},{key:"domSelection",value:function(){return this.root.getSelection()}}]),r}();function $u(r){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(r.editable),t.translate="no",r.someProp("attributes",function(e){if(typeof e=="function"&&(e=e(r.state)),e)for(var n in e)n=="class"&&(t.class+=" "+e[n]),n=="style"?t.style=(t.style?t.style+";":"")+e[n]:!t[n]&&n!="contenteditable"&&n!="nodeName"&&(t[n]=String(e[n]))}),[Hr.node(0,r.state.doc.content.size,t)]}function zu(r){if(r.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),r.cursorWrapper={dom:t,deco:Hr.widget(r.state.selection.head,t,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function Vu(r){return!r.someProp("editable",function(t){return t(r.state)===!1})}function Qy(r,t){var e=Math.min(r.$anchor.sharedDepth(r.head),t.$anchor.sharedDepth(t.head));return r.$anchor.start(e)!=t.$anchor.start(e)}function Uu(r){var t=Object.create(null);function e(n){for(var i in n)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=n[i])}return r.someProp("nodeViews",e),r.someProp("markViews",e),t}function Xy(r,t){var e=0,n=0;for(var i in r){if(r[i]!=t[i])return!0;e++}for(var a in t)n++;return e!=n}function Wu(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var js=Rr.Decoration=Hr,Gs=Rr.DecorationSet=Ft,Js=Rr.EditorView=Ky;Rr.__endComposition=Jy;Rr.__parseFromClipboard=Gy;Rr.__serializeForClipboard=jy;var Ks={},si={};Object.defineProperty(si,"__esModule",{value:!0});var nr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zn={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ju=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent);var Yy=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),Zy=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),eb=Yy||ju&&+ju[1]<57;for(var me=0;me<10;me++)nr[48+me]=nr[96+me]=String(me);for(var me=1;me<=24;me++)nr[me+111]="F"+me;for(var me=65;me<=90;me++)nr[me]=String.fromCharCode(me+32),Zn[me]=String.fromCharCode(me);for(var ho in nr)Zn.hasOwnProperty(ho)||(Zn[ho]=nr[ho]);function tb(r){var t=eb&&(r.ctrlKey||r.altKey||r.metaKey)||Zy&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",e=!t&&r.key||(r.shiftKey?Zn:nr)[r.keyCode]||r.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}si.base=nr;si.keyName=tb;si.shift=Zn;Object.defineProperty(Ks,"__esModule",{value:!0});var Gu=si,rb=We,nb=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function ib(r){var t=r.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");for(var n,i,a,o,s=0;s<t.length-1;s++){var l=t[s];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))a=!0;else if(/^mod$/i.test(l))nb?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),o&&(e="Meta-"+e),a&&(e="Shift-"+e),e}function ab(r){var t=Object.create(null);for(var e in r)t[ib(e)]=r[e];return t}function po(r,t,e){return t.altKey&&(r="Alt-"+r),t.ctrlKey&&(r="Ctrl-"+r),t.metaKey&&(r="Meta-"+r),e!==!1&&t.shiftKey&&(r="Shift-"+r),r}function ob(r){return new rb.Plugin({props:{handleKeyDown:Ih(r)}})}function Ih(r){var t=ab(r);return function(e,n){var i=Gu.keyName(n),a=i.length==1&&i!=" ",o,s=t[po(i,n,!a)];if(s&&s(e.state,e.dispatch,e))return!0;if(a&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=Gu.base[n.keyCode])&&o!=i){var l=t[po(o,n,!0)];if(l&&l(e.state,e.dispatch,e))return!0}else if(a&&n.shiftKey){var u=t[po(i,n,!0)];if(u&&u(e.state,e.dispatch,e))return!0}return!1}}Ks.keydownHandler=Ih;var ei=Ks.keymap=ob;const Qs=(r,t)=>r.selection.empty?!1:(t&&t(r.tr.deleteSelection().scrollIntoView()),!0),sb=(r,t,e)=>{let{$cursor:n}=r.selection;if(!n||(e?!e.endOfTextblock("backward",r):n.parentOffset>0))return!1;let i=Rh(n);if(!i){let o=n.blockRange(),s=o&&ni(o);return s==null?!1:(t&&t(r.tr.lift(o,s).scrollIntoView()),!0)}let a=i.nodeBefore;if(!a.type.spec.isolating&&qh(r,i,t))return!0;if(n.parent.content.size==0&&(hn(a,"end")||bt.isSelectable(a))){let o=ga(r.doc,n.before(),n.after(),I.empty);if(o&&o.slice.size<o.to-o.from){if(t){let s=r.tr.step(o);s.setSelection(hn(a,"end")?Ct.findFrom(s.doc.resolve(s.mapping.map(i.pos,-1)),-1):bt.create(s.doc,i.pos-a.nodeSize)),t(s.scrollIntoView())}return!0}}return a.isAtom&&i.depth==n.depth-1?(t&&t(r.tr.delete(i.pos-a.nodeSize,i.pos).scrollIntoView()),!0):!1};function hn(r,t,e=!1){for(let n=r;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(e&&n.childCount!=1)return!1}return!1}const lb=(r,t,e)=>{let{$head:n,empty:i}=r.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("backward",r):n.parentOffset>0)return!1;a=Rh(n)}let o=a&&a.nodeBefore;return!o||!bt.isSelectable(o)?!1:(t&&t(r.tr.setSelection(bt.create(r.doc,a.pos-o.nodeSize)).scrollIntoView()),!0)};function Rh(r){if(!r.parent.type.spec.isolating)for(let t=r.depth-1;t>=0;t--){if(r.index(t)>0)return r.doc.resolve(r.before(t+1));if(r.node(t).type.spec.isolating)break}return null}const Ph=(r,t,e)=>{let{$cursor:n}=r.selection;if(!n||(e?!e.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size))return!1;let i=Bh(n);if(!i)return!1;let a=i.nodeAfter;if(qh(r,i,t))return!0;if(n.parent.content.size==0&&(hn(a,"start")||bt.isSelectable(a))){let o=ga(r.doc,n.before(),n.after(),I.empty);if(o&&o.slice.size<o.to-o.from){if(t){let s=r.tr.step(o);s.setSelection(hn(a,"start")?Ct.findFrom(s.doc.resolve(s.mapping.map(i.pos)),1):bt.create(s.doc,s.mapping.map(i.pos))),t(s.scrollIntoView())}return!0}}return a.isAtom&&i.depth==n.depth-1?(t&&t(r.tr.delete(i.pos,i.pos+a.nodeSize).scrollIntoView()),!0):!1},ub=(r,t,e)=>{let{$head:n,empty:i}=r.selection,a=n;if(!i)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size)return!1;a=Bh(n)}let o=a&&a.nodeAfter;return!o||!bt.isSelectable(o)?!1:(t&&t(r.tr.setSelection(bt.create(r.doc,a.pos)).scrollIntoView()),!0)};function Bh(r){if(!r.parent.type.spec.isolating)for(let t=r.depth-1;t>=0;t--){let e=r.node(t);if(r.index(t)+1<e.childCount)return r.doc.resolve(r.after(t+1));if(e.type.spec.isolating)break}return null}const Hh=(r,t)=>{let{$head:e,$anchor:n}=r.selection;return!e.parent.type.spec.code||!e.sameParent(n)?!1:(t&&t(r.tr.insertText(`
`).scrollIntoView()),!0)};function Xs(r){for(let t=0;t<r.edgeCount;t++){let{type:e}=r.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const Ys=(r,t)=>{let{$head:e,$anchor:n}=r.selection;if(!e.parent.type.spec.code||!e.sameParent(n))return!1;let i=e.node(-1),a=e.indexAfter(-1),o=Xs(i.contentMatchAt(a));if(!o||!i.canReplaceWith(a,a,o))return!1;if(t){let s=e.after(),l=r.tr.replaceWith(s,s,o.createAndFill());l.setSelection(Ct.near(l.doc.resolve(s),1)),t(l.scrollIntoView())}return!0},cb=(r,t)=>{let e=r.selection,{$from:n,$to:i}=e;if(e instanceof ii||n.parent.inlineContent||i.parent.inlineContent)return!1;let a=Xs(i.parent.contentMatchAt(i.indexAfter()));if(!a||!a.isTextblock)return!1;if(t){let o=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos,s=r.tr.insert(o,a.createAndFill());s.setSelection(_t.create(s.doc,o+1)),t(s.scrollIntoView())}return!0},fb=(r,t)=>{let{$cursor:e}=r.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let a=e.before();if(br(r.doc,a))return t&&t(r.tr.split(a).scrollIntoView()),!0}let n=e.blockRange(),i=n&&ni(n);return i==null?!1:(t&&t(r.tr.lift(n,i).scrollIntoView()),!0)},db=(r,t)=>{let{$from:e,$to:n}=r.selection;if(r.selection instanceof bt&&r.selection.node.isBlock)return!e.parentOffset||!br(r.doc,e.pos)?!1:(t&&t(r.tr.split(e.pos).scrollIntoView()),!0);if(!e.parent.isBlock)return!1;if(t){let i=n.parentOffset==n.parent.content.size,a=r.tr;(r.selection instanceof _t||r.selection instanceof ii)&&a.deleteSelection();let o=e.depth==0?null:Xs(e.node(-1).contentMatchAt(e.indexAfter(-1))),s=i&&o?[{type:o}]:void 0,l=br(a.doc,a.mapping.map(e.pos),1,s);if(!s&&!l&&br(a.doc,a.mapping.map(e.pos),1,o?[{type:o}]:void 0)&&(o&&(s=[{type:o}]),l=!0),l&&(a.split(a.mapping.map(e.pos),1,s),!i&&!e.parentOffset&&e.parent.type!=o)){let u=a.mapping.map(e.before()),c=a.doc.resolve(u);o&&e.node(-1).canReplaceWith(c.index(),c.index()+1,o)&&a.setNodeMarkup(a.mapping.map(e.before()),o)}t(a.scrollIntoView())}return!0},Fh=(r,t)=>(t&&t(r.tr.setSelection(new ii(r.doc))),!0);function hb(r,t,e){let n=t.nodeBefore,i=t.nodeAfter,a=t.index();return!n||!i||!n.type.compatibleContent(i.type)?!1:!n.content.size&&t.parent.canReplace(a-1,a)?(e&&e(r.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(a,a+1)||!(i.isTextblock||Rs(r.doc,t.pos))?!1:(e&&e(r.tr.clearIncompatible(t.pos,n.type,n.contentMatchAt(n.childCount)).join(t.pos).scrollIntoView()),!0)}function qh(r,t,e){let n=t.nodeBefore,i=t.nodeAfter,a,o;if(n.type.spec.isolating||i.type.spec.isolating)return!1;if(hb(r,t,e))return!0;let s=t.parent.canReplace(t.index(),t.index()+1);if(s&&(a=(o=n.contentMatchAt(n.childCount)).findWrapping(i.type))&&o.matchType(a[0]||i.type).validEnd){if(e){let f=t.pos+i.nodeSize,d=L.empty;for(let v=a.length-1;v>=0;v--)d=L.from(a[v].create(null,d));d=L.from(n.copy(d));let h=r.tr.step(new ce(t.pos-1,f,t.pos,f,new I(d,1,0),a.length,!0)),p=f+2*a.length;Rs(h.doc,p)&&h.join(p),e(h.scrollIntoView())}return!0}let l=Ct.findFrom(t,1),u=l&&l.$from.blockRange(l.$to),c=u&&ni(u);if(c!=null&&c>=t.depth)return e&&e(r.tr.lift(u,c).scrollIntoView()),!0;if(s&&hn(i,"start",!0)&&hn(n,"end")){let f=n,d=[];for(;d.push(f),!f.isTextblock;)f=f.lastChild;let h=i,p=1;for(;!h.isTextblock;h=h.firstChild)p++;if(f.canReplace(f.childCount,f.childCount,h.content)){if(e){let v=L.empty;for(let g=d.length-1;g>=0;g--)v=L.from(d[g].copy(v));let m=r.tr.step(new ce(t.pos-d.length,t.pos+i.nodeSize,t.pos+p,t.pos+i.nodeSize-p,new I(v,d.length,0),0,!0));e(m.scrollIntoView())}return!0}}return!1}function _h(r){return function(t,e){let n=t.selection,i=r<0?n.$from:n.$to,a=i.depth;for(;i.node(a).isInline;){if(!a)return!1;a--}return i.node(a).isTextblock?(e&&e(t.tr.setSelection(_t.create(t.doc,r<0?i.start(a):i.end(a)))),!0):!1}}const pb=_h(-1),vb=_h(1);function mb(r,t=null){return function(e,n){let{$from:i,$to:a}=e.selection,o=i.blockRange(a),s=o&&zd(o,r,t);return s?(n&&n(e.tr.wrap(o,s).scrollIntoView()),!0):!1}}function Zs(r,t=null){return function(e,n){let{from:i,to:a}=e.selection,o=!1;return e.doc.nodesBetween(i,a,(s,l)=>{if(o)return!1;if(!(!s.isTextblock||s.hasMarkup(r,t)))if(s.type==r)o=!0;else{let u=e.doc.resolve(l),c=u.index();o=u.parent.canReplaceWith(c,c+1,r)}}),o?(n&&n(e.tr.setBlockType(i,a,r,t).scrollIntoView()),!0):!1}}function gb(r,t,e){for(let n=0;n<t.length;n++){let{$from:i,$to:a}=t[n],o=i.depth==0?r.inlineContent&&r.type.allowsMarkType(e):!1;if(r.nodesBetween(i.pos,a.pos,s=>{if(o)return!1;o=s.inlineContent&&s.type.allowsMarkType(e)}),o)return!0}return!1}function li(r,t=null){return function(e,n){let{empty:i,$cursor:a,ranges:o}=e.selection;if(i&&!a||!gb(e.doc,o,r))return!1;if(n)if(a)r.isInSet(e.storedMarks||a.marks())?n(e.tr.removeStoredMark(r)):n(e.tr.addStoredMark(r.create(t)));else{let s=!1,l=e.tr;for(let u=0;!s&&u<o.length;u++){let{$from:c,$to:f}=o[u];s=e.doc.rangeHasMark(c.pos,f.pos,r)}for(let u=0;u<o.length;u++){let{$from:c,$to:f}=o[u];if(s)l.removeMark(c.pos,f.pos,r);else{let d=c.pos,h=f.pos,p=c.nodeAfter,v=f.nodeBefore,m=p&&p.isText?/^\s*/.exec(p.text)[0].length:0,g=v&&v.isText?/\s*$/.exec(v.text)[0].length:0;d+m<h&&(d+=m,h-=g),l.addMark(d,h,r.create(t))}}n(l.scrollIntoView())}return!0}}function Ta(...r){return function(t,e,n){for(let i=0;i<r.length;i++)if(r[i](t,e,n))return!0;return!1}}let vo=Ta(Qs,sb,lb),Ju=Ta(Qs,Ph,ub);const Nt={Enter:Ta(Hh,cb,fb,db),"Mod-Enter":Ys,Backspace:vo,"Mod-Backspace":vo,"Shift-Backspace":vo,Delete:Ju,"Mod-Delete":Ju,"Mod-a":Fh},$h={"Ctrl-h":Nt.Backspace,"Alt-Backspace":Nt["Mod-Backspace"],"Ctrl-d":Nt.Delete,"Ctrl-Alt-Backspace":Nt["Mod-Delete"],"Alt-Delete":Nt["Mod-Delete"],"Alt-d":Nt["Mod-Delete"],"Ctrl-a":pb,"Ctrl-e":vb};for(let r in Nt)$h[r]=Nt[r];const yb=typeof navigator!="undefined"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os!="undefined"&&os.platform?os.platform()=="darwin":!1,Ku=yb?$h:Nt;var Je={};function Qu(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function bb(r,t,e){return t&&Qu(r.prototype,t),e&&Qu(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function kb(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(Je,"__esModule",{value:!0});var wb=We,Xu=Ps,$t=bb(function r(t,e){kb(this,r),this.match=t,this.match=t,this.handler=typeof e=="string"?Cb(e):e});function Cb(r){return function(t,e,n,i){var a=r;if(e[1]){var o=e[0].lastIndexOf(e[1]);a+=e[0].slice(o+e[1].length),n+=o;var s=n-i;s>0&&(a=e[0].slice(o-s,o)+a,n=i)}return t.tr.insertText(a,n,i)}}var Tb=500;function xb(r){var t=r.rules,e=new wb.Plugin({state:{init:function(){return null},apply:function(i,a){var o=i.getMeta(this);return o||(i.selectionSet||i.docChanged?null:a)}},props:{handleTextInput:function(i,a,o,s){return Yu(i,a,o,s,t,e)},handleDOMEvents:{compositionend:function(i){setTimeout(function(){var a=i.state.selection.$cursor;a&&Yu(i,a.pos,a.pos,"",t,e)})}}},isInputRules:!0});return e}function Yu(r,t,e,n,i,a){if(r.composing)return!1;var o=r.state,s=o.doc.resolve(t);if(s.parent.type.spec.code)return!1;for(var l=s.parent.textBetween(Math.max(0,s.parentOffset-Tb),s.parentOffset,null,"\uFFFC")+n,u=0;u<i.length;u++){var c=i[u].match.exec(l),f=c&&i[u].handler(o,c,t-(c[0].length-n.length),e);if(!!f)return r.dispatch(f.setMeta(a,{transform:f,from:t,to:e,text:n})),!0}return!1}var Sb=function(t,e){for(var n=t.plugins,i=0;i<n.length;i++){var a=n[i],o=void 0;if(a.spec.isInputRules&&(o=a.getState(t))){if(e){for(var s=t.tr,l=o.transform,u=l.steps.length-1;u>=0;u--)s.step(l.steps[u].invert(l.docs[u]));if(o.text){var c=s.doc.resolve(o.from).marks();s.replaceWith(o.from,o.to,t.schema.text(o.text,c))}else s.delete(o.from,o.to);e(s)}return!0}}return!1},Eb=new $t(/--$/,"\u2014"),Mb=new $t(/\.\.\.$/,"\u2026"),zh=new $t(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),Vh=new $t(/"$/,"\u201D"),Uh=new $t(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),Wh=new $t(/'$/,"\u2019"),Ob=[zh,Vh,Uh,Wh];function Nb(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return new $t(r,function(i,a,o,s){var l=e instanceof Function?e(a):e,u=i.tr.delete(o,s),c=u.doc.resolve(o),f=c.blockRange(),d=f&&Xu.findWrapping(f,t,l);if(!d)return null;u.wrap(f,d);var h=u.doc.resolve(o-1).nodeBefore;return h&&h.type==t&&Xu.canJoin(u.doc,o-1)&&(!n||n(a,h))&&u.join(o-1),u})}function Db(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return new $t(r,function(n,i,a,o){var s=n.doc.resolve(a),l=e instanceof Function?e(i):e;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?n.tr.delete(a,o).setBlockType(a,a,t,l):null})}var jh=Je.InputRule=$t;Je.closeDoubleQuote=Vh;Je.closeSingleQuote=Wh;Je.ellipsis=Mb;Je.emDash=Eb;var Gh=Je.inputRules=xb;Je.openDoubleQuote=zh;Je.openSingleQuote=Uh;Je.smartQuotes=Ob;Je.textblockTypeInputRule=Db;var Lb=Je.undoInputRule=Sb;Je.wrappingInputRule=Nb;var Yi=200,ge=function(){};ge.prototype.append=function(t){return t.length?(t=ge.from(t),!this.length&&t||t.length<Yi&&this.leafAppend(t)||this.length<Yi&&t.leafPrepend(this)||this.appendInner(t)):this};ge.prototype.prepend=function(t){return t.length?ge.from(t).append(this):this};ge.prototype.appendInner=function(t){return new Ab(this,t)};ge.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?ge.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};ge.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};ge.prototype.forEach=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)};ge.prototype.map=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length);var i=[];return this.forEach(function(a,o){return i.push(t(a,o))},e,n),i};ge.from=function(t){return t instanceof ge?t:t&&t.length?new Jh(t):ge.empty};var Jh=function(r){function t(n){r.call(this),this.values=n}r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,a){return i==0&&a==this.length?this:new t(this.values.slice(i,a))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,a,o,s){for(var l=a;l<o;l++)if(i(this.values[l],s+l)===!1)return!1},t.prototype.forEachInvertedInner=function(i,a,o,s){for(var l=a-1;l>=o;l--)if(i(this.values[l],s+l)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Yi)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Yi)return new t(i.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(ge);ge.empty=new Jh([]);var Ab=function(r){function t(e,n){r.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,i,a,o){var s=this.left.length;if(i<s&&this.left.forEachInner(n,i,Math.min(a,s),o)===!1||a>s&&this.right.forEachInner(n,Math.max(i-s,0),Math.min(this.length,a)-s,o+s)===!1)return!1},t.prototype.forEachInvertedInner=function(n,i,a,o){var s=this.left.length;if(i>s&&this.right.forEachInvertedInner(n,i-s,Math.max(a,s)-s,o+s)===!1||a<s&&this.left.forEachInvertedInner(n,Math.min(i,s),a,o)===!1)return!1},t.prototype.sliceInner=function(n,i){if(n==0&&i==this.length)return this;var a=this.left.length;return i<=a?this.left.slice(n,i):n>=a?this.right.slice(n-a,i-a):this.left.slice(n,a).append(this.right.slice(0,i-a))},t.prototype.leafAppend=function(n){var i=this.right.leafAppend(n);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(n){var i=this.left.leafPrepend(n);if(i)return new t(i,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(ge),Kh=ge;const Ib=500;class tt{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let i,a;e&&(i=this.remapping(n,this.items.length),a=i.maps.length);let o=t.tr,s,l,u=[],c=[];return this.items.forEach((f,d)=>{if(!f.step){i||(i=this.remapping(n,d+1),a=i.maps.length),a--,c.push(f);return}if(i){c.push(new pt(f.map));let h=f.step.map(i.slice(a)),p;h&&o.maybeStep(h).doc&&(p=o.mapping.maps[o.mapping.maps.length-1],u.push(new pt(p,void 0,void 0,u.length+c.length))),a--,p&&i.appendMap(p,a)}else o.maybeStep(f.step);if(f.selection)return s=i?f.selection.map(i.slice(a)):f.selection,l=new tt(this.items.slice(0,n).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:s}}addTransform(t,e,n,i){let a=[],o=this.eventCount,s=this.items,l=!i&&s.length?s.get(s.length-1):null;for(let c=0;c<t.steps.length;c++){let f=t.steps[c].invert(t.docs[c]),d=new pt(t.mapping.maps[c],f,e),h;(h=l&&l.merge(d))&&(d=h,c?a.pop():s=s.slice(0,s.length-1)),a.push(d),e&&(o++,e=void 0),i||(l=d)}let u=o-n.depth;return u>Pb&&(s=Rb(s,u),o-=u),new tt(s.append(a),o)}remapping(t,e){let n=new yr;return this.items.forEach((i,a)=>{let o=i.mirrorOffset!=null&&a-i.mirrorOffset>=t?n.maps.length-i.mirrorOffset:void 0;n.appendMap(i.map,o)},t,e),n}addMaps(t){return this.eventCount==0?this:new tt(this.items.append(t.map(e=>new pt(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-e),a=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach(d=>{d.selection&&s--},i);let l=e;this.items.forEach(d=>{let h=a.getMirror(--l);if(h==null)return;o=Math.min(o,h);let p=a.maps[h];if(d.step){let v=t.steps[h].invert(t.docs[h]),m=d.selection&&d.selection.map(a.slice(l+1,h));m&&s++,n.push(new pt(p,v,m))}else n.push(new pt(p))},i);let u=[];for(let d=e;d<o;d++)u.push(new pt(a.maps[d]));let c=this.items.slice(0,i).append(u).append(n),f=new tt(c,s);return f.emptyItemCount()>Ib&&(f=f.compress(this.items.length-n.length)),f}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,i=[],a=0;return this.items.forEach((o,s)=>{if(s>=t)i.push(o),o.selection&&a++;else if(o.step){let l=o.step.map(e.slice(n)),u=l&&l.getMap();if(n--,u&&e.appendMap(u,n),l){let c=o.selection&&o.selection.map(e.slice(n));c&&a++;let f=new pt(u.invert(),l,c),d,h=i.length-1;(d=i.length&&i[h].merge(f))?i[h]=d:i.push(f)}}else o.map&&n--},this.items.length,0),new tt(Kh.from(i.reverse()),a)}}tt.empty=new tt(Kh.empty,0);function Rb(r,t){let e;return r.forEach((n,i)=>{if(n.selection&&t--==0)return e=i,!1}),r.slice(e)}class pt{constructor(t,e,n,i){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new pt(e.getMap().invert(),e,this.selection)}}}class Jt{constructor(t,e,n,i){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=i}}const Pb=20;function Bb(r,t,e,n){let i=e.getMeta(Pt),a;if(i)return i.historyState;e.getMeta(Fb)&&(r=new Jt(r.done,r.undone,null,0));let o=e.getMeta("appendedTransaction");if(e.steps.length==0)return r;if(o&&o.getMeta(Pt))return o.getMeta(Pt).redo?new Jt(r.done.addTransform(e,void 0,n,Ri(t)),r.undone,Zu(e.mapping.maps[e.steps.length-1]),r.prevTime):new Jt(r.done,r.undone.addTransform(e,void 0,n,Ri(t)),null,r.prevTime);if(e.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let s=r.prevTime==0||!o&&(r.prevTime<(e.time||0)-n.newGroupDelay||!Hb(e,r.prevRanges)),l=o?mo(r.prevRanges,e.mapping):Zu(e.mapping.maps[e.steps.length-1]);return new Jt(r.done.addTransform(e,s?t.selection.getBookmark():void 0,n,Ri(t)),tt.empty,l,e.time)}else return(a=e.getMeta("rebased"))?new Jt(r.done.rebased(e,a),r.undone.rebased(e,a),mo(r.prevRanges,e.mapping),r.prevTime):new Jt(r.done.addMaps(e.mapping.maps),r.undone.addMaps(e.mapping.maps),mo(r.prevRanges,e.mapping),r.prevTime)}function Hb(r,t){if(!t)return!1;if(!r.docChanged)return!0;let e=!1;return r.mapping.maps[0].forEach((n,i)=>{for(let a=0;a<t.length;a+=2)n<=t[a+1]&&i>=t[a]&&(e=!0)}),e}function Zu(r){let t=[];return r.forEach((e,n,i,a)=>t.push(i,a)),t}function mo(r,t){if(!r)return null;let e=[];for(let n=0;n<r.length;n+=2){let i=t.map(r[n],1),a=t.map(r[n+1],-1);i<=a&&e.push(i,a)}return e}function Qh(r,t,e,n){let i=Ri(t),a=Pt.get(t).spec.config,o=(n?r.undone:r.done).popEvent(t,i);if(!o)return;let s=o.selection.resolve(o.transform.doc),l=(n?r.done:r.undone).addTransform(o.transform,t.selection.getBookmark(),a,i),u=new Jt(n?l:o.remaining,n?o.remaining:l,null,0);e(o.transform.setSelection(s).setMeta(Pt,{redo:n,historyState:u}).scrollIntoView())}let go=!1,ec=null;function Ri(r){let t=r.plugins;if(ec!=t){go=!1,ec=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){go=!0;break}}return go}const Pt=new ai("history"),Fb=new ai("closeHistory");function Xh(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new Xe({key:Pt,state:{init(){return new Jt(tt.empty,tt.empty,null,0)},apply(t,e,n){return Bb(e,n,t,r)}},config:r,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,i=n=="historyUndo"?Wn:n=="historyRedo"?el:null;return i?(e.preventDefault(),i(t.state,t.dispatch)):!1}}}})}const Wn=(r,t)=>{let e=Pt.getState(r);return!e||e.done.eventCount==0?!1:(t&&Qh(e,r,t,!1),!0)},el=(r,t)=>{let e=Pt.getState(r);return!e||e.undone.eventCount==0?!1:(t&&Qh(e,r,t,!0),!0)};function qb(r){let t=Pt.getState(r);return t?t.done.eventCount:0}/**
 * @toast-ui/editor
 * @version 3.2.2 | Fri Feb 17 2023
 * @author NHN Cloud FE Development Lab <dl_javascript@nhn.com>
 * @license MIT
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ss=function(r,t){return ss=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},ss(r,t)};function E(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ss(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var w=function(){return w=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},w.apply(this,arguments)};function qe(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))}function q(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}function _b(r,t,e){var n;e=e||null;for(n in r)if(r.hasOwnProperty(n)&&t.call(e,r[n],n,r)===!1)break}var pn=_b;function $b(r,t){var e=Object.prototype.hasOwnProperty,n,i,a,o;for(a=1,o=arguments.length;a<o;a+=1){n=arguments[a];for(i in n)e.call(n,i)&&(r[i]=n[i])}return r}var tl=$b;function zb(r){return typeof r=="string"||r instanceof String}var zt=zb;function Vb(r){return r instanceof Array}var xn=Vb;function Ub(r,t,e){var n=0,i=r.length;for(e=e||null;n<i&&t.call(e,r[n],n,r)!==!1;n+=1);}var vn=Ub,Wb=xn,jb=vn,Gb=pn;function Jb(r,t,e){Wb(r)?jb(r,t,e):Gb(r,t,e)}var xa=Jb,Kb=zt,Qb=xa;function Xb(r,t,e){var n=r.style;if(Kb(t)){n[t]=e;return}Qb(t,function(i,a){n[a]=i})}var wt=Xb,Yb=xn;function Zb(r,t,e){var n,i;if(e=e||0,!Yb(t))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(t,r,e);for(i=t.length,n=e;e>=0&&n<i;n+=1)if(t[n]===r)return n;return-1}var Or=Zb;function ek(r){return r===void 0}var ut=ek,tk=ut;function rk(r){return!r||!r.className?"":tk(r.className.baseVal)?r.className:r.className.baseVal}var rl=rk,nk=xn,ik=ut;function ak(r,t){if(t=nk(t)?t.join(" "):t,t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),ik(r.className.baseVal)){r.className=t;return}r.className.baseVal=t}var Yh=ak,tc=xa,ok=Or,sk=rl,lk=Yh;function uk(r){var t=Array.prototype.slice.call(arguments,1),e=r.classList,n=[],i;if(e){tc(t,function(a){r.classList.add(a)});return}i=sk(r),i&&(t=[].concat(i.split(/\s+/),t)),tc(t,function(a){ok(a,n)<0&&n.push(a)}),lk(r,n)}var gt=uk,rc=vn,ck=Or,fk=rl,dk=Yh;function hk(r){var t=Array.prototype.slice.call(arguments,1),e=r.classList,n,i;if(e){rc(t,function(a){e.remove(a)});return}n=fk(r).split(/\s+/),i=[],rc(n,function(a){ck(a,t)<0&&i.push(a)}),dk(r,i)}var nt=hk;function pk(r){return typeof r=="number"||r instanceof Number}var Dt=pk;function vk(r){return r===null}var Zi=vk,mk=pn;function gk(r,t){var e=document.createElement("img"),n="";return mk(t,function(i,a){n+="&"+a+"="+i}),n=n.substring(1),e.src=r+"?"+n,e.style.display="none",document.body.appendChild(e),document.body.removeChild(e),e}var yk=gk,bk=ut,kk=yk,wk=7*24*60*60*1e3;function Ck(r){var t=new Date().getTime();return t-r>wk}function Tk(r,t){var e="https://www.google-analytics.com/collect",n=location.hostname,i="event",a="use",o="TOAST UI "+r+" for "+n+": Statistics",s=window.localStorage.getItem(o);!bk(window.tui)&&window.tui.usageStatistics===!1||s&&!Ck(s)||(window.localStorage.setItem(o,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&kk(e,{v:1,t:i,tid:t,cid:n,dp:n,dh:r,el:r,ec:a})},1e3))}var xk=Tk;/Mac/.test(navigator.platform);var Sk=/[\u0020]+/g,Ek=/[>(){}[\]+-.!#|]/g,nc=/<([a-zA-Z_][a-zA-Z0-9\-._]*)(\s|[^\\>])*\/?>|<(\/)([a-zA-Z_][a-zA-Z0-9\-._]*)\s*\/?>|<!--[^-]+-->|<([a-zA-Z_][a-zA-Z0-9\-.:/]*)>/g,ic=/\\[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~\\]/g,Mk=/[*_~`]/g,ac=/!\[.*\]\(.*\)/g,Ok=/[[\]]/g,oc=/(?:^|[^\\])\\(?!\\)/g,Nk='[&<>"]',sc=new RegExp(Nk,"g");function Dk(r){switch(r){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return r}}function tn(r){return sc.test(r)?r.replace(sc,Dk):r}function Lk(){xk("editor","UA-129966929-1")}function be(r,t){return r.indexOf(t)!==-1}var Ak=["rel","target","hreflang","type"],Ik={codeblock:/(^ {4}[^\n]+\n*)+/,thematicBreak:/^ *((\* *){3,}|(- *){3,} *|(_ *){3,}) */,atxHeading:/^(#{1,6}) +[\s\S]+/,seTextheading:/^([^\n]+)\n *(=|-){2,} */,blockquote:/^( *>[^\n]+.*)+/,list:/^ *(\*+|-+|\d+\.) [\s\S]+/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? */,link:/!?\[.*\]\(.*\)/,reflink:/!?\[.*\]\s*\[([^\]]*)\]/,verticalBar:/\u007C/,fencedCodeblock:/^((`|~){3,})/};function Zh(r){if(!r)return null;var t={};return Ak.forEach(function(e){ut(r[e])||(t[e]=r[e])}),t}function ea(r,t){for(var e="",n=0;n<t;n+=1)e+=r;return e}function Rk(r){var t=!1;return pn(Ik,function(e){return e.test(r)&&(t=!0),!t}),t}function ta(r){for(var t=[],e=ac.exec(r);e;)t.push([e.index,e.index+e[0].length]),e=ac.exec(r);return r.replace(Ok,function(n,i){var a=t.some(function(o){return i>o[0]&&i<o[1]});return a?n:"\\"+n})}function Pk(r){var t=function(i){return"\\"+i},e=function(i){return i+"\\"},n=r.replace(Sk," ");return ic.test(n)&&(n=n.replace(ic,t)),oc.test(n)&&(n=n.replace(oc,e)),n=n.replace(Mk,t),nc.test(n)&&(n=n.replace(nc,t)),Rk(n)&&(n=n.replace(Ek,t)),n}function Bk(r){var t;return r.indexOf('"')===-1?t='""':t=r.indexOf("'")===-1?"''":"()",t[0]+r+t[1]}function ls(r){return Zi(r)||ut(r)}function nl(r,t){if(r===null&&r===t)return!0;if(typeof r!="object"||typeof t!="object"||ls(r)||ls(t))return r===t;for(var e in r)if(r[e]!==t[e])return!1;for(var e in t)if(!(e in r))return!1;return!0}function Ee(r){return r[r.length-1]}function Hk(r,t,e){return r>=t&&r<=e}function il(r){return typeof r=="object"&&r!==null}function ra(r,t){var e=w({},r);return r&&t&&Object.keys(t).forEach(function(n){il(e[n])?Array.isArray(t[n])?e[n]=al(t[n]):e.hasOwnProperty(n)?e[n]=ra(e[n],t[n]):e[n]=ol(t[n]):e[n]=t[n]}),e}function al(r){return r.map(function(t){return il(t)?Array.isArray(t)?al(t):ol(t):t})}function ol(r){var t=Object.keys(r);return t.length?t.reduce(function(e,n){return il(r[n])?e[n]=Array.isArray(r[n])?al(r[n]):ol(r[n]):e[n]=r[n],e},{}):r}function sl(r,t){return t===void 0&&(t={}),Object.keys(t).forEach(function(e){r.hasOwnProperty(e)&&typeof r[e]=="object"?Array.isArray(t[e])?r[e]=t[e]:sl(r[e],t[e]):r[e]=t[e]}),r}function lc(r,t){return r>t?[t,r]:[r,t]}var Fk=vn;function qk(r){var t;try{t=Array.prototype.slice.call(r)}catch{t=[],Fk(r,function(n){t.push(n)})}return t}var Tt=qk;function na(r,t){var e=r.nodes.paragraph;return t?e.create(null,zt(t)?r.text(t):t):e.createAndFill()}function ye(r,t,e){return r.text(t,e)}function K(r,t,e){e===void 0&&(e=t);var n=r.doc.content.size,i=n>0?n-1:1;return _t.create(r.doc,Math.min(t,i),Math.min(e,i))}function ll(r,t,e){var n=t.pos;return r.replaceWith(n,n,na(e)),r.setSelection(K(r,n+1))}function ia(r){for(var t=r.state,e=r.from,n=r.startIndex,i=r.endIndex,a=r.createText,o=t.tr,s=t.doc,l=t.schema,u=n;u<=i;u+=1){var c=s.child(u),f=c.nodeSize,d=c.textContent,h=c.content,p=a(d),v=p?ye(l,p):L.empty,m=o.mapping.map(e),g=m+h.size;o.replaceWith(m,g,v),e+=f}return o}function ul(r,t,e,n){var i=e.length;r.split(t).delete(t-i,t).insert(r.mapping.map(t),n).setSelection(K(r,r.mapping.map(t)-i))}function ui(r){return r.sourcepos[0][0]}function Sa(r){return r.sourcepos[1][0]}function Ea(r){return r.sourcepos[0][1]}function Yt(r){return r.sourcepos[1][1]}function _k(r){var t=r.type;return t==="htmlBlock"||t==="htmlInline"}function $k(r){var t=r.type;return t==="strike"||t==="strong"||t==="emph"||t==="code"||t==="link"||t==="image"}function zk(r){return r&&r.type==="codeBlock"}function Nr(r){return r&&(r.type==="item"||r.type==="list")}function ep(r){return Nr(r)&&r.listData.type==="ordered"}function Vk(r){return Nr(r)&&r.listData.type!=="ordered"}function uc(r){return r&&(r.type==="tableCell"||r.type==="tableDelimCell")}function Uk(r){switch(r.type){case"code":case"text":case"emph":case"strong":case"strike":case"link":case"image":case"htmlInline":case"linebreak":case"softbreak":case"customInline":return!0;default:return!1}}function mn(r,t,e){for(e===void 0&&(e=!0),r=e?r:r.parent;r&&r.type!=="document";){if(t(r))return r;r=r.parent}return null}function Wk(r,t,e){for(e===void 0&&(e=!0),r=e?r:r.parent;r&&r.type!=="document";)t(r),r=r.parent}function ue(r,t){return[r[0],r[1]+t]}function Zt(r,t){return[r[0],t]}function jk(r){var t=r.firstChild.literal;switch(r.type){case"emph":return"*"+t+"*";case"strong":return"**"+t+"**";case"strike":return"~~"+t+"~~";case"code":return"`"+t+"`";case"link":case"image":var e=r,n=e.destination,i=e.title,a=r.type==="link"?"":"!";return a+"["+t+"]("+n+(i?' "'+i+'"':"")+")";default:return null}}function Gk(r){switch(r.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}function Jk(r){for(var t=[],e=r.walker(),n=null;n=e.next();){var i=n.node;i.type==="text"&&t.push(i.literal)}return t.join("")}var ti=[],tp={},cc=/\$\$widget\d+\s/;function Ma(r){var t=r.search(cc);if(t!==-1){var e=r.substring(t),n=e.replace(cc,"").replace("$$","");r=r.substring(0,t),r+=Ma(n)}return r}function rp(r,t){return"$$"+r+" "+t+"$$"}function np(r,t){var e=tp[r],n=e.rule,i=e.toDOM,a=Ma(t).match(n);return a&&(t=a[0]),i(t)}function Kk(){return ti}function Qk(r){ti=r,ti.forEach(function(t,e){tp["widget"+e]=t})}function yo(r,t,e,n){return r.concat(Tr(t,e,n))}function Tr(r,t,e){e===void 0&&(e=0);var n=[],i=(ti[e]||{}).rule,a=e+1;if(r=Ma(r),i&&i.test(r)){for(var o=void 0;(o=r.search(i))!==-1;){var s=r.substring(0,o);s&&(n=yo(n,s,t,a)),r=r.substring(o);var l=r.match(i)[0],u="widget"+e;n.push(t.nodes.widget.create({info:u},t.text(rp(u,l)))),r=r.substring(l.length)}r&&(n=yo(n,r,t,a))}else r&&(n=e<ti.length-1?yo(n,r,t,a):[t.text(r)]);return n}function ip(r){for(var t,e="",n=r.walker();t=n.next();){var i=t.node,a=t.entering;a&&(i!==r&&i.type!=="text"?(e+=jk(i),n.resumeAt(r,!1),n.next()):i.type==="text"&&(e+=i.literal))}return e}function ap(){return{deleteSelection:function(){return Qs},selectAll:function(){return Fh},undo:function(){return Wn},redo:function(){return el}}}function Xk(r){return new Xe({props:{decorations:function(t){var e=t.doc;if(r.text&&e.childCount===1&&e.firstChild.isTextblock&&e.firstChild.content.size===0){var n=document.createElement("span");return gt(n,"placeholder"),r.className&&gt(n,r.className),n.textContent=r.text,Gs.create(e,[js.widget(1,n)])}return null}}})}var Yk=Or,Zk=rl;function ew(r,t){var e;return r.classList?r.classList.contains(t):(e=Zk(r).split(/\s+/),Yk(t,e)>-1)}var op=ew,tw=Or,rw=Tt,ki=Element.prototype,nw=ki.matches||ki.webkitMatchesSelector||ki.mozMatchesSelector||ki.msMatchesSelector||function(r){var t=this.document||this.ownerDocument;return tw(this,rw(t.querySelectorAll(r)))>-1};function iw(r,t){return nw.call(r,t)}var aw=iw,sp="[A-Za-z][A-Za-z0-9-]*",ow="[a-zA-Z_:][a-zA-Z0-9:._-]*",sw="[^\"'=<>`\\x00-\\x20]+",lw="'[^']*'",uw='"[^"]*"',cw="(?:"+sw+"|"+lw+"|"+uw+")",fw="(?:\\s*=\\s*"+cw+")",lp="(?:\\s+"+ow+fw+"?)",up="<("+sp+")("+lp+")*\\s*/?>",dw="</("+sp+")\\s*[>]",cp="(?:"+up+"|"+dw+")",gn=new RegExp("^"+cp,"i"),us=/<br\s*\/*>/i,hw=/<! ---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,fp="</p><p>";function cl(r,t,e){var n=parseInt(r.left,10),i=parseInt(r.top,10),a=parseInt(r.width,10)+parseInt(r.paddingLeft,10)+parseInt(r.paddingRight,10),o=parseInt(r.height,10)+parseInt(r.paddingTop,10)+parseInt(r.paddingBottom,10);return t>=n&&t<=n+a&&e>=i&&e<=i+o}var dp="toastui-editor-";function O(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=[],n=0,i=r;n<i.length;n++){var a=i[n],o=void 0;Array.isArray(a)?o=a[0]?a[1]:null:o=a,o&&e.push(""+dp+o)}return e.join(" ")}function se(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return r.map(function(e){return dp+"md-"+e}).join(" ")}function pw(r){return(r==null?void 0:r.nodeType)===Node.TEXT_NODE}function Oa(r){return r&&r.nodeType===Node.ELEMENT_NODE}function vw(r,t){var e=Tt(r.querySelectorAll(t));return e.length?e:[]}function mw(r,t){t=xn(t)?Tt(t):[t],t.forEach(function(e){r.appendChild(e)})}function gw(r,t){t.parentNode&&t.parentNode.insertBefore(r,t)}function Dr(r){r.parentNode&&r.parentNode.removeChild(r)}function yw(r){for(var t=[];r.firstChild;)t.push(r.firstChild),r.parentNode&&r.parentNode.insertBefore(r.firstChild,r);return Dr(r),t}function fl(r,t,e){ut(e)&&(e=!op(r,t));var n=e?gt:nt;n(r,t)}function hp(r,t){var e=document.createElement("div");zt(r)?e.innerHTML=r:e.appendChild(r);var n=e.firstChild;return t&&t.appendChild(n),n}function dl(r){var t=window.getComputedStyle(r);return["margin-left","margin-right"].reduce(function(e,n){return e+parseInt(t.getPropertyValue(n),10)},0)+r.offsetWidth}function yt(r,t){var e;for(zt(t)?e=function(n){return aw(n,t)}:e=function(n){return n===t};r&&r!==document;){if(Oa(r)&&e(r))return r;r=r.parentNode}return null}function pp(r,t){for(var e=0,n=0;r&&r!==t;){var i=r.offsetTop,a=r.offsetLeft,o=r.offsetParent;if(e+=i,n+=a,o===t.offsetParent)break;r=r.offsetParent}return{offsetTop:e,offsetLeft:n}}function hl(r,t){Object.keys(r).forEach(function(e){ls(r[e])?t.removeAttribute(e):t.setAttribute(e,r[e])})}function bw(r){var t=r.replace(/<p><br\s*\/*><\/p>/gi,"<p></p>"),e=new RegExp(cp,"ig"),n=t.match(e);return n==null||n.forEach(function(i,a){if(us.test(i)){var o=fp;if(a){var s=n[a-1],l=s.match(up);if(l&&!/br/i.test(l[1])){var u=l[1];o="</"+u+"><"+u+">"}}t=t.replace(us,o)}}),t}function pl(r){var t=/<img class="ProseMirror-separator" alt="">/g,e=/ class="ProseMirror-trailingBreak"/g,n=r;return n=n.replace(t,""),n=n.replace(e,""),n}var vp=new ai("widget"),fc=5,kw=function(){function r(t,e){var n=this;this.popup=null,this.removeWidget=function(){n.popup&&(n.rootEl.removeChild(n.popup),n.popup=null)},this.rootEl=t.dom.parentElement,this.eventEmitter=e,this.eventEmitter.listen("blur",this.removeWidget),this.eventEmitter.listen("loadUI",function(){n.rootEl=yt(t.dom.parentElement,"."+O("defaultUI"))}),this.eventEmitter.listen("removePopupWidget",this.removeWidget)}return r.prototype.update=function(t){var e=vp.getState(t.state);if(this.removeWidget(),e){var n=e.node,i=e.style,a=t.coordsAtPos(e.pos),o=a.top,s=a.left,l=a.bottom,u=l-o,c=this.rootEl.getBoundingClientRect(),f=o-c.top;wt(n,{opacity:"0"}),this.rootEl.appendChild(n),wt(n,{position:"absolute",left:s-c.left+fc+"px",top:(i==="bottom"?f+u-fc:f-u)+"px",opacity:"1"}),this.popup=n,t.focus()}},r.prototype.destroy=function(){this.eventEmitter.removeEventHandler("blur",this.removeWidget)},r}();function ww(r){return new Xe({key:vp,state:{init:function(){return null},apply:function(t){return t.getMeta("widget")}},view:function(t){return new kw(t,r)}})}function Cw(r){r.listen("addImageBlobHook",function(t,e){var n=new FileReader;n.onload=function(i){var a=i.target;return e(a.result)},n.readAsDataURL(t)})}function vl(r,t,e){var n=function(i,a){r.emit("command","addImage",{imageUrl:i,altText:a||t.name||"image"})};r.emit("addImageBlobHook",t,n,e)}function mp(r){var t=Tt(r).filter(function(n){var i=n.type;return i.indexOf("image")!==-1});if(t.length===1){var e=t[0];if(e)return e.getAsFile()}return null}function Tw(r){var t=r.eventEmitter;return new Xe({props:{handleDOMEvents:{drop:function(e,n){var i,a=(i=n.dataTransfer)===null||i===void 0?void 0:i.files;return a&&vn(a,function(o){return o.type.indexOf("image")!==-1?(n.preventDefault(),n.stopPropagation(),vl(t,o,n.type),!1):!0}),!0}}}})}var G=function(){function r(){}return Object.defineProperty(r.prototype,"type",{get:function(){return"node"},enumerable:!1,configurable:!0}),r.prototype.setContext=function(t){this.context=t},r}();function gp(r){var t=document.createElement("span"),e=np(r.attrs.info,r.textContent);return t.className="tui-widget",t.appendChild(e),{dom:t}}function cs(r){return r.type.name==="widget"}var yp=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"widget"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{info:{default:null}},group:"inline",inline:!0,content:"text*",selectable:!1,atom:!0,toDOM:function(){return["span",{class:"tui-widget"},0]},parseDOM:[{tag:"span.tui-widget",getAttrs:function(e){var n=e.textContent,i=n.match(/\$\$(widget\d+)/),a=i[1];return{info:a}}}]}},enumerable:!1,configurable:!0}),t}(G),bp=function(){function r(t){this.timer=null,this.el=document.createElement("div"),this.el.className="toastui-editor",this.eventEmitter=t,this.placeholder={text:""}}return r.prototype.createState=function(){return eh.create({schema:this.schema,plugins:this.createPlugins()})},r.prototype.initEvent=function(){var t=this,e=t.eventEmitter,n=t.view,i=t.editorType;n.dom.addEventListener("focus",function(){return e.emit("focus",i)}),n.dom.addEventListener("blur",function(){return e.emit("blur",i)})},r.prototype.emitChangeEvent=function(t){this.eventEmitter.emit("caretChange",this.editorType),t.docChanged&&this.eventEmitter.emit("change",this.editorType)},Object.defineProperty(r.prototype,"defaultPlugins",{get:function(){var t=this.createInputRules(),e=qe(qe([],this.keymaps),[ei(w({"Shift-Enter":Ku.Enter},Ku)),Xh(),Xk(this.placeholder),ww(this.eventEmitter),Tw(this.context)]);return t?e.concat(t):e},enumerable:!1,configurable:!0}),r.prototype.createInputRules=function(){var t=Kk(),e=t.map(function(n){var i=n.rule;return new jh(i,function(a,o,s,l){var u=a.schema,c=a.tr,f=a.doc,d=o.input.match(new RegExp(i,"g")),h=f.resolve(s),p=h.parent,v=0;if(cs(p)&&(p=h.node(h.depth-1)),p.forEach(function(k){return cs(k)&&(v+=1)}),d.length>v){var m=Ee(d),g=Tr(m,u);return c.replaceWith(l-m.length+1,l,g)}return null})});return e.length?Gh({rules:e}):null},r.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype.createSchema=function(){return new Bd({nodes:this.specs.nodes,marks:this.specs.marks})},r.prototype.createKeymaps=function(t){var e=ap(),n=e.undo,i=e.redo,a=this.specs.keymaps(t),o={"Mod-z":n(),"Shift-Mod-z":i()};return t?a.concat(ei(o)):a},r.prototype.createCommands=function(){return this.specs.commands(this.view)},r.prototype.createPluginProps=function(){var t=this;return this.extraPlugins.map(function(e){return e(t.eventEmitter)})},r.prototype.focus=function(){var t=this;this.clearTimer(),this.timer=setTimeout(function(){t.view.focus(),t.view.dispatch(t.view.state.tr.scrollIntoView())})},r.prototype.blur=function(){this.view.dom.blur()},r.prototype.destroy=function(){var t=this;this.clearTimer(),this.view.destroy(),Object.keys(this).forEach(function(e){delete t[e]})},r.prototype.moveCursorToStart=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection(K(e,1)).scrollIntoView()),t&&this.focus()},r.prototype.moveCursorToEnd=function(t){var e=this.view.state.tr;this.view.dispatch(e.setSelection(K(e,e.doc.content.size-1)).scrollIntoView()),t&&this.focus()},r.prototype.setScrollTop=function(t){this.view.dom.scrollTop=t},r.prototype.getScrollTop=function(){return this.view.dom.scrollTop},r.prototype.setPlaceholder=function(t){this.placeholder.text=t,this.view.dispatch(this.view.state.tr.scrollIntoView())},r.prototype.setHeight=function(t){wt(this.el,{height:t+"px"})},r.prototype.setMinHeight=function(t){wt(this.el,{minHeight:t+"px"})},r.prototype.getElement=function(){return this.el},r}();function xw(r){return r instanceof Function}var Qe=xw,Sw=["Enter","Shift-Enter","Mod-Enter","Tab","Shift-Tab","Delete","Backspace","Mod-Delete","Mod-Backspace","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Mod-d","Mod-D","Alt-ArrowUp","Alt-ArrowDown"];function wi(r,t,e){return r.focus(),t(e)(r.state,r.dispatch,r)}var kp=function(){function r(t){this.specs=t}return Object.defineProperty(r.prototype,"nodes",{get:function(){return this.specs.filter(function(t){return t.type==="node"}).reduce(function(t,e){var n,i=e.name,a=e.schema;return w(w({},t),(n={},n[i]=a,n))},{})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"marks",{get:function(){return this.specs.filter(function(t){return t.type==="mark"}).reduce(function(t,e){var n,i=e.name,a=e.schema;return w(w({},t),(n={},n[i]=a,n))},{})},enumerable:!1,configurable:!0}),r.prototype.commands=function(t,e){var n=this.specs.filter(function(a){var o=a.commands;return o}).reduce(function(a,o){var s={},l=o.commands();return Qe(l)?s[o.name]=function(u){return wi(t,l,u)}:Object.keys(l).forEach(function(u){s[u]=function(c){return wi(t,l[u],c)}}),w(w({},a),s)},{}),i=ap();return Object.keys(i).forEach(function(a){n[a]=function(o){return wi(t,i[a],o)}}),e&&Object.keys(e).forEach(function(a){n[a]=function(o){return wi(t,e[a],o)}}),n},r.prototype.keymaps=function(t){var e=this.specs.filter(function(n){return n.keymaps}).map(function(n){return n.keymaps()});return e.map(function(n){return t||Object.keys(n).forEach(function(i){be(Sw,i)||delete n[i]}),ei(n)})},r.prototype.setContext=function(t){this.specs.forEach(function(e){e.setContext(t)})},r}();function wp(r){var t=r.from,e=r.to;return r instanceof ii?[t+1,e-1]:[t,e]}function dc(r){return r.index(0)+1}function yn(r,t,e){e===void 0&&(e=1);var n=0;return r.forEach(function(i,a){cs(i)&&a+2<t&&(n+=2*e)}),n}function Pi(r,t,e){e===void 0&&(e=t);var n=t===e,i=r.resolve(t),a=dc(i),o=a,s=i.start(1),l=s;if(!n){var u=r.resolve(e===r.content.size?e-1:e);l=u.start(1),o=dc(u),u.pos===r.content.size&&(e=r.content.size-2)}var c=Math.max(t-s+1,1),f=Math.max(e-l+1,1);return[[a,c+yn(r.child(a-1),c,-1)],[o,f+yn(r.child(o-1),f,-1)]]}function Cp(r,t){for(var e=[],n=0,i=0;n<t;n+=1){var a=r.child(n);e[n]=i,i+=a.nodeSize}return e}function dr(r,t,e){var n=Cp(r,e[0]),i=t[0]-1,a=e[0]-1,o=r.child(i),s=r.child(a),l=n[i],u=n[a];return l+=t[1]+yn(o,t[1]-1),u+=e[1]+yn(s,e[1]-1),[l,Math.min(u,r.content.size)]}function ae(r){var t=r.$from,e=r.$to,n=r.from,i=r.to,a=t.doc;return r instanceof ii&&(t=a.resolve(n+1),e=a.resolve(i-1)),t.depth===0&&(t=a.resolve(n-1),e=t),{startFromOffset:t.start(1),endFromOffset:e.start(1),startToOffset:t.end(1),endToOffset:e.end(1),startIndex:t.index(0),endIndex:e.index(0),from:t.pos,to:e.pos}}function aa(r,t){for(var e=1,n=1,i=0,a=0;i<r.childCount;i+=1){var o=r.child(i).nodeSize;if(e=a+1,n=a+o-1,i===t)break;a+=o}return{startOffset:e,endOffset:n}}var hc="heading",Ew="blockQuote",Mw="listItem",Ow="table",Nw="tableCell",Dw="codeBlock",Lw="thematicBreak",Bi="link",Ci="code",Na="meta",Lr="delimiter",Aw="taskDelimiter",ml="markedText",Iw="html",Rw="customBlock",pc={strong:2,emph:1,strike:2};function $(r,t,e,n){return{start:r,end:t,spec:{type:e,attrs:n}}}function Pw(r,t,e){var n=r.level,i=r.headingType,a=[$(t,e,hc,{level:n})];return i==="atx"?a.push($(t,ue(t,n),Lr)):a.push($(Zt(e,0),e,hc,{seText:!0})),a}function bo(r,t,e){var n=r.type,i=ue(t,pc[n]),a=ue(e,-pc[n]);return[$(i,a,n),$(t,i,Lr),$(a,e,Lr)]}function Tp(r,t,e,n){return[$(r,t,Bi),$(Zt(r,e[1]+1),Zt(t,n),Bi,{desc:!0}),$(Zt(t,n+2),ue(t,-1),Bi,{url:!0})]}function Bw(r,t,e){var n=r.lastChild,i=n?Yt(n)+1:3,a=ue(t,1);return qe([$(t,a,Na)],Tp(t,e,a,i))}function Hw(r,t,e){var n=r.lastChild,i=r.extendedAutolink,a=n?Yt(n)+1:2;return i?[$(t,e,Bi,{desc:!0})]:Tp(t,e,t,a)}function Fw(r,t,e){var n=r.tickCount,i=ue(t,n),a=ue(e,-n);return[$(t,e,Ci),$(t,i,Ci,{start:!0}),$(i,a,Ci,{marked:!0}),$(a,e,Ci,{end:!0})]}function xp(r,t,e,n){var i={start:t,end:e,spec:{attrs:{className:n+"-line-background",codeStart:t[0],codeEnd:e[0]}},lineBackground:!0};return r.type!=="item"&&r.type!=="blockQuote"?[w(w({},i),{end:t,spec:{attrs:{className:n+"-line-background start"}}}),w(w({},i),{start:[Math.min(t[0]+1,e[0]),t[1]]})]:null}function qw(r,t,e,n){var i=r.fenceOffset,a=r.fenceLength,o=r.fenceChar,s=r.info,l=r.infoPadding,u=r.parent,c=i+a,f=[$(Zt(t,1),e,Dw)];o&&f.push($(t,ue(t,c),Lr)),s&&f.push($(ue(t,a),ue(t,a+l+s.length),Na));var d="^(\\s{0,4})("+o+"{"+a+",})",h=new RegExp(d);h.test(n)&&f.push($(Zt(e,1),e,Lr));var p=xp(u,t,e,"code-block");return p?f.concat(p):f}function _w(r,t,e){var n=r,i=n.offset,a=n.syntaxLength,o=n.info,s=n.parent,l=i+a,u=[$(Zt(t,1),e,Rw)];u.push($(t,ue(t,l),Lr)),o&&u.push($(ue(t,l),ue(t,a+o.length),Na)),u.push($(Zt(e,1),e,Lr));var c=xp(s,t,e,"custom-block");return c?u.concat(c):u}function Sp(r,t){for(var e=[];r;){var n=r.type;(n==="paragraph"||n==="codeBlock")&&e.push($([ui(r),Ea(r)-1],[Sa(r),Yt(r)+1],t)),r=r.next}return e}function $w(r){for(var t=[];r;)t.push($([ui(r),Ea(r)],[Sa(r),Yt(r)+1],ml)),r=r.next;return t}function zw(r,t,e){var n=r.parent&&r.parent.type!=="blockQuote"?[$(t,e,Ew)]:[];if(r.firstChild){var i=[];r.firstChild.type==="paragraph"?i=$w(r.firstChild.firstChild):r.firstChild.type==="list"&&(i=Sp(r.firstChild,ml)),n=qe(qe([],n),i)}return n}function Vw(r){for(var t=0;r.parent.parent&&r.parent.parent.type==="item";)r=r.parent.parent,t+=1;var e=[{odd:!0},{even:!0}][t%2];return[Mw,w(w({},e),{listStyle:!0})]}function Uw(r,t){var e=r.listData,n=e.padding,i=e.task,a=Vw(r),o=[$.apply(void 0,qe([t,ue(t,n)],a))];return i&&(o.push($(ue(t,n),ue(t,n+3),Aw)),o.push($(ue(t,n+1),ue(t,n+2),Na))),o.concat(Sp(r.firstChild,ml))}var vc={heading:Pw,strong:bo,emph:bo,strike:bo,link:Hw,image:Bw,code:Fw,codeBlock:qw,blockQuote:zw,item:Uw,customBlock:_w},mc={thematicBreak:Lw,table:Ow,tableCell:Nw,htmlInline:Iw};function Ww(r,t,e,n){var i=r.type;return Qe(vc[i])?vc[i](r,t,e,n):mc[i]?[$(t,e,mc[i])]:null}var ri={};function jw(r){var t=r.schema,e=r.toastMark;return new Xe({appendTransaction:function(n,i,a){var o=n[0],s=a.tr;if(o.docChanged){var l=[],u=o.getMeta("editResult");u.forEach(function(c){var f=c.nodes,d=c.removedNodeRange;if(f.length){l=l.concat(Yw(s,f));for(var h=0,p=f;h<p.length;h++)for(var v=p[h],m=v.walker(),g=m.next();g;){var k=g.node,b=g.entering;b&&(l=l.concat(Zw(k,e))),g=m.next()}}else if(d)for(var C=s.doc.childCount-1,T=d.line,S=T[0],M=T[1],N=Math.min(S,C),R=Math.min(M,C),P=N;P<=R;P+=1)ri[P]=!0}),Kw(s,t,l)}return s.setMeta("widget",o.getMeta("widget"))}})}function Gw(r,t,e){return Object.keys(e).some(function(n){return e[n]!==r.child(t).attrs[n]})}function Jw(r,t,e,n,i){i===void 0&&(i={});for(var a=n.startIndex,o=n.endIndex,s=n.from,l=n.to,u=!1,c=a;c<=o;c+=1)delete ri[c],u=Gw(t,c,i);u&&r.setBlockType(s,l,e,i)}function Kw(r,t,e){var n=r.doc,i=t.nodes.paragraph,a=Cp(n,n.childCount);e.forEach(function(o){var s=o.start,l=o.end,u=o.spec,c=o.lineBackground,f=Math.min(s[0],n.childCount)-1,d=Math.min(l[0],n.childCount)-1,h=n.child(f),p=n.child(d),v=a[f],m=a[d];if(v+=s[1]+yn(h,s[1]-1),m+=l[1]+yn(p,l[1]-1),u)if(c){var g={from:v,to:m,startIndex:f,endIndex:d};Jw(r,n,i,g,u.attrs)}else r.addMark(v,m,t.mark(u.type,u.attrs));else r.removeMark(v,m)}),Qw(r,a,i)}function Qw(r,t,e){Object.keys(ri).forEach(function(n){var i=Number(n),a=Math.min(Number(n)+1,r.doc.childCount-1),o=t[i],s=t[a]-1;i===a&&(s+=2),r.setBlockType(o,s,e)})}function Xw(r,t,e){var n=[];ri={};for(var i=t[0]-1;i<e[0];i+=1){var a=r.child(i),o=a.attrs.codeEnd,s=a.attrs.codeStart;if(s&&o&&!be(n,s)){n.push(s),o=Math.min(o,r.childCount);for(var l=s-1,u=e[0],c=l;c<u;c+=1)ri[c]=!0}}}function Yw(r,t){var e=r.doc,n=t[0].sourcepos[0],i=Ee(t).sourcepos,a=i[1],o=[n[0],n[1]],s=[a[0],a[1]+1],l=[];return Xw(e,n,a),l.push({start:o,end:s}),l}function Zw(r,t){var e=t.getLineTexts(),n=[ui(r),Ea(r)],i=[Sa(r),Yt(r)+1],a=Ww(r,n,i,e[i[0]-1]);return a!=null?a:[]}var eC=["taskList","orderedList","bulletList","table","strong","emph","strike","heading","thematicBreak","blockQuote","code","codeBlock","indent","outdent"];function tC(r){var t=r.type;return Nr(r)?r.listData.task?"taskList":r.listData.type==="ordered"?"orderedList":"bulletList":t.indexOf("table")!==-1?"table":be(eC,t)?t:null}function rC(r){var t={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}},e=!0;return Wk(r,function(n){var i=tC(n);!i||(i==="bulletList"||i==="orderedList"?e&&(t[i]={active:!0},t.indent.disabled=!1,t.outdent.disabled=!1,e=!1):t[i]={active:!0})}),t}function nC(r){var t=r.toastMark,e=r.eventEmitter;return new Xe({view:function(){return{update:function(n,i){var a=n.state,o=a.doc,s=a.selection;if(!(i&&i.doc.eq(o)&&i.selection.eq(s))){var l=s.from,u=a.doc.resolve(l).start(),c=a.doc.content.findIndex(l).index+1,f=l-u;l===u&&(f+=1);var d=[c,f],h=t.findNodeAtPosition(d),p=rC(h);e.emit("changeToolbarState",{cursorPos:d,mdNode:h,toolbarState:p}),e.emit("setFocusedNode",h)}}}}})}var iC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),t}(G),Q=function(){function r(){}return Object.defineProperty(r.prototype,"type",{get:function(){return"mark"},enumerable:!1,configurable:!0}),r.prototype.setContext=function(t){this.context=t},r}();function ze(r,t){return ir(r,t-1)}function ir(r,t){return r.child(t).textContent}var Fn=/^\s*> ?/,aC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("block-quote")},0]}}},enumerable:!1,configurable:!0}),t.prototype.createBlockQuoteText=function(e,n){return n?e.replace(Fn,"").trim():"> "+e.trim()},t.prototype.extendBlockQuote=function(){var e=this;return function(n,i){var a=n.selection,o=n.doc,s=n.tr,l=n.schema,u=ae(a),c=u.endFromOffset,f=u.endToOffset,d=u.endIndex,h=u.to,p=ir(o,d),v=Fn.test(p);if(v&&h>c&&a.empty){var m=!p.replace(Fn,"").trim();if(m)s.deleteRange(c,f).split(s.mapping.map(f));else{var g=p.slice(h-c).trim(),k=ye(l,e.createBlockQuoteText(g));ul(s,f,g,k)}return i(s),!0}return!1}},t.prototype.commands=function(){var e=this;return function(){return function(n,i){var a=n.selection,o=n.doc,s=ae(a),l=s.startFromOffset,u=s.endToOffset,c=s.startIndex,f=s.endIndex,d=Fn.test(ir(o,c)),h=ia({state:n,startIndex:c,endIndex:f,from:l,createText:function(p){return e.createBlockQuoteText(p,d)}});return i(h.setSelection(K(h,h.mapping.map(u)))),!0}}},t.prototype.keymaps=function(){var e=this.commands()();return{"alt-q":e,"alt-Q":e,Enter:this.extendBlockQuote()}},t}(Q),Ar=/(^\s*)([-*+] |[\d]+\. )/,gl=/(^\s*)([\d])+\.( \[[ xX]])? /,Bt=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/,oa=/(^\s*)([-*+]|[\d]+\.)( \[[ xX]])? /,oC=/^(\s*)([-*+]+(\s(?:\[(?:x|\s)\]\s)?))(.*)/,sC=/(^\s*)([-*+] |[\d]+\. )(\[[ xX]] )/,lC=/(^\s*)([-*+])( \[[ xX]]) /;function yl(r){return gl.test(r)?"ordered":"bullet"}function bl(r){for(var t=0;r&&r.type!=="document";)r.type==="list"&&(t+=1),r=r.parent;return t}function fs(r,t,e,n){for(var i=r.getLineTexts(),a=i.length,o=[],s=t;n?s<a:s>1;){s=n?s+1:s-1;var l=r.findFirstNodeAtLine(s),u=bl(l);if(u===e)o.push({line:s,depth:e,mdNode:l});else if(u<e)break}return o}function uC(r){var t=r.toastMark,e=r.mdNode,n=r.line,i=bl(e),a=fs(t,n,i,!1).reverse(),o=fs(t,n,i,!0);return a.concat([{line:n,depth:i,mdNode:e}]).concat(o)}function cC(r){if(!Ar.test(r))return"* "+r;var t=yl(r);return t==="bullet"&&oa.test(r)?r=r.replace(lC,"$1$2 "):t==="ordered"&&(r=r.replace(gl,"$1* ")),r}function fC(r,t){if(!Ar.test(r))return t+". "+r;var e=yl(r);if(e==="bullet"||e==="ordered"&&oa.test(r))r=r.replace(oa,"$1"+t+". ");else if(e==="ordered"){var n=Bt.exec(r)[3];Number(n)!==t&&(r=r.replace(gl,"$1"+t+". "))}return r}function Ep(r,t,e,n){n===void 0&&(n=0);var i=Number.MAX_VALUE,a=0,o=t.map(function(s,l){var u=s.line;i=Math.min(u-1,i),a=Math.max(u-1,a);var c=ze(r,u);return c=e==="bullet"?cC(c):fC(c,l+1+n),{text:c,line:u}});return{changedResults:o,firstIndex:i,lastIndex:a}}function gc(r,t){var e=uC(t);return Ep(t.doc,e,r)}var dC={bullet:function(r){return gc("bullet",r)},ordered:function(r){return gc("ordered",r)},task:function(r){var t=r.mdNode,e=r.doc,n=r.line,i=ze(e,n);return t.listData.task?i=i.replace(sC,"$1$2"):Nr(t)&&(i=i.replace(Ar,"$1$2[ ] ")),{changedResults:[{text:i,line:n}]}}},hC={bullet:function(r){var t=r.doc,e=r.line,n=ze(t,e),i=[{text:"* "+n,line:e}];return{changedResults:i}},ordered:function(r){for(var t=r.toastMark,e=r.doc,n=r.line,i=r.startLine,a=ze(e,n),o=1,s=i,l=0,u=i-1;u>0;u-=1){var c=t.findFirstNodeAtLine(u),f=ze(e,u),d=f&&!!mn(c,function(b){return Nr(b)}),h=Bt.exec(ze(e,u));if(!h&&!d)break;if(!h&&d){l+=1;continue}var p=h,v=p[1],m=p[3];if(!v){o=Number(m),s=u;break}}var g=o+n-s-l,k=[{text:g+". "+a,line:n}];return{changedResults:k}},task:function(r){var t=r.doc,e=r.line,n=ze(t,e),i=[{text:"* [ ] "+n,line:e}];return{changedResults:i}}},pC={bullet:function(r){var t=r.line,e=r.doc,n=ze(e,t),i=oC.exec(n),a=i[1],o=i[2];return{listSyntax:""+a+o}},ordered:function(r){var t=r.toastMark,e=r.line,n=r.mdNode,i=r.doc,a=bl(n),o=ze(i,e),s=Bt.exec(o),l=s[1],u=s[3],c=s[4],f=Number(u)+1,d=""+l+f+c,h=fs(t,e,a,!0),p=h.filter(function(v){var m=Bt.exec(ze(i,v.line));return m&&m[1].length===l.length&&!!mn(v.mdNode,function(g){return ep(g)})});return w({listSyntax:d},Ep(i,p,"ordered",f))}};function Mp(r,t,e,n,i){for(var a=[],o=ze(r,e),s=Bt.exec(o);s;){var l=s[1],u=s[4],c=s[5],f=l.length;if(f===i)a.push(ye(t,""+l+n+u+c)),n+=1,e+=1;else if(f>i){var d=Mp(r,t,e,1,f);e=d.line,a=a.concat(d.nodes)}if(f<i||e>r.childCount)break;o=ze(r,e),s=Bt.exec(o)}return{nodes:a,line:e}}var yc=/(^\s{1,4})(.*)/;function bc(r,t,e){return r<t||Ar.test(e)||Fn.test(e)}function kc(r,t,e){var n=e.$from;n.depth===0&&(n=r.resolve(n.pos-1));var i=n.node(1),a=n.start(1),o=i.content.size;return i.rangeHasMark(0,o,t.marks.table)&&n.pos-a!==o&&n.pos!==a}function wc(r,t){var e=t.from,n=t.to;if(t.type==="indent"){var i=4;e+=i,n+=(t.lineLen+1)*i}else{var a=t.spaceLenList;e-=a[0];for(var o=0;o<a.length;o+=1)n-=a[o]}return K(r,e,n)}var vC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"inline*",attrs:{className:{default:null},codeStart:{default:null},codeEnd:{default:null}},selectable:!1,group:"block",parseDOM:[{tag:"div"}],toDOM:function(e){var n=e.attrs;return n.className?["div",{class:se(n.className)},0]:["div",0]}}},enumerable:!1,configurable:!0}),t.prototype.reorderList=function(e,n){for(var i=this.context,a=i.view,o=i.toastMark,s=i.schema,l=a.state,u=l.tr,c=l.selection,f=l.doc,d=o.findFirstNodeAtLine(e),h=d;d&&!Vk(d)&&d.parent.type!=="document";)if(d=d.parent,ep(d)){h=d;break}h&&(e=h.sourcepos[0][0]);var p=Bt.exec(ze(f,e)),v=p[1],m=p[3],g=v.length,k=Mp(f,s,e,Number(m),g),b=k.line,C=k.nodes;n=Math.max(n,b-1);for(var T=aa(f,e-1).startOffset,S=e-1;S<=n-1;S+=1){var M=f.child(S),N=M.nodeSize,R=M.content,P=u.mapping.map(T),V=P+R.size;u.replaceWith(P,V,C[S-e+1]),T+=N}var le=K(u,c.from,c.to);a.dispatch(u.setSelection(le))},t.prototype.indent=function(e){var n=this;return e===void 0&&(e=!1),function(){return function(i,a){var o=i.schema,s=i.selection,l=i.doc,u=ae(s),c=u.from,f=u.to,d=u.startFromOffset,h=u.startIndex,p=u.endIndex;if(e&&kc(l,o,s))return!1;var v=ir(l,h);if(e&&bc(c,f,v)||!e&&Ar.test(v)){var m=ia({state:i,from:d,startIndex:h,endIndex:p,createText:function(k){return"    "+k}}),g={type:"indent",from:c,to:f,lineLen:p-h};a(m.setSelection(wc(m,g))),Bt.test(v)&&n.reorderList(h+1,p+1)}else e&&a(i.tr.insert(f,ye(o,"    ")));return!0}}},t.prototype.outdent=function(e){var n=this;return e===void 0&&(e=!1),function(){return function(i,a){var o=i.selection,s=i.doc,l=i.schema,u=ae(o),c=u.from,f=u.to,d=u.startFromOffset,h=u.startIndex,p=u.endIndex;if(e&&kc(s,l,o))return!1;var v=ir(s,h);if(e&&bc(c,f,v)||!e&&Ar.test(v)){var m=[],g=ia({state:i,from:d,startIndex:h,endIndex:p,createText:function(S){var M=yc.exec(S);return m.push(M?M[1].length:0),S.replace(yc,"$2")}}),k={type:"outdent",from:c,to:f,spaceLenList:m};a(g.setSelection(wc(g,k))),Bt.test(v)&&n.reorderList(h+1,p+1)}else if(e){var b=v.slice(0,f-d),C=b.replace(/\s{1,4}$/,""),T=f-(b.length-C.length);a(i.tr.delete(T,f))}return!0}}},t.prototype.deleteLines=function(){var e=this;return function(n,i){var a=e.context.view,o=ae(n.selection),s=o.startFromOffset,l=o.endToOffset,u=function(){return i(n.tr.deleteRange(s,l)),!0};return Ta(u,Ph)(n,i,a)}},t.prototype.moveDown=function(){return function(e,n){var i=e.doc,a=e.tr,o=e.selection,s=e.schema,l=ae(o),u=l.startFromOffset,c=l.endToOffset,f=l.endIndex;if(f<i.content.childCount-1){var d=i.child(f+1),h=d.nodeSize,p=d.textContent;return a.delete(c,c+h).split(u).insert(a.mapping.map(u)-2,ye(s,p)),n(a),!0}return!1}},t.prototype.moveUp=function(){return function(e,n){var i=e.tr,a=e.doc,o=e.selection,s=e.schema,l=ae(o),u=l.startFromOffset,c=l.endToOffset,f=l.startIndex;if(f>0){var d=a.child(f-1),h=d.nodeSize,p=d.textContent;return i.delete(u-h,u).split(i.mapping.map(c)).insert(i.mapping.map(c),ye(s,p)),n(i),!0}return!1}},t.prototype.commands=function(){return{indent:this.indent(),outdent:this.outdent()}},t.prototype.keymaps=function(){return{Tab:this.indent(!0)(),"Shift-Tab":this.outdent(!0)(),"Mod-d":this.deleteLines(),"Mod-D":this.deleteLines(),"Alt-ArrowUp":this.moveUp(),"Alt-ArrowDown":this.moveDown()}},t}(G),mC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),t}(G),gC=/^#{1,6}\s/,yC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{level:{default:1},seText:{default:!1}},toDOM:function(e){var n=e.attrs,i=n.level,a=n.seText,o="heading|heading"+i;return a&&(o+="|delimiter|setext"),["span",{class:se.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.createHeadingText=function(e,n,i){for(var a=n.replace(i,"").trim(),o="";e>0;)o+="#",e-=1;return o+" "+a},t.prototype.commands=function(){var e=this;return function(n){return function(i,a){var o=n.level,s=ae(i.selection),l=s.startFromOffset,u=s.endToOffset,c=s.startIndex,f=s.endIndex,d=ia({state:i,from:l,startIndex:c,endIndex:f,createText:function(h){var p=h.match(gC),v=p?p[0]:"";return e.createHeadingText(o,h,v)}});return a(d.setSelection(K(d,d.mapping.map(u)))),!0}}},t}(Q),ko="```",bC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("code-block")},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n){var i=e.selection,a=e.schema,o=e.tr,s=ae(i),l=s.startFromOffset,u=s.endToOffset,c=ye(a,ko);return o.insert(l,c).split(l+ko.length),o.split(o.mapping.map(u)).insert(o.mapping.map(u),c),n(o.setSelection(K(o,o.mapping.map(u)-(ko.length+2)))),!0}}},t.prototype.keepIndentation=function(){var e=this;return function(n,i){var a=n.selection,o=n.tr,s=n.doc,l=n.schema,u=e.context.toastMark,c=ae(a),f=c.startFromOffset,d=c.endToOffset,h=c.endIndex,p=c.from,v=c.to,m=ir(s,h);if(p===v&&m.trim()){var g=m.match(/^\s+/),k=u.findFirstNodeAtLine(h+1);if(zk(k)&&g){var b=g[0],C=m.slice(v-f),T=ye(l,b+C);return ul(o,d,C,T),i(o),!0}}return!1}},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-p":e,"Shift-Mod-P":e,Enter:this.keepIndentation()}},t}(Q),kC=/\||\s/g;function wC(r){return[sa(r),sa(r,!0)]}function CC(r,t){for(var e=[],n=0;n<t;n+=1)e.push(sa(r));return e}function sa(r,t){for(var e="|",n=0;n<r;n+=1)e+=t?" --- |":"  |";return e}function TC(r){return r?{type:"next",parentType:"tableHead",childType:"firstChild"}:{type:"prev",parentType:"tableBody",childType:"lastChild"}}var xC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("table")},0]}}},enumerable:!1,configurable:!0}),t.prototype.extendTable=function(){var e=this;return function(n,i){var a=n.selection,o=n.doc,s=n.tr,l=n.schema;if(!a.empty)return!1;var u=ae(a),c=u.endFromOffset,f=u.endToOffset,d=u.endIndex,h=u.to,p=ir(o,d),v=[d+1,h-c+1],m=e.context.toastMark.findNodeAtPosition(v),g=mn(m,function(S){return uc(S)&&(S.parent.type==="tableDelimRow"||S.parent.parent.type==="tableBody")});if(g){var k=!p.replace(kC,"").trim(),b=g.parent,C=b.parent.parent.columns.length,T=sa(C);return k?s.deleteRange(c,f).split(s.mapping.map(f)):s.split(f).insert(s.mapping.map(f),ye(l,T)).setSelection(K(s,s.mapping.map(f)-2)),i(s),!0}return!1}},t.prototype.moveTableCell=function(e){var n=this;return function(i,a){var o=i.selection,s=i.tr,l=ae(o),u=l.endFromOffset,c=l.endIndex,f=l.to,d=[c+1,f-u],h=n.context.toastMark.findNodeAtPosition(d),p=mn(h,function(M){return uc(M)});if(p){var v=p.parent,m=TC(e),g=m.type,k=m.parentType,b=m.childType,C=Yt(p);if(p[g])C=Yt(p[g])-1;else{var T=!v[g]&&v.parent.type===k?v.parent[g][b]:v[g];if(g==="next"){var S=T?Yt(T[b]):0;C+=S+2}else g==="prev"&&(C=T?-4:0)}return a(s.setSelection(K(s,u+C))),!0}return!1}},t.prototype.addTable=function(){return function(e){return function(n,i){var a=n.selection,o=n.tr,s=n.schema,l=e,u=l.columnCount,c=l.rowCount,f=ae(a).endToOffset,d=wC(u),h=CC(u,c-1),p=qe(qe([],d),h);return p.forEach(function(v){o.split(o.mapping.map(f)).insert(o.mapping.map(f),ye(s,v))}),i(o.setSelection(K(o,f+4))),!0}}},t.prototype.commands=function(){return{addTable:this.addTable()}},t.prototype.keymaps=function(){return{Enter:this.extendTable(),Tab:this.moveTableCell(!0),"Shift-Tab":this.moveTableCell(!1)}},t}(Q),SC="***",EC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("thematic-break")},0]}}},enumerable:!1,configurable:!0}),t.prototype.hr=function(){return function(){return function(e,n){var i=e.selection,a=e.schema,o=e.tr,s=ae(i),l=s.from,u=s.to,c=s.endToOffset,f=ye(a,SC);return o.split(l).replaceWith(o.mapping.map(l),o.mapping.map(u),f).split(o.mapping.map(u)).setSelection(K(o,o.mapping.map(c))),n(o),!0}}},t.prototype.commands=function(){return{hr:this.hr()}},t.prototype.keymaps=function(){var e=this.hr()();return{"Mod-l":e,"Mod-L":e}},t}(Q);function MC(r,t){var e=r.type,n=r.sourcepos,i=n[0][0];return t<=i&&(e==="codeBlock"||e==="heading"||e.match("table"))}var OC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{odd:{default:!1},even:{default:!1},listStyle:{default:!1}},toDOM:function(e){var n=e.attrs,i=n.odd,a=n.even,o=n.listStyle,s="list-item";return o&&(s+="|list-item-style"),i&&(s+="|list-item-odd"),a&&(s+="|list-item-even"),["span",{class:se.apply(void 0,s.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.extendList=function(){var e=this;return function(n,i){var a=n.selection,o=n.doc,s=n.schema,l=n.tr,u=e.context.toastMark,c=ae(a),f=c.to,d=c.startFromOffset,h=c.endFromOffset,p=c.endIndex,v=c.endToOffset,m=ir(o,p),g=Ar.test(m);if(!g||a.from===d||!a.empty)return!1;var k=!m.replace(oa,"").trim();if(k)l.deleteRange(h,v).split(l.mapping.map(v));else{var b=yl(m),C=u.findFirstNodeAtLine(p+1),T=m.slice(f-h),S={toastMark:u,mdNode:C,doc:o,line:p+1},M=pC[b](S),N=M.listSyntax,R=M.changedResults;if(R!=null&&R.length){l.split(f),R.unshift({text:N+T,line:p+1}),e.changeToListPerLine(l,R,{from:f,startLine:R[0].line,endLine:Ee(R).line});var P=l.mapping.map(v)-T.length;l.setSelection(K(l,P))}else{var V=ye(s,N+T);ul(l,v,T,V)}}return i(l),!0}},t.prototype.toList=function(e){var n=this;return function(){return function(i,a){for(var o=i.doc,s=i.tr,l=i.selection,u=n.context.toastMark,c=ae(l),f=c.startIndex+1,d=c.endIndex+1,h=c.endToOffset,p=[],v=f;v<=d;v+=1){var m=u.findFirstNodeAtLine(v);if(m&&MC(m,v))break;if(p.indexOf(v)===-1){var g={toastMark:u,mdNode:m,doc:o,line:v,startLine:f},k=(Nr(m)?dC[e](g):hC[e](g)).changedResults,b=n.changeToListPerLine(s,k,{from:aa(o,k[0].line-1).startOffset,startLine:k[0].line,endLine:Ee(k).line,indexDiff:1});h=Math.max(b,h),k&&(p=p.concat(k.map(function(C){return C.line})))}}return a(s.setSelection(K(s,s.mapping.map(h)))),!0}}},t.prototype.changeToListPerLine=function(e,n,i){for(var a=i.from,o=i.startLine,s=i.endLine,l=i.indexDiff,u=l===void 0?0:l,c=0,f=function(p){var v=e.doc.child(p),m=v.nodeSize,g=v.content,k=e.mapping.map(a),b=k+g.size,C=n.filter(function(T){return T.line-u===p})[0];C&&(e.replaceWith(k,b,ye(d.context.schema,C.text)),c=Math.max(c,a+g.size)),a+=m},d=this,h=o-u;h<=s-u;h+=1)f(h);return c},t.prototype.toggleTask=function(){var e=this;return function(n,i){for(var a=n.selection,o=n.tr,s=n.doc,l=n.schema,u=e.context.toastMark,c=ae(a),f=c.startIndex,d=c.endIndex,h=null,p=f;p<=d;p+=1){var v=u.findFirstNodeAtLine(p+1);if(Nr(v)&&v.listData.task){var m=v.listData,g=m.checked,k=m.padding,b=g?" ":"x",C=v.sourcepos[0],T=aa(s,C[0]-1).startOffset;T+=C[1]+k,h=o.replaceWith(T,T+1,l.text(b))}}return h?(i(h),!0):!1}},t.prototype.commands=function(){return{bulletList:this.toList("bullet"),orderedList:this.toList("ordered"),taskList:this.toList("task")}},t.prototype.keymaps=function(){var e=this.toList("bullet")(),n=this.toList("ordered")(),i=this.toList("task")(),a=this.toggleTask();return{"Mod-u":e,"Mod-U":e,"Mod-o":n,"Mod-O":n,"alt-t":i,"alt-T":i,"Shift-Ctrl-x":a,"Shift-Ctrl-X":a,Enter:this.extendList()}},t}(Q);function Da(r,t){return function(){return function(e,n){var i=e.tr,a=e.selection,o=Qe(r)?r:function(b){return r.test(b)},s=t.length,l=i.doc,u=wp(a),c=u[0],f=u[1],d=Math.max(c-s,1),h=Math.min(f+s,l.content.size-1),p=a.content(),v=p.content.textBetween(0,p.content.size,`
`),m=l.textBetween(d,c,`
`),g=l.textBetween(f,h,`
`);if(v=""+m+v+g,m&&g&&o(v))i.delete(h-s,h).delete(d,d+s);else{i.insertText(t,f).insertText(t,c);var k=a.empty?K(i,c+s):K(i,c+s,f+s);i.setSelection(k)}return n(i),!0}}}var NC=/^(\*{2}|_{2}).*([\s\S]*)\1$/m,DC="**",LC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("strong")},0]}}},enumerable:!1,configurable:!0}),t.prototype.bold=function(){return Da(NC,DC)},t.prototype.commands=function(){return{bold:this.bold()}},t.prototype.keymaps=function(){var e=this.bold()();return{"Mod-b":e,"Mod-B":e}},t}(Q),AC=/^(~{2}).*([\s\S]*)\1$/m,IC="~~",RC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("strike")},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return Da(AC,IC)},t.prototype.keymaps=function(){var e=this.commands()();return{"Mod-s":e,"Mod-S":e}},t}(Q),PC=/^(\*|_).*([\s\S]*)\1$/m,BC="*",HC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("emph")},0]}}},enumerable:!1,configurable:!0}),t.prototype.italic=function(){return Da(PC,BC)},t.prototype.commands=function(){return{italic:this.italic()}},t.prototype.keymaps=function(){var e=this.italic()();return{"Mod-i":e,"Mod-I":e}},t}(Q),FC=/^(`).*([\s\S]*)\1$/m,qC="`",_C=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{start:{default:!1},end:{default:!1},marked:{default:!1}},toDOM:function(e){var n=e.attrs,i=n.start,a=n.end,o=n.marked,s="code";return i&&(s+="|delimiter|start"),a&&(s+="|delimiter|end"),o&&(s+="|marked-text"),["span",{class:se.apply(void 0,s.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return Da(FC,qC)},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-c":e,"Shift-Mod-C":e}},t}(Q),$C=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:{url:{default:!1},desc:{default:!1}},toDOM:function(e){var n=e.attrs,i=n.url,a=n.desc,o="link";return i&&(o+="|link-url|marked-text"),a&&(o+="|link-desc|marked-text"),["span",{class:se.apply(void 0,o.split("|"))},0]}}},enumerable:!1,configurable:!0}),t.prototype.addLinkOrImage=function(e){return function(n){return function(i,a){var o=i.selection,s=i.tr,l=i.schema,u=wp(o),c=u[0],f=u[1],d=n,h=d.linkText,p=d.altText,v=d.linkUrl,m=d.imageUrl,g=h,k=v,b="";return e==="image"&&(g=p,k=m,b="!"),g=ta(g),b+="["+g+"]("+k+")",a(s.replaceWith(c,f,ye(l,b))),!0}}},t.prototype.commands=function(){return{addImage:this.addLinkOrImage("image"),addLink:this.addLinkOrImage("link")}},t}(Q),zC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"taskDelimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("delimiter","list-item")},0]}}},enumerable:!1,configurable:!0}),t}(Q),VC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"delimiter"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("delimiter")},0]}}},enumerable:!1,configurable:!0}),t}(Q),UC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"meta"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("meta")},0]}}},enumerable:!1,configurable:!0}),t}(Q),WC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"markedText"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("marked-text")},0]}}},enumerable:!1,configurable:!0}),t}(Q),jC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"tableCell"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("table-cell")},0]}}},enumerable:!1,configurable:!0}),t}(Q),GC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"html"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("html")},0]}}},enumerable:!1,configurable:!0}),t}(Q),wo="$$",JC=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{toDOM:function(){return["span",{class:se("custom-block")},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(e){return function(n,i){var a=n.selection,o=n.schema,s=n.tr,l=ae(a),u=l.startFromOffset,c=l.endToOffset;if(!(e!=null&&e.info))return!1;var f=""+wo+e.info,d=ye(o,f),h=ye(o,wo);return s.insert(u,d).split(u+f.length),s.split(s.mapping.map(c)).insert(s.mapping.map(c),h),i(s.setSelection(K(s,s.mapping.map(c)-(wo.length+2)))),!0}}},t}(Q),KC=/x|backspace/i,QC=/^\[(\s*)(x?)(\s*)\](?:\s+)/i;function XC(r){var t=r.schema,e=r.toastMark;return new Xe({props:{handleDOMEvents:{keyup:function(n,i){var a,o=n.state,s=o.doc,l=o.tr,u=o.selection;if(u.empty&&KC.test(i.key)){var c=ae(u),f=c.startIndex,d=c.startFromOffset,h=c.from,p=[f+1,h-d+1],v=e.findNodeAtPosition(p),m=mn(v,function(V){var le;return V.type==="paragraph"&&((le=V.parent)===null||le===void 0?void 0:le.type)==="item"});if(!((a=m==null?void 0:m.firstChild)===null||a===void 0)&&a.literal){var g=m.firstChild,k=g.literal.match(QC);if(k){var b=g.sourcepos[0],C=k[1],T=k[2],S=k[3],M=C.length+S.length,N=aa(s,b[0]-1).startOffset,R=b[1]+N;if(T){var P=M?M+1:0;l.replaceWith(R,P+R,t.text(T)),n.dispatch(l)}else M||(l.insertText(" ",R),n.dispatch(l))}}}return!1}}}})}var Co="cut",Cc=/\r\n|\n|\r/,YC=function(r){E(t,r);function t(e,n){var i=r.call(this,e)||this,a=n.toastMark,o=n.useCommandShortcut,s=o===void 0?!0:o,l=n.mdPlugins,u=l===void 0?[]:l;return i.editorType="markdown",i.el.classList.add("md-mode"),i.toastMark=a,i.extraPlugins=u,i.specs=i.createSpecs(),i.schema=i.createSchema(),i.context=i.createContext(),i.keymaps=i.createKeymaps(s),i.view=i.createView(),i.commands=i.createCommands(),i.specs.setContext(w(w({},i.context),{view:i.view})),i.createClipboard(),i.eventEmitter.listen("changePreviewTabWrite",function(c){return i.toggleActive(!0,c)}),i.eventEmitter.listen("changePreviewTabPreview",function(){return i.toggleActive(!1)}),i.initEvent(),i}return t.prototype.toggleActive=function(e,n){fl(this.el,"active",e),e?n||this.focus():this.blur()},t.prototype.createClipboard=function(){var e=this;this.clipboard=document.createElement("textarea"),this.clipboard.className=O("pseudo-clipboard"),this.clipboard.addEventListener("paste",function(n){var i=n.clipboardData||window.clipboardData,a=i&&i.items;if(a){var o=Tt(a).some(function(l){return l.kind==="string"&&l.type==="text/rtf"});if(!o){var s=mp(a);s&&(n.preventDefault(),vl(e.eventEmitter,s,n.type))}}}),this.clipboard.addEventListener("input",function(n){var i=n.target.value;e.replaceSelection(i),n.preventDefault(),n.target.value=""}),this.el.insertBefore(this.clipboard,this.view.dom)},t.prototype.createContext=function(){return{toastMark:this.toastMark,schema:this.schema,eventEmitter:this.eventEmitter}},t.prototype.createSpecs=function(){return new kp([new iC,new vC,new yp,new mC,new yC,new aC,new bC,new JC,new xC,new jC,new EC,new OC,new LC,new RC,new HC,new _C,new $C,new VC,new zC,new WC,new UC,new GC])},t.prototype.createPlugins=function(){return qe([jw(this.context),nC(this.context),XC(this.context)],this.createPluginProps()).concat(this.defaultPlugins)},t.prototype.createView=function(){var e=this;return new Js(this.el,{state:this.createState(),dispatchTransaction:function(n){e.updateMarkdown(n);var i=e.view.state.applyTransaction(n).state;e.view.updateState(i),e.emitChangeEvent(n)},handleKeyDown:function(n,i){return(i.metaKey||i.ctrlKey)&&i.key.toUpperCase()==="V"&&e.clipboard.focus(),e.eventEmitter.emit("keydown",e.editorType,i),!1},handleDOMEvents:{copy:function(n,i){return e.captureCopy(i)},cut:function(n,i){return e.captureCopy(i,Co)},scroll:function(){return e.eventEmitter.emit("scroll","editor"),!0},keyup:function(n,i){return e.eventEmitter.emit("keyup",e.editorType,i),!1}},nodeViews:{widget:gp}})},t.prototype.createCommands=function(){return this.specs.commands(this.view)},t.prototype.captureCopy=function(e,n){e.preventDefault();var i=this.view.state,a=i.selection,o=i.tr;if(a.empty)return!0;var s=this.getChanged(a.content());return e.clipboardData?e.clipboardData.setData("text/plain",s):window.clipboardData.setData("Text",s),n===Co&&this.view.dispatch(o.deleteSelection().scrollIntoView().setMeta("uiEvent",Co)),!0},t.prototype.updateMarkdown=function(e){var n=this;e.docChanged&&e.steps.forEach(function(i,a){if(i.slice&&!(i instanceof ce)){var o=e.docs[a],s=[i.from,i.to],l=s[0],u=s[1],c=Pi(o,l,u),f=c[0],d=c[1],h=n.getChanged(i.slice);f[0]===d[0]&&f[1]===d[1]&&h===""&&(h=`
`);var p=n.toastMark.editMarkdown(f,d,h);n.eventEmitter.emit("updatePreview",p),e.setMeta("editResult",p).scrollIntoView()}})},t.prototype.getChanged=function(e){var n="",i=0,a=e.content.size;return e.content.nodesBetween(i,a,function(o,s){o.isText?n+=o.text.slice(Math.max(i,s)-s,a-s):o.isBlock&&s>0&&(n+=`
`)}),n},t.prototype.setSelection=function(e,n){n===void 0&&(n=e);var i=this.view.state.tr,a=dr(i.doc,e,n),o=a[0],s=a[1];this.view.dispatch(i.setSelection(K(i,o,s)).scrollIntoView())},t.prototype.replaceSelection=function(e,n,i){var a,o=this.view.state,s=o.tr,l=o.schema,u=o.doc,c=e.split(Cc),f=c.map(function(m){return na(l,Tr(m,l))}),d=new I(L.from(f),1,1);if(this.focus(),n&&i){var h=dr(u,n,i),p=h[0],v=h[1];a=s.replaceRange(p,v,d)}else a=s.replaceSelection(d);this.view.dispatch(a.scrollIntoView())},t.prototype.deleteSelection=function(e,n){var i,a=this.view.state,o=a.tr,s=a.doc;if(e&&n){var l=dr(s,e,n),u=l[0],c=l[1];i=o.deleteRange(u,c)}else i=o.deleteSelection();this.view.dispatch(i.scrollIntoView())},t.prototype.getSelectedText=function(e,n){var i=this.view.state,a=i.doc,o=i.selection,s=o.from,l=o.to;if(e&&n){var u=dr(a,e,n);s=u[0],l=u[1]}return a.textBetween(s,l,`
`)},t.prototype.getSelection=function(){var e=this.view.state.selection,n=e.from,i=e.to;return Pi(this.view.state.tr.doc,n,i)},t.prototype.setMarkdown=function(e,n){n===void 0&&(n=!0);var i=e.split(Cc),a=this.view.state,o=a.tr,s=a.doc,l=a.schema,u=i.map(function(c){return na(l,Tr(c,l))});this.view.dispatch(o.replaceWith(0,s.content.size,u)),n&&this.moveCursorToEnd(!0)},t.prototype.addWidget=function(e,n,i){var a=this.view.state,o=a.tr,s=a.doc,l=a.selection,u=i?dr(s,i,i)[0]:l.to;this.view.dispatch(o.setMeta("widget",{pos:u,node:e,style:n}))},t.prototype.replaceWithWidget=function(e,n,i){var a=this.view.state,o=a.tr,s=a.schema,l=a.doc,u=dr(l,e,n),c=Tr(i,s);this.view.dispatch(o.replaceWith(u[0],u[1],c))},t.prototype.getRangeInfoOfNode=function(e){var n=this.view.state,i=n.doc,a=n.selection,o=e||Pi(i,a.from)[0],s=this.toastMark.findNodeAtPosition(o);return s.type==="text"&&s.parent.type!=="paragraph"&&(s=s.parent),s.sourcepos[1][1]+=1,{range:s.sourcepos,type:s.type}},t.prototype.getMarkdown=function(){return this.toastMark.getLineTexts().map(function(e){return Ma(e)}).join(`
`)},t.prototype.getToastMark=function(){return this.toastMark},t}(bp),Tc="_feEventKey";function ZC(r,t){var e=r[Tc],n;return e||(e=r[Tc]={}),n=e[t],n||(n=e[t]=[]),n}var Op=ZC,e0=zt,la=xa,t0=Op;function r0(r,t,e){if(e0(t)){la(t.split(/\s+/g),function(n){xc(r,n,e)});return}la(t,function(n,i){xc(r,i,n)})}function xc(r,t,e){var n=t0(r,t),i;e?(la(n,function(a,o){return e===a.handler?(Sc(r,t,a.wrappedHandler),i=o,!1):!0}),n.splice(i,1)):(la(n,function(a){Sc(r,t,a.wrappedHandler)}),n.splice(0,n.length))}function Sc(r,t,e){"removeEventListener"in r?r.removeEventListener(t,e):"detachEvent"in r&&r.detachEvent("on"+t,e)}var Np=r0,n0=zt,ds=xa,i0=Op;function a0(r,t,e,n){if(n0(t)){ds(t.split(/\s+/g),function(i){Ec(r,i,e,n)});return}ds(t,function(i,a){Ec(r,a,i,e)})}function Ec(r,t,e,n){function i(a){e.call(n||r,a||window.event)}"addEventListener"in r?r.addEventListener(t,i):"attachEvent"in r&&r.attachEvent("on"+t,i),o0(r,t,e,i)}function o0(r,t,e,n){var i=i0(r,t),a=!1;ds(i,function(o){return o.handler===e?(a=!0,!1):!0}),a||i.push({handler:e,wrappedHandler:n})}var Dp=a0;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hs=function(r,t){return hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},hs(r,t)};function Ye(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");hs(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ve=function(){return ve=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},ve.apply(this,arguments)};function ps(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return r.concat(a||Array.prototype.slice.call(t))}var bn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Mc={};function s0(r){var t,e,n=Mc[r];if(n)return n;for(n=Mc[r]=[],t=0;t<128;t++)e=String.fromCharCode(t),/^[0-9a-z]$/i.test(e)?n.push(e):n.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<r.length;t++)n[r.charCodeAt(t)]=r[t];return n}function La(r,t,e){var n,i,a,o,s,l="";for(typeof t!="string"&&(e=t,t=La.defaultChars),typeof e=="undefined"&&(e=!0),s=s0(t),n=0,i=r.length;n<i;n++){if(a=r.charCodeAt(n),e&&a===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(r.slice(n+1,n+3))){l+=r.slice(n,n+3),n+=2;continue}if(a<128){l+=s[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&n+1<i&&(o=r.charCodeAt(n+1),o>=56320&&o<=57343)){l+=encodeURIComponent(r[n]+r[n+1]),n++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(r[n])}return l}La.defaultChars=";/?:@&=+$,-_.!~*'()#";La.componentChars="-_.!~*'()";var l0=La,kl={},Ht={},u0="\xC1",c0="\xE1",f0="\u0102",d0="\u0103",h0="\u223E",p0="\u223F",v0="\u223E\u0333",m0="\xC2",g0="\xE2",y0="\xB4",b0="\u0410",k0="\u0430",w0="\xC6",C0="\xE6",T0="\u2061",x0="\u{1D504}",S0="\u{1D51E}",E0="\xC0",M0="\xE0",O0="\u2135",N0="\u2135",D0="\u0391",L0="\u03B1",A0="\u0100",I0="\u0101",R0="\u2A3F",P0="&",B0="&",H0="\u2A55",F0="\u2A53",q0="\u2227",_0="\u2A5C",$0="\u2A58",z0="\u2A5A",V0="\u2220",U0="\u29A4",W0="\u2220",j0="\u29A8",G0="\u29A9",J0="\u29AA",K0="\u29AB",Q0="\u29AC",X0="\u29AD",Y0="\u29AE",Z0="\u29AF",eT="\u2221",tT="\u221F",rT="\u22BE",nT="\u299D",iT="\u2222",aT="\xC5",oT="\u237C",sT="\u0104",lT="\u0105",uT="\u{1D538}",cT="\u{1D552}",fT="\u2A6F",dT="\u2248",hT="\u2A70",pT="\u224A",vT="\u224B",mT="'",gT="\u2061",yT="\u2248",bT="\u224A",kT="\xC5",wT="\xE5",CT="\u{1D49C}",TT="\u{1D4B6}",xT="\u2254",ST="*",ET="\u2248",MT="\u224D",OT="\xC3",NT="\xE3",DT="\xC4",LT="\xE4",AT="\u2233",IT="\u2A11",RT="\u224C",PT="\u03F6",BT="\u2035",HT="\u223D",FT="\u22CD",qT="\u2216",_T="\u2AE7",$T="\u22BD",zT="\u2305",VT="\u2306",UT="\u2305",WT="\u23B5",jT="\u23B6",GT="\u224C",JT="\u0411",KT="\u0431",QT="\u201E",XT="\u2235",YT="\u2235",ZT="\u2235",e1="\u29B0",t1="\u03F6",r1="\u212C",n1="\u212C",i1="\u0392",a1="\u03B2",o1="\u2136",s1="\u226C",l1="\u{1D505}",u1="\u{1D51F}",c1="\u22C2",f1="\u25EF",d1="\u22C3",h1="\u2A00",p1="\u2A01",v1="\u2A02",m1="\u2A06",g1="\u2605",y1="\u25BD",b1="\u25B3",k1="\u2A04",w1="\u22C1",C1="\u22C0",T1="\u290D",x1="\u29EB",S1="\u25AA",E1="\u25B4",M1="\u25BE",O1="\u25C2",N1="\u25B8",D1="\u2423",L1="\u2592",A1="\u2591",I1="\u2593",R1="\u2588",P1="=\u20E5",B1="\u2261\u20E5",H1="\u2AED",F1="\u2310",q1="\u{1D539}",_1="\u{1D553}",$1="\u22A5",z1="\u22A5",V1="\u22C8",U1="\u29C9",W1="\u2510",j1="\u2555",G1="\u2556",J1="\u2557",K1="\u250C",Q1="\u2552",X1="\u2553",Y1="\u2554",Z1="\u2500",ex="\u2550",tx="\u252C",rx="\u2564",nx="\u2565",ix="\u2566",ax="\u2534",ox="\u2567",sx="\u2568",lx="\u2569",ux="\u229F",cx="\u229E",fx="\u22A0",dx="\u2518",hx="\u255B",px="\u255C",vx="\u255D",mx="\u2514",gx="\u2558",yx="\u2559",bx="\u255A",kx="\u2502",wx="\u2551",Cx="\u253C",Tx="\u256A",xx="\u256B",Sx="\u256C",Ex="\u2524",Mx="\u2561",Ox="\u2562",Nx="\u2563",Dx="\u251C",Lx="\u255E",Ax="\u255F",Ix="\u2560",Rx="\u2035",Px="\u02D8",Bx="\u02D8",Hx="\xA6",Fx="\u{1D4B7}",qx="\u212C",_x="\u204F",$x="\u223D",zx="\u22CD",Vx="\u29C5",Ux="\\",Wx="\u27C8",jx="\u2022",Gx="\u2022",Jx="\u224E",Kx="\u2AAE",Qx="\u224F",Xx="\u224E",Yx="\u224F",Zx="\u0106",eS="\u0107",tS="\u2A44",rS="\u2A49",nS="\u2A4B",iS="\u2229",aS="\u22D2",oS="\u2A47",sS="\u2A40",lS="\u2145",uS="\u2229\uFE00",cS="\u2041",fS="\u02C7",dS="\u212D",hS="\u2A4D",pS="\u010C",vS="\u010D",mS="\xC7",gS="\xE7",yS="\u0108",bS="\u0109",kS="\u2230",wS="\u2A4C",CS="\u2A50",TS="\u010A",xS="\u010B",SS="\xB8",ES="\xB8",MS="\u29B2",OS="\xA2",NS="\xB7",DS="\xB7",LS="\u{1D520}",AS="\u212D",IS="\u0427",RS="\u0447",PS="\u2713",BS="\u2713",HS="\u03A7",FS="\u03C7",qS="\u02C6",_S="\u2257",$S="\u21BA",zS="\u21BB",VS="\u229B",US="\u229A",WS="\u229D",jS="\u2299",GS="\xAE",JS="\u24C8",KS="\u2296",QS="\u2295",XS="\u2297",YS="\u25CB",ZS="\u29C3",eE="\u2257",tE="\u2A10",rE="\u2AEF",nE="\u29C2",iE="\u2232",aE="\u201D",oE="\u2019",sE="\u2663",lE="\u2663",uE=":",cE="\u2237",fE="\u2A74",dE="\u2254",hE="\u2254",pE=",",vE="@",mE="\u2201",gE="\u2218",yE="\u2201",bE="\u2102",kE="\u2245",wE="\u2A6D",CE="\u2261",TE="\u222E",xE="\u222F",SE="\u222E",EE="\u{1D554}",ME="\u2102",OE="\u2210",NE="\u2210",DE="\xA9",LE="\xA9",AE="\u2117",IE="\u2233",RE="\u21B5",PE="\u2717",BE="\u2A2F",HE="\u{1D49E}",FE="\u{1D4B8}",qE="\u2ACF",_E="\u2AD1",$E="\u2AD0",zE="\u2AD2",VE="\u22EF",UE="\u2938",WE="\u2935",jE="\u22DE",GE="\u22DF",JE="\u21B6",KE="\u293D",QE="\u2A48",XE="\u2A46",YE="\u224D",ZE="\u222A",eM="\u22D3",tM="\u2A4A",rM="\u228D",nM="\u2A45",iM="\u222A\uFE00",aM="\u21B7",oM="\u293C",sM="\u22DE",lM="\u22DF",uM="\u22CE",cM="\u22CF",fM="\xA4",dM="\u21B6",hM="\u21B7",pM="\u22CE",vM="\u22CF",mM="\u2232",gM="\u2231",yM="\u232D",bM="\u2020",kM="\u2021",wM="\u2138",CM="\u2193",TM="\u21A1",xM="\u21D3",SM="\u2010",EM="\u2AE4",MM="\u22A3",OM="\u290F",NM="\u02DD",DM="\u010E",LM="\u010F",AM="\u0414",IM="\u0434",RM="\u2021",PM="\u21CA",BM="\u2145",HM="\u2146",FM="\u2911",qM="\u2A77",_M="\xB0",$M="\u2207",zM="\u0394",VM="\u03B4",UM="\u29B1",WM="\u297F",jM="\u{1D507}",GM="\u{1D521}",JM="\u2965",KM="\u21C3",QM="\u21C2",XM="\xB4",YM="\u02D9",ZM="\u02DD",eO="`",tO="\u02DC",rO="\u22C4",nO="\u22C4",iO="\u22C4",aO="\u2666",oO="\u2666",sO="\xA8",lO="\u2146",uO="\u03DD",cO="\u22F2",fO="\xF7",dO="\xF7",hO="\u22C7",pO="\u22C7",vO="\u0402",mO="\u0452",gO="\u231E",yO="\u230D",bO="$",kO="\u{1D53B}",wO="\u{1D555}",CO="\xA8",TO="\u02D9",xO="\u20DC",SO="\u2250",EO="\u2251",MO="\u2250",OO="\u2238",NO="\u2214",DO="\u22A1",LO="\u2306",AO="\u222F",IO="\xA8",RO="\u21D3",PO="\u21D0",BO="\u21D4",HO="\u2AE4",FO="\u27F8",qO="\u27FA",_O="\u27F9",$O="\u21D2",zO="\u22A8",VO="\u21D1",UO="\u21D5",WO="\u2225",jO="\u2913",GO="\u2193",JO="\u2193",KO="\u21D3",QO="\u21F5",XO="\u0311",YO="\u21CA",ZO="\u21C3",eN="\u21C2",tN="\u2950",rN="\u295E",nN="\u2956",iN="\u21BD",aN="\u295F",oN="\u2957",sN="\u21C1",lN="\u21A7",uN="\u22A4",cN="\u2910",fN="\u231F",dN="\u230C",hN="\u{1D49F}",pN="\u{1D4B9}",vN="\u0405",mN="\u0455",gN="\u29F6",yN="\u0110",bN="\u0111",kN="\u22F1",wN="\u25BF",CN="\u25BE",TN="\u21F5",xN="\u296F",SN="\u29A6",EN="\u040F",MN="\u045F",ON="\u27FF",NN="\xC9",DN="\xE9",LN="\u2A6E",AN="\u011A",IN="\u011B",RN="\xCA",PN="\xEA",BN="\u2256",HN="\u2255",FN="\u042D",qN="\u044D",_N="\u2A77",$N="\u0116",zN="\u0117",VN="\u2251",UN="\u2147",WN="\u2252",jN="\u{1D508}",GN="\u{1D522}",JN="\u2A9A",KN="\xC8",QN="\xE8",XN="\u2A96",YN="\u2A98",ZN="\u2A99",eD="\u2208",tD="\u23E7",rD="\u2113",nD="\u2A95",iD="\u2A97",aD="\u0112",oD="\u0113",sD="\u2205",lD="\u2205",uD="\u25FB",cD="\u2205",fD="\u25AB",dD="\u2004",hD="\u2005",pD="\u2003",vD="\u014A",mD="\u014B",gD="\u2002",yD="\u0118",bD="\u0119",kD="\u{1D53C}",wD="\u{1D556}",CD="\u22D5",TD="\u29E3",xD="\u2A71",SD="\u03B5",ED="\u0395",MD="\u03B5",OD="\u03F5",ND="\u2256",DD="\u2255",LD="\u2242",AD="\u2A96",ID="\u2A95",RD="\u2A75",PD="=",BD="\u2242",HD="\u225F",FD="\u21CC",qD="\u2261",_D="\u2A78",$D="\u29E5",zD="\u2971",VD="\u2253",UD="\u212F",WD="\u2130",jD="\u2250",GD="\u2A73",JD="\u2242",KD="\u0397",QD="\u03B7",XD="\xD0",YD="\xF0",ZD="\xCB",eL="\xEB",tL="\u20AC",rL="!",nL="\u2203",iL="\u2203",aL="\u2130",oL="\u2147",sL="\u2147",lL="\u2252",uL="\u0424",cL="\u0444",fL="\u2640",dL="\uFB03",hL="\uFB00",pL="\uFB04",vL="\u{1D509}",mL="\u{1D523}",gL="\uFB01",yL="\u25FC",bL="\u25AA",kL="fj",wL="\u266D",CL="\uFB02",TL="\u25B1",xL="\u0192",SL="\u{1D53D}",EL="\u{1D557}",ML="\u2200",OL="\u2200",NL="\u22D4",DL="\u2AD9",LL="\u2131",AL="\u2A0D",IL="\xBD",RL="\u2153",PL="\xBC",BL="\u2155",HL="\u2159",FL="\u215B",qL="\u2154",_L="\u2156",$L="\xBE",zL="\u2157",VL="\u215C",UL="\u2158",WL="\u215A",jL="\u215D",GL="\u215E",JL="\u2044",KL="\u2322",QL="\u{1D4BB}",XL="\u2131",YL="\u01F5",ZL="\u0393",eA="\u03B3",tA="\u03DC",rA="\u03DD",nA="\u2A86",iA="\u011E",aA="\u011F",oA="\u0122",sA="\u011C",lA="\u011D",uA="\u0413",cA="\u0433",fA="\u0120",dA="\u0121",hA="\u2265",pA="\u2267",vA="\u2A8C",mA="\u22DB",gA="\u2265",yA="\u2267",bA="\u2A7E",kA="\u2AA9",wA="\u2A7E",CA="\u2A80",TA="\u2A82",xA="\u2A84",SA="\u22DB\uFE00",EA="\u2A94",MA="\u{1D50A}",OA="\u{1D524}",NA="\u226B",DA="\u22D9",LA="\u22D9",AA="\u2137",IA="\u0403",RA="\u0453",PA="\u2AA5",BA="\u2277",HA="\u2A92",FA="\u2AA4",qA="\u2A8A",_A="\u2A8A",$A="\u2A88",zA="\u2269",VA="\u2A88",UA="\u2269",WA="\u22E7",jA="\u{1D53E}",GA="\u{1D558}",JA="`",KA="\u2265",QA="\u22DB",XA="\u2267",YA="\u2AA2",ZA="\u2277",eI="\u2A7E",tI="\u2273",rI="\u{1D4A2}",nI="\u210A",iI="\u2273",aI="\u2A8E",oI="\u2A90",sI="\u2AA7",lI="\u2A7A",uI=">",cI=">",fI="\u226B",dI="\u22D7",hI="\u2995",pI="\u2A7C",vI="\u2A86",mI="\u2978",gI="\u22D7",yI="\u22DB",bI="\u2A8C",kI="\u2277",wI="\u2273",CI="\u2269\uFE00",TI="\u2269\uFE00",xI="\u02C7",SI="\u200A",EI="\xBD",MI="\u210B",OI="\u042A",NI="\u044A",DI="\u2948",LI="\u2194",AI="\u21D4",II="\u21AD",RI="^",PI="\u210F",BI="\u0124",HI="\u0125",FI="\u2665",qI="\u2665",_I="\u2026",$I="\u22B9",zI="\u{1D525}",VI="\u210C",UI="\u210B",WI="\u2925",jI="\u2926",GI="\u21FF",JI="\u223B",KI="\u21A9",QI="\u21AA",XI="\u{1D559}",YI="\u210D",ZI="\u2015",eR="\u2500",tR="\u{1D4BD}",rR="\u210B",nR="\u210F",iR="\u0126",aR="\u0127",oR="\u224E",sR="\u224F",lR="\u2043",uR="\u2010",cR="\xCD",fR="\xED",dR="\u2063",hR="\xCE",pR="\xEE",vR="\u0418",mR="\u0438",gR="\u0130",yR="\u0415",bR="\u0435",kR="\xA1",wR="\u21D4",CR="\u{1D526}",TR="\u2111",xR="\xCC",SR="\xEC",ER="\u2148",MR="\u2A0C",OR="\u222D",NR="\u29DC",DR="\u2129",LR="\u0132",AR="\u0133",IR="\u012A",RR="\u012B",PR="\u2111",BR="\u2148",HR="\u2110",FR="\u2111",qR="\u0131",_R="\u2111",$R="\u22B7",zR="\u01B5",VR="\u21D2",UR="\u2105",WR="\u221E",jR="\u29DD",GR="\u0131",JR="\u22BA",KR="\u222B",QR="\u222C",XR="\u2124",YR="\u222B",ZR="\u22BA",eP="\u22C2",tP="\u2A17",rP="\u2A3C",nP="\u2063",iP="\u2062",aP="\u0401",oP="\u0451",sP="\u012E",lP="\u012F",uP="\u{1D540}",cP="\u{1D55A}",fP="\u0399",dP="\u03B9",hP="\u2A3C",pP="\xBF",vP="\u{1D4BE}",mP="\u2110",gP="\u2208",yP="\u22F5",bP="\u22F9",kP="\u22F4",wP="\u22F3",CP="\u2208",TP="\u2062",xP="\u0128",SP="\u0129",EP="\u0406",MP="\u0456",OP="\xCF",NP="\xEF",DP="\u0134",LP="\u0135",AP="\u0419",IP="\u0439",RP="\u{1D50D}",PP="\u{1D527}",BP="\u0237",HP="\u{1D541}",FP="\u{1D55B}",qP="\u{1D4A5}",_P="\u{1D4BF}",$P="\u0408",zP="\u0458",VP="\u0404",UP="\u0454",WP="\u039A",jP="\u03BA",GP="\u03F0",JP="\u0136",KP="\u0137",QP="\u041A",XP="\u043A",YP="\u{1D50E}",ZP="\u{1D528}",eB="\u0138",tB="\u0425",rB="\u0445",nB="\u040C",iB="\u045C",aB="\u{1D542}",oB="\u{1D55C}",sB="\u{1D4A6}",lB="\u{1D4C0}",uB="\u21DA",cB="\u0139",fB="\u013A",dB="\u29B4",hB="\u2112",pB="\u039B",vB="\u03BB",mB="\u27E8",gB="\u27EA",yB="\u2991",bB="\u27E8",kB="\u2A85",wB="\u2112",CB="\xAB",TB="\u21E4",xB="\u291F",SB="\u2190",EB="\u219E",MB="\u21D0",OB="\u291D",NB="\u21A9",DB="\u21AB",LB="\u2939",AB="\u2973",IB="\u21A2",RB="\u2919",PB="\u291B",BB="\u2AAB",HB="\u2AAD",FB="\u2AAD\uFE00",qB="\u290C",_B="\u290E",$B="\u2772",zB="{",VB="[",UB="\u298B",WB="\u298F",jB="\u298D",GB="\u013D",JB="\u013E",KB="\u013B",QB="\u013C",XB="\u2308",YB="{",ZB="\u041B",eH="\u043B",tH="\u2936",rH="\u201C",nH="\u201E",iH="\u2967",aH="\u294B",oH="\u21B2",sH="\u2264",lH="\u2266",uH="\u27E8",cH="\u21E4",fH="\u2190",dH="\u2190",hH="\u21D0",pH="\u21C6",vH="\u21A2",mH="\u2308",gH="\u27E6",yH="\u2961",bH="\u2959",kH="\u21C3",wH="\u230A",CH="\u21BD",TH="\u21BC",xH="\u21C7",SH="\u2194",EH="\u2194",MH="\u21D4",OH="\u21C6",NH="\u21CB",DH="\u21AD",LH="\u294E",AH="\u21A4",IH="\u22A3",RH="\u295A",PH="\u22CB",BH="\u29CF",HH="\u22B2",FH="\u22B4",qH="\u2951",_H="\u2960",$H="\u2958",zH="\u21BF",VH="\u2952",UH="\u21BC",WH="\u2A8B",jH="\u22DA",GH="\u2264",JH="\u2266",KH="\u2A7D",QH="\u2AA8",XH="\u2A7D",YH="\u2A7F",ZH="\u2A81",eF="\u2A83",tF="\u22DA\uFE00",rF="\u2A93",nF="\u2A85",iF="\u22D6",aF="\u22DA",oF="\u2A8B",sF="\u22DA",lF="\u2266",uF="\u2276",cF="\u2276",fF="\u2AA1",dF="\u2272",hF="\u2A7D",pF="\u2272",vF="\u297C",mF="\u230A",gF="\u{1D50F}",yF="\u{1D529}",bF="\u2276",kF="\u2A91",wF="\u2962",CF="\u21BD",TF="\u21BC",xF="\u296A",SF="\u2584",EF="\u0409",MF="\u0459",OF="\u21C7",NF="\u226A",DF="\u22D8",LF="\u231E",AF="\u21DA",IF="\u296B",RF="\u25FA",PF="\u013F",BF="\u0140",HF="\u23B0",FF="\u23B0",qF="\u2A89",_F="\u2A89",$F="\u2A87",zF="\u2268",VF="\u2A87",UF="\u2268",WF="\u22E6",jF="\u27EC",GF="\u21FD",JF="\u27E6",KF="\u27F5",QF="\u27F5",XF="\u27F8",YF="\u27F7",ZF="\u27F7",eq="\u27FA",tq="\u27FC",rq="\u27F6",nq="\u27F6",iq="\u27F9",aq="\u21AB",oq="\u21AC",sq="\u2985",lq="\u{1D543}",uq="\u{1D55D}",cq="\u2A2D",fq="\u2A34",dq="\u2217",hq="_",pq="\u2199",vq="\u2198",mq="\u25CA",gq="\u25CA",yq="\u29EB",bq="(",kq="\u2993",wq="\u21C6",Cq="\u231F",Tq="\u21CB",xq="\u296D",Sq="\u200E",Eq="\u22BF",Mq="\u2039",Oq="\u{1D4C1}",Nq="\u2112",Dq="\u21B0",Lq="\u21B0",Aq="\u2272",Iq="\u2A8D",Rq="\u2A8F",Pq="[",Bq="\u2018",Hq="\u201A",Fq="\u0141",qq="\u0142",_q="\u2AA6",$q="\u2A79",zq="<",Vq="<",Uq="\u226A",Wq="\u22D6",jq="\u22CB",Gq="\u22C9",Jq="\u2976",Kq="\u2A7B",Qq="\u25C3",Xq="\u22B4",Yq="\u25C2",Zq="\u2996",e_="\u294A",t_="\u2966",r_="\u2268\uFE00",n_="\u2268\uFE00",i_="\xAF",a_="\u2642",o_="\u2720",s_="\u2720",l_="\u21A6",u_="\u21A6",c_="\u21A7",f_="\u21A4",d_="\u21A5",h_="\u25AE",p_="\u2A29",v_="\u041C",m_="\u043C",g_="\u2014",y_="\u223A",b_="\u2221",k_="\u205F",w_="\u2133",C_="\u{1D510}",T_="\u{1D52A}",x_="\u2127",S_="\xB5",E_="*",M_="\u2AF0",O_="\u2223",N_="\xB7",D_="\u229F",L_="\u2212",A_="\u2238",I_="\u2A2A",R_="\u2213",P_="\u2ADB",B_="\u2026",H_="\u2213",F_="\u22A7",q_="\u{1D544}",__="\u{1D55E}",$_="\u2213",z_="\u{1D4C2}",V_="\u2133",U_="\u223E",W_="\u039C",j_="\u03BC",G_="\u22B8",J_="\u22B8",K_="\u2207",Q_="\u0143",X_="\u0144",Y_="\u2220\u20D2",Z_="\u2249",e$="\u2A70\u0338",t$="\u224B\u0338",r$="\u0149",n$="\u2249",i$="\u266E",a$="\u2115",o$="\u266E",s$="\xA0",l$="\u224E\u0338",u$="\u224F\u0338",c$="\u2A43",f$="\u0147",d$="\u0148",h$="\u0145",p$="\u0146",v$="\u2247",m$="\u2A6D\u0338",g$="\u2A42",y$="\u041D",b$="\u043D",k$="\u2013",w$="\u2924",C$="\u2197",T$="\u21D7",x$="\u2197",S$="\u2260",E$="\u2250\u0338",M$="\u200B",O$="\u200B",N$="\u200B",D$="\u200B",L$="\u2262",A$="\u2928",I$="\u2242\u0338",R$="\u226B",P$="\u226A",B$=`
`,H$="\u2204",F$="\u2204",q$="\u{1D511}",_$="\u{1D52B}",$$="\u2267\u0338",z$="\u2271",V$="\u2271",U$="\u2267\u0338",W$="\u2A7E\u0338",j$="\u2A7E\u0338",G$="\u22D9\u0338",J$="\u2275",K$="\u226B\u20D2",Q$="\u226F",X$="\u226F",Y$="\u226B\u0338",Z$="\u21AE",ez="\u21CE",tz="\u2AF2",rz="\u220B",nz="\u22FC",iz="\u22FA",az="\u220B",oz="\u040A",sz="\u045A",lz="\u219A",uz="\u21CD",cz="\u2025",fz="\u2266\u0338",dz="\u2270",hz="\u219A",pz="\u21CD",vz="\u21AE",mz="\u21CE",gz="\u2270",yz="\u2266\u0338",bz="\u2A7D\u0338",kz="\u2A7D\u0338",wz="\u226E",Cz="\u22D8\u0338",Tz="\u2274",xz="\u226A\u20D2",Sz="\u226E",Ez="\u22EA",Mz="\u22EC",Oz="\u226A\u0338",Nz="\u2224",Dz="\u2060",Lz="\xA0",Az="\u{1D55F}",Iz="\u2115",Rz="\u2AEC",Pz="\xAC",Bz="\u2262",Hz="\u226D",Fz="\u2226",qz="\u2209",_z="\u2260",$z="\u2242\u0338",zz="\u2204",Vz="\u226F",Uz="\u2271",Wz="\u2267\u0338",jz="\u226B\u0338",Gz="\u2279",Jz="\u2A7E\u0338",Kz="\u2275",Qz="\u224E\u0338",Xz="\u224F\u0338",Yz="\u2209",Zz="\u22F5\u0338",eV="\u22F9\u0338",tV="\u2209",rV="\u22F7",nV="\u22F6",iV="\u29CF\u0338",aV="\u22EA",oV="\u22EC",sV="\u226E",lV="\u2270",uV="\u2278",cV="\u226A\u0338",fV="\u2A7D\u0338",dV="\u2274",hV="\u2AA2\u0338",pV="\u2AA1\u0338",vV="\u220C",mV="\u220C",gV="\u22FE",yV="\u22FD",bV="\u2280",kV="\u2AAF\u0338",wV="\u22E0",CV="\u220C",TV="\u29D0\u0338",xV="\u22EB",SV="\u22ED",EV="\u228F\u0338",MV="\u22E2",OV="\u2290\u0338",NV="\u22E3",DV="\u2282\u20D2",LV="\u2288",AV="\u2281",IV="\u2AB0\u0338",RV="\u22E1",PV="\u227F\u0338",BV="\u2283\u20D2",HV="\u2289",FV="\u2241",qV="\u2244",_V="\u2247",$V="\u2249",zV="\u2224",VV="\u2226",UV="\u2226",WV="\u2AFD\u20E5",jV="\u2202\u0338",GV="\u2A14",JV="\u2280",KV="\u22E0",QV="\u2280",XV="\u2AAF\u0338",YV="\u2AAF\u0338",ZV="\u2933\u0338",e2="\u219B",t2="\u21CF",r2="\u219D\u0338",n2="\u219B",i2="\u21CF",a2="\u22EB",o2="\u22ED",s2="\u2281",l2="\u22E1",u2="\u2AB0\u0338",c2="\u{1D4A9}",f2="\u{1D4C3}",d2="\u2224",h2="\u2226",p2="\u2241",v2="\u2244",m2="\u2244",g2="\u2224",y2="\u2226",b2="\u22E2",k2="\u22E3",w2="\u2284",C2="\u2AC5\u0338",T2="\u2288",x2="\u2282\u20D2",S2="\u2288",E2="\u2AC5\u0338",M2="\u2281",O2="\u2AB0\u0338",N2="\u2285",D2="\u2AC6\u0338",L2="\u2289",A2="\u2283\u20D2",I2="\u2289",R2="\u2AC6\u0338",P2="\u2279",B2="\xD1",H2="\xF1",F2="\u2278",q2="\u22EA",_2="\u22EC",$2="\u22EB",z2="\u22ED",V2="\u039D",U2="\u03BD",W2="#",j2="\u2116",G2="\u2007",J2="\u224D\u20D2",K2="\u22AC",Q2="\u22AD",X2="\u22AE",Y2="\u22AF",Z2="\u2265\u20D2",eU=">\u20D2",tU="\u2904",rU="\u29DE",nU="\u2902",iU="\u2264\u20D2",aU="<\u20D2",oU="\u22B4\u20D2",sU="\u2903",lU="\u22B5\u20D2",uU="\u223C\u20D2",cU="\u2923",fU="\u2196",dU="\u21D6",hU="\u2196",pU="\u2927",vU="\xD3",mU="\xF3",gU="\u229B",yU="\xD4",bU="\xF4",kU="\u229A",wU="\u041E",CU="\u043E",TU="\u229D",xU="\u0150",SU="\u0151",EU="\u2A38",MU="\u2299",OU="\u29BC",NU="\u0152",DU="\u0153",LU="\u29BF",AU="\u{1D512}",IU="\u{1D52C}",RU="\u02DB",PU="\xD2",BU="\xF2",HU="\u29C1",FU="\u29B5",qU="\u03A9",_U="\u222E",$U="\u21BA",zU="\u29BE",VU="\u29BB",UU="\u203E",WU="\u29C0",jU="\u014C",GU="\u014D",JU="\u03A9",KU="\u03C9",QU="\u039F",XU="\u03BF",YU="\u29B6",ZU="\u2296",e3="\u{1D546}",t3="\u{1D560}",r3="\u29B7",n3="\u201C",i3="\u2018",a3="\u29B9",o3="\u2295",s3="\u21BB",l3="\u2A54",u3="\u2228",c3="\u2A5D",f3="\u2134",d3="\u2134",h3="\xAA",p3="\xBA",v3="\u22B6",m3="\u2A56",g3="\u2A57",y3="\u2A5B",b3="\u24C8",k3="\u{1D4AA}",w3="\u2134",C3="\xD8",T3="\xF8",x3="\u2298",S3="\xD5",E3="\xF5",M3="\u2A36",O3="\u2A37",N3="\u2297",D3="\xD6",L3="\xF6",A3="\u233D",I3="\u203E",R3="\u23DE",P3="\u23B4",B3="\u23DC",H3="\xB6",F3="\u2225",q3="\u2225",_3="\u2AF3",$3="\u2AFD",z3="\u2202",V3="\u2202",U3="\u041F",W3="\u043F",j3="%",G3=".",J3="\u2030",K3="\u22A5",Q3="\u2031",X3="\u{1D513}",Y3="\u{1D52D}",Z3="\u03A6",eW="\u03C6",tW="\u03D5",rW="\u2133",nW="\u260E",iW="\u03A0",aW="\u03C0",oW="\u22D4",sW="\u03D6",lW="\u210F",uW="\u210E",cW="\u210F",fW="\u2A23",dW="\u229E",hW="\u2A22",pW="+",vW="\u2214",mW="\u2A25",gW="\u2A72",yW="\xB1",bW="\xB1",kW="\u2A26",wW="\u2A27",CW="\xB1",TW="\u210C",xW="\u2A15",SW="\u{1D561}",EW="\u2119",MW="\xA3",OW="\u2AB7",NW="\u2ABB",DW="\u227A",LW="\u227C",AW="\u2AB7",IW="\u227A",RW="\u227C",PW="\u227A",BW="\u2AAF",HW="\u227C",FW="\u227E",qW="\u2AAF",_W="\u2AB9",$W="\u2AB5",zW="\u22E8",VW="\u2AAF",UW="\u2AB3",WW="\u227E",jW="\u2032",GW="\u2033",JW="\u2119",KW="\u2AB9",QW="\u2AB5",XW="\u22E8",YW="\u220F",ZW="\u220F",ej="\u232E",tj="\u2312",rj="\u2313",nj="\u221D",ij="\u221D",aj="\u2237",oj="\u221D",sj="\u227E",lj="\u22B0",uj="\u{1D4AB}",cj="\u{1D4C5}",fj="\u03A8",dj="\u03C8",hj="\u2008",pj="\u{1D514}",vj="\u{1D52E}",mj="\u2A0C",gj="\u{1D562}",yj="\u211A",bj="\u2057",kj="\u{1D4AC}",wj="\u{1D4C6}",Cj="\u210D",Tj="\u2A16",xj="?",Sj="\u225F",Ej='"',Mj='"',Oj="\u21DB",Nj="\u223D\u0331",Dj="\u0154",Lj="\u0155",Aj="\u221A",Ij="\u29B3",Rj="\u27E9",Pj="\u27EB",Bj="\u2992",Hj="\u29A5",Fj="\u27E9",qj="\xBB",_j="\u2975",$j="\u21E5",zj="\u2920",Vj="\u2933",Uj="\u2192",Wj="\u21A0",jj="\u21D2",Gj="\u291E",Jj="\u21AA",Kj="\u21AC",Qj="\u2945",Xj="\u2974",Yj="\u2916",Zj="\u21A3",eG="\u219D",tG="\u291A",rG="\u291C",nG="\u2236",iG="\u211A",aG="\u290D",oG="\u290F",sG="\u2910",lG="\u2773",uG="}",cG="]",fG="\u298C",dG="\u298E",hG="\u2990",pG="\u0158",vG="\u0159",mG="\u0156",gG="\u0157",yG="\u2309",bG="}",kG="\u0420",wG="\u0440",CG="\u2937",TG="\u2969",xG="\u201D",SG="\u201D",EG="\u21B3",MG="\u211C",OG="\u211B",NG="\u211C",DG="\u211D",LG="\u211C",AG="\u25AD",IG="\xAE",RG="\xAE",PG="\u220B",BG="\u21CB",HG="\u296F",FG="\u297D",qG="\u230B",_G="\u{1D52F}",$G="\u211C",zG="\u2964",VG="\u21C1",UG="\u21C0",WG="\u296C",jG="\u03A1",GG="\u03C1",JG="\u03F1",KG="\u27E9",QG="\u21E5",XG="\u2192",YG="\u2192",ZG="\u21D2",e4="\u21C4",t4="\u21A3",r4="\u2309",n4="\u27E7",i4="\u295D",a4="\u2955",o4="\u21C2",s4="\u230B",l4="\u21C1",u4="\u21C0",c4="\u21C4",f4="\u21CC",d4="\u21C9",h4="\u219D",p4="\u21A6",v4="\u22A2",m4="\u295B",g4="\u22CC",y4="\u29D0",b4="\u22B3",k4="\u22B5",w4="\u294F",C4="\u295C",T4="\u2954",x4="\u21BE",S4="\u2953",E4="\u21C0",M4="\u02DA",O4="\u2253",N4="\u21C4",D4="\u21CC",L4="\u200F",A4="\u23B1",I4="\u23B1",R4="\u2AEE",P4="\u27ED",B4="\u21FE",H4="\u27E7",F4="\u2986",q4="\u{1D563}",_4="\u211D",$4="\u2A2E",z4="\u2A35",V4="\u2970",U4=")",W4="\u2994",j4="\u2A12",G4="\u21C9",J4="\u21DB",K4="\u203A",Q4="\u{1D4C7}",X4="\u211B",Y4="\u21B1",Z4="\u21B1",eJ="]",tJ="\u2019",rJ="\u2019",nJ="\u22CC",iJ="\u22CA",aJ="\u25B9",oJ="\u22B5",sJ="\u25B8",lJ="\u29CE",uJ="\u29F4",cJ="\u2968",fJ="\u211E",dJ="\u015A",hJ="\u015B",pJ="\u201A",vJ="\u2AB8",mJ="\u0160",gJ="\u0161",yJ="\u2ABC",bJ="\u227B",kJ="\u227D",wJ="\u2AB0",CJ="\u2AB4",TJ="\u015E",xJ="\u015F",SJ="\u015C",EJ="\u015D",MJ="\u2ABA",OJ="\u2AB6",NJ="\u22E9",DJ="\u2A13",LJ="\u227F",AJ="\u0421",IJ="\u0441",RJ="\u22A1",PJ="\u22C5",BJ="\u2A66",HJ="\u2925",FJ="\u2198",qJ="\u21D8",_J="\u2198",$J="\xA7",zJ=";",VJ="\u2929",UJ="\u2216",WJ="\u2216",jJ="\u2736",GJ="\u{1D516}",JJ="\u{1D530}",KJ="\u2322",QJ="\u266F",XJ="\u0429",YJ="\u0449",ZJ="\u0428",e5="\u0448",t5="\u2193",r5="\u2190",n5="\u2223",i5="\u2225",a5="\u2192",o5="\u2191",s5="\xAD",l5="\u03A3",u5="\u03C3",c5="\u03C2",f5="\u03C2",d5="\u223C",h5="\u2A6A",p5="\u2243",v5="\u2243",m5="\u2A9E",g5="\u2AA0",y5="\u2A9D",b5="\u2A9F",k5="\u2246",w5="\u2A24",C5="\u2972",T5="\u2190",x5="\u2218",S5="\u2216",E5="\u2A33",M5="\u29E4",O5="\u2223",N5="\u2323",D5="\u2AAA",L5="\u2AAC",A5="\u2AAC\uFE00",I5="\u042C",R5="\u044C",P5="\u233F",B5="\u29C4",H5="/",F5="\u{1D54A}",q5="\u{1D564}",_5="\u2660",$5="\u2660",z5="\u2225",V5="\u2293",U5="\u2293\uFE00",W5="\u2294",j5="\u2294\uFE00",G5="\u221A",J5="\u228F",K5="\u2291",Q5="\u228F",X5="\u2291",Y5="\u2290",Z5="\u2292",eK="\u2290",tK="\u2292",rK="\u25A1",nK="\u25A1",iK="\u2293",aK="\u228F",oK="\u2291",sK="\u2290",lK="\u2292",uK="\u2294",cK="\u25AA",fK="\u25A1",dK="\u25AA",hK="\u2192",pK="\u{1D4AE}",vK="\u{1D4C8}",mK="\u2216",gK="\u2323",yK="\u22C6",bK="\u22C6",kK="\u2606",wK="\u2605",CK="\u03F5",TK="\u03D5",xK="\xAF",SK="\u2282",EK="\u22D0",MK="\u2ABD",OK="\u2AC5",NK="\u2286",DK="\u2AC3",LK="\u2AC1",AK="\u2ACB",IK="\u228A",RK="\u2ABF",PK="\u2979",BK="\u2282",HK="\u22D0",FK="\u2286",qK="\u2AC5",_K="\u2286",$K="\u228A",zK="\u2ACB",VK="\u2AC7",UK="\u2AD5",WK="\u2AD3",jK="\u2AB8",GK="\u227B",JK="\u227D",KK="\u227B",QK="\u2AB0",XK="\u227D",YK="\u227F",ZK="\u2AB0",e8="\u2ABA",t8="\u2AB6",r8="\u22E9",n8="\u227F",i8="\u220B",a8="\u2211",o8="\u2211",s8="\u266A",l8="\xB9",u8="\xB2",c8="\xB3",f8="\u2283",d8="\u22D1",h8="\u2ABE",p8="\u2AD8",v8="\u2AC6",m8="\u2287",g8="\u2AC4",y8="\u2283",b8="\u2287",k8="\u27C9",w8="\u2AD7",C8="\u297B",T8="\u2AC2",x8="\u2ACC",S8="\u228B",E8="\u2AC0",M8="\u2283",O8="\u22D1",N8="\u2287",D8="\u2AC6",L8="\u228B",A8="\u2ACC",I8="\u2AC8",R8="\u2AD4",P8="\u2AD6",B8="\u2926",H8="\u2199",F8="\u21D9",q8="\u2199",_8="\u292A",$8="\xDF",z8="	",V8="\u2316",U8="\u03A4",W8="\u03C4",j8="\u23B4",G8="\u0164",J8="\u0165",K8="\u0162",Q8="\u0163",X8="\u0422",Y8="\u0442",Z8="\u20DB",e6="\u2315",t6="\u{1D517}",r6="\u{1D531}",n6="\u2234",i6="\u2234",a6="\u2234",o6="\u0398",s6="\u03B8",l6="\u03D1",u6="\u03D1",c6="\u2248",f6="\u223C",d6="\u205F\u200A",h6="\u2009",p6="\u2009",v6="\u2248",m6="\u223C",g6="\xDE",y6="\xFE",b6="\u02DC",k6="\u223C",w6="\u2243",C6="\u2245",T6="\u2248",x6="\u2A31",S6="\u22A0",E6="\xD7",M6="\u2A30",O6="\u222D",N6="\u2928",D6="\u2336",L6="\u2AF1",A6="\u22A4",I6="\u{1D54B}",R6="\u{1D565}",P6="\u2ADA",B6="\u2929",H6="\u2034",F6="\u2122",q6="\u2122",_6="\u25B5",$6="\u25BF",z6="\u25C3",V6="\u22B4",U6="\u225C",W6="\u25B9",j6="\u22B5",G6="\u25EC",J6="\u225C",K6="\u2A3A",Q6="\u20DB",X6="\u2A39",Y6="\u29CD",Z6="\u2A3B",e9="\u23E2",t9="\u{1D4AF}",r9="\u{1D4C9}",n9="\u0426",i9="\u0446",a9="\u040B",o9="\u045B",s9="\u0166",l9="\u0167",u9="\u226C",c9="\u219E",f9="\u21A0",d9="\xDA",h9="\xFA",p9="\u2191",v9="\u219F",m9="\u21D1",g9="\u2949",y9="\u040E",b9="\u045E",k9="\u016C",w9="\u016D",C9="\xDB",T9="\xFB",x9="\u0423",S9="\u0443",E9="\u21C5",M9="\u0170",O9="\u0171",N9="\u296E",D9="\u297E",L9="\u{1D518}",A9="\u{1D532}",I9="\xD9",R9="\xF9",P9="\u2963",B9="\u21BF",H9="\u21BE",F9="\u2580",q9="\u231C",_9="\u231C",$9="\u230F",z9="\u25F8",V9="\u016A",U9="\u016B",W9="\xA8",j9="_",G9="\u23DF",J9="\u23B5",K9="\u23DD",Q9="\u22C3",X9="\u228E",Y9="\u0172",Z9="\u0173",e7="\u{1D54C}",t7="\u{1D566}",r7="\u2912",n7="\u2191",i7="\u2191",a7="\u21D1",o7="\u21C5",s7="\u2195",l7="\u2195",u7="\u21D5",c7="\u296E",f7="\u21BF",d7="\u21BE",h7="\u228E",p7="\u2196",v7="\u2197",m7="\u03C5",g7="\u03D2",y7="\u03D2",b7="\u03A5",k7="\u03C5",w7="\u21A5",C7="\u22A5",T7="\u21C8",x7="\u231D",S7="\u231D",E7="\u230E",M7="\u016E",O7="\u016F",N7="\u25F9",D7="\u{1D4B0}",L7="\u{1D4CA}",A7="\u22F0",I7="\u0168",R7="\u0169",P7="\u25B5",B7="\u25B4",H7="\u21C8",F7="\xDC",q7="\xFC",_7="\u29A7",$7="\u299C",z7="\u03F5",V7="\u03F0",U7="\u2205",W7="\u03D5",j7="\u03D6",G7="\u221D",J7="\u2195",K7="\u21D5",Q7="\u03F1",X7="\u03C2",Y7="\u228A\uFE00",Z7="\u2ACB\uFE00",eQ="\u228B\uFE00",tQ="\u2ACC\uFE00",rQ="\u03D1",nQ="\u22B2",iQ="\u22B3",aQ="\u2AE8",oQ="\u2AEB",sQ="\u2AE9",lQ="\u0412",uQ="\u0432",cQ="\u22A2",fQ="\u22A8",dQ="\u22A9",hQ="\u22AB",pQ="\u2AE6",vQ="\u22BB",mQ="\u2228",gQ="\u22C1",yQ="\u225A",bQ="\u22EE",kQ="|",wQ="\u2016",CQ="|",TQ="\u2016",xQ="\u2223",SQ="|",EQ="\u2758",MQ="\u2240",OQ="\u200A",NQ="\u{1D519}",DQ="\u{1D533}",LQ="\u22B2",AQ="\u2282\u20D2",IQ="\u2283\u20D2",RQ="\u{1D54D}",PQ="\u{1D567}",BQ="\u221D",HQ="\u22B3",FQ="\u{1D4B1}",qQ="\u{1D4CB}",_Q="\u2ACB\uFE00",$Q="\u228A\uFE00",zQ="\u2ACC\uFE00",VQ="\u228B\uFE00",UQ="\u22AA",WQ="\u299A",jQ="\u0174",GQ="\u0175",JQ="\u2A5F",KQ="\u2227",QQ="\u22C0",XQ="\u2259",YQ="\u2118",ZQ="\u{1D51A}",eX="\u{1D534}",tX="\u{1D54E}",rX="\u{1D568}",nX="\u2118",iX="\u2240",aX="\u2240",oX="\u{1D4B2}",sX="\u{1D4CC}",lX="\u22C2",uX="\u25EF",cX="\u22C3",fX="\u25BD",dX="\u{1D51B}",hX="\u{1D535}",pX="\u27F7",vX="\u27FA",mX="\u039E",gX="\u03BE",yX="\u27F5",bX="\u27F8",kX="\u27FC",wX="\u22FB",CX="\u2A00",TX="\u{1D54F}",xX="\u{1D569}",SX="\u2A01",EX="\u2A02",MX="\u27F6",OX="\u27F9",NX="\u{1D4B3}",DX="\u{1D4CD}",LX="\u2A06",AX="\u2A04",IX="\u25B3",RX="\u22C1",PX="\u22C0",BX="\xDD",HX="\xFD",FX="\u042F",qX="\u044F",_X="\u0176",$X="\u0177",zX="\u042B",VX="\u044B",UX="\xA5",WX="\u{1D51C}",jX="\u{1D536}",GX="\u0407",JX="\u0457",KX="\u{1D550}",QX="\u{1D56A}",XX="\u{1D4B4}",YX="\u{1D4CE}",ZX="\u042E",eY="\u044E",tY="\xFF",rY="\u0178",nY="\u0179",iY="\u017A",aY="\u017D",oY="\u017E",sY="\u0417",lY="\u0437",uY="\u017B",cY="\u017C",fY="\u2128",dY="\u200B",hY="\u0396",pY="\u03B6",vY="\u{1D537}",mY="\u2128",gY="\u0416",yY="\u0436",bY="\u21DD",kY="\u{1D56B}",wY="\u2124",CY="\u{1D4B5}",TY="\u{1D4CF}",xY="\u200D",SY="\u200C",Lp={Aacute:u0,aacute:c0,Abreve:f0,abreve:d0,ac:h0,acd:p0,acE:v0,Acirc:m0,acirc:g0,acute:y0,Acy:b0,acy:k0,AElig:w0,aelig:C0,af:T0,Afr:x0,afr:S0,Agrave:E0,agrave:M0,alefsym:O0,aleph:N0,Alpha:D0,alpha:L0,Amacr:A0,amacr:I0,amalg:R0,amp:P0,AMP:B0,andand:H0,And:F0,and:q0,andd:_0,andslope:$0,andv:z0,ang:V0,ange:U0,angle:W0,angmsdaa:j0,angmsdab:G0,angmsdac:J0,angmsdad:K0,angmsdae:Q0,angmsdaf:X0,angmsdag:Y0,angmsdah:Z0,angmsd:eT,angrt:tT,angrtvb:rT,angrtvbd:nT,angsph:iT,angst:aT,angzarr:oT,Aogon:sT,aogon:lT,Aopf:uT,aopf:cT,apacir:fT,ap:dT,apE:hT,ape:pT,apid:vT,apos:mT,ApplyFunction:gT,approx:yT,approxeq:bT,Aring:kT,aring:wT,Ascr:CT,ascr:TT,Assign:xT,ast:ST,asymp:ET,asympeq:MT,Atilde:OT,atilde:NT,Auml:DT,auml:LT,awconint:AT,awint:IT,backcong:RT,backepsilon:PT,backprime:BT,backsim:HT,backsimeq:FT,Backslash:qT,Barv:_T,barvee:$T,barwed:zT,Barwed:VT,barwedge:UT,bbrk:WT,bbrktbrk:jT,bcong:GT,Bcy:JT,bcy:KT,bdquo:QT,becaus:XT,because:YT,Because:ZT,bemptyv:e1,bepsi:t1,bernou:r1,Bernoullis:n1,Beta:i1,beta:a1,beth:o1,between:s1,Bfr:l1,bfr:u1,bigcap:c1,bigcirc:f1,bigcup:d1,bigodot:h1,bigoplus:p1,bigotimes:v1,bigsqcup:m1,bigstar:g1,bigtriangledown:y1,bigtriangleup:b1,biguplus:k1,bigvee:w1,bigwedge:C1,bkarow:T1,blacklozenge:x1,blacksquare:S1,blacktriangle:E1,blacktriangledown:M1,blacktriangleleft:O1,blacktriangleright:N1,blank:D1,blk12:L1,blk14:A1,blk34:I1,block:R1,bne:P1,bnequiv:B1,bNot:H1,bnot:F1,Bopf:q1,bopf:_1,bot:$1,bottom:z1,bowtie:V1,boxbox:U1,boxdl:W1,boxdL:j1,boxDl:G1,boxDL:J1,boxdr:K1,boxdR:Q1,boxDr:X1,boxDR:Y1,boxh:Z1,boxH:ex,boxhd:tx,boxHd:rx,boxhD:nx,boxHD:ix,boxhu:ax,boxHu:ox,boxhU:sx,boxHU:lx,boxminus:ux,boxplus:cx,boxtimes:fx,boxul:dx,boxuL:hx,boxUl:px,boxUL:vx,boxur:mx,boxuR:gx,boxUr:yx,boxUR:bx,boxv:kx,boxV:wx,boxvh:Cx,boxvH:Tx,boxVh:xx,boxVH:Sx,boxvl:Ex,boxvL:Mx,boxVl:Ox,boxVL:Nx,boxvr:Dx,boxvR:Lx,boxVr:Ax,boxVR:Ix,bprime:Rx,breve:Px,Breve:Bx,brvbar:Hx,bscr:Fx,Bscr:qx,bsemi:_x,bsim:$x,bsime:zx,bsolb:Vx,bsol:Ux,bsolhsub:Wx,bull:jx,bullet:Gx,bump:Jx,bumpE:Kx,bumpe:Qx,Bumpeq:Xx,bumpeq:Yx,Cacute:Zx,cacute:eS,capand:tS,capbrcup:rS,capcap:nS,cap:iS,Cap:aS,capcup:oS,capdot:sS,CapitalDifferentialD:lS,caps:uS,caret:cS,caron:fS,Cayleys:dS,ccaps:hS,Ccaron:pS,ccaron:vS,Ccedil:mS,ccedil:gS,Ccirc:yS,ccirc:bS,Cconint:kS,ccups:wS,ccupssm:CS,Cdot:TS,cdot:xS,cedil:SS,Cedilla:ES,cemptyv:MS,cent:OS,centerdot:NS,CenterDot:DS,cfr:LS,Cfr:AS,CHcy:IS,chcy:RS,check:PS,checkmark:BS,Chi:HS,chi:FS,circ:qS,circeq:_S,circlearrowleft:$S,circlearrowright:zS,circledast:VS,circledcirc:US,circleddash:WS,CircleDot:jS,circledR:GS,circledS:JS,CircleMinus:KS,CirclePlus:QS,CircleTimes:XS,cir:YS,cirE:ZS,cire:eE,cirfnint:tE,cirmid:rE,cirscir:nE,ClockwiseContourIntegral:iE,CloseCurlyDoubleQuote:aE,CloseCurlyQuote:oE,clubs:sE,clubsuit:lE,colon:uE,Colon:cE,Colone:fE,colone:dE,coloneq:hE,comma:pE,commat:vE,comp:mE,compfn:gE,complement:yE,complexes:bE,cong:kE,congdot:wE,Congruent:CE,conint:TE,Conint:xE,ContourIntegral:SE,copf:EE,Copf:ME,coprod:OE,Coproduct:NE,copy:DE,COPY:LE,copysr:AE,CounterClockwiseContourIntegral:IE,crarr:RE,cross:PE,Cross:BE,Cscr:HE,cscr:FE,csub:qE,csube:_E,csup:$E,csupe:zE,ctdot:VE,cudarrl:UE,cudarrr:WE,cuepr:jE,cuesc:GE,cularr:JE,cularrp:KE,cupbrcap:QE,cupcap:XE,CupCap:YE,cup:ZE,Cup:eM,cupcup:tM,cupdot:rM,cupor:nM,cups:iM,curarr:aM,curarrm:oM,curlyeqprec:sM,curlyeqsucc:lM,curlyvee:uM,curlywedge:cM,curren:fM,curvearrowleft:dM,curvearrowright:hM,cuvee:pM,cuwed:vM,cwconint:mM,cwint:gM,cylcty:yM,dagger:bM,Dagger:kM,daleth:wM,darr:CM,Darr:TM,dArr:xM,dash:SM,Dashv:EM,dashv:MM,dbkarow:OM,dblac:NM,Dcaron:DM,dcaron:LM,Dcy:AM,dcy:IM,ddagger:RM,ddarr:PM,DD:BM,dd:HM,DDotrahd:FM,ddotseq:qM,deg:_M,Del:$M,Delta:zM,delta:VM,demptyv:UM,dfisht:WM,Dfr:jM,dfr:GM,dHar:JM,dharl:KM,dharr:QM,DiacriticalAcute:XM,DiacriticalDot:YM,DiacriticalDoubleAcute:ZM,DiacriticalGrave:eO,DiacriticalTilde:tO,diam:rO,diamond:nO,Diamond:iO,diamondsuit:aO,diams:oO,die:sO,DifferentialD:lO,digamma:uO,disin:cO,div:fO,divide:dO,divideontimes:hO,divonx:pO,DJcy:vO,djcy:mO,dlcorn:gO,dlcrop:yO,dollar:bO,Dopf:kO,dopf:wO,Dot:CO,dot:TO,DotDot:xO,doteq:SO,doteqdot:EO,DotEqual:MO,dotminus:OO,dotplus:NO,dotsquare:DO,doublebarwedge:LO,DoubleContourIntegral:AO,DoubleDot:IO,DoubleDownArrow:RO,DoubleLeftArrow:PO,DoubleLeftRightArrow:BO,DoubleLeftTee:HO,DoubleLongLeftArrow:FO,DoubleLongLeftRightArrow:qO,DoubleLongRightArrow:_O,DoubleRightArrow:$O,DoubleRightTee:zO,DoubleUpArrow:VO,DoubleUpDownArrow:UO,DoubleVerticalBar:WO,DownArrowBar:jO,downarrow:GO,DownArrow:JO,Downarrow:KO,DownArrowUpArrow:QO,DownBreve:XO,downdownarrows:YO,downharpoonleft:ZO,downharpoonright:eN,DownLeftRightVector:tN,DownLeftTeeVector:rN,DownLeftVectorBar:nN,DownLeftVector:iN,DownRightTeeVector:aN,DownRightVectorBar:oN,DownRightVector:sN,DownTeeArrow:lN,DownTee:uN,drbkarow:cN,drcorn:fN,drcrop:dN,Dscr:hN,dscr:pN,DScy:vN,dscy:mN,dsol:gN,Dstrok:yN,dstrok:bN,dtdot:kN,dtri:wN,dtrif:CN,duarr:TN,duhar:xN,dwangle:SN,DZcy:EN,dzcy:MN,dzigrarr:ON,Eacute:NN,eacute:DN,easter:LN,Ecaron:AN,ecaron:IN,Ecirc:RN,ecirc:PN,ecir:BN,ecolon:HN,Ecy:FN,ecy:qN,eDDot:_N,Edot:$N,edot:zN,eDot:VN,ee:UN,efDot:WN,Efr:jN,efr:GN,eg:JN,Egrave:KN,egrave:QN,egs:XN,egsdot:YN,el:ZN,Element:eD,elinters:tD,ell:rD,els:nD,elsdot:iD,Emacr:aD,emacr:oD,empty:sD,emptyset:lD,EmptySmallSquare:uD,emptyv:cD,EmptyVerySmallSquare:fD,emsp13:dD,emsp14:hD,emsp:pD,ENG:vD,eng:mD,ensp:gD,Eogon:yD,eogon:bD,Eopf:kD,eopf:wD,epar:CD,eparsl:TD,eplus:xD,epsi:SD,Epsilon:ED,epsilon:MD,epsiv:OD,eqcirc:ND,eqcolon:DD,eqsim:LD,eqslantgtr:AD,eqslantless:ID,Equal:RD,equals:PD,EqualTilde:BD,equest:HD,Equilibrium:FD,equiv:qD,equivDD:_D,eqvparsl:$D,erarr:zD,erDot:VD,escr:UD,Escr:WD,esdot:jD,Esim:GD,esim:JD,Eta:KD,eta:QD,ETH:XD,eth:YD,Euml:ZD,euml:eL,euro:tL,excl:rL,exist:nL,Exists:iL,expectation:aL,exponentiale:oL,ExponentialE:sL,fallingdotseq:lL,Fcy:uL,fcy:cL,female:fL,ffilig:dL,fflig:hL,ffllig:pL,Ffr:vL,ffr:mL,filig:gL,FilledSmallSquare:yL,FilledVerySmallSquare:bL,fjlig:kL,flat:wL,fllig:CL,fltns:TL,fnof:xL,Fopf:SL,fopf:EL,forall:ML,ForAll:OL,fork:NL,forkv:DL,Fouriertrf:LL,fpartint:AL,frac12:IL,frac13:RL,frac14:PL,frac15:BL,frac16:HL,frac18:FL,frac23:qL,frac25:_L,frac34:$L,frac35:zL,frac38:VL,frac45:UL,frac56:WL,frac58:jL,frac78:GL,frasl:JL,frown:KL,fscr:QL,Fscr:XL,gacute:YL,Gamma:ZL,gamma:eA,Gammad:tA,gammad:rA,gap:nA,Gbreve:iA,gbreve:aA,Gcedil:oA,Gcirc:sA,gcirc:lA,Gcy:uA,gcy:cA,Gdot:fA,gdot:dA,ge:hA,gE:pA,gEl:vA,gel:mA,geq:gA,geqq:yA,geqslant:bA,gescc:kA,ges:wA,gesdot:CA,gesdoto:TA,gesdotol:xA,gesl:SA,gesles:EA,Gfr:MA,gfr:OA,gg:NA,Gg:DA,ggg:LA,gimel:AA,GJcy:IA,gjcy:RA,gla:PA,gl:BA,glE:HA,glj:FA,gnap:qA,gnapprox:_A,gne:$A,gnE:zA,gneq:VA,gneqq:UA,gnsim:WA,Gopf:jA,gopf:GA,grave:JA,GreaterEqual:KA,GreaterEqualLess:QA,GreaterFullEqual:XA,GreaterGreater:YA,GreaterLess:ZA,GreaterSlantEqual:eI,GreaterTilde:tI,Gscr:rI,gscr:nI,gsim:iI,gsime:aI,gsiml:oI,gtcc:sI,gtcir:lI,gt:uI,GT:cI,Gt:fI,gtdot:dI,gtlPar:hI,gtquest:pI,gtrapprox:vI,gtrarr:mI,gtrdot:gI,gtreqless:yI,gtreqqless:bI,gtrless:kI,gtrsim:wI,gvertneqq:CI,gvnE:TI,Hacek:xI,hairsp:SI,half:EI,hamilt:MI,HARDcy:OI,hardcy:NI,harrcir:DI,harr:LI,hArr:AI,harrw:II,Hat:RI,hbar:PI,Hcirc:BI,hcirc:HI,hearts:FI,heartsuit:qI,hellip:_I,hercon:$I,hfr:zI,Hfr:VI,HilbertSpace:UI,hksearow:WI,hkswarow:jI,hoarr:GI,homtht:JI,hookleftarrow:KI,hookrightarrow:QI,hopf:XI,Hopf:YI,horbar:ZI,HorizontalLine:eR,hscr:tR,Hscr:rR,hslash:nR,Hstrok:iR,hstrok:aR,HumpDownHump:oR,HumpEqual:sR,hybull:lR,hyphen:uR,Iacute:cR,iacute:fR,ic:dR,Icirc:hR,icirc:pR,Icy:vR,icy:mR,Idot:gR,IEcy:yR,iecy:bR,iexcl:kR,iff:wR,ifr:CR,Ifr:TR,Igrave:xR,igrave:SR,ii:ER,iiiint:MR,iiint:OR,iinfin:NR,iiota:DR,IJlig:LR,ijlig:AR,Imacr:IR,imacr:RR,image:PR,ImaginaryI:BR,imagline:HR,imagpart:FR,imath:qR,Im:_R,imof:$R,imped:zR,Implies:VR,incare:UR,in:"\u2208",infin:WR,infintie:jR,inodot:GR,intcal:JR,int:KR,Int:QR,integers:XR,Integral:YR,intercal:ZR,Intersection:eP,intlarhk:tP,intprod:rP,InvisibleComma:nP,InvisibleTimes:iP,IOcy:aP,iocy:oP,Iogon:sP,iogon:lP,Iopf:uP,iopf:cP,Iota:fP,iota:dP,iprod:hP,iquest:pP,iscr:vP,Iscr:mP,isin:gP,isindot:yP,isinE:bP,isins:kP,isinsv:wP,isinv:CP,it:TP,Itilde:xP,itilde:SP,Iukcy:EP,iukcy:MP,Iuml:OP,iuml:NP,Jcirc:DP,jcirc:LP,Jcy:AP,jcy:IP,Jfr:RP,jfr:PP,jmath:BP,Jopf:HP,jopf:FP,Jscr:qP,jscr:_P,Jsercy:$P,jsercy:zP,Jukcy:VP,jukcy:UP,Kappa:WP,kappa:jP,kappav:GP,Kcedil:JP,kcedil:KP,Kcy:QP,kcy:XP,Kfr:YP,kfr:ZP,kgreen:eB,KHcy:tB,khcy:rB,KJcy:nB,kjcy:iB,Kopf:aB,kopf:oB,Kscr:sB,kscr:lB,lAarr:uB,Lacute:cB,lacute:fB,laemptyv:dB,lagran:hB,Lambda:pB,lambda:vB,lang:mB,Lang:gB,langd:yB,langle:bB,lap:kB,Laplacetrf:wB,laquo:CB,larrb:TB,larrbfs:xB,larr:SB,Larr:EB,lArr:MB,larrfs:OB,larrhk:NB,larrlp:DB,larrpl:LB,larrsim:AB,larrtl:IB,latail:RB,lAtail:PB,lat:BB,late:HB,lates:FB,lbarr:qB,lBarr:_B,lbbrk:$B,lbrace:zB,lbrack:VB,lbrke:UB,lbrksld:WB,lbrkslu:jB,Lcaron:GB,lcaron:JB,Lcedil:KB,lcedil:QB,lceil:XB,lcub:YB,Lcy:ZB,lcy:eH,ldca:tH,ldquo:rH,ldquor:nH,ldrdhar:iH,ldrushar:aH,ldsh:oH,le:sH,lE:lH,LeftAngleBracket:uH,LeftArrowBar:cH,leftarrow:fH,LeftArrow:dH,Leftarrow:hH,LeftArrowRightArrow:pH,leftarrowtail:vH,LeftCeiling:mH,LeftDoubleBracket:gH,LeftDownTeeVector:yH,LeftDownVectorBar:bH,LeftDownVector:kH,LeftFloor:wH,leftharpoondown:CH,leftharpoonup:TH,leftleftarrows:xH,leftrightarrow:SH,LeftRightArrow:EH,Leftrightarrow:MH,leftrightarrows:OH,leftrightharpoons:NH,leftrightsquigarrow:DH,LeftRightVector:LH,LeftTeeArrow:AH,LeftTee:IH,LeftTeeVector:RH,leftthreetimes:PH,LeftTriangleBar:BH,LeftTriangle:HH,LeftTriangleEqual:FH,LeftUpDownVector:qH,LeftUpTeeVector:_H,LeftUpVectorBar:$H,LeftUpVector:zH,LeftVectorBar:VH,LeftVector:UH,lEg:WH,leg:jH,leq:GH,leqq:JH,leqslant:KH,lescc:QH,les:XH,lesdot:YH,lesdoto:ZH,lesdotor:eF,lesg:tF,lesges:rF,lessapprox:nF,lessdot:iF,lesseqgtr:aF,lesseqqgtr:oF,LessEqualGreater:sF,LessFullEqual:lF,LessGreater:uF,lessgtr:cF,LessLess:fF,lesssim:dF,LessSlantEqual:hF,LessTilde:pF,lfisht:vF,lfloor:mF,Lfr:gF,lfr:yF,lg:bF,lgE:kF,lHar:wF,lhard:CF,lharu:TF,lharul:xF,lhblk:SF,LJcy:EF,ljcy:MF,llarr:OF,ll:NF,Ll:DF,llcorner:LF,Lleftarrow:AF,llhard:IF,lltri:RF,Lmidot:PF,lmidot:BF,lmoustache:HF,lmoust:FF,lnap:qF,lnapprox:_F,lne:$F,lnE:zF,lneq:VF,lneqq:UF,lnsim:WF,loang:jF,loarr:GF,lobrk:JF,longleftarrow:KF,LongLeftArrow:QF,Longleftarrow:XF,longleftrightarrow:YF,LongLeftRightArrow:ZF,Longleftrightarrow:eq,longmapsto:tq,longrightarrow:rq,LongRightArrow:nq,Longrightarrow:iq,looparrowleft:aq,looparrowright:oq,lopar:sq,Lopf:lq,lopf:uq,loplus:cq,lotimes:fq,lowast:dq,lowbar:hq,LowerLeftArrow:pq,LowerRightArrow:vq,loz:mq,lozenge:gq,lozf:yq,lpar:bq,lparlt:kq,lrarr:wq,lrcorner:Cq,lrhar:Tq,lrhard:xq,lrm:Sq,lrtri:Eq,lsaquo:Mq,lscr:Oq,Lscr:Nq,lsh:Dq,Lsh:Lq,lsim:Aq,lsime:Iq,lsimg:Rq,lsqb:Pq,lsquo:Bq,lsquor:Hq,Lstrok:Fq,lstrok:qq,ltcc:_q,ltcir:$q,lt:zq,LT:Vq,Lt:Uq,ltdot:Wq,lthree:jq,ltimes:Gq,ltlarr:Jq,ltquest:Kq,ltri:Qq,ltrie:Xq,ltrif:Yq,ltrPar:Zq,lurdshar:e_,luruhar:t_,lvertneqq:r_,lvnE:n_,macr:i_,male:a_,malt:o_,maltese:s_,Map:"\u2905",map:l_,mapsto:u_,mapstodown:c_,mapstoleft:f_,mapstoup:d_,marker:h_,mcomma:p_,Mcy:v_,mcy:m_,mdash:g_,mDDot:y_,measuredangle:b_,MediumSpace:k_,Mellintrf:w_,Mfr:C_,mfr:T_,mho:x_,micro:S_,midast:E_,midcir:M_,mid:O_,middot:N_,minusb:D_,minus:L_,minusd:A_,minusdu:I_,MinusPlus:R_,mlcp:P_,mldr:B_,mnplus:H_,models:F_,Mopf:q_,mopf:__,mp:$_,mscr:z_,Mscr:V_,mstpos:U_,Mu:W_,mu:j_,multimap:G_,mumap:J_,nabla:K_,Nacute:Q_,nacute:X_,nang:Y_,nap:Z_,napE:e$,napid:t$,napos:r$,napprox:n$,natural:i$,naturals:a$,natur:o$,nbsp:s$,nbump:l$,nbumpe:u$,ncap:c$,Ncaron:f$,ncaron:d$,Ncedil:h$,ncedil:p$,ncong:v$,ncongdot:m$,ncup:g$,Ncy:y$,ncy:b$,ndash:k$,nearhk:w$,nearr:C$,neArr:T$,nearrow:x$,ne:S$,nedot:E$,NegativeMediumSpace:M$,NegativeThickSpace:O$,NegativeThinSpace:N$,NegativeVeryThinSpace:D$,nequiv:L$,nesear:A$,nesim:I$,NestedGreaterGreater:R$,NestedLessLess:P$,NewLine:B$,nexist:H$,nexists:F$,Nfr:q$,nfr:_$,ngE:$$,nge:z$,ngeq:V$,ngeqq:U$,ngeqslant:W$,nges:j$,nGg:G$,ngsim:J$,nGt:K$,ngt:Q$,ngtr:X$,nGtv:Y$,nharr:Z$,nhArr:ez,nhpar:tz,ni:rz,nis:nz,nisd:iz,niv:az,NJcy:oz,njcy:sz,nlarr:lz,nlArr:uz,nldr:cz,nlE:fz,nle:dz,nleftarrow:hz,nLeftarrow:pz,nleftrightarrow:vz,nLeftrightarrow:mz,nleq:gz,nleqq:yz,nleqslant:bz,nles:kz,nless:wz,nLl:Cz,nlsim:Tz,nLt:xz,nlt:Sz,nltri:Ez,nltrie:Mz,nLtv:Oz,nmid:Nz,NoBreak:Dz,NonBreakingSpace:Lz,nopf:Az,Nopf:Iz,Not:Rz,not:Pz,NotCongruent:Bz,NotCupCap:Hz,NotDoubleVerticalBar:Fz,NotElement:qz,NotEqual:_z,NotEqualTilde:$z,NotExists:zz,NotGreater:Vz,NotGreaterEqual:Uz,NotGreaterFullEqual:Wz,NotGreaterGreater:jz,NotGreaterLess:Gz,NotGreaterSlantEqual:Jz,NotGreaterTilde:Kz,NotHumpDownHump:Qz,NotHumpEqual:Xz,notin:Yz,notindot:Zz,notinE:eV,notinva:tV,notinvb:rV,notinvc:nV,NotLeftTriangleBar:iV,NotLeftTriangle:aV,NotLeftTriangleEqual:oV,NotLess:sV,NotLessEqual:lV,NotLessGreater:uV,NotLessLess:cV,NotLessSlantEqual:fV,NotLessTilde:dV,NotNestedGreaterGreater:hV,NotNestedLessLess:pV,notni:vV,notniva:mV,notnivb:gV,notnivc:yV,NotPrecedes:bV,NotPrecedesEqual:kV,NotPrecedesSlantEqual:wV,NotReverseElement:CV,NotRightTriangleBar:TV,NotRightTriangle:xV,NotRightTriangleEqual:SV,NotSquareSubset:EV,NotSquareSubsetEqual:MV,NotSquareSuperset:OV,NotSquareSupersetEqual:NV,NotSubset:DV,NotSubsetEqual:LV,NotSucceeds:AV,NotSucceedsEqual:IV,NotSucceedsSlantEqual:RV,NotSucceedsTilde:PV,NotSuperset:BV,NotSupersetEqual:HV,NotTilde:FV,NotTildeEqual:qV,NotTildeFullEqual:_V,NotTildeTilde:$V,NotVerticalBar:zV,nparallel:VV,npar:UV,nparsl:WV,npart:jV,npolint:GV,npr:JV,nprcue:KV,nprec:QV,npreceq:XV,npre:YV,nrarrc:ZV,nrarr:e2,nrArr:t2,nrarrw:r2,nrightarrow:n2,nRightarrow:i2,nrtri:a2,nrtrie:o2,nsc:s2,nsccue:l2,nsce:u2,Nscr:c2,nscr:f2,nshortmid:d2,nshortparallel:h2,nsim:p2,nsime:v2,nsimeq:m2,nsmid:g2,nspar:y2,nsqsube:b2,nsqsupe:k2,nsub:w2,nsubE:C2,nsube:T2,nsubset:x2,nsubseteq:S2,nsubseteqq:E2,nsucc:M2,nsucceq:O2,nsup:N2,nsupE:D2,nsupe:L2,nsupset:A2,nsupseteq:I2,nsupseteqq:R2,ntgl:P2,Ntilde:B2,ntilde:H2,ntlg:F2,ntriangleleft:q2,ntrianglelefteq:_2,ntriangleright:$2,ntrianglerighteq:z2,Nu:V2,nu:U2,num:W2,numero:j2,numsp:G2,nvap:J2,nvdash:K2,nvDash:Q2,nVdash:X2,nVDash:Y2,nvge:Z2,nvgt:eU,nvHarr:tU,nvinfin:rU,nvlArr:nU,nvle:iU,nvlt:aU,nvltrie:oU,nvrArr:sU,nvrtrie:lU,nvsim:uU,nwarhk:cU,nwarr:fU,nwArr:dU,nwarrow:hU,nwnear:pU,Oacute:vU,oacute:mU,oast:gU,Ocirc:yU,ocirc:bU,ocir:kU,Ocy:wU,ocy:CU,odash:TU,Odblac:xU,odblac:SU,odiv:EU,odot:MU,odsold:OU,OElig:NU,oelig:DU,ofcir:LU,Ofr:AU,ofr:IU,ogon:RU,Ograve:PU,ograve:BU,ogt:HU,ohbar:FU,ohm:qU,oint:_U,olarr:$U,olcir:zU,olcross:VU,oline:UU,olt:WU,Omacr:jU,omacr:GU,Omega:JU,omega:KU,Omicron:QU,omicron:XU,omid:YU,ominus:ZU,Oopf:e3,oopf:t3,opar:r3,OpenCurlyDoubleQuote:n3,OpenCurlyQuote:i3,operp:a3,oplus:o3,orarr:s3,Or:l3,or:u3,ord:c3,order:f3,orderof:d3,ordf:h3,ordm:p3,origof:v3,oror:m3,orslope:g3,orv:y3,oS:b3,Oscr:k3,oscr:w3,Oslash:C3,oslash:T3,osol:x3,Otilde:S3,otilde:E3,otimesas:M3,Otimes:O3,otimes:N3,Ouml:D3,ouml:L3,ovbar:A3,OverBar:I3,OverBrace:R3,OverBracket:P3,OverParenthesis:B3,para:H3,parallel:F3,par:q3,parsim:_3,parsl:$3,part:z3,PartialD:V3,Pcy:U3,pcy:W3,percnt:j3,period:G3,permil:J3,perp:K3,pertenk:Q3,Pfr:X3,pfr:Y3,Phi:Z3,phi:eW,phiv:tW,phmmat:rW,phone:nW,Pi:iW,pi:aW,pitchfork:oW,piv:sW,planck:lW,planckh:uW,plankv:cW,plusacir:fW,plusb:dW,pluscir:hW,plus:pW,plusdo:vW,plusdu:mW,pluse:gW,PlusMinus:yW,plusmn:bW,plussim:kW,plustwo:wW,pm:CW,Poincareplane:TW,pointint:xW,popf:SW,Popf:EW,pound:MW,prap:OW,Pr:NW,pr:DW,prcue:LW,precapprox:AW,prec:IW,preccurlyeq:RW,Precedes:PW,PrecedesEqual:BW,PrecedesSlantEqual:HW,PrecedesTilde:FW,preceq:qW,precnapprox:_W,precneqq:$W,precnsim:zW,pre:VW,prE:UW,precsim:WW,prime:jW,Prime:GW,primes:JW,prnap:KW,prnE:QW,prnsim:XW,prod:YW,Product:ZW,profalar:ej,profline:tj,profsurf:rj,prop:nj,Proportional:ij,Proportion:aj,propto:oj,prsim:sj,prurel:lj,Pscr:uj,pscr:cj,Psi:fj,psi:dj,puncsp:hj,Qfr:pj,qfr:vj,qint:mj,qopf:gj,Qopf:yj,qprime:bj,Qscr:kj,qscr:wj,quaternions:Cj,quatint:Tj,quest:xj,questeq:Sj,quot:Ej,QUOT:Mj,rAarr:Oj,race:Nj,Racute:Dj,racute:Lj,radic:Aj,raemptyv:Ij,rang:Rj,Rang:Pj,rangd:Bj,range:Hj,rangle:Fj,raquo:qj,rarrap:_j,rarrb:$j,rarrbfs:zj,rarrc:Vj,rarr:Uj,Rarr:Wj,rArr:jj,rarrfs:Gj,rarrhk:Jj,rarrlp:Kj,rarrpl:Qj,rarrsim:Xj,Rarrtl:Yj,rarrtl:Zj,rarrw:eG,ratail:tG,rAtail:rG,ratio:nG,rationals:iG,rbarr:aG,rBarr:oG,RBarr:sG,rbbrk:lG,rbrace:uG,rbrack:cG,rbrke:fG,rbrksld:dG,rbrkslu:hG,Rcaron:pG,rcaron:vG,Rcedil:mG,rcedil:gG,rceil:yG,rcub:bG,Rcy:kG,rcy:wG,rdca:CG,rdldhar:TG,rdquo:xG,rdquor:SG,rdsh:EG,real:MG,realine:OG,realpart:NG,reals:DG,Re:LG,rect:AG,reg:IG,REG:RG,ReverseElement:PG,ReverseEquilibrium:BG,ReverseUpEquilibrium:HG,rfisht:FG,rfloor:qG,rfr:_G,Rfr:$G,rHar:zG,rhard:VG,rharu:UG,rharul:WG,Rho:jG,rho:GG,rhov:JG,RightAngleBracket:KG,RightArrowBar:QG,rightarrow:XG,RightArrow:YG,Rightarrow:ZG,RightArrowLeftArrow:e4,rightarrowtail:t4,RightCeiling:r4,RightDoubleBracket:n4,RightDownTeeVector:i4,RightDownVectorBar:a4,RightDownVector:o4,RightFloor:s4,rightharpoondown:l4,rightharpoonup:u4,rightleftarrows:c4,rightleftharpoons:f4,rightrightarrows:d4,rightsquigarrow:h4,RightTeeArrow:p4,RightTee:v4,RightTeeVector:m4,rightthreetimes:g4,RightTriangleBar:y4,RightTriangle:b4,RightTriangleEqual:k4,RightUpDownVector:w4,RightUpTeeVector:C4,RightUpVectorBar:T4,RightUpVector:x4,RightVectorBar:S4,RightVector:E4,ring:M4,risingdotseq:O4,rlarr:N4,rlhar:D4,rlm:L4,rmoustache:A4,rmoust:I4,rnmid:R4,roang:P4,roarr:B4,robrk:H4,ropar:F4,ropf:q4,Ropf:_4,roplus:$4,rotimes:z4,RoundImplies:V4,rpar:U4,rpargt:W4,rppolint:j4,rrarr:G4,Rrightarrow:J4,rsaquo:K4,rscr:Q4,Rscr:X4,rsh:Y4,Rsh:Z4,rsqb:eJ,rsquo:tJ,rsquor:rJ,rthree:nJ,rtimes:iJ,rtri:aJ,rtrie:oJ,rtrif:sJ,rtriltri:lJ,RuleDelayed:uJ,ruluhar:cJ,rx:fJ,Sacute:dJ,sacute:hJ,sbquo:pJ,scap:vJ,Scaron:mJ,scaron:gJ,Sc:yJ,sc:bJ,sccue:kJ,sce:wJ,scE:CJ,Scedil:TJ,scedil:xJ,Scirc:SJ,scirc:EJ,scnap:MJ,scnE:OJ,scnsim:NJ,scpolint:DJ,scsim:LJ,Scy:AJ,scy:IJ,sdotb:RJ,sdot:PJ,sdote:BJ,searhk:HJ,searr:FJ,seArr:qJ,searrow:_J,sect:$J,semi:zJ,seswar:VJ,setminus:UJ,setmn:WJ,sext:jJ,Sfr:GJ,sfr:JJ,sfrown:KJ,sharp:QJ,SHCHcy:XJ,shchcy:YJ,SHcy:ZJ,shcy:e5,ShortDownArrow:t5,ShortLeftArrow:r5,shortmid:n5,shortparallel:i5,ShortRightArrow:a5,ShortUpArrow:o5,shy:s5,Sigma:l5,sigma:u5,sigmaf:c5,sigmav:f5,sim:d5,simdot:h5,sime:p5,simeq:v5,simg:m5,simgE:g5,siml:y5,simlE:b5,simne:k5,simplus:w5,simrarr:C5,slarr:T5,SmallCircle:x5,smallsetminus:S5,smashp:E5,smeparsl:M5,smid:O5,smile:N5,smt:D5,smte:L5,smtes:A5,SOFTcy:I5,softcy:R5,solbar:P5,solb:B5,sol:H5,Sopf:F5,sopf:q5,spades:_5,spadesuit:$5,spar:z5,sqcap:V5,sqcaps:U5,sqcup:W5,sqcups:j5,Sqrt:G5,sqsub:J5,sqsube:K5,sqsubset:Q5,sqsubseteq:X5,sqsup:Y5,sqsupe:Z5,sqsupset:eK,sqsupseteq:tK,square:rK,Square:nK,SquareIntersection:iK,SquareSubset:aK,SquareSubsetEqual:oK,SquareSuperset:sK,SquareSupersetEqual:lK,SquareUnion:uK,squarf:cK,squ:fK,squf:dK,srarr:hK,Sscr:pK,sscr:vK,ssetmn:mK,ssmile:gK,sstarf:yK,Star:bK,star:kK,starf:wK,straightepsilon:CK,straightphi:TK,strns:xK,sub:SK,Sub:EK,subdot:MK,subE:OK,sube:NK,subedot:DK,submult:LK,subnE:AK,subne:IK,subplus:RK,subrarr:PK,subset:BK,Subset:HK,subseteq:FK,subseteqq:qK,SubsetEqual:_K,subsetneq:$K,subsetneqq:zK,subsim:VK,subsub:UK,subsup:WK,succapprox:jK,succ:GK,succcurlyeq:JK,Succeeds:KK,SucceedsEqual:QK,SucceedsSlantEqual:XK,SucceedsTilde:YK,succeq:ZK,succnapprox:e8,succneqq:t8,succnsim:r8,succsim:n8,SuchThat:i8,sum:a8,Sum:o8,sung:s8,sup1:l8,sup2:u8,sup3:c8,sup:f8,Sup:d8,supdot:h8,supdsub:p8,supE:v8,supe:m8,supedot:g8,Superset:y8,SupersetEqual:b8,suphsol:k8,suphsub:w8,suplarr:C8,supmult:T8,supnE:x8,supne:S8,supplus:E8,supset:M8,Supset:O8,supseteq:N8,supseteqq:D8,supsetneq:L8,supsetneqq:A8,supsim:I8,supsub:R8,supsup:P8,swarhk:B8,swarr:H8,swArr:F8,swarrow:q8,swnwar:_8,szlig:$8,Tab:z8,target:V8,Tau:U8,tau:W8,tbrk:j8,Tcaron:G8,tcaron:J8,Tcedil:K8,tcedil:Q8,Tcy:X8,tcy:Y8,tdot:Z8,telrec:e6,Tfr:t6,tfr:r6,there4:n6,therefore:i6,Therefore:a6,Theta:o6,theta:s6,thetasym:l6,thetav:u6,thickapprox:c6,thicksim:f6,ThickSpace:d6,ThinSpace:h6,thinsp:p6,thkap:v6,thksim:m6,THORN:g6,thorn:y6,tilde:b6,Tilde:k6,TildeEqual:w6,TildeFullEqual:C6,TildeTilde:T6,timesbar:x6,timesb:S6,times:E6,timesd:M6,tint:O6,toea:N6,topbot:D6,topcir:L6,top:A6,Topf:I6,topf:R6,topfork:P6,tosa:B6,tprime:H6,trade:F6,TRADE:q6,triangle:_6,triangledown:$6,triangleleft:z6,trianglelefteq:V6,triangleq:U6,triangleright:W6,trianglerighteq:j6,tridot:G6,trie:J6,triminus:K6,TripleDot:Q6,triplus:X6,trisb:Y6,tritime:Z6,trpezium:e9,Tscr:t9,tscr:r9,TScy:n9,tscy:i9,TSHcy:a9,tshcy:o9,Tstrok:s9,tstrok:l9,twixt:u9,twoheadleftarrow:c9,twoheadrightarrow:f9,Uacute:d9,uacute:h9,uarr:p9,Uarr:v9,uArr:m9,Uarrocir:g9,Ubrcy:y9,ubrcy:b9,Ubreve:k9,ubreve:w9,Ucirc:C9,ucirc:T9,Ucy:x9,ucy:S9,udarr:E9,Udblac:M9,udblac:O9,udhar:N9,ufisht:D9,Ufr:L9,ufr:A9,Ugrave:I9,ugrave:R9,uHar:P9,uharl:B9,uharr:H9,uhblk:F9,ulcorn:q9,ulcorner:_9,ulcrop:$9,ultri:z9,Umacr:V9,umacr:U9,uml:W9,UnderBar:j9,UnderBrace:G9,UnderBracket:J9,UnderParenthesis:K9,Union:Q9,UnionPlus:X9,Uogon:Y9,uogon:Z9,Uopf:e7,uopf:t7,UpArrowBar:r7,uparrow:n7,UpArrow:i7,Uparrow:a7,UpArrowDownArrow:o7,updownarrow:s7,UpDownArrow:l7,Updownarrow:u7,UpEquilibrium:c7,upharpoonleft:f7,upharpoonright:d7,uplus:h7,UpperLeftArrow:p7,UpperRightArrow:v7,upsi:m7,Upsi:g7,upsih:y7,Upsilon:b7,upsilon:k7,UpTeeArrow:w7,UpTee:C7,upuparrows:T7,urcorn:x7,urcorner:S7,urcrop:E7,Uring:M7,uring:O7,urtri:N7,Uscr:D7,uscr:L7,utdot:A7,Utilde:I7,utilde:R7,utri:P7,utrif:B7,uuarr:H7,Uuml:F7,uuml:q7,uwangle:_7,vangrt:$7,varepsilon:z7,varkappa:V7,varnothing:U7,varphi:W7,varpi:j7,varpropto:G7,varr:J7,vArr:K7,varrho:Q7,varsigma:X7,varsubsetneq:Y7,varsubsetneqq:Z7,varsupsetneq:eQ,varsupsetneqq:tQ,vartheta:rQ,vartriangleleft:nQ,vartriangleright:iQ,vBar:aQ,Vbar:oQ,vBarv:sQ,Vcy:lQ,vcy:uQ,vdash:cQ,vDash:fQ,Vdash:dQ,VDash:hQ,Vdashl:pQ,veebar:vQ,vee:mQ,Vee:gQ,veeeq:yQ,vellip:bQ,verbar:kQ,Verbar:wQ,vert:CQ,Vert:TQ,VerticalBar:xQ,VerticalLine:SQ,VerticalSeparator:EQ,VerticalTilde:MQ,VeryThinSpace:OQ,Vfr:NQ,vfr:DQ,vltri:LQ,vnsub:AQ,vnsup:IQ,Vopf:RQ,vopf:PQ,vprop:BQ,vrtri:HQ,Vscr:FQ,vscr:qQ,vsubnE:_Q,vsubne:$Q,vsupnE:zQ,vsupne:VQ,Vvdash:UQ,vzigzag:WQ,Wcirc:jQ,wcirc:GQ,wedbar:JQ,wedge:KQ,Wedge:QQ,wedgeq:XQ,weierp:YQ,Wfr:ZQ,wfr:eX,Wopf:tX,wopf:rX,wp:nX,wr:iX,wreath:aX,Wscr:oX,wscr:sX,xcap:lX,xcirc:uX,xcup:cX,xdtri:fX,Xfr:dX,xfr:hX,xharr:pX,xhArr:vX,Xi:mX,xi:gX,xlarr:yX,xlArr:bX,xmap:kX,xnis:wX,xodot:CX,Xopf:TX,xopf:xX,xoplus:SX,xotime:EX,xrarr:MX,xrArr:OX,Xscr:NX,xscr:DX,xsqcup:LX,xuplus:AX,xutri:IX,xvee:RX,xwedge:PX,Yacute:BX,yacute:HX,YAcy:FX,yacy:qX,Ycirc:_X,ycirc:$X,Ycy:zX,ycy:VX,yen:UX,Yfr:WX,yfr:jX,YIcy:GX,yicy:JX,Yopf:KX,yopf:QX,Yscr:XX,yscr:YX,YUcy:ZX,yucy:eY,yuml:tY,Yuml:rY,Zacute:nY,zacute:iY,Zcaron:aY,zcaron:oY,Zcy:sY,zcy:lY,Zdot:uY,zdot:cY,zeetrf:fY,ZeroWidthSpace:dY,Zeta:hY,zeta:pY,zfr:vY,Zfr:mY,ZHcy:gY,zhcy:yY,zigrarr:bY,zopf:kY,Zopf:wY,Zscr:CY,zscr:TY,zwj:xY,zwnj:SY},EY="\xC1",MY="\xE1",OY="\xC2",NY="\xE2",DY="\xB4",LY="\xC6",AY="\xE6",IY="\xC0",RY="\xE0",PY="&",BY="&",HY="\xC5",FY="\xE5",qY="\xC3",_Y="\xE3",$Y="\xC4",zY="\xE4",VY="\xA6",UY="\xC7",WY="\xE7",jY="\xB8",GY="\xA2",JY="\xA9",KY="\xA9",QY="\xA4",XY="\xB0",YY="\xF7",ZY="\xC9",eZ="\xE9",tZ="\xCA",rZ="\xEA",nZ="\xC8",iZ="\xE8",aZ="\xD0",oZ="\xF0",sZ="\xCB",lZ="\xEB",uZ="\xBD",cZ="\xBC",fZ="\xBE",dZ=">",hZ=">",pZ="\xCD",vZ="\xED",mZ="\xCE",gZ="\xEE",yZ="\xA1",bZ="\xCC",kZ="\xEC",wZ="\xBF",CZ="\xCF",TZ="\xEF",xZ="\xAB",SZ="<",EZ="<",MZ="\xAF",OZ="\xB5",NZ="\xB7",DZ="\xA0",LZ="\xAC",AZ="\xD1",IZ="\xF1",RZ="\xD3",PZ="\xF3",BZ="\xD4",HZ="\xF4",FZ="\xD2",qZ="\xF2",_Z="\xAA",$Z="\xBA",zZ="\xD8",VZ="\xF8",UZ="\xD5",WZ="\xF5",jZ="\xD6",GZ="\xF6",JZ="\xB6",KZ="\xB1",QZ="\xA3",XZ='"',YZ='"',ZZ="\xBB",eee="\xAE",tee="\xAE",ree="\xA7",nee="\xAD",iee="\xB9",aee="\xB2",oee="\xB3",see="\xDF",lee="\xDE",uee="\xFE",cee="\xD7",fee="\xDA",dee="\xFA",hee="\xDB",pee="\xFB",vee="\xD9",mee="\xF9",gee="\xA8",yee="\xDC",bee="\xFC",kee="\xDD",wee="\xFD",Cee="\xA5",Tee="\xFF",xee={Aacute:EY,aacute:MY,Acirc:OY,acirc:NY,acute:DY,AElig:LY,aelig:AY,Agrave:IY,agrave:RY,amp:PY,AMP:BY,Aring:HY,aring:FY,Atilde:qY,atilde:_Y,Auml:$Y,auml:zY,brvbar:VY,Ccedil:UY,ccedil:WY,cedil:jY,cent:GY,copy:JY,COPY:KY,curren:QY,deg:XY,divide:YY,Eacute:ZY,eacute:eZ,Ecirc:tZ,ecirc:rZ,Egrave:nZ,egrave:iZ,ETH:aZ,eth:oZ,Euml:sZ,euml:lZ,frac12:uZ,frac14:cZ,frac34:fZ,gt:dZ,GT:hZ,Iacute:pZ,iacute:vZ,Icirc:mZ,icirc:gZ,iexcl:yZ,Igrave:bZ,igrave:kZ,iquest:wZ,Iuml:CZ,iuml:TZ,laquo:xZ,lt:SZ,LT:EZ,macr:MZ,micro:OZ,middot:NZ,nbsp:DZ,not:LZ,Ntilde:AZ,ntilde:IZ,Oacute:RZ,oacute:PZ,Ocirc:BZ,ocirc:HZ,Ograve:FZ,ograve:qZ,ordf:_Z,ordm:$Z,Oslash:zZ,oslash:VZ,Otilde:UZ,otilde:WZ,Ouml:jZ,ouml:GZ,para:JZ,plusmn:KZ,pound:QZ,quot:XZ,QUOT:YZ,raquo:ZZ,reg:eee,REG:tee,sect:ree,shy:nee,sup1:iee,sup2:aee,sup3:oee,szlig:see,THORN:lee,thorn:uee,times:cee,Uacute:fee,uacute:dee,Ucirc:hee,ucirc:pee,Ugrave:vee,ugrave:mee,uml:gee,Uuml:yee,uuml:bee,Yacute:kee,yacute:wee,yen:Cee,yuml:Tee},See="&",Eee="'",Mee=">",Oee="<",Nee='"',Ap={amp:See,apos:Eee,gt:Mee,lt:Oee,quot:Nee},wl={},Dee={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},Lee=bn&&bn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wl,"__esModule",{value:!0});var Oc=Lee(Dee),Aee=String.fromCodePoint||function(r){var t="";return r>65535&&(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),r=56320|r&1023),t+=String.fromCharCode(r),t};function Iee(r){return r>=55296&&r<=57343||r>1114111?"\uFFFD":(r in Oc.default&&(r=Oc.default[r]),Aee(r))}wl.default=Iee;var Aa=bn&&bn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.decodeHTML=Ht.decodeHTMLStrict=Ht.decodeXML=void 0;var vs=Aa(Lp),Ree=Aa(xee),Pee=Aa(Ap),Nc=Aa(wl),Bee=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;Ht.decodeXML=Ip(Pee.default);Ht.decodeHTMLStrict=Ip(vs.default);function Ip(r){var t=Rp(r);return function(e){return String(e).replace(Bee,t)}}var Dc=function(r,t){return r<t?1:-1};Ht.decodeHTML=function(){for(var r=Object.keys(Ree.default).sort(Dc),t=Object.keys(vs.default).sort(Dc),e=0,n=0;e<t.length;e++)r[n]===t[e]?(t[e]+=";?",n++):t[e]+=";";var i=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),a=Rp(vs.default);function o(s){return s.substr(-1)!==";"&&(s+=";"),a(s)}return function(s){return String(s).replace(i,o)}}();function Rp(r){return function(e){if(e.charAt(1)==="#"){var n=e.charAt(2);return n==="X"||n==="x"?Nc.default(parseInt(e.substr(3),16)):Nc.default(parseInt(e.substr(2),10))}return r[e.slice(1,-1)]||e}}var Ve={},Pp=bn&&bn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.escapeUTF8=Ve.escape=Ve.encodeNonAsciiHTML=Ve.encodeHTML=Ve.encodeXML=void 0;var Hee=Pp(Ap),Bp=Fp(Hee.default),Hp=qp(Bp);Ve.encodeXML=zp(Bp);var Fee=Pp(Lp),Cl=Fp(Fee.default),qee=qp(Cl);Ve.encodeHTML=$ee(Cl,qee);Ve.encodeNonAsciiHTML=zp(Cl);function Fp(r){return Object.keys(r).sort().reduce(function(t,e){return t[r[e]]="&"+e+";",t},{})}function qp(r){for(var t=[],e=[],n=0,i=Object.keys(r);n<i.length;n++){var a=i[n];a.length===1?t.push("\\"+a):e.push(a)}t.sort();for(var o=0;o<t.length-1;o++){for(var s=o;s<t.length-1&&t[s].charCodeAt(1)+1===t[s+1].charCodeAt(1);)s+=1;var l=1+s-o;l<3||t.splice(o,l,t[o]+"-"+t[s])}return e.unshift("["+t.join("")+"]"),new RegExp(e.join("|"),"g")}var _p=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,_ee=String.prototype.codePointAt!=null?function(r){return r.codePointAt(0)}:function(r){return(r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536};function Ia(r){return"&#x"+(r.length>1?_ee(r):r.charCodeAt(0)).toString(16).toUpperCase()+";"}function $ee(r,t){return function(e){return e.replace(t,function(n){return r[n]}).replace(_p,Ia)}}var $p=new RegExp(Hp.source+"|"+_p.source,"g");function zee(r){return r.replace($p,Ia)}Ve.escape=zee;function Vee(r){return r.replace(Hp,Ia)}Ve.escapeUTF8=Vee;function zp(r){return function(t){return t.replace($p,function(e){return r[e]||Ia(e)})}}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.decodeXMLStrict=r.decodeHTML5Strict=r.decodeHTML4Strict=r.decodeHTML5=r.decodeHTML4=r.decodeHTMLStrict=r.decodeHTML=r.decodeXML=r.encodeHTML5=r.encodeHTML4=r.escapeUTF8=r.escape=r.encodeNonAsciiHTML=r.encodeHTML=r.encodeXML=r.encode=r.decodeStrict=r.decode=void 0;var t=Ht,e=Ve;function n(l,u){return(!u||u<=0?t.decodeXML:t.decodeHTML)(l)}r.decode=n;function i(l,u){return(!u||u<=0?t.decodeXML:t.decodeHTMLStrict)(l)}r.decodeStrict=i;function a(l,u){return(!u||u<=0?e.encodeXML:e.encodeHTML)(l)}r.encode=a;var o=Ve;Object.defineProperty(r,"encodeXML",{enumerable:!0,get:function(){return o.encodeXML}}),Object.defineProperty(r,"encodeHTML",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(r,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return o.encodeNonAsciiHTML}}),Object.defineProperty(r,"escape",{enumerable:!0,get:function(){return o.escape}}),Object.defineProperty(r,"escapeUTF8",{enumerable:!0,get:function(){return o.escapeUTF8}}),Object.defineProperty(r,"encodeHTML4",{enumerable:!0,get:function(){return o.encodeHTML}}),Object.defineProperty(r,"encodeHTML5",{enumerable:!0,get:function(){return o.encodeHTML}});var s=Ht;Object.defineProperty(r,"decodeXML",{enumerable:!0,get:function(){return s.decodeXML}}),Object.defineProperty(r,"decodeHTML",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(r,"decodeHTMLStrict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(r,"decodeHTML4",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(r,"decodeHTML5",{enumerable:!0,get:function(){return s.decodeHTML}}),Object.defineProperty(r,"decodeHTML4Strict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(r,"decodeHTML5Strict",{enumerable:!0,get:function(){return s.decodeHTMLStrict}}),Object.defineProperty(r,"decodeXMLStrict",{enumerable:!0,get:function(){return s.decodeXML}})})(kl);var Vp="&(?:#x[a-f0-9]{1,6}|#[0-9]{1,7}|[a-z][a-z0-9]{1,31});",Uee=92,Wee=/[\\&]/,Tl="[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^_`{|}~-]",jee=new RegExp("\\\\"+Tl+"|"+Vp,"gi"),Gee='[&<>"]',Lc=new RegExp(Gee,"g"),Jee=function(r){return r.charCodeAt(0)===Uee?r.charAt(1):kl.decodeHTML(r)};function jn(r){return Wee.test(r)?r.replace(jee,Jee):r}function Ti(r){try{return l0(r)}catch{return r}}function Kee(r){switch(r){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";default:return r}}function Yr(r){return Lc.test(r)?r.replace(Lc,Kee):r}function ms(r,t){for(var e=[],n=0;n<t;n++)e.push(r);return e.join("")}function Ac(r){return r?!/[^ \t]+/.test(r):!0}var Qee=function(){function r(t){this.current=t,this.root=t,this.entering=!0}return r.prototype.next=function(){var t=this.current,e=this.entering;if(t===null)return null;var n=xl(t);return e&&n?t.firstChild?(this.current=t.firstChild,this.entering=!0):this.entering=!1:t===this.root?this.current=null:t.next===null?(this.current=t.parent,this.entering=!1):(this.current=t.next,this.entering=!0),{entering:e,node:t}},r.prototype.resumeAt=function(t,e){this.current=t,this.entering=e===!0},r}();function xl(r){switch(r.type){case"document":case"blockQuote":case"list":case"item":case"paragraph":case"heading":case"emph":case"strong":case"strike":case"link":case"image":case"table":case"tableHead":case"tableBody":case"tableRow":case"tableCell":case"tableDelimRow":case"customInline":return!0;default:return!1}}var Xee=1,Ra={};function Yee(r){return Ra[r]}function gs(r){delete Ra[r]}function Zee(){Ra={}}var ci=function(){function r(t,e){this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null,this.literal=null,t==="document"?this.id=-1:this.id=Xee++,this.type=t,this.sourcepos=e,Ra[this.id]=this}return r.prototype.isContainer=function(){return xl(this)},r.prototype.unlink=function(){this.prev?this.prev.next=this.next:this.parent&&(this.parent.firstChild=this.next),this.next?this.next.prev=this.prev:this.parent&&(this.parent.lastChild=this.prev),this.parent=null,this.next=null,this.prev=null},r.prototype.replaceWith=function(t){this.insertBefore(t),this.unlink()},r.prototype.insertAfter=function(t){t.unlink(),t.next=this.next,t.next&&(t.next.prev=t),t.prev=this,this.next=t,this.parent&&(t.parent=this.parent,t.next||(t.parent.lastChild=t))},r.prototype.insertBefore=function(t){t.unlink(),t.prev=this.prev,t.prev&&(t.prev.next=t),t.next=this,this.prev=t,t.parent=this.parent,t.prev||(t.parent.firstChild=t)},r.prototype.appendChild=function(t){t.unlink(),t.parent=this,this.lastChild?(this.lastChild.next=t,t.prev=this.lastChild,this.lastChild=t):(this.firstChild=t,this.lastChild=t)},r.prototype.prependChild=function(t){t.unlink(),t.parent=this,this.firstChild?(this.firstChild.prev=t,t.next=this.firstChild,this.firstChild=t):(this.firstChild=t,this.lastChild=t)},r.prototype.walker=function(){return new Qee(this)},r}(),Vt=function(r){Ye(t,r);function t(e,n){var i=r.call(this,e,n)||this;return i.open=!0,i.lineOffsets=null,i.stringContent=null,i.lastLineBlank=!1,i.lastLineChecked=!1,i.type=e,i}return t}(ci),ete=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.listData=null,e}return t}(Vt),tte=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.level=0,e.headingType="atx",e}return t}(Vt),rte=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isFenced=!1,e.fenceChar=null,e.fenceLength=0,e.fenceOffset=-1,e.info=null,e.infoPadding=0,e}return t}(Vt),nte=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.columns=[],e}return t}(Vt),ite=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.startIdx=0,e.endIdx=0,e.paddingLeft=0,e.paddingRight=0,e.ignored=!1,e}return t}(Vt),ate=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.title="",e.dest="",e.label="",e}return t}(Vt),ote=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.syntaxLength=0,e.offset=-1,e.info="",e}return t}(Vt),ste=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.htmlBlockType=-1,e}return t}(Vt),lte=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.destination=null,e.title=null,e.extendedAutolink=!1,e}return t}(ci),ute=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.tickCount=0,e}return t}(ci),cte=function(r){Ye(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.info="",e}return t}(ci);function X(r,t){switch(r){case"heading":return new tte(r,t);case"list":case"item":return new ete(r,t);case"link":case"image":return new lte(r,t);case"codeBlock":return new rte(r,t);case"htmlBlock":return new ste(r,t);case"table":return new nte(r,t);case"tableCell":return new ite(r,t);case"document":case"paragraph":case"blockQuote":case"thematicBreak":case"tableRow":case"tableBody":case"tableHead":case"frontMatter":return new Vt(r,t);case"code":return new ute(r,t);case"refDef":return new ate(r,t);case"customBlock":return new ote(r,t);case"customInline":return new cte(r,t);default:return new ci(r,t)}}function Up(r){return r.type==="codeBlock"}function fte(r){return r.type==="htmlBlock"}function dte(r){return r.type==="heading"}function Ic(r){return r.type==="list"}function hte(r){return r.type==="table"}function Gr(r){return r.type==="refDef"}function Wp(r){return r.type==="customBlock"}function pte(r){return r.type==="customInline"}function ie(r,t){var e=X("text",t);return e.literal=r,e}var jp="[A-Za-z][A-Za-z0-9-]*",vte="[a-zA-Z_:][a-zA-Z0-9:._-]*",mte="[^\"'=<>`\\x00-\\x20]+",gte="'[^']*'",yte='"[^"]*"',bte="(?:"+mte+"|"+gte+"|"+yte+")",kte="(?:\\s*=\\s*"+bte+")",wte="(?:\\s+"+vte+kte+"?)",Gp="<"+jp+wte+"*\\s*/?>",Jp="</"+jp+"\\s*[>]",Cte="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",Tte="[<][?].*?[?][>]",xte="<![A-Z]+\\s+[^>]*>",Ste="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Ete="(?:"+Gp+"|"+Jp+"|"+Cte+"|"+Tte+"|"+xte+"|"+Ste+")",Mte=new RegExp("^"+Ete,"i");/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var ys;if(String.fromCodePoint)ys=function(r){try{return String.fromCodePoint(r)}catch(t){if(t instanceof RangeError)return String.fromCharCode(65533);throw t}};else{var Ote=String.fromCharCode,Nte=Math.floor;ys=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var e=16384,n=[],i,a,o=-1,s=r.length;if(!s)return"";for(var l="";++o<s;){var u=Number(r[o]);if(!isFinite(u)||u<0||u>1114111||Nte(u)!==u)return String.fromCharCode(65533);u<=65535?n.push(u):(u-=65536,i=(u>>10)+55296,a=u%1024+56320,n.push(i,a)),(o+1===s||n.length>e)&&(l+=Ote.apply(void 0,n),n.length=0)}return l}}var To=ys,Dte="(?:[w-]+.)*[A-Za-z0-9-]+.[A-Za-z0-9-]+",Lte="[^<\\s]*[^<?!.,:*_?~\\s]",Ate="[\\w.+-]+@(?:[\\w-]+\\.)+[\\w-]+";function Ite(r){var t=/\)+$/.exec(r);if(t){for(var e=0,n=0,i=r;n<i.length;n++){var a=i[n];a==="("?e<0?e=1:e+=1:a===")"&&(e-=1)}if(e<0){var o=Math.min(-e,t[0].length);return r.substring(0,r.length-o)}}return r}function Rte(r){return r.replace(/&[A-Za-z0-9]+;$/,"")}function Pte(r){for(var t=new RegExp(Ate,"g"),e=[],n;n=t.exec(r);){var i=n[0];/[_-]+$/.test(i)||e.push({text:i,range:[n.index,n.index+i.length-1],url:"mailto:"+i})}return e}function Bte(r){for(var t=new RegExp("(www|https?://)."+Dte+Lte,"g"),e=[],n;n=t.exec(r);){var i=Rte(Ite(n[0])),a=n[1]==="www"?"http://":"";e.push({text:i,range:[n.index,n.index+i.length-1],url:""+a+i})}return e}function Hte(r){return ps(ps([],Bte(r)),Pte(r)).sort(function(t,e){return t.range[0]-e.range[0]})}function Fte(r,t){typeof t=="boolean"&&(t=Hte);for(var e,n=function(){var i=e.entering,a=e.node;if(i&&a.type==="text"&&a.parent.type!=="link"){var o=a.literal,s=t(o);if(!s||!s.length)return"continue";for(var l=0,u=a.sourcepos[0],c=u[0],f=u[1],d=function(N,R){return[[c,f+N],[c,f+R]]},h=[],p=0,v=s;p<v.length;p++){var m=v[p],g=m.range,k=m.url,b=m.text;g[0]>l&&h.push(ie(o.substring(l,g[0]),d(l,g[0]-1)));var C=X("link",d.apply(void 0,g));C.appendChild(ie(b,d.apply(void 0,g))),C.destination=k,C.extendedAutolink=!0,h.push(C),l=g[1]+1}l<o.length&&h.push(ie(o.substring(l),d(l,o.length-1)));for(var T=0,S=h;T<S.length;T++){var M=S[T];a.insertBefore(M)}a.unlink()}};e=r.next();)n()}function ua(r){return r[r.length-1]}function Rc(r){return r.slice(1,r.length-1).trim().replace(/[ \t\r\n]+/," ").toLowerCase().toUpperCase()}function xi(r,t){Object.keys(r).forEach(function(e){t(e,r[e])})}function qte(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=ve({},r);return t.forEach(function(i){delete n[i]}),n}function Jr(r){return!Object.keys(r).length}function _te(r){Object.keys(r).forEach(function(t){delete r[t]})}var bs=10,xo=42,Si=95,$te=96,Pc=91,zte=93,Ei=126,Bc=60,Vte=33,Hc=92,Ute=38,Fc=40,So=41,Wte=58,lr=39,ur=34,cr=36,Eo="\\\\"+Tl,qc=new RegExp(/[!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/),jte=new RegExp('^(?:"('+Eo+'|[^"\\x00])*"|'+("'("+Eo+"|[^'\\x00])*'")+"|"+("\\(("+Eo+"|[^()\\x00])*\\))")),Gte=/^(?:<(?:[^<>\n\\\x00]|\\.)*>)/,_c=new RegExp("^"+Tl),Jte=new RegExp("^"+Vp,"i"),Kte=/`+/,Qte=/^`+/,Xte=/\.\.\./g,Yte=/--+/g,Zte=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,ere=/^<[A-Za-z][A-Za-z0-9.+-]{1,31}:[^<>\x00-\x20]*>/i,tre=/^ *(?:\n *)?/,Mo=/^[ \t\n\x0b\x0c\x0d]/,$c=/^\s/,rre=/ *$/,nre=/^ */,zc=/^ *(?:\n|$)/,ire=/^\[(?:[^\\\[\]]|\\.){0,1000}\]/,are=/^[^\n`\[\]\\!<&*_'"~$]+/m,ore=function(){function r(t){this.subject="",this.delimiters=null,this.brackets=null,this.pos=0,this.lineStartNum=0,this.lineIdx=0,this.lineOffsets=[0],this.linePosOffset=0,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.options=t}return r.prototype.sourcepos=function(t,e){var n=this.linePosOffset+this.lineOffsets[this.lineIdx],i=this.lineStartNum+this.lineIdx,a=[i,t+n];return typeof e=="number"?[a,[i,e+n]]:a},r.prototype.nextLine=function(){this.lineIdx+=1,this.linePosOffset=-this.pos},r.prototype.match=function(t){var e=t.exec(this.subject.slice(this.pos));return e===null?null:(this.pos+=e.index+e[0].length,e[0])},r.prototype.peek=function(){return this.pos<this.subject.length?this.subject.charCodeAt(this.pos):-1},r.prototype.spnl=function(){return this.match(tre),!0},r.prototype.parseBackticks=function(t){var e=this.pos+1,n=this.match(Qte);if(n===null)return!1;for(var i=this.pos,a;(a=this.match(Kte))!==null;)if(a===n){var o=this.subject.slice(i,this.pos-n.length),s=this.sourcepos(e,this.pos),l=o.split(`
`);if(l.length>1){var u=ua(l);this.lineIdx+=l.length-1,this.linePosOffset=-(this.pos-u.length-n.length),s[1]=this.sourcepos(this.pos),o=l.join(" ")}var c=X("code",s);return o.length>0&&o.match(/[^ ]/)!==null&&o[0]==" "&&o[o.length-1]==" "?c.literal=o.slice(1,o.length-1):c.literal=o,c.tickCount=n.length,t.appendChild(c),!0}return this.pos=i,t.appendChild(ie(n,this.sourcepos(e,this.pos-1))),!0},r.prototype.parseBackslash=function(t){var e=this.subject,n;this.pos+=1;var i=this.pos;return this.peek()===bs?(this.pos+=1,n=X("linebreak",this.sourcepos(this.pos-1,this.pos)),t.appendChild(n),this.nextLine()):_c.test(e.charAt(this.pos))?(t.appendChild(ie(e.charAt(this.pos),this.sourcepos(i,this.pos))),this.pos+=1):t.appendChild(ie("\\",this.sourcepos(i,i))),!0},r.prototype.parseAutolink=function(t){var e,n,i,a=this.pos+1;return(e=this.match(Zte))?(n=e.slice(1,e.length-1),i=X("link",this.sourcepos(a,this.pos)),i.destination=Ti("mailto:"+n),i.title="",i.appendChild(ie(n,this.sourcepos(a+1,this.pos-1))),t.appendChild(i),!0):(e=this.match(ere))?(n=e.slice(1,e.length-1),i=X("link",this.sourcepos(a,this.pos)),i.destination=Ti(n),i.title="",i.appendChild(ie(n,this.sourcepos(a+1,this.pos-1))),t.appendChild(i),!0):!1},r.prototype.parseHtmlTag=function(t){var e=this.pos+1,n=this.match(Mte);if(n===null)return!1;var i=X("htmlInline",this.sourcepos(e,this.pos));return i.literal=n,t.appendChild(i),!0},r.prototype.scanDelims=function(t){var e=0,n=this.pos;if(t===lr||t===ur)e++,this.pos++;else for(;this.peek()===t;)e++,this.pos++;if(e===0||e<2&&(t===Ei||t===cr))return this.pos=n,null;var i=n===0?`
`:this.subject.charAt(n-1),a=this.peek(),o;a===-1?o=`
`:o=To(a);var s=$c.test(o),l=qc.test(o),u=$c.test(i),c=qc.test(i),f=!s&&(!l||u||c),d=!u&&(!c||s||l),h,p;return t===Si?(h=f&&(!d||c),p=d&&(!f||l)):t===lr||t===ur?(h=f&&!d,p=d):t===cr?(h=!s,p=!u):(h=f,p=d),this.pos=n,{numdelims:e,canOpen:h,canClose:p}},r.prototype.handleDelim=function(t,e){var n=this.scanDelims(t);if(!n)return!1;var i=n.numdelims,a=this.pos+1,o;this.pos+=i,t===lr?o="\u2019":t===ur?o="\u201C":o=this.subject.slice(a-1,this.pos);var s=ie(o,this.sourcepos(a,this.pos));return e.appendChild(s),(n.canOpen||n.canClose)&&(this.options.smart||t!==lr&&t!==ur)&&(this.delimiters={cc:t,numdelims:i,origdelims:i,node:s,previous:this.delimiters,next:null,canOpen:n.canOpen,canClose:n.canClose},this.delimiters.previous&&(this.delimiters.previous.next=this.delimiters)),!0},r.prototype.removeDelimiter=function(t){t.previous!==null&&(t.previous.next=t.next),t.next===null?this.delimiters=t.previous:t.next.previous=t.previous},r.prototype.removeDelimitersBetween=function(t,e){t.next!==e&&(t.next=e,e.previous=t)},r.prototype.processEmphasis=function(t){var e,n,i,a,o,s,l,u=!1,c=(e={},e[Si]=[t,t,t],e[xo]=[t,t,t],e[lr]=[t],e[ur]=[t],e[Ei]=[t],e[cr]=[t],e);for(i=this.delimiters;i!==null&&i.previous!==t;)i=i.previous;for(;i!==null;){var f=i.cc,d=f===Si||f===xo;if(!i.canClose)i=i.next;else{for(n=i.previous,l=!1;n!==null&&n!==t&&n!==c[f][d?i.origdelims%3:0];){if(u=d&&(i.canOpen||n.canClose)&&i.origdelims%3!==0&&(n.origdelims+i.origdelims)%3===0,n.cc===i.cc&&n.canOpen&&!u){l=!0;break}n=n.previous}if(a=i,d||f===Ei||f===cr){if(!l)i=i.next;else if(n){var h=i.numdelims>=2&&n.numdelims>=2?2:1,p=d?0:1;o=n.node,s=i.node;var v=d?h===1?"emph":"strong":"strike";f===cr&&(v="customInline");var m=X(v),g=o.sourcepos[1],k=s.sourcepos[0];m.sourcepos=[[g[0],g[1]-h+1],[k[0],k[1]+h-1]],o.sourcepos[1][1]-=h,s.sourcepos[0][1]+=h,o.literal=o.literal.slice(h),s.literal=s.literal.slice(h),n.numdelims-=h,i.numdelims-=h;for(var b=o.next,C=void 0;b&&b!==s;)C=b.next,b.unlink(),m.appendChild(b),b=C;if(f===cr){var T=m.firstChild,S=T.literal||"",M=S.split(/\s/)[0];m.info=M,S.length<=M.length?T.unlink():(T.sourcepos[0][1]+=M.length,T.literal=S.replace(M+" ",""))}if(o.insertAfter(m),this.removeDelimitersBetween(n,i),n.numdelims<=p&&(n.numdelims===0&&o.unlink(),this.removeDelimiter(n)),i.numdelims<=p){i.numdelims===0&&s.unlink();var N=i.next;this.removeDelimiter(i),i=N}}}else f===lr?(i.node.literal="\u2019",l&&(n.node.literal="\u2018"),i=i.next):f===ur&&(i.node.literal="\u201D",l&&(n.node.literal="\u201C"),i=i.next);l||(c[f][d?a.origdelims%3:0]=a.previous,a.canOpen||this.removeDelimiter(a))}}for(;this.delimiters!==null&&this.delimiters!==t;)this.removeDelimiter(this.delimiters)},r.prototype.parseLinkTitle=function(){var t=this.match(jte);return t===null?null:jn(t.substr(1,t.length-2))},r.prototype.parseLinkDestination=function(){var t=this.match(Gte);if(t===null){if(this.peek()===Bc)return null;for(var e=this.pos,n=0,i=void 0;(i=this.peek())!==-1;)if(i===Hc&&_c.test(this.subject.charAt(this.pos+1)))this.pos+=1,this.peek()!==-1&&(this.pos+=1);else if(i===Fc)this.pos+=1,n+=1;else if(i===So){if(n<1)break;this.pos+=1,n-=1}else{if(Mo.exec(To(i))!==null)break;this.pos+=1}return this.pos===e&&i!==So||n!==0?null:(t=this.subject.substr(e,this.pos-e),Ti(jn(t)))}return Ti(jn(t.substr(1,t.length-2)))},r.prototype.parseLinkLabel=function(){var t=this.match(ire);return t===null||t.length>1001?0:t.length},r.prototype.parseOpenBracket=function(t){var e=this.pos;this.pos+=1;var n=ie("[",this.sourcepos(this.pos,this.pos));return t.appendChild(n),this.addBracket(n,e,!1),!0},r.prototype.parseBang=function(t){var e=this.pos;if(this.pos+=1,this.peek()===Pc){this.pos+=1;var n=ie("![",this.sourcepos(this.pos-1,this.pos));t.appendChild(n),this.addBracket(n,e+1,!0)}else{var n=ie("!",this.sourcepos(this.pos,this.pos));t.appendChild(n)}return!0},r.prototype.parseCloseBracket=function(t){var e=null,n=null,i=!1;this.pos+=1;var a=this.pos,o=this.brackets;if(o===null)return t.appendChild(ie("]",this.sourcepos(a,a))),!0;if(!o.active)return t.appendChild(ie("]",this.sourcepos(a,a))),this.removeBracket(),!0;var s=o.image,l=this.pos;this.peek()===Fc&&(this.pos++,this.spnl()&&(e=this.parseLinkDestination())!==null&&this.spnl()&&(Mo.test(this.subject.charAt(this.pos-1))&&(n=this.parseLinkTitle())||!0)&&this.spnl()&&this.peek()===So?(this.pos+=1,i=!0):this.pos=l);var u="";if(!i){var c=this.pos,f=this.parseLinkLabel();if(f>2?u=this.subject.slice(c,c+f):o.bracketAfter||(u=this.subject.slice(o.index,a)),f===0&&(this.pos=l),u){u=Rc(u);var d=this.refMap[u];d&&(e=d.destination,n=d.title,i=!0)}}if(i){var h=X(s?"image":"link");h.destination=e,h.title=n||"",h.sourcepos=[o.startpos,this.sourcepos(this.pos)];for(var p=o.node.next,v=void 0;p;)v=p.next,p.unlink(),h.appendChild(p),p=v;if(t.appendChild(h),this.processEmphasis(o.previousDelimiter),this.removeBracket(),o.node.unlink(),!s)for(o=this.brackets;o!==null;)o.image||(o.active=!1),o=o.previous;return this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:u}),!0}return this.removeBracket(),this.pos=a,t.appendChild(ie("]",this.sourcepos(a,a))),this.options.referenceDefinition&&(this.refLinkCandidateMap[t.id]={node:t,refLabel:u}),!0},r.prototype.addBracket=function(t,e,n){this.brackets!==null&&(this.brackets.bracketAfter=!0),this.brackets={node:t,startpos:this.sourcepos(e+(n?0:1)),previous:this.brackets,previousDelimiter:this.delimiters,index:e,image:n,active:!0}},r.prototype.removeBracket=function(){this.brackets&&(this.brackets=this.brackets.previous)},r.prototype.parseEntity=function(t){var e,n=this.pos+1;return(e=this.match(Jte))?(t.appendChild(ie(kl.decodeHTML(e),this.sourcepos(n,this.pos))),!0):!1},r.prototype.parseString=function(t){var e,n=this.pos+1;if(e=this.match(are)){if(this.options.smart){var i=e.replace(Xte,"\u2026").replace(Yte,function(o){var s=0,l=0;return o.length%3===0?l=o.length/3:o.length%2===0?s=o.length/2:o.length%3===2?(s=1,l=(o.length-2)/3):(s=2,l=(o.length-4)/3),ms("\u2014",l)+ms("\u2013",s)});t.appendChild(ie(i,this.sourcepos(n,this.pos)))}else{var a=ie(e,this.sourcepos(n,this.pos));t.appendChild(a)}return!0}return!1},r.prototype.parseNewline=function(t){this.pos+=1;var e=t.lastChild;if(e&&e.type==="text"&&e.literal[e.literal.length-1]===" "){var n=e.literal[e.literal.length-2]===" ",i=e.literal.length;e.literal=e.literal.replace(rre,"");var a=i-e.literal.length;e.sourcepos[1][1]-=a,t.appendChild(X(n?"linebreak":"softbreak",this.sourcepos(this.pos-a,this.pos)))}else t.appendChild(X("softbreak",this.sourcepos(this.pos,this.pos)));return this.nextLine(),this.match(nre),!0},r.prototype.parseReference=function(t,e){if(!this.options.referenceDefinition)return 0;this.subject=t.stringContent,this.pos=0;var n=null,i=this.pos,a=this.parseLinkLabel();if(a===0)return 0;var o=this.subject.substr(0,a);if(this.peek()===Wte)this.pos++;else return this.pos=i,0;this.spnl();var s=this.parseLinkDestination();if(s===null)return this.pos=i,0;var l=this.pos;this.spnl(),this.pos!==l&&(n=this.parseLinkTitle()),n===null&&(n="",this.pos=l);var u=!0;if(this.match(zc)===null&&(n===""?u=!1:(n="",this.pos=l,u=this.match(zc)!==null)),!u)return this.pos=i,0;var c=Rc(o);if(c==="")return this.pos=i,0;var f=this.getReferenceDefSourcepos(t);t.sourcepos[0][0]=f[1][0]+1;var d=X("refDef",f);return d.title=n,d.dest=s,d.label=c,t.insertBefore(d),e[c]?this.refDefCandidateMap[d.id]=d:e[c]=Cs(d),this.pos-i},r.prototype.mergeTextNodes=function(t){for(var e,n=[];e=t.next();){var i=e.entering,a=e.node;if(i&&a.type==="text")n.push(a);else if(n.length===1)n=[];else if(n.length>1){var o=n[0],s=n[n.length-1];o.sourcepos&&s.sourcepos&&(o.sourcepos[1]=s.sourcepos[1]),o.next=s.next,o.next&&(o.next.prev=o);for(var l=1;l<n.length;l+=1)o.literal+=n[l].literal,n[l].unlink();n=[]}}},r.prototype.getReferenceDefSourcepos=function(t){for(var e=t.stringContent.split(/\n|\r\n/),n=!1,i=0,a={line:0,ch:0},o=0;o<e.length;o+=1){var s=e[o];if(Mo.test(s))break;if(/\:/.test(s)&&i===0){if(n)break;var l=s.indexOf(":")===s.length-1?o+1:o;a={line:l,ch:e[l].length},n=!0}var u=s.match(/'|"/g);if(u&&(i+=u.length),i===2){a={line:o,ch:s.length};break}}return[[t.sourcepos[0][0],t.sourcepos[0][1]],[t.sourcepos[0][0]+a.line,a.ch]]},r.prototype.parseInline=function(t){var e,n=!1,i=this.peek();if(i===-1)return!1;switch(i){case bs:n=this.parseNewline(t);break;case Hc:n=this.parseBackslash(t);break;case $te:n=this.parseBackticks(t);break;case xo:case Si:case Ei:case cr:n=this.handleDelim(i,t);break;case lr:case ur:n=!!(!((e=this.options)===null||e===void 0)&&e.smart)&&this.handleDelim(i,t);break;case Pc:n=this.parseOpenBracket(t);break;case Vte:n=this.parseBang(t);break;case zte:n=this.parseCloseBracket(t);break;case Bc:n=this.parseAutolink(t)||this.parseHtmlTag(t);break;case Ute:t.disabledEntityParse||(n=this.parseEntity(t));break;default:n=this.parseString(t);break}return n||(this.pos+=1,t.appendChild(ie(To(i),this.sourcepos(this.pos,this.pos+1)))),!0},r.prototype.parse=function(t){for(this.subject=t.stringContent.trim(),this.pos=0,this.delimiters=null,this.brackets=null,this.lineOffsets=t.lineOffsets||[0],this.lineIdx=0,this.linePosOffset=0,this.lineStartNum=t.sourcepos[0][0],dte(t)&&(this.lineOffsets[0]+=t.level+1);this.parseInline(t););t.stringContent=null,this.processEmphasis(null),this.mergeTextNodes(t.walker());var e=this.options,n=e.extendedAutolinks,i=e.customParser;if(n&&Fte(t.walker(),n),i&&t.firstChild)for(var a,o=t.firstChild.walker();a=o.next();){var s=a.node,l=a.entering;i[s.type]&&i[s.type](s,{entering:l,options:this.options})}},r}(),sre=/^\[([ \txX])\][ \t]+/;function lre(r,t){if(t.firstChild&&t.firstChild.type==="paragraph"){var e=t.firstChild,n=e.stringContent.match(sre);if(n){var i=n[0].length;e.stringContent=e.stringContent.substring(i-1),e.sourcepos[0][1]+=i,e.lineOffsets[0]+=i,t.listData.task=!0,t.listData.checked=/[xX]/.test(n[1])}}}var ure={continue:function(){return 0},finalize:function(){},canContain:function(r){return r==="tableHead"||r==="tableBody"},acceptsLines:!1},cre={continue:function(){return 0},finalize:function(){},canContain:function(r){return r==="tableRow"},acceptsLines:!1},fre={continue:function(){return 1},finalize:function(){},canContain:function(r){return r==="tableRow"||r==="tableDelimRow"},acceptsLines:!1},dre={continue:function(){return 1},finalize:function(){},canContain:function(r){return r==="tableDelimCell"},acceptsLines:!1},hre={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},pre={continue:function(){return 1},finalize:function(){},canContain:function(r){return r==="tableCell"},acceptsLines:!1},vre={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},ca=4,Kp=9,Qp=62,mre=60,Xp=32,Yp=91,Zp=/[^ \t\f\v\r\n]/,gre=/^(?:`{3,}|~{3,})(?= *$)/;function Vc(r){for(var t=r;t;){if(t.lastLineBlank)return!0;var e=t.type;if(!t.lastLineChecked&&(e==="list"||e==="item"))t.lastLineChecked=!0,t=t.lastChild;else{t.lastLineChecked=!0;break}}return!1}function Ue(r,t){return t<r.length?r.charCodeAt(t):-1}function ev(r){return!Zp.test(r)}function kn(r){return r===Xp||r===Kp}var yre=/^\$\$$/,bre={continue:function(r,t){var e=r.currentLine,n=e.match(yre);if(n)return r.lastLineLength=n[0].length,r.finalize(t,r.lineNumber),2;for(var i=t.offset;i>0&&kn(Ue(e,r.offset));)r.advanceOffset(1,!0),i--;return 0},finalize:function(r,t){if(t.stringContent!==null){var e=t.stringContent,n=e.indexOf(`
`),i=e.slice(0,n),a=e.slice(n+1),o=i.match(/^(\s*)(.*)/);t.info=jn(o[2].trim()),t.literal=a,t.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},tv={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!0},kre={continue:function(){return 0},finalize:function(){},canContain:function(r){return r!=="item"},acceptsLines:!1},wre={continue:function(){return 0},finalize:function(r,t){for(var e=t.firstChild;e;){if(Vc(e)&&e.next){t.listData.tight=!1;break}for(var n=e.firstChild;n;){if(Vc(n)&&(e.next||n.next)){t.listData.tight=!1;break}n=n.next}e=e.next}},canContain:function(r){return r==="item"},acceptsLines:!1},Cre={continue:function(r){var t=r.currentLine;if(!r.indented&&Ue(t,r.nextNonspace)===Qp)r.advanceNextNonspace(),r.advanceOffset(1,!1),kn(Ue(t,r.offset))&&r.advanceOffset(1,!0);else return 1;return 0},finalize:function(){},canContain:function(r){return r!=="item"},acceptsLines:!1},Tre={continue:function(r,t){if(r.blank){if(t.firstChild===null)return 1;r.advanceNextNonspace()}else if(r.indent>=t.listData.markerOffset+t.listData.padding)r.advanceOffset(t.listData.markerOffset+t.listData.padding,!0);else return 1;return 0},finalize:lre,canContain:function(r){return r!=="item"},acceptsLines:!1},xre={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},Sre={continue:function(){return 1},finalize:function(){},canContain:function(){return!1},acceptsLines:!1},Ere={continue:function(r,t){var e=r.currentLine,n=r.indent;if(t.isFenced){var i=n<=3&&e.charAt(r.nextNonspace)===t.fenceChar&&e.slice(r.nextNonspace).match(gre);if(i&&i[0].length>=t.fenceLength)return r.lastLineLength=r.offset+n+i[0].length,r.finalize(t,r.lineNumber),2;for(var a=t.fenceOffset;a>0&&kn(Ue(e,r.offset));)r.advanceOffset(1,!0),a--}else if(n>=ca)r.advanceOffset(ca,!0);else if(r.blank)r.advanceNextNonspace();else return 1;return 0},finalize:function(r,t){var e;if(t.stringContent!==null){if(t.isFenced){var n=t.stringContent,i=n.indexOf(`
`),a=n.slice(0,i),o=n.slice(i+1),s=a.match(/^(\s*)(.*)/);t.infoPadding=s[1].length,t.info=jn(s[2].trim()),t.literal=o}else t.literal=(e=t.stringContent)===null||e===void 0?void 0:e.replace(/(\n *)+$/,`
`);t.stringContent=null}},canContain:function(){return!1},acceptsLines:!0},Mre={continue:function(r,t){return r.blank&&(t.htmlBlockType===6||t.htmlBlockType===7)?1:0},finalize:function(r,t){var e;t.literal=((e=t.stringContent)===null||e===void 0?void 0:e.replace(/(\n *)+$/,""))||null,t.stringContent=null},canContain:function(){return!1},acceptsLines:!0},Ore={continue:function(r){return r.blank?1:0},finalize:function(r,t){if(t.stringContent!==null){for(var e,n=!1;Ue(t.stringContent,0)===Yp&&(e=r.inlineParser.parseReference(t,r.refMap));)t.stringContent=t.stringContent.slice(e),n=!0;n&&ev(t.stringContent)&&t.unlink()}},canContain:function(){return!1},acceptsLines:!0},Nre=tv,Dre=tv,Kr={document:kre,list:wre,blockQuote:Cre,item:Tre,heading:xre,thematicBreak:Sre,codeBlock:Ere,htmlBlock:Mre,paragraph:Ore,table:ure,tableBody:cre,tableHead:fre,tableRow:pre,tableCell:vre,tableDelimRow:dre,tableDelimCell:hre,refDef:Nre,customBlock:bre,frontMatter:Dre};function ks(r){for(var t=0,e=0,n=[],i=0;i<r.length;i+=1)if(r[i]==="|"&&r[i-1]!=="\\"){var a=r.substring(t,i);t===0&&Ac(a)?e=i+1:n.push(a),t=i+1}if(t<r.length){var a=r.substring(t,r.length);Ac(a)||n.push(a)}return[e,n]}function ws(r,t,e,n){for(var i=[],a=0,o=t;a<o.length;a++){var s=o[a],l=s.match(/^[ \t]+/),u=l?l[0].length:0,c=void 0,f=void 0;if(u===s.length)u=0,c=0,f="";else{var d=s.match(/[ \t]+$/);c=d?d[0].length:0,f=s.slice(u,s.length-c)}var h=n+u,p=X(r,[[e,n],[e,n+s.length-1]]);p.stringContent=f.replace(/\\\|/g,"|"),p.startIdx=i.length,p.endIdx=i.length,p.lineOffsets=[h-1],p.paddingLeft=u,p.paddingRight=c,i.push(p),n+=s.length+1}return i}function Lre(r){var t=null,e=r.stringContent,n=e[0],i=e[e.length-1];return i===":"?t=n===":"?"center":"right":n===":"&&(t="left"),{align:t}}var Are=function(r,t){var e=t.stringContent;if(t.type==="paragraph"&&!r.indented&&!r.blank){var n=e.length-1,i=e.lastIndexOf(`
`,n-1)+1,a=e.slice(i,n),o=r.currentLine.slice(r.nextNonspace),s=ks(a),l=s[0],u=s[1],c=ks(o),f=c[0],d=c[1],h=/^[ \t]*:?-+:?[ \t]*$/;if(!u.length||!d.length||d.some(function(N){return!h.test(N)})||d.length===1&&o.indexOf("|")!==0)return 0;var p=t.lineOffsets,v=r.lineNumber-1,m=ua(p)+1,g=X("table",[[v,m],[r.lineNumber,r.offset]]);if(g.columns=d.map(function(){return{align:null}}),t.insertAfter(g),p.length===1)t.unlink();else{t.stringContent=e.slice(0,i);var k=e.lastIndexOf(`
`,i-2)+1,b=i-k-1;r.lastLineLength=p[p.length-2]+b,r.finalize(t,v-1)}r.advanceOffset(r.currentLine.length-r.offset,!1);var C=X("tableHead",[[v,m],[r.lineNumber,r.offset]]);g.appendChild(C);var T=X("tableRow",[[v,m],[v,m+a.length-1]]),S=X("tableDelimRow",[[r.lineNumber,r.nextNonspace+1],[r.lineNumber,r.offset]]);C.appendChild(T),C.appendChild(S),ws("tableCell",u,v,m+l).forEach(function(N){T.appendChild(N)});var M=ws("tableDelimCell",d,r.lineNumber,r.nextNonspace+1+f);return M.forEach(function(N){S.appendChild(N)}),g.columns=M.map(Lre),r.tip=g,2}return 0},Ire=function(r,t){if(t.type!=="table"&&t.type!=="tableBody"||!r.blank&&r.currentLine.indexOf("|")===-1)return 0;if(r.advanceOffset(r.currentLine.length-r.offset,!1),r.blank){var e=t;return t.type==="tableBody"&&(e=t.parent,r.finalize(t,r.lineNumber-1)),r.finalize(e,r.lineNumber-1),0}var n=t;t.type==="table"&&(n=r.addChild("tableBody",r.nextNonspace),n.stringContent=null);var i=X("tableRow",[[r.lineNumber,r.nextNonspace+1],[r.lineNumber,r.currentLine.length]]);n.appendChild(i);var a=n.parent,o=r.currentLine.slice(r.nextNonspace),s=ks(o),l=s[0],u=s[1];return ws("tableCell",u,r.lineNumber,r.nextNonspace+1+l).forEach(function(c,f){f>=a.columns.length&&(c.ignored=!0),i.appendChild(c)}),2},Rre=/^(\$\$)(\s*[a-zA-Z])+/,Pre=/^(\$\$)(\s*[a-zA-Z])+.*(\$\$)/,Bre=function(r){var t;if(!r.indented&&!Pre.test(r.currentLine)&&(t=r.currentLine.match(Rre))){var e=t[1].length;r.closeUnmatchedBlocks();var n=r.addChild("customBlock",r.nextNonspace);return n.syntaxLength=e,n.offset=r.indent,r.advanceNextNonspace(),r.advanceOffset(e,!1),2}return 0},Hre=/^`{3,}(?!.*`)|^~{3,}/,Fre=[/./,/^<(?:script|pre|style)(?:\s|>|$)/i,/^<!--/,/^<[?]/,/^<![A-Z]/,/^<!\[CDATA\[/,/^<[/]?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[123456]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|[/]?[>]|$)/i,new RegExp("^(?:"+Gp+"|"+Jp+")\\s*$","i")],qre=/^(?:=+|-+)[ \t]*$/,_re=/^#{1,6}(?:[ \t]+|$)/,$re=/^(?:(?:\*[ \t]*){3,}|(?:_[ \t]*){3,}|(?:-[ \t]*){3,})[ \t]*$/,rv=/^[*+-]/,nv=/^(\d{1,9})([.)])/;function zre(r,t){var e=r.currentLine.slice(r.nextNonspace),n,i,a={type:"bullet",tight:!0,bulletChar:"",start:0,delimiter:"",padding:0,markerOffset:r.indent,task:!1,checked:!1};if(r.indent>=4)return null;if(n=e.match(rv))a.type="bullet",a.bulletChar=n[0][0];else if((n=e.match(nv))&&(t.type!=="paragraph"||n[1]==="1"))a.type="ordered",a.start=parseInt(n[1],10),a.delimiter=n[2];else return null;if(i=Ue(r.currentLine,r.nextNonspace+n[0].length),!(i===-1||i===Kp||i===Xp)||t.type==="paragraph"&&!r.currentLine.slice(r.nextNonspace+n[0].length).match(Zp))return null;r.advanceNextNonspace(),r.advanceOffset(n[0].length,!0);var o=r.column,s=r.offset;do r.advanceOffset(1,!0),i=Ue(r.currentLine,r.offset);while(r.column-o<5&&kn(i));var l=Ue(r.currentLine,r.offset)===-1,u=r.column-o;return u>=5||u<1||l?(a.padding=n[0].length+1,r.column=o,r.offset=s,kn(Ue(r.currentLine,r.offset))&&r.advanceOffset(1,!0)):a.padding=n[0].length+u,a}function Vre(r,t){return r.type===t.type&&r.delimiter===t.delimiter&&r.bulletChar===t.bulletChar}function iv(r,t){return r.options.disallowDeepHeading&&(t.type==="blockQuote"||t.type==="item")}var Ure=function(r){return!r.indented&&Ue(r.currentLine,r.nextNonspace)===Qp?(r.advanceNextNonspace(),r.advanceOffset(1,!1),kn(Ue(r.currentLine,r.offset))&&r.advanceOffset(1,!0),r.closeUnmatchedBlocks(),r.addChild("blockQuote",r.nextNonspace),1):0},Wre=function(r,t){var e;if(!r.indented&&!iv(r,t)&&(e=r.currentLine.slice(r.nextNonspace).match(_re))){r.advanceNextNonspace(),r.advanceOffset(e[0].length,!1),r.closeUnmatchedBlocks();var n=r.addChild("heading",r.nextNonspace);return n.level=e[0].trim().length,n.headingType="atx",n.stringContent=r.currentLine.slice(r.offset).replace(/^[ \t]*#+[ \t]*$/,"").replace(/[ \t]+#+[ \t]*$/,""),r.advanceOffset(r.currentLine.length-r.offset),2}return 0},jre=function(r){var t;if(!r.indented&&(t=r.currentLine.slice(r.nextNonspace).match(Hre))){var e=t[0].length;r.closeUnmatchedBlocks();var n=r.addChild("codeBlock",r.nextNonspace);return n.isFenced=!0,n.fenceLength=e,n.fenceChar=t[0][0],n.fenceOffset=r.indent,r.advanceNextNonspace(),r.advanceOffset(e,!1),2}return 0},Gre=function(r,t){if(!r.indented&&Ue(r.currentLine,r.nextNonspace)===mre){var e=r.currentLine.slice(r.nextNonspace),n=r.options.disallowedHtmlBlockTags,i=void 0;for(i=1;i<=7;i++){var a=e.match(Fre[i]);if(a){if(i===7){if(t.type==="paragraph")return 0;if(n.length>0){var o=new RegExp("</?(?:"+n.join("|")+")","i");if(o.test(a[0]))return 0}}r.closeUnmatchedBlocks();var s=r.addChild("htmlBlock",r.offset);return s.htmlBlockType=i,2}}}return 0},Jre=function(r,t){var e;if(t.stringContent!==null&&!r.indented&&t.type==="paragraph"&&!iv(r,t.parent)&&(e=r.currentLine.slice(r.nextNonspace).match(qre))){r.closeUnmatchedBlocks();for(var n=void 0;Ue(t.stringContent,0)===Yp&&(n=r.inlineParser.parseReference(t,r.refMap));)t.stringContent=t.stringContent.slice(n);if(t.stringContent.length>0){var i=X("heading",t.sourcepos);return i.level=e[0][0]==="="?1:2,i.headingType="setext",i.stringContent=t.stringContent,t.insertAfter(i),t.unlink(),r.tip=i,r.advanceOffset(r.currentLine.length-r.offset,!1),2}return 0}return 0},Kre=function(r){return!r.indented&&$re.test(r.currentLine.slice(r.nextNonspace))?(r.closeUnmatchedBlocks(),r.addChild("thematicBreak",r.nextNonspace),r.advanceOffset(r.currentLine.length-r.offset,!1),2):0},Qre=function(r,t){var e,n=t;return(!r.indented||t.type==="list")&&(e=zre(r,n))?(r.closeUnmatchedBlocks(),(r.tip.type!=="list"||!Vre(n.listData,e))&&(n=r.addChild("list",r.nextNonspace),n.listData=e),n=r.addChild("item",r.nextNonspace),n.listData=e,1):0},Xre=function(r){return r.indented&&r.tip.type!=="paragraph"&&!r.blank?(r.advanceOffset(ca,!0),r.closeUnmatchedBlocks(),r.addChild("codeBlock",r.offset),2):0},Oo=[Ure,Wre,jre,Gre,Jre,Kre,Qre,Xre,Are,Ire,Bre],av=/^(-{3}|\+{3}|;{3})$/,Yre=function(r,t){var e=r.currentLine,n=r.lineNumber,i=r.indented;if(n===1&&!i&&t.type==="document"&&av.test(e)){r.closeUnmatchedBlocks();var a=r.addChild("frontMatter",r.nextNonspace);return a.stringContent=e,r.advanceNextNonspace(),r.advanceOffset(e.length,!1),2}return 0},Zre={continue:function(r,t){var e=r.currentLine,n=e.match(av);return t.type==="frontMatter"&&n?(t.stringContent+=e,r.lastLineLength=n[0].length,r.finalize(t,r.lineNumber),2):0},finalize:function(r,t){t.stringContent!==null&&(t.literal=t.stringContent,t.stringContent=null)},canContain:function(){return!1},acceptsLines:!0},ene=[/./,/<\/(?:script|pre|style)>/i,/-->/,/\?>/,/>/,/\]\]>/],tne=/^[#`~*+_=<>0-9-;$]/,rne=/\r\n|\n|\r/;function No(){return X("document",[[1,1],[0,0]])}var nne={smart:!1,tagFilter:!1,extendedAutolinks:!1,disallowedHtmlBlockTags:[],referenceDefinition:!1,disallowDeepHeading:!1,customParser:null,frontMatter:!1},ine=function(){function r(t){this.options=ve(ve({},nne),t),this.doc=No(),this.tip=this.doc,this.oldtip=this.doc,this.lineNumber=0,this.offset=0,this.column=0,this.nextNonspace=0,this.nextNonspaceColumn=0,this.indent=0,this.currentLine="",this.indented=!1,this.blank=!1,this.partiallyConsumedTab=!1,this.allClosed=!0,this.lastMatchedContainer=this.doc,this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.lastLineLength=0,this.lines=[],this.options.frontMatter&&(Kr.frontMatter=Zre,Oo.unshift(Yre)),this.inlineParser=new ore(this.options)}return r.prototype.advanceOffset=function(t,e){e===void 0&&(e=!1);for(var n=this.currentLine,i,a,o;t>0&&(o=n[this.offset]);)o==="	"?(i=4-this.column%4,e?(this.partiallyConsumedTab=i>t,a=i>t?t:i,this.column+=a,this.offset+=this.partiallyConsumedTab?0:1,t-=a):(this.partiallyConsumedTab=!1,this.column+=i,this.offset+=1,t-=1)):(this.partiallyConsumedTab=!1,this.offset+=1,this.column+=1,t-=1)},r.prototype.advanceNextNonspace=function(){this.offset=this.nextNonspace,this.column=this.nextNonspaceColumn,this.partiallyConsumedTab=!1},r.prototype.findNextNonspace=function(){for(var t=this.currentLine,e=this.offset,n=this.column,i;(i=t.charAt(e))!=="";)if(i===" ")e++,n++;else if(i==="	")e++,n+=4-n%4;else break;this.blank=i===`
`||i==="\r"||i==="",this.nextNonspace=e,this.nextNonspaceColumn=n,this.indent=this.nextNonspaceColumn-this.column,this.indented=this.indent>=ca},r.prototype.addLine=function(){if(this.partiallyConsumedTab){this.offset+=1;var t=4-this.column%4;this.tip.stringContent+=ms(" ",t)}this.tip.lineOffsets?this.tip.lineOffsets.push(this.offset):this.tip.lineOffsets=[this.offset],this.tip.stringContent+=this.currentLine.slice(this.offset)+`
`},r.prototype.addChild=function(t,e){for(;!Kr[this.tip.type].canContain(t);)this.finalize(this.tip,this.lineNumber-1);var n=e+1,i=X(t,[[this.lineNumber,n],[0,0]]);return i.stringContent="",this.tip.appendChild(i),this.tip=i,i},r.prototype.closeUnmatchedBlocks=function(){if(!this.allClosed){for(;this.oldtip!==this.lastMatchedContainer;){var t=this.oldtip.parent;this.finalize(this.oldtip,this.lineNumber-1),this.oldtip=t}this.allClosed=!0}},r.prototype.finalize=function(t,e){var n=t.parent;t.open=!1,t.sourcepos[1]=[e,this.lastLineLength],Kr[t.type].finalize(this,t),this.tip=n},r.prototype.processInlines=function(t){var e,n=this.options.customParser,i=t.walker();for(this.inlineParser.refMap=this.refMap,this.inlineParser.refLinkCandidateMap=this.refLinkCandidateMap,this.inlineParser.refDefCandidateMap=this.refDefCandidateMap,this.inlineParser.options=this.options;e=i.next();){var a=e.node,o=e.entering,s=a.type;n&&n[s]&&n[s](a,{entering:o,options:this.options}),!o&&(s==="paragraph"||s==="heading"||s==="tableCell"&&!a.ignored)&&this.inlineParser.parse(a)}},r.prototype.incorporateLine=function(t){var e=this.doc;this.oldtip=this.tip,this.offset=0,this.column=0,this.blank=!1,this.partiallyConsumedTab=!1,this.lineNumber+=1,t.indexOf("\0")!==-1&&(t=t.replace(/\0/g,"\uFFFD")),this.currentLine=t;for(var n=!0,i;(i=e.lastChild)&&i.open;){switch(e=i,this.findNextNonspace(),Kr[e.type].continue(this,e)){case 0:break;case 1:n=!1;break;case 2:this.lastLineLength=t.length;return;default:throw new Error("continue returned illegal value, must be 0, 1, or 2")}if(!n){e=e.parent;break}}this.allClosed=e===this.oldtip,this.lastMatchedContainer=e;for(var a=e.type!=="paragraph"&&Kr[e.type].acceptsLines,o=Oo.length;!a;){if(this.findNextNonspace(),e.type!=="table"&&e.type!=="tableBody"&&e.type!=="paragraph"&&!this.indented&&!tne.test(t.slice(this.nextNonspace))){this.advanceNextNonspace();break}for(var s=0;s<o;){var l=Oo[s](this,e);if(l===1){e=this.tip;break}else if(l===2){e=this.tip,a=!0;break}else s++}if(s===o){this.advanceNextNonspace();break}}if(!this.allClosed&&!this.blank&&this.tip.type==="paragraph")this.addLine();else{this.closeUnmatchedBlocks(),this.blank&&e.lastChild&&(e.lastChild.lastLineBlank=!0);for(var u=e.type,c=this.blank&&!(u==="blockQuote"||Up(e)&&e.isFenced||u==="item"&&!e.firstChild&&e.sourcepos[0][0]===this.lineNumber),f=e;f;)f.lastLineBlank=c,f=f.parent;Kr[u].acceptsLines?(this.addLine(),fte(e)&&e.htmlBlockType>=1&&e.htmlBlockType<=5&&ene[e.htmlBlockType].test(this.currentLine.slice(this.offset))&&(this.lastLineLength=t.length,this.finalize(e,this.lineNumber))):this.offset<t.length&&!this.blank&&(e=this.addChild("paragraph",this.offset),this.advanceNextNonspace(),this.addLine())}this.lastLineLength=t.length},r.prototype.parse=function(t,e){this.doc=No(),this.tip=this.doc,this.lineNumber=0,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";var n=t.split(rne),i=n.length;this.lines=e||n,this.options.referenceDefinition&&this.clearRefMaps(),t.charCodeAt(t.length-1)===bs&&(i-=1);for(var a=0;a<i;a++)this.incorporateLine(n[a]);for(;this.tip;)this.finalize(this.tip,i);return this.processInlines(this.doc),this.doc},r.prototype.partialParseStart=function(t,e){this.doc=No(),this.tip=this.doc,this.lineNumber=t-1,this.lastLineLength=0,this.offset=0,this.column=0,this.lastMatchedContainer=this.doc,this.currentLine="";for(var n=e.length,i=0;i<n;i++)this.incorporateLine(e[i]);return this.doc},r.prototype.partialParseExtends=function(t){for(var e=0;e<t.length;e++)this.incorporateLine(t[e])},r.prototype.partialParseFinish=function(){for(;this.tip;)this.finalize(this.tip,this.lineNumber);this.processInlines(this.doc)},r.prototype.setRefMaps=function(t,e,n){this.refMap=t,this.refLinkCandidateMap=e,this.refDefCandidateMap=n},r.prototype.clearRefMaps=function(){[this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(t){_te(t)})},r}();function Uc(r,t){return r[0]<t[0]?1:r[0]>t[0]?-1:r[1]<t[1]?1:r[1]>t[1]?-1:0}function ane(r,t){var e=r[0],n=r[1];return Uc(n,t)===1?1:Uc(e,t)===-1?-1:0}function one(r,t){if(!(r.parent!==t.parent||r===t)){for(var e=r.next;e&&e!==t;){for(var n=e.next,i=0,a=["parent","prev","next"];i<a.length;i++){var o=a[i];e[o]&&(gs(e[o].id),e[o]=null)}e=n}r.next=t.next,t.next?t.next.prev=r:r.parent.lastChild=r}}function sne(r){for(var t=[],e=r.firstChild;e;)t.push(e),e=e.next;return t}function Wc(r,t){for(var e=0,n=t;e<n.length;e++){var i=n[e];r.insertBefore(i)}}function lne(r,t){for(var e=t.length-1;e>=0;e-=1)r.prependChild(t[e])}function une(r,t){if(!(!r||!r.parent||t===0)){var e=r.parent.walker();e.resumeAt(r,!0);for(var n;n=e.next();){var i=n.node,a=n.entering;a&&(i.sourcepos[0][0]+=t,i.sourcepos[1][0]+=t)}}}function ov(r,t){var e=r[0],n=r[1];return n[0]<t?1:e[0]>t?-1:0}function Mi(r,t){for(var e=r.firstChild;e;){var n=ov(e.sourcepos,t);if(n===0)return e;if(n===-1)return e.prev||e;e=e.next}return r.lastChild}function cne(r){for(;r.lastChild;)r=r.lastChild;return r}function fne(r){for(;r.parent&&r.parent.type!=="document"&&r.parent.sourcepos[0][0]===r.sourcepos[0][0];)r=r.parent;return r}function dne(r,t){for(var e=r.firstChild,n=null;e;){var i=ov(e.sourcepos,t);if(i===0){if(e.sourcepos[0][0]===t||!e.firstChild)return e;n=e,e=e.firstChild}else{if(i===-1)break;n=e,e=e.next}}return n?fne(cne(n)):null}function hne(r,t){for(var e=r,n=null;e;){var i=ane(e.sourcepos,t);if(i===0)if(e.firstChild)n=e,e=e.firstChild;else return e;else{if(i===-1)return n;if(e.next)e=e.next;else return n}}return e}function sv(r){return Yee(r)||null}function Do(r,t,e){if(e===void 0&&(e=null),t)for(var n=t.walker();t&&t!==e;){r(t);var i=n.next();if(i)t=i.node;else break}}function pne(r){var t=sv(r);if(!t)return!0;for(;t&&t.type!=="document";){if(!t.parent&&!t.prev&&!t.next)return!0;t=t.parent}return!1}var jc=/\r\n|\n|\r/;function vne(r){var t=r.match(/^[ \t]+/);if(t&&(t[0].length>=2||/\t/.test(t[0])))return!0;var e=t?r.slice(t.length):r;return rv.test(e)||nv.test(e)}function mne(r){return!ev(r)&&r.indexOf("|")!==-1}function Cs(r){var t=r.id,e=r.title,n=r.sourcepos,i=r.dest;return{id:t,title:e,sourcepos:n,unlinked:!1,destination:i}}var lv=function(){function r(t,e){this.refMap={},this.refLinkCandidateMap={},this.refDefCandidateMap={},this.referenceDefinition=!!(e!=null&&e.referenceDefinition),this.parser=new ine(e),this.parser.setRefMaps(this.refMap,this.refLinkCandidateMap,this.refDefCandidateMap),this.eventHandlerMap={change:[]},t=t||"",this.lineTexts=t.split(jc),this.root=this.parser.parse(t,this.lineTexts)}return r.prototype.updateLineTexts=function(t,e,n){var i,a=t[0],o=t[1],s=e[0],l=e[1],u=n.split(jc),c=u.length,f=this.lineTexts[a-1],d=this.lineTexts[s-1];u[0]=f.slice(0,o-1)+u[0],u[c-1]=u[c-1]+d.slice(l-1);var h=s-a+1;return(i=this.lineTexts).splice.apply(i,ps([a-1,h],u)),c-h},r.prototype.updateRootNodeState=function(){if(this.lineTexts.length===1&&this.lineTexts[0]===""){this.root.lastLineBlank=!0,this.root.sourcepos=[[1,1],[1,0]];return}this.root.lastChild&&(this.root.lastLineBlank=this.root.lastChild.lastLineBlank);for(var t=this.lineTexts,e=t.length-1;t[e]==="";)e-=1;t.length-2>e&&(e+=1),this.root.sourcepos[1]=[e+1,t[e].length]},r.prototype.replaceRangeNodes=function(t,e,n){t?(Wc(t,n),one(t,e),[t.id,e.id].forEach(function(i){return gs(i)}),t.unlink()):e?(Wc(e,n),gs(e.id),e.unlink()):lne(this.root,n)},r.prototype.getNodeRange=function(t,e){var n=Mi(this.root,t[0]),i=Mi(this.root,e[0]);return i&&i.next&&e[0]+1===i.next.sourcepos[0][0]&&(i=i.next),[n,i]},r.prototype.trigger=function(t,e){this.eventHandlerMap[t].forEach(function(n){n(e)})},r.prototype.extendEndLine=function(t){for(;this.lineTexts[t]==="";)t+=1;return t},r.prototype.parseRange=function(t,e,n,i){t&&t.prev&&(Ic(t.prev)&&vne(this.lineTexts[n-1])||hte(t.prev)&&mne(this.lineTexts[n-1]))&&(t=t.prev,n=t.sourcepos[0][0]);for(var a=this.lineTexts.slice(n-1,i),o=this.parser.partialParseStart(n,a),s=e?e.next:this.root.firstChild,l=o.lastChild,u=l&&Up(l)&&l.open,c=l&&Wp(l)&&l.open,f=l&&Ic(l);(u||c)&&s||f&&s&&(s.type==="list"||s.sourcepos[0][1]>=2);){var d=this.extendEndLine(s.sourcepos[1][0]);this.parser.partialParseExtends(this.lineTexts.slice(i,d)),t||(t=e),e=s,i=d,s=s.next}this.parser.partialParseFinish();var h=sne(o);return{newNodes:h,extStartNode:t,extEndNode:e}},r.prototype.getRemovedNodeRange=function(t,e){return!t||t&&Gr(t)||e&&Gr(e)?null:{id:[t.id,e.id],line:[t.sourcepos[0][0]-1,e.sourcepos[1][0]-1]}},r.prototype.markDeletedRefMap=function(t,e){var n=this;if(!Jr(this.refMap)){var i=function(a){if(Gr(a)){var o=n.refMap[a.label];o&&a.id===o.id&&(o.unlinked=!0)}};t&&Do(i,t.parent,e),e&&Do(i,e)}},r.prototype.replaceWithNewRefDefState=function(t){var e=this;if(!Jr(this.refMap)){var n=function(i){if(Gr(i)){var a=i.label,o=e.refMap[a];(!o||o.unlinked)&&(e.refMap[a]=Cs(i))}};t.forEach(function(i){Do(n,i)})}},r.prototype.replaceWithRefDefCandidate=function(){var t=this;Jr(this.refDefCandidateMap)||xi(this.refDefCandidateMap,function(e,n){var i=n.label,a=n.sourcepos,o=t.refMap[i];(!o||o.unlinked||o.sourcepos[0][0]>a[0][0])&&(t.refMap[i]=Cs(n))})},r.prototype.getRangeWithRefDef=function(t,e,n,i,a){if(this.referenceDefinition&&!Jr(this.refMap)){var o=Mi(this.root,t-1),s=Mi(this.root,e+1);o&&Gr(o)&&o!==n&&o!==i&&(n=o,t=n.sourcepos[0][0]),s&&Gr(s)&&s!==n&&s!==i&&(i=s,e=this.extendEndLine(i.sourcepos[1][0]+a))}return[n,i,t,e]},r.prototype.parse=function(t,e,n){n===void 0&&(n=0);var i=this.getNodeRange(t,e),a=i[0],o=i[1],s=a?Math.min(a.sourcepos[0][0],t[0]):t[0],l=this.extendEndLine((o?Math.max(o.sourcepos[1][0],e[0]):e[0])+n),u=this.parseRange.apply(this,this.getRangeWithRefDef(s,l,a,o,n)),c=u.newNodes,f=u.extStartNode,d=u.extEndNode,h=this.getRemovedNodeRange(f,d),p=d?d.next:this.root.firstChild;return this.referenceDefinition?(this.markDeletedRefMap(f,d),this.replaceRangeNodes(f,d,c),this.replaceWithNewRefDefState(c)):this.replaceRangeNodes(f,d,c),{nodes:c,removedNodeRange:h,nextNode:p}},r.prototype.parseRefLink=function(){var t=this,e=[];return Jr(this.refMap)||xi(this.refMap,function(n,i){i.unlinked&&delete t.refMap[n],xi(t.refLinkCandidateMap,function(a,o){var s=o.node,l=o.refLabel;l===n&&e.push(t.parse(s.sourcepos[0],s.sourcepos[1]))})}),e},r.prototype.removeUnlinkedCandidate=function(){Jr(this.refDefCandidateMap)||[this.refLinkCandidateMap,this.refDefCandidateMap].forEach(function(t){xi(t,function(e){pne(e)&&delete t[e]})})},r.prototype.editMarkdown=function(t,e,n){var i=this.updateLineTexts(t,e,n),a=this.parse(t,e,i),o=qte(a,"nextNode");une(a.nextNode,i),this.updateRootNodeState();var s=[o];return this.referenceDefinition&&(this.removeUnlinkedCandidate(),this.replaceWithRefDefCandidate(),s=s.concat(this.parseRefLink())),this.trigger("change",s),s},r.prototype.getLineTexts=function(){return this.lineTexts},r.prototype.getRootNode=function(){return this.root},r.prototype.findNodeAtPosition=function(t){var e=hne(this.root,t);return!e||e===this.root?null:e},r.prototype.findFirstNodeAtLine=function(t){return dne(this.root,t)},r.prototype.on=function(t,e){this.eventHandlerMap[t].push(e)},r.prototype.off=function(t,e){var n=this.eventHandlerMap[t],i=n.indexOf(e);n.splice(i,1)},r.prototype.findNodeById=function(t){return sv(t)},r.prototype.removeAllNode=function(){Zee()},r}(),gne=["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"],Gc=new RegExp("<(/?(?:"+gne.join("|")+")[^>]*>)","ig");function Jc(r){return Gc.test(r)?r.replace(Gc,function(t,e){return"&lt;"+e}):r}var Kc={heading:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"h"+r.level,outerNewLine:!0}},text:function(r){return{type:"text",content:r.literal}},softbreak:function(r,t){var e=t.options;return{type:"html",content:e.softbreak}},linebreak:function(){return{type:"html",content:`<br />
`}},emph:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"em"}},strong:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"strong"}},paragraph:function(r,t){var e,n=t.entering,i=(e=r.parent)===null||e===void 0?void 0:e.parent;return i&&i.type==="list"&&i.listData.tight?null:{type:n?"openTag":"closeTag",tagName:"p",outerNewLine:!0}},thematicBreak:function(){return{type:"openTag",tagName:"hr",outerNewLine:!0,selfClose:!0}},blockQuote:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"blockquote",outerNewLine:!0,innerNewLine:!0}},list:function(r,t){var e=t.entering,n=r.listData,i=n.type,a=n.start,o=i==="bullet"?"ul":"ol",s={};return o==="ol"&&a!==null&&a!==1&&(s.start=a.toString()),{type:e?"openTag":"closeTag",tagName:o,attributes:s,outerNewLine:!0}},item:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"li",outerNewLine:!0}},htmlInline:function(r,t){var e=t.options,n=e.tagFilter?Jc(r.literal):r.literal;return{type:"html",content:n}},htmlBlock:function(r,t){var e=t.options,n=e.tagFilter?Jc(r.literal):r.literal;return e.nodeId?[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:n},{type:"closeTag",tagName:"div",outerNewLine:!0}]:{type:"html",content:n,outerNewLine:!0}},code:function(r){return[{type:"openTag",tagName:"code"},{type:"text",content:r.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(r){var t=r.info,e=t?t.split(/\s+/):[],n=[];return e.length>0&&e[0].length>0&&n.push("language-"+Yr(e[0])),[{type:"openTag",tagName:"pre",outerNewLine:!0},{type:"openTag",tagName:"code",classNames:n},{type:"text",content:r.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},link:function(r,t){var e=t.entering;if(e){var n=r,i=n.title,a=n.destination;return{type:"openTag",tagName:"a",attributes:ve({href:Yr(a)},i&&{title:Yr(i)})}}return{type:"closeTag",tagName:"a"}},image:function(r,t){var e=t.getChildrenText,n=t.skipChildren,i=r,a=i.title,o=i.destination;return n(),{type:"openTag",tagName:"img",selfClose:!0,attributes:ve({src:Yr(o),alt:e(r)},a&&{title:Yr(a)})}},customBlock:function(r,t,e){var n=r.info.trim().toLowerCase(),i=e[n];if(i)try{return i(r,t)}catch(a){console.warn("[@toast-ui/editor] - The error occurred when "+n+" block node was parsed in markdown renderer: "+a)}return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"text",content:r.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},frontMatter:function(r){return[{type:"openTag",tagName:"div",outerNewLine:!0,attributes:{style:"white-space: pre; display: none;"}},{type:"text",content:r.literal},{type:"closeTag",tagName:"div",outerNewLine:!0}]},customInline:function(r,t,e){var n=r,i=n.info,a=n.firstChild,o=i.trim().toLowerCase(),s=e[o],l=t.entering;if(s)try{return s(r,t)}catch(u){console.warn("[@toast-ui/editor] - The error occurred when "+o+" inline node was parsed in markdown renderer: "+u)}return l?[{type:"openTag",tagName:"span"},{type:"text",content:"$$"+i+(a?" ":"")}]:[{type:"text",content:"$$"},{type:"closeTag",tagName:"span"}]}},Qc={strike:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"del"}},item:function(r,t){var e=t.entering,n=r.listData,i=n.checked,a=n.task;if(e){var o={type:"openTag",tagName:"li",outerNewLine:!0};return a?[o,{type:"openTag",tagName:"input",selfClose:!0,attributes:ve(ve({},i&&{checked:""}),{disabled:"",type:"checkbox"})},{type:"text",content:" "}]:o}return{type:"closeTag",tagName:"li",outerNewLine:!0}},table:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"table",outerNewLine:!0}},tableHead:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"thead",outerNewLine:!0}},tableBody:function(r,t){var e=t.entering;return{type:e?"openTag":"closeTag",tagName:"tbody",outerNewLine:!0}},tableRow:function(r,t){var e=t.entering;if(e)return{type:"openTag",tagName:"tr",outerNewLine:!0};var n=[];if(r.lastChild)for(var i=r.parent.parent.columns.length,a=r.lastChild.endIdx,o=a+1;o<i;o+=1)n.push({type:"openTag",tagName:"td",outerNewLine:!0},{type:"closeTag",tagName:"td",outerNewLine:!0});return n.push({type:"closeTag",tagName:"tr",outerNewLine:!0}),n},tableCell:function(r,t){var e=t.entering;if(r.ignored)return{type:"text",content:""};var n=r.parent.parent,i=n.type==="tableHead"?"th":"td",a=n.parent,o=a.columns[r.startIdx],s=o!=null&&o.align?{align:o.align}:null;return e?ve({type:"openTag",tagName:i,outerNewLine:!0},s&&{attributes:s}):{type:"closeTag",tagName:i,outerNewLine:!0}}},yne={softbreak:`
`,gfm:!1,tagFilter:!1,nodeId:!1};function bne(r){for(var t=[],e=r.walker(),n=null;n=e.next();){var i=n.node;i.type==="text"&&t.push(i.literal)}return t.join("")}var Sl=function(){function r(t){this.buffer=[],this.options=ve(ve({},yne),t),this.convertors=this.createConvertors(),delete this.options.convertors}return r.prototype.createConvertors=function(){var t=ve({},Kc);if(this.options.gfm&&(t=ve(ve({},t),Qc)),this.options.convertors){var e=this.options.convertors,n=Object.keys(e),i=ve(ve({},Kc),Qc);n.forEach(function(a){var o=t[a],s=e[a],l=Object.keys(i).indexOf(a)===-1?a.toLowerCase():a;o?t[l]=function(u,c,f){return c.origin=function(){return o(u,c,f)},s(u,c)}:t[l]=s})}return t},r.prototype.getConvertors=function(){return this.convertors},r.prototype.getOptions=function(){return this.options},r.prototype.render=function(t){var e=this;this.buffer=[];for(var n=t.walker(),i=null,a=function(){var s=i.node,l=i.entering,u=o.convertors[s.type];if(!u)return"continue";var c=!1,f={entering:l,leaf:!xl(s),options:o.options,getChildrenText:bne,skipChildren:function(){c=!0}},d=Wp(s)||pte(s)?u(s,f,o.convertors):u(s,f);if(d){var h=Array.isArray(d)?d:[d];h.forEach(function(p,v){p.type==="openTag"&&e.options.nodeId&&v===0&&(p.attributes||(p.attributes={}),p.attributes["data-nodeid"]=String(s.id)),e.renderHTMLNode(p)}),c&&(n.resumeAt(s,!1),n.next())}},o=this;i=n.next();)a();return this.addNewLine(),this.buffer.join("")},r.prototype.renderHTMLNode=function(t){switch(t.type){case"openTag":case"closeTag":this.renderElementNode(t);break;case"text":this.renderTextNode(t);break;case"html":this.renderRawHtmlNode(t);break}},r.prototype.generateOpenTagString=function(t){var e=this,n=t.tagName,i=t.classNames,a=t.attributes;this.buffer.push("<"+n),i&&i.length>0&&this.buffer.push(' class="'+i.join(" ")+'"'),a&&Object.keys(a).forEach(function(o){var s=a[o];e.buffer.push(" "+o+'="'+s+'"')}),t.selfClose&&this.buffer.push(" /"),this.buffer.push(">")},r.prototype.generateCloseTagString=function(t){var e=t.tagName;this.buffer.push("</"+e+">")},r.prototype.addNewLine=function(){this.buffer.length&&ua(ua(this.buffer))!==`
`&&this.buffer.push(`
`)},r.prototype.addOuterNewLine=function(t){t.outerNewLine&&this.addNewLine()},r.prototype.addInnerNewLine=function(t){t.innerNewLine&&this.addNewLine()},r.prototype.renderTextNode=function(t){this.buffer.push(Yr(t.content))},r.prototype.renderRawHtmlNode=function(t){this.addOuterNewLine(t),this.buffer.push(t.content),this.addOuterNewLine(t)},r.prototype.renderElementNode=function(t){t.type==="openTag"?(this.addOuterNewLine(t),this.generateOpenTagString(t),t.selfClose?this.addOuterNewLine(t):this.addInnerNewLine(t)):(this.addInnerNewLine(t),this.generateCloseTagString(t),this.addOuterNewLine(t))},r}();/*! @license DOMPurify 2.3.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.3/LICENSE */function kne(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}else return Array.from(r)}var wne=Object.hasOwnProperty,Xc=Object.setPrototypeOf,Cne=Object.isFrozen,Tne=Object.getPrototypeOf,xne=Object.getOwnPropertyDescriptor,Re=Object.freeze,qt=Object.seal,Sne=Object.create,uv=typeof Reflect!="undefined"&&Reflect,fa=uv.apply,Ts=uv.construct;fa||(fa=function(t,e,n){return t.apply(e,n)});Re||(Re=function(t){return t});qt||(qt=function(t){return t});Ts||(Ts=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(kne(e))))});var Ene=ct(Array.prototype.forEach),Yc=ct(Array.prototype.pop),Dn=ct(Array.prototype.push),Hi=ct(String.prototype.toLowerCase),Zc=ct(String.prototype.match),jt=ct(String.prototype.replace),Mne=ct(String.prototype.indexOf),One=ct(String.prototype.trim),Mt=ct(RegExp.prototype.test),ef=Nne(TypeError);function ct(r){return function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return fa(r,t,n)}}function Nne(r){return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Ts(r,e)}}function F(r,t){Xc&&Xc(r,null);for(var e=t.length;e--;){var n=t[e];if(typeof n=="string"){var i=Hi(n);i!==n&&(Cne(t)||(t[e]=i),n=i)}r[n]=!0}return r}function fr(r){var t=Sne(null),e=void 0;for(e in r)fa(wne,r,[e])&&(t[e]=r[e]);return t}function Oi(r,t){for(;r!==null;){var e=xne(r,t);if(e){if(e.get)return ct(e.get);if(typeof e.value=="function")return ct(e.value)}r=Tne(r)}function n(i){return console.warn("fallback value for",i),null}return n}var tf=Re(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Lo=Re(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ao=Re(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Dne=Re(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Io=Re(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Lne=Re(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),rf=Re(["#text"]),nf=Re(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ro=Re(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),af=Re(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ni=Re(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ane=qt(/\{\{[\s\S]*|[\s\S]*\}\}/gm),Ine=qt(/<%[\s\S]*|[\s\S]*%>/gm),Rne=qt(/^data-[\-\w.\u00B7-\uFFFF]/),Pne=qt(/^aria-[\-\w]+$/),Bne=qt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Hne=qt(/^(?:\w+script|data):/i),Fne=qt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function dt(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}else return Array.from(r)}var qne=function(){return typeof window=="undefined"?null:window},_ne=function(t,e){if((typeof t=="undefined"?"undefined":qn(t))!=="object"||typeof t.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(i)&&(n=e.currentScript.getAttribute(i));var a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML:function(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function cv(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qne(),t=function(y){return cv(y)};if(t.version="2.3.3",t.removed=[],!r||!r.document||r.document.nodeType!==9)return t.isSupported=!1,t;var e=r.document,n=r.document,i=r.DocumentFragment,a=r.HTMLTemplateElement,o=r.Node,s=r.Element,l=r.NodeFilter,u=r.NamedNodeMap,c=u===void 0?r.NamedNodeMap||r.MozNamedAttrMap:u,f=r.Text,d=r.Comment,h=r.DOMParser,p=r.trustedTypes,v=s.prototype,m=Oi(v,"cloneNode"),g=Oi(v,"nextSibling"),k=Oi(v,"childNodes"),b=Oi(v,"parentNode");if(typeof a=="function"){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var T=_ne(p,e),S=T&&pi?T.createHTML(""):"",M=n,N=M.implementation,R=M.createNodeIterator,P=M.createDocumentFragment,V=M.getElementsByTagName,le=e.importNode,ft={};try{ft=fr(n).documentMode?n.documentMode:{}}catch{}var U={};t.isSupported=typeof b=="function"&&N&&typeof N.createHTMLDocument!="undefined"&&ft!==9;var J=Ane,or=Ine,fi=Rne,di=Pne,Ha=Hne,sr=Fne,Ze=Bne,ne=null,Sn=F({},[].concat(dt(tf),dt(Lo),dt(Ao),dt(Io),dt(rf))),ke=null,Al=F({},[].concat(dt(nf),dt(Ro),dt(af),dt(Ni))),Fa=null,qa=null,Il=!0,_a=!0,Rl=!1,Fr=!1,qr=!1,$a=!1,za=!1,_r=!1,hi=!1,Pl=!0,pi=!1,Bl=!0,Va=!0,En=!1,$r={},zr=null,Hl=F({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Fl=null,ql=F({},["audio","video","img","source","image","track"]),Ua=null,_l=F({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wa="http://www.w3.org/1998/Math/MathML",ja="http://www.w3.org/2000/svg",Ut="http://www.w3.org/1999/xhtml",vi=Ut,Ga=!1,Vr=void 0,Qv=["application/xhtml+xml","text/html"],Xv="text/html",Ur=void 0,Wr=null,Yv=n.createElement("form"),Ja=function(y){Wr&&Wr===y||((!y||(typeof y=="undefined"?"undefined":qn(y))!=="object")&&(y={}),y=fr(y),ne="ALLOWED_TAGS"in y?F({},y.ALLOWED_TAGS):Sn,ke="ALLOWED_ATTR"in y?F({},y.ALLOWED_ATTR):Al,Ua="ADD_URI_SAFE_ATTR"in y?F(fr(_l),y.ADD_URI_SAFE_ATTR):_l,Fl="ADD_DATA_URI_TAGS"in y?F(fr(ql),y.ADD_DATA_URI_TAGS):ql,zr="FORBID_CONTENTS"in y?F({},y.FORBID_CONTENTS):Hl,Fa="FORBID_TAGS"in y?F({},y.FORBID_TAGS):{},qa="FORBID_ATTR"in y?F({},y.FORBID_ATTR):{},$r="USE_PROFILES"in y?y.USE_PROFILES:!1,Il=y.ALLOW_ARIA_ATTR!==!1,_a=y.ALLOW_DATA_ATTR!==!1,Rl=y.ALLOW_UNKNOWN_PROTOCOLS||!1,Fr=y.SAFE_FOR_TEMPLATES||!1,qr=y.WHOLE_DOCUMENT||!1,_r=y.RETURN_DOM||!1,hi=y.RETURN_DOM_FRAGMENT||!1,Pl=y.RETURN_DOM_IMPORT!==!1,pi=y.RETURN_TRUSTED_TYPE||!1,za=y.FORCE_BODY||!1,Bl=y.SANITIZE_DOM!==!1,Va=y.KEEP_CONTENT!==!1,En=y.IN_PLACE||!1,Ze=y.ALLOWED_URI_REGEXP||Ze,vi=y.NAMESPACE||Ut,Vr=Qv.indexOf(y.PARSER_MEDIA_TYPE)===-1?Vr=Xv:Vr=y.PARSER_MEDIA_TYPE,Ur=Vr==="application/xhtml+xml"?function(x){return x}:Hi,Fr&&(_a=!1),hi&&(_r=!0),$r&&(ne=F({},[].concat(dt(rf))),ke=[],$r.html===!0&&(F(ne,tf),F(ke,nf)),$r.svg===!0&&(F(ne,Lo),F(ke,Ro),F(ke,Ni)),$r.svgFilters===!0&&(F(ne,Ao),F(ke,Ro),F(ke,Ni)),$r.mathMl===!0&&(F(ne,Io),F(ke,af),F(ke,Ni))),y.ADD_TAGS&&(ne===Sn&&(ne=fr(ne)),F(ne,y.ADD_TAGS)),y.ADD_ATTR&&(ke===Al&&(ke=fr(ke)),F(ke,y.ADD_ATTR)),y.ADD_URI_SAFE_ATTR&&F(Ua,y.ADD_URI_SAFE_ATTR),y.FORBID_CONTENTS&&(zr===Hl&&(zr=fr(zr)),F(zr,y.FORBID_CONTENTS)),Va&&(ne["#text"]=!0),qr&&F(ne,["html","head","body"]),ne.table&&(F(ne,["tbody"]),delete Fa.tbody),Re&&Re(y),Wr=y)},$l=F({},["mi","mo","mn","ms","mtext"]),zl=F({},["foreignobject","desc","title","annotation-xml"]),mi=F({},Lo);F(mi,Ao),F(mi,Dne);var Ka=F({},Io);F(Ka,Lne);var Zv=function(y){var x=b(y);(!x||!x.tagName)&&(x={namespaceURI:Ut,tagName:"template"});var D=Hi(y.tagName),z=Hi(x.tagName);if(y.namespaceURI===ja)return x.namespaceURI===Ut?D==="svg":x.namespaceURI===Wa?D==="svg"&&(z==="annotation-xml"||$l[z]):Boolean(mi[D]);if(y.namespaceURI===Wa)return x.namespaceURI===Ut?D==="math":x.namespaceURI===ja?D==="math"&&zl[z]:Boolean(Ka[D]);if(y.namespaceURI===Ut){if(x.namespaceURI===ja&&!zl[z]||x.namespaceURI===Wa&&!$l[z])return!1;var we=F({},["title","style","font","a","script"]);return!Ka[D]&&(we[D]||!mi[D])}return!1},xt=function(y){Dn(t.removed,{element:y});try{y.parentNode.removeChild(y)}catch{try{y.outerHTML=S}catch{y.remove()}}},Vl=function(y,x){try{Dn(t.removed,{attribute:x.getAttributeNode(y),from:x})}catch{Dn(t.removed,{attribute:null,from:x})}if(x.removeAttribute(y),y==="is"&&!ke[y])if(_r||hi)try{xt(x)}catch{}else try{x.setAttribute(y,"")}catch{}},Ul=function(y){var x=void 0,D=void 0;if(za)y="<remove></remove>"+y;else{var z=Zc(y,/^[\r\n\t ]+/);D=z&&z[0]}Vr==="application/xhtml+xml"&&(y='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+y+"</body></html>");var we=T?T.createHTML(y):y;if(vi===Ut)try{x=new h().parseFromString(we,Vr)}catch{}if(!x||!x.documentElement){x=N.createDocument(vi,"template",null);try{x.documentElement.innerHTML=Ga?"":we}catch{}}var Ce=x.body||x.documentElement;return y&&D&&Ce.insertBefore(n.createTextNode(D),Ce.childNodes[0]||null),vi===Ut?V.call(x,qr?"html":"body")[0]:qr?x.documentElement:Ce},Wl=function(y){return R.call(y.ownerDocument||y,y,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},em=function(y){return y instanceof f||y instanceof d?!1:typeof y.nodeName!="string"||typeof y.textContent!="string"||typeof y.removeChild!="function"||!(y.attributes instanceof c)||typeof y.removeAttribute!="function"||typeof y.setAttribute!="function"||typeof y.namespaceURI!="string"||typeof y.insertBefore!="function"},Mn=function(y){return(typeof o=="undefined"?"undefined":qn(o))==="object"?y instanceof o:y&&(typeof y=="undefined"?"undefined":qn(y))==="object"&&typeof y.nodeType=="number"&&typeof y.nodeName=="string"},St=function(y,x,D){!U[y]||Ene(U[y],function(z){z.call(t,x,D,Wr)})},jl=function(y){var x=void 0;if(St("beforeSanitizeElements",y,null),em(y)||Zc(y.nodeName,/[\u0080-\uFFFF]/))return xt(y),!0;var D=Ur(y.nodeName);if(St("uponSanitizeElement",y,{tagName:D,allowedTags:ne}),!Mn(y.firstElementChild)&&(!Mn(y.content)||!Mn(y.content.firstElementChild))&&Mt(/<[/\w]/g,y.innerHTML)&&Mt(/<[/\w]/g,y.textContent)||D==="select"&&Mt(/<template/i,y.innerHTML))return xt(y),!0;if(!ne[D]||Fa[D]){if(Va&&!zr[D]){var z=b(y)||y.parentNode,we=k(y)||y.childNodes;if(we&&z)for(var Ce=we.length,Te=Ce-1;Te>=0;--Te)z.insertBefore(m(we[Te],!0),g(y))}return xt(y),!0}return y instanceof s&&!Zv(y)||(D==="noscript"||D==="noembed")&&Mt(/<\/no(script|embed)/i,y.innerHTML)?(xt(y),!0):(Fr&&y.nodeType===3&&(x=y.textContent,x=jt(x,J," "),x=jt(x,or," "),y.textContent!==x&&(Dn(t.removed,{element:y.cloneNode()}),y.textContent=x)),St("afterSanitizeElements",y,null),!1)},Gl=function(y,x,D){if(Bl&&(x==="id"||x==="name")&&(D in n||D in Yv))return!1;if(!(_a&&!qa[x]&&Mt(fi,x))){if(!(Il&&Mt(di,x))){if(!ke[x]||qa[x])return!1;if(!Ua[x]){if(!Mt(Ze,jt(D,sr,""))){if(!((x==="src"||x==="xlink:href"||x==="href")&&y!=="script"&&Mne(D,"data:")===0&&Fl[y])){if(!(Rl&&!Mt(Ha,jt(D,sr,"")))){if(D)return!1}}}}}}return!0},Jl=function(y){var x=void 0,D=void 0,z=void 0,we=void 0;St("beforeSanitizeAttributes",y,null);var Ce=y.attributes;if(!!Ce){var Te={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(we=Ce.length;we--;){x=Ce[we];var Et=x,On=Et.name,Kl=Et.namespaceURI;if(D=One(x.value),z=Ur(On),Te.attrName=z,Te.attrValue=D,Te.keepAttr=!0,Te.forceKeepAttr=void 0,St("uponSanitizeAttribute",y,Te),D=Te.attrValue,!Te.forceKeepAttr&&(Vl(On,y),!!Te.keepAttr)){if(Mt(/\/>/i,D)){Vl(On,y);continue}Fr&&(D=jt(D,J," "),D=jt(D,or," "));var rm=Ur(y.nodeName);if(!!Gl(rm,z,D))try{Kl?y.setAttributeNS(Kl,On,D):y.setAttribute(On,D),Yc(t.removed)}catch{}}}St("afterSanitizeAttributes",y,null)}},tm=function A(y){var x=void 0,D=Wl(y);for(St("beforeSanitizeShadowDOM",y,null);x=D.nextNode();)St("uponSanitizeShadowNode",x,null),!jl(x)&&(x.content instanceof i&&A(x.content),Jl(x));St("afterSanitizeShadowDOM",y,null)};return t.sanitize=function(A,y){var x=void 0,D=void 0,z=void 0,we=void 0,Ce=void 0;if(Ga=!A,Ga&&(A="<!-->"),typeof A!="string"&&!Mn(A)){if(typeof A.toString!="function")throw ef("toString is not a function");if(A=A.toString(),typeof A!="string")throw ef("dirty is not a string, aborting")}if(!t.isSupported){if(qn(r.toStaticHTML)==="object"||typeof r.toStaticHTML=="function"){if(typeof A=="string")return r.toStaticHTML(A);if(Mn(A))return r.toStaticHTML(A.outerHTML)}return A}if($a||Ja(y),t.removed=[],typeof A=="string"&&(En=!1),!En)if(A instanceof o)x=Ul("<!---->"),D=x.ownerDocument.importNode(A,!0),D.nodeType===1&&D.nodeName==="BODY"||D.nodeName==="HTML"?x=D:x.appendChild(D);else{if(!_r&&!Fr&&!qr&&A.indexOf("<")===-1)return T&&pi?T.createHTML(A):A;if(x=Ul(A),!x)return _r?null:S}x&&za&&xt(x.firstChild);for(var Te=Wl(En?A:x);z=Te.nextNode();)z.nodeType===3&&z===we||jl(z)||(z.content instanceof i&&tm(z.content),Jl(z),we=z);if(we=null,En)return A;if(_r){if(hi)for(Ce=P.call(x.ownerDocument);x.firstChild;)Ce.appendChild(x.firstChild);else Ce=x;return Pl&&(Ce=le.call(e,Ce,!0)),Ce}var Et=qr?x.outerHTML:x.innerHTML;return Fr&&(Et=jt(Et,J," "),Et=jt(Et,or," ")),T&&pi?T.createHTML(Et):Et},t.setConfig=function(A){Ja(A),$a=!0},t.clearConfig=function(){Wr=null,$a=!1},t.isValidAttribute=function(A,y,x){Wr||Ja({});var D=Ur(A),z=Ur(y);return Gl(D,z,x)},t.addHook=function(A,y){typeof y=="function"&&(U[A]=U[A]||[],Dn(U[A],y))},t.removeHook=function(A){U[A]&&Yc(U[A])},t.removeHooks=function(A){U[A]&&(U[A]=[])},t.removeAllHooks=function(){U={}},t}var $ne=cv(),zne=["iframe","embed"],fv=[];function dv(r){be(zne,r)&&fv.push(r.toLowerCase())}function Ir(r,t){return $ne.sanitize(r,w({ADD_TAGS:fv,ADD_ATTR:["rel","target","hreflang","type"],FORBID_TAGS:["input","script","textarea","form","button","select","meta","style","link","title","object","base"]},t))}function hv(r,t){return r.literal.replace(new RegExp("(<\\s*"+t+"[^>]*>)|(</"+t+"\\s*[>])","ig"),"").trim()}function xs(r){r=r.match(gn)[0];var t=r.match(new RegExp(lp,"g"));return t?t.reduce(function(e,n){var i=n.trim().split("="),a=i[0],o=i.slice(1);return o.length&&(e[a]=o.join("=").replace(/'|"/g,"").trim()),e},{}):{}}function Ss(r){return Tt(r.attributes).reduce(function(t,e){return t[e.nodeName]=e.nodeValue,t},{})}function of(r,t,e,n){var i=n.getToDOMNode(t)(r),a=e(i.outerHTML),o=document.createElement("div");o.innerHTML=a,i=o.firstChild;var s=Ss(i);return{dom:i,htmlAttrs:s}}var Vne={htmlBlock:function(r,t,e){return{atom:!0,content:"block+",group:"block",attrs:{htmlAttrs:{default:{}},childrenHTML:{default:""},htmlBlock:{default:!0}},parseDOM:[{tag:r,getAttrs:function(n){return{htmlAttrs:Ss(n),childrenHTML:n.innerHTML}}}],toDOM:function(n){var i=of(n,r,t,e),a=i.dom,o=i.htmlAttrs;return o.class=o.class?o.class+" html-block":"html-block",qe([r,o],Tt(a.childNodes))}}},htmlInline:function(r,t,e){return{attrs:{htmlAttrs:{default:{}},htmlInline:{default:!0}},parseDOM:[{tag:r,getAttrs:function(n){return{htmlAttrs:Ss(n)}}}],toDOM:function(n){var i=of(n,r,t,e).htmlAttrs;return[r,i,0]}}}};function Une(r,t,e){var n={nodes:{},marks:{}};return["htmlBlock","htmlInline"].forEach(function(i){r[i]&&Object.keys(r[i]).forEach(function(a){var o=i==="htmlBlock"?"nodes":"marks";dv(a),n[o][a]=Vne[i](a,t,e)})}),n}var Wne=/^\s*<\s*\//,jne={paragraph:function(r,t){var e=t.entering,n=t.origin,i=t.options;return i.nodeId?{type:e?"openTag":"closeTag",outerNewLine:!0,tagName:"p"}:n()},softbreak:function(r){var t=r.prev&&r.prev.type==="htmlInline",e=t&&/<br ?\/?>/.test(r.prev.literal),n=e?`
`:`<br>
`;return{type:"html",content:n}},item:function(r,t){var e=t.entering;if(e){var n={},i=[];return r.listData.task&&(n["data-task"]="",i.push("task-list-item"),r.listData.checked&&(i.push("checked"),n["data-task-checked"]="")),{type:"openTag",tagName:"li",classNames:i,attributes:n,outerNewLine:!0}}return{type:"closeTag",tagName:"li",outerNewLine:!0}},code:function(r){var t={"data-backticks":String(r.tickCount)};return[{type:"openTag",tagName:"code",attributes:t},{type:"text",content:r.literal},{type:"closeTag",tagName:"code"}]},codeBlock:function(r){var t=r,e=t.fenceLength,n=t.info,i=n?n.split(/\s+/):[],a=[],o={};if(e>3&&(o["data-backticks"]=e),i.length>0&&i[0].length>0){var s=i[0];a.push("lang-"+s),o["data-language"]=s}return[{type:"openTag",tagName:"pre",classNames:a},{type:"openTag",tagName:"code",attributes:o},{type:"text",content:r.literal},{type:"closeTag",tagName:"code"},{type:"closeTag",tagName:"pre"}]},customInline:function(r,t){var e=t.origin,n=t.entering,i=t.skipChildren,a=r.info;if(a.indexOf("widget")!==-1&&n){i();var o=ip(r),s=np(a,o).outerHTML;return[{type:"openTag",tagName:"span",classNames:["tui-widget"]},{type:"html",content:s},{type:"closeTag",tagName:"span"}]}return e()}};function El(r,t){var e=w({},jne);return r&&(e.link=function(n,i){var a=i.entering,o=i.origin,s=o();return a&&(s.attributes=w(w({},s.attributes),r)),s}),t&&Object.keys(t).forEach(function(n){var i=e[n],a=t[n];i&&Qe(a)?e[n]=function(o,s){var l=w({},s);return l.origin=function(){return i(o,s)},a(o,l)}:be(["htmlBlock","htmlInline"],n)&&!Qe(a)?e[n]=function(o,s){var l=o.literal.match(gn);if(l){var u=l[0],c=l[1],f=l[3],d=(c||f).toLowerCase(),h=a[d],p=hv(o,d);if(h){var v=w({},o);return v.attrs=xs(u),v.childrenHTML=p,v.type=d,s.entering=!Wne.test(o.literal),h(v,s)}}return s.origin()}:e[n]=a}),e}var Gne=["list","item","blockQuote"],Jne=["UL","OL","BLOCKQUOTE"];function Kne(r,t){var e,n=r.child(t);return!n.childCount||n.childCount===1&&!(!((e=n.firstChild.text)===null||e===void 0)&&e.trim())}function sf(r,t,e){var n=ui(t)-1,i=Sa(t)-1,a=e[n].getBoundingClientRect(),o=e[i].offsetTop-e[n].offsetTop+e[i].clientHeight;return{height:o<=0?e[n].clientHeight:o+Qne(r,e,Math.min(i+1,r.childCount-1)),rect:a}}function Qne(r,t,e){for(var n=r.childCount-1,i=0;e<=n&&Kne(r,e);)i+=t[e].clientHeight,e+=1;return i}function Xne(r,t){for(;!r.getAttribute("data-nodeid")&&r.parentElement!==t;)r=r.parentElement;return r}function da(r,t){for(var e=0;r&&r!==t&&(be(Jne,r.tagName)||(e+=r.offsetTop),r.offsetParent!==t.offsetParent);)r=r.parentElement;return e}function Yne(r,t){for(var e=t,n=null;e;){var i=e.firstElementChild;if(!i)break;var a=pv(i,r,da(e,t));n=e,e=a}var o=e||n;return o===t?null:o}function pv(r,t,e){return r&&t>e+r.offsetTop?pv(r.nextElementSibling,t,e)||r:null}function Zne(r,t,e,n){var i=Math.min((r-t)/e,1);return i*n}function Po(r,t){for(var e=r.querySelector('[data-nodeid="'+t.id+'"]');!e||$k(t);)t=t.parent,e=r.querySelector('[data-nodeid="'+t.id+'"]');return eie({mdNode:t,el:e})}function eie(r){for(var t=r.mdNode,e=r.el;(be(Gne,t.type)||t.type==="table")&&t.firstChild;)t=t.firstChild,e=e.firstElementChild;return{mdNode:t,el:e}}var at={};function tie(r,t){at[r]=at[r]||{},at[r].height=t}function rie(r,t){at[r]=at[r]||{},at[r].offsetTop=t}function nie(r){return at[r]&&at[r].height}function iie(r){return at[r]&&at[r].offsetTop}function Es(r){r&&(delete at[Number(r.getAttribute("data-nodeid"))],Tt(r.children).forEach(function(t){Es(t)}))}function aie(r,t,e){var n=nie(e),i=iie(e),a=n||r.clientHeight,o=i||da(r,t)||r.offsetTop;return n||tie(e,a),i||rie(e,o),{nodeHeight:a,offsetTop:o}}var Bo=O("md-preview-highlight");function oie(r,t){for(var e=r.firstChild;e&&e.next&&!(Ea(e.next)>t+1);)e=e.next;return e}var vv=function(){function r(t,e){var n=document.createElement("div");this.el=n,this.eventEmitter=t,this.isViewer=!!e.isViewer,this.el.className=O("md-preview");var i=e.linkAttributes,a=e.customHTMLRenderer,o=e.sanitizer,s=e.highlight,l=s===void 0?!1:s;this.renderer=new Sl({gfm:!0,nodeId:!0,convertors:El(i,a)}),this.cursorNodeId=null,this.sanitizer=o,this.initEvent(l),this.initContentSection(),this.isViewer&&(this.previewContent.style.overflowWrap="break-word")}return r.prototype.initContentSection=function(){this.previewContent=hp('<div class="'+O("contents")+'"></div>'),this.isViewer||this.el.appendChild(this.previewContent)},r.prototype.toggleActive=function(t){fl(this.el,"active",t)},r.prototype.initEvent=function(t){var e=this;this.eventEmitter.listen("updatePreview",this.update.bind(this)),!this.isViewer&&(t&&(this.eventEmitter.listen("changeToolbarState",function(n){var i=n.mdNode,a=n.cursorPos;e.updateCursorNode(i,a)}),this.eventEmitter.listen("blur",function(){e.removeHighlight()})),Dp(this.el,"scroll",function(n){e.eventEmitter.emit("scroll","preview",Yne(n.target.scrollTop,e.previewContent))}),this.eventEmitter.listen("changePreviewTabPreview",function(){return e.toggleActive(!0)}),this.eventEmitter.listen("changePreviewTabWrite",function(){return e.toggleActive(!1)}))},r.prototype.removeHighlight=function(){if(this.cursorNodeId){var t=this.getElementByNodeId(this.cursorNodeId);t&&nt(t,Bo)}},r.prototype.updateCursorNode=function(t,e){t&&(t=mn(t,function(o){return!Uk(o)}),t.type==="tableRow"?t=oie(t,e[1]):t.type==="tableBody"&&(t=null));var n=t?t.id:null;if(this.cursorNodeId!==n){var i=this.getElementByNodeId(this.cursorNodeId),a=this.getElementByNodeId(n);i&&nt(i,Bo),a&&gt(a,Bo),this.cursorNodeId=n}},r.prototype.getElementByNodeId=function(t){return t?this.previewContent.querySelector('[data-nodeid="'+t+'"]'):null},r.prototype.update=function(t){var e=this;t.forEach(function(n){return e.replaceRangeNodes(n)}),this.eventEmitter.emit("afterPreviewRender",this)},r.prototype.replaceRangeNodes=function(t){var e=this,n=t.nodes,i=t.removedNodeRange,a=this.previewContent,o=this.eventEmitter.emitReduce("beforePreviewRender",this.sanitizer(n.map(function(p){return e.renderer.render(p)}).join("")));if(!i)a.insertAdjacentHTML("afterbegin",o);else{var s=i.id,l=s[0],u=s[1],c=this.getElementByNodeId(l),f=this.getElementByNodeId(u);if(c){c.insertAdjacentHTML("beforebegin",o);for(var d=c;d&&d!==f;){var h=d.nextElementSibling;Dr(d),Es(d),d=h}d!=null&&d.parentNode&&(Dr(d),Es(d))}}},r.prototype.getRenderer=function(){return this.renderer},r.prototype.destroy=function(){Np(this.el,"scroll"),this.el=null},r.prototype.getElement=function(){return this.el},r.prototype.getHTML=function(){return pl(this.previewContent.innerHTML)},r.prototype.setHTML=function(t){this.previewContent.innerHTML=t},r.prototype.setHeight=function(t){wt(this.el,{height:t+"px"})},r.prototype.setMinHeight=function(t){wt(this.el,{minHeight:t+"px"})},r}();function It(r,t){for(var e=r.depth;e;){var n=r.node(e);if(t(n,e))return{node:n,depth:e,offset:e>0?r.before(e):0};e-=1}return null}function wn(r){return!!It(r,function(t){var e=t.type;return e.name==="listItem"||e.name==="bulletList"||e.name==="orderedList"})}function ha(r){return!!It(r,function(t){var e=t.type;return e.name==="tableHeadCell"||e.name==="tableBodyCell"})}function Cn(r){return It(r,function(t){var e=t.type;return e.name==="listItem"})}function Pa(r){return{tag:r,getAttrs:function(t){var e=t.getAttribute("data-raw-html");return w({},e&&{rawHTML:e})}}}function mv(r){return Object.keys(r).reduce(function(t,e){return e!=="rawHTML"&&r[e]&&(e=e==="className"?"class":e,t[e]=r[e]),t},{})}function gv(r){return{tag:r,getAttrs:function(t){return["rawHTML","colspan","rowspan","extended"].reduce(function(e,n){var i=n==="rawHTML"?"data-raw-html":n,a=t.getAttribute(i);return a&&(e[n]=be(["rawHTML","extended"],n)?a:Number(a)),e},{})}}}function he(){return{htmlAttrs:{default:null},classNames:{default:null}}}function re(r){var t=r.htmlAttrs,e=r.classNames;return w(w({},t),{class:e?e.join(" "):null})}function sie(r,t){var e=r.parent,n=r.startIndex,i=r.endIndex,a=e.contentMatchAt(n).findWrapping(t);if(a){var o=a.length?a[0]:t;return e.canReplaceWith(n,i,o)?a:null}return null}function lie(r,t){var e=r.parent,n=r.startIndex,i=r.endIndex,a=e.child(n),o=t.contentMatch.findWrapping(a.type);if(o){for(var s=o.length?o[o.length-1]:t,l=s.contentMatch,u=n;l&&u<i;u+=1)l=l.matchType(e.child(u).type);if(l&&l.validEnd)return o}return null}function uie(r,t,e,n){var i=sie(r,e),a=lie(t,e);if(i&&a){var o=i.map(function(l){return{type:l}}),s=a.map(function(l){return{type:l,attrs:n}});return o.concat({type:e}).concat(s)}return null}function cie(r,t,e,n,i){for(var a=t.start,o=t.end,s=t.startIndex,l=t.endIndex,u=t.parent,c=L.empty,f=e.length-1;f>=0;f-=1)c=L.from(e[f].type.create(e[f].attrs,c));r.step(new ce(a-(n?2:0),o,a,o,new I(c,0,0),e.length,!0));for(var d=0,f=0;f<e.length;f+=1)if(e[f].type===i){d=f+1;break}for(var h=e.length-d,p=a+e.length-(n?2:0),f=s,v=l;f<v;f+=1){var m=f===s;!m&&br(r.doc,p,h)&&(r.split(p,h),p+=h*2),p+=u.child(f).nodeSize}return r}function yv(r,t,e,n){var i=t.$from,a=t.$to,o=t.depth,s=t,l=!1;if(o>=2&&i.node(o-1).type.compatibleContent(e)&&t.startIndex===0&&i.index(o-1)){var u=r.doc.resolve(t.start-2);s=new Uo(u,u,o),t.endIndex<t.parent.childCount&&(t=new Uo(i,r.doc.resolve(a.end(o)),o)),l=!0}var c=uie(s,t,e,n);return c?cie(r,t,c,l,e):r}function bv(r,t){for(var e=r.resolve(t);e.node().type.name!=="paragraph";)t-=2,e=r.resolve(t);return Cn(e)}function fie(r,t){var e=t.$from,n=t.$to,i=Cn(e),a=Cn(n);if(i&&a)for(;a;){var o=a.offset,s=a.node,l={task:!s.attrs.task,checked:!1};if(r.setNodeMarkup(o,null,l),o===i.offset)break;a=bv(r.doc,o)}return r}function die(r,t,e){var n=t.$from,i=t.$to,a=Cn(n),o=Cn(i);if(a&&o)for(;o;){var s=o.offset,l=o.node,u=o.depth;l.attrs.task&&r.setNodeMarkup(s,null,{task:!1,checked:!1});var c=r.doc.resolve(s);if(c.parent.type!==e){var f=c.before(u-1);r.setNodeMarkup(f,e)}if(s===a.offset)break;o=bv(r.doc,s)}return r}function kv(r){return function(t,e){var n=t.selection,i=t.tr,a=n.$from,o=n.$to,s=a.blockRange(o);if(s){var l=wn(a)?die(i,s,r):yv(i,s,r);return e(l),!0}return!1}}function hie(){return function(r,t){var e=r.selection,n=r.tr,i=r.schema,a=e.$from,o=e.$to,s=a.blockRange(o);if(s){var l=wn(a)?fie(n,s):yv(n,s,i.nodes.bulletList,{task:!0});return t(l),!0}return!1}}function pie(r){return function(t,e){var n=t.tr,i=t.selection,a=i.$from,o=i.$to,s=a.blockRange(o,function(v){var m=v.childCount,g=v.firstChild;return!!m&&g.type===r});if(s&&s.startIndex>0){var l=s.parent,u=l.child(s.startIndex-1);if(u.type!==r)return!1;var c=u.lastChild&&u.lastChild.type===l.type,f=c?L.from(r.create()):null,d=new I(L.from(r.create(null,L.from(l.type.create(null,f)))),c?3:1,0),h=s.start,p=s.end;return n.step(new ce(h-(c?3:1),p,h,p,d,1,!0)),e(n),!0}return!1}}function vie(r,t,e){var n=t.$from,i=t.$to,a=t.end,o=t.depth,s=t.parent,l=i.end(o);return a<l&&(r.step(new ce(a-1,l,a,l,new I(L.from(e.create(null,s.copy())),1,0),1,!0)),t=new Uo(r.doc.resolve(n.pos),r.doc.resolve(l),o)),r.lift(t,ni(t)),r}function mie(r,t){for(var e=t.parent,n=t.end,i=t.endIndex-1,a=t.startIndex;i>a;i-=1)n-=e.child(i).nodeSize,r.delete(n-1,n+1);var o=r.doc.resolve(t.start),s=o.nodeAfter,l=t.startIndex===0,u=t.endIndex===e.childCount,c=o.node(-1),f=o.index(-1),d=c.canReplace(f+(l?0:1),f+1,s==null?void 0:s.content.append(u?L.empty:L.from(e)));if(s&&d){var h=o.pos,p=h+s.nodeSize;r.step(new ce(h-(l?1:0),p+(u?1:0),h+1,p-1,new I((l?L.empty:L.from(e.copy(L.empty))).append(u?L.empty:L.from(e.copy(L.empty))),l?0:1,u?0:1),l?0:1))}return r}function gie(r){return function(t,e){var n=t.tr,i=t.selection,a=i.$from,o=i.$to,s=a.blockRange(o,function(c){var f=c.childCount,d=c.firstChild;return!!f&&d.type===r});if(s){var l=a.node(s.depth-1).type===r,u=l?vie(n,s,r):mie(n,s);return e(u),!0}return!1}}function yie(r){return function(t,e){var n=t.tr,i=t.selection,a=i.$from,o=i.$to;if(a.depth<2||!a.sameParent(o))return!1;var s=a.node(-1);if(s.type!==r)return!1;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==r||a.index(-2)!==a.node(-2).childCount-1)return!1;for(var l=a.index(-1)>0,u=L.empty,c=a.depth-(l?1:2);c>=a.depth-3;c-=1)u=L.from(a.node(c).copy(u));return u=u.append(L.from(r.createAndFill())),n.replace(l?a.before():a.before(-1),a.after(-3),new I(u,l?3:2,2)),n.setSelection(Ct.near(n.doc.resolve(a.pos+(l?3:2)))),e(n),!0}var f=o.pos===a.end()?s.contentMatchAt(0).defaultType:null,d=f&&[null,{type:f}];return n.delete(a.pos,o.pos),br(n.doc,a.pos,2,d)?(n.split(a.pos,2,d),e(n),!0):!1}}function bie(){return function(){return function(r,t){var e=r.selection,n=r.schema,i=e.$from,a=e.$to,o=i.blockRange(a);return o&&wn(i)?pie(n.nodes.listItem)(r,t):!1}}}function kie(){return function(){return function(r,t){var e=r.selection,n=r.schema,i=e.$from,a=e.$to,o=i.blockRange(a);return o&&wn(i)?gie(n.nodes.listItem)(r,t):!1}}}function Ml(){return{indent:bie(),outdent:kie()}}var lf=new Map,pe=function(){function r(t,e,n,i){this.table=t,this.tableRows=e,this.tableStartPos=n,this.rowInfo=i}return r.create=function(t){var e=It(t,function(p){var v=p.type;return v.name==="table"});if(e){var n=e.node,i=e.depth,a=e.offset,o=lf.get(n);if((o==null?void 0:o.tableStartPos)===a+1)return o;var s=[],l=t.start(i),u=n.child(0),c=n.child(1),f=Ms(u,l),d=Ms(c,l+u.nodeSize);u.forEach(function(p){return s.push(p)}),c.forEach(function(p){return s.push(p)});var h=new r(n,s,l,f.concat(d));return lf.set(n,h),h}return null},Object.defineProperty(r.prototype,"totalRowCount",{get:function(){return this.rowInfo.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"totalColumnCount",{get:function(){return this.rowInfo[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tableStartOffset",{get:function(){return this.tableStartPos},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tableEndOffset",{get:function(){return this.tableStartPos+this.table.nodeSize-1},enumerable:!1,configurable:!0}),r.prototype.getCellInfo=function(t,e){return this.rowInfo[t][e]},r.prototype.posAt=function(t,e){for(var n=0,i=this.tableStartPos;;n+=1){var a=i+this.tableRows[n].nodeSize;if(n===t){for(var o=e;o<this.totalColumnCount&&this.rowInfo[n][o].offset<i;)o+=1;return o===this.totalColumnCount?a:this.rowInfo[n][o].offset}i=a}},r.prototype.getNodeAndPos=function(t,e){var n=this.rowInfo[t][e];return{node:this.table.nodeAt(n.offset-this.tableStartOffset),pos:n.offset}},r.prototype.extendedRowspan=function(t,e){return!1},r.prototype.extendedColspan=function(t,e){return!1},r.prototype.getRowspanCount=function(t,e){return 0},r.prototype.getColspanCount=function(t,e){return 0},r.prototype.decreaseColspanCount=function(t,e){return 0},r.prototype.decreaseRowspanCount=function(t,e){return 0},r.prototype.getColspanStartInfo=function(t,e){return null},r.prototype.getRowspanStartInfo=function(t,e){return null},r.prototype.getCellStartOffset=function(t,e){var n=this.rowInfo[t][e].offset;return this.extendedRowspan(t,e)?this.posAt(t,e):n},r.prototype.getCellEndOffset=function(t,e){var n=this.rowInfo[t][e],i=n.offset,a=n.nodeSize;return this.extendedRowspan(t,e)?this.posAt(t,e):i+a},r.prototype.getCellIndex=function(t){for(var e=0;e<this.totalRowCount;e+=1)for(var n=this.rowInfo[e],i=0;i<this.totalColumnCount;i+=1)if(n[i].offset+1>t.pos)return[e,i];return[0,0]},r.prototype.getRectOffsets=function(t,e){var n,i,a;e===void 0&&(e=t),t.pos>e.pos&&(n=[e,t],t=n[0],e=n[1]);var o=this.getCellIndex(t),s=o[0],l=o[1],u=this.getCellIndex(e),c=u[0],f=u[1];return i=lc(s,c),s=i[0],c=i[1],a=lc(l,f),l=a[0],f=a[1],this.getSpannedOffsets({startRowIdx:s,startColIdx:l,endRowIdx:c,endColIdx:f})},r.prototype.getSpannedOffsets=function(t){return t},r}(),Ms=function(r,t){var e=[];return r.forEach(function(n,i){var a={rowspanMap:{},colspanMap:{},length:0};n.forEach(function(o,s){for(var l=o.nodeSize,u=0;a[u];)u+=1;a[u]={offset:t+i+s+2,nodeSize:l},a.length+=1}),e.push(a)}),e};function wie(r,t){return sl(pe.prototype,r),Ms=t,pe}function Cie(r,t,e){for(var n=e.startRowIdx,i=e.startColIdx,a=e.endRowIdx,o=e.endColIdx,s=[],l=n;l<=a;l+=1)for(var u=i;u<=o;u+=1){var c=t.getCellInfo(l,u),f=c.offset,d=c.nodeSize;s.push(new bg(r.resolve(f+1),r.resolve(f+d-1)))}return s}function Tie(r,t){var e=[];return r.childCount&&e.push(r),t.childCount&&e.push(t),L.from(e)}var Ol=function(r){E(t,r);function t(e,n){n===void 0&&(n=e);var i=this,a=e.node(0),o=pe.create(e),s=o.getRectOffsets(e,n),l=Cie(a,o,s);return i=r.call(this,l[0].$from,l[0].$to,l)||this,i.startCell=e,i.endCell=n,i.offsetMap=o,i.isCellSelection=!0,i.visible=!1,i}return t.prototype.map=function(e,n){var i=this.startCell.pos,a=this.endCell.pos,o=e.resolve(n.map(i)),s=e.resolve(n.map(a)),l=pe.create(o);if(this.offsetMap.totalColumnCount>l.totalColumnCount||this.offsetMap.totalRowCount>l.totalRowCount){var u={tableBody:1,tableRow:2,tableCell:3,paragraph:4},c=u[s.parent.type.name],f=s.end(s.depth-c),d=Math.min(f-4,s.pos);return _t.create(e,d)}return new t(o,s)},t.prototype.eq=function(e){return e instanceof t&&e.startCell.pos===this.startCell.pos&&e.endCell.pos===this.endCell.pos},t.prototype.content=function(){for(var e=this.startCell.node(-2),n=this.startCell.start(-2),i=e.child(1).firstChild,a=e.child(0).type.create(),o=e.child(1).type.create(),s=pe.create(this.startCell),l=s.getRectOffsets(this.startCell,this.endCell),u=l.startRowIdx,c=l.startColIdx,f=l.endRowIdx,d=l.endColIdx,h=!1,p=u;p<=f;p+=1){for(var v=[],m=c;m<=d;m+=1){var g=s.getCellInfo(p,m).offset,k=e.nodeAt(g-n);k&&(h=k.type.name==="tableHeadCell",s.extendedRowspan(p,m)||s.extendedColspan(p,m)?v.push(k.type.create({extended:!0})):v.push(k.copy(k.content)))}var b=i.copy(L.from(v)),C=h?a:o;C.content=C.content.append(L.from(b))}return new I(Tie(a,o),1,1)},t.prototype.toJSON=function(){return JSON.stringify(this)},t}(Ct);function xie(r,t,e){for(var n=t.nodes,i=n.tableRow,a=n.tableHeadCell,o=n.paragraph,s=[],l=0;l<r;l+=1){var u=e&&e[l],c=o.create(null,u?t.text(u):[]);s.push(a.create(null,c))}return[i.create(null,s)]}function wv(r,t,e,n){for(var i=e.nodes,a=i.tableRow,o=i.tableBodyCell,s=i.paragraph,l=[],u=0;u<r;u+=1){for(var c=[],f=0;f<t;f+=1){var d=n&&n[u*t+f],h=s.create(null,d?e.text(d):[]);c.push(o.create(null,h))}l.push(a.create(null,c))}return l}function Fi(r,t,e,n){n===void 0&&(n=null);for(var i=e.nodes,a=i.tableHeadCell,o=i.tableBodyCell,s=i.paragraph,l=t===0?a:o,u=[],c=0;c<r;c+=1)u.push(l.create(n,s.create()));return u}function Cv(r,t){for(;r&&r!==t;){if(r.nodeName==="TD"||r.nodeName==="TH")return r;r=r.parentNode}return null}function Tv(r){return It(r,function(t){var e=t.type;return e.name==="tableHeadCell"||e.name==="tableBodyCell"})}function ht(r){if(r instanceof _t){var t=r.$anchor,e=Tv(t);if(e){var n=t.node(0).resolve(t.before(e.depth));return{anchor:n,head:n}}}var i=r,a=i.startCell,o=i.endCell;return{anchor:a,head:o}}function xv(r){var t;if(r.size){var e=r.content,n=r.openStart,i=r.openEnd;if(e.childCount!==1)return null;for(;e.childCount===1&&(n>0&&i>0||((t=e.firstChild)===null||t===void 0?void 0:t.type.name)==="table");)n-=1,i-=1,e=e.firstChild.content;if(e.firstChild.type.name==="tableHead"||e.firstChild.type.name==="tableBody")return e}return null}function rn(r){var t=r.startRowIdx,e=r.startColIdx,n=r.endRowIdx,i=r.endColIdx,a=n-t+1,o=i-e+1;return{rowCount:a,columnCount:o}}function Sie(r,t){return w(w({},r.attrs),t)}var Kt=new ai("cellSelection"),Eie=2,Mie=function(){function r(t){this.view=t,this.handlers={mousedown:this.handleMousedown.bind(this),mousemove:this.handleMousemove.bind(this),mouseup:this.handleMouseup.bind(this)},this.startCellPos=null,this.init()}return r.prototype.init=function(){this.view.dom.addEventListener("mousedown",this.handlers.mousedown)},r.prototype.handleMousedown=function(t){var e=Cv(t.target,this.view.dom);if(t.button===Eie){t.preventDefault();return}if(e){var n=this.getCellPos(t);n&&(this.startCellPos=n),this.bindEvent()}},r.prototype.handleMousemove=function(t){var e=Kt.getState(this.view.state),n=this.getCellPos(t),i=this.startCellPos,a;e?a=this.view.state.doc.resolve(e):i!==n&&(a=i),a&&i&&n&&this.setCellSelection(i,n)},r.prototype.handleMouseup=function(){this.startCellPos=null,this.unbindEvent(),Kt.getState(this.view.state)!==null&&this.view.dispatch(this.view.state.tr.setMeta(Kt,-1))},r.prototype.bindEvent=function(){var t=this.view.dom;t.addEventListener("mousemove",this.handlers.mousemove),t.addEventListener("mouseup",this.handlers.mouseup)},r.prototype.unbindEvent=function(){var t=this.view.dom;t.removeEventListener("mousemove",this.handlers.mousemove),t.removeEventListener("mouseup",this.handlers.mouseup)},r.prototype.getCellPos=function(t){var e=t.clientX,n=t.clientY,i=this.view.posAtCoords({left:e,top:n});if(i){var a=this.view.state.doc,o=a.resolve(i.pos),s=Tv(o);if(s){var l=o.before(s.depth);return a.resolve(l)}}return null},r.prototype.setCellSelection=function(t,e){var n=this.view.state,i=n.selection,a=n.tr,o=Kt.getState(this.view.state)===null,s=new Ol(t,e);if(o||!i.eq(s)){var l=a.setSelection(s);o&&l.setMeta(Kt,e.pos),this.view.dispatch(l)}},r.prototype.destroy=function(){this.view.dom.removeEventListener("mousedown",this.handlers.mousedown)},r}(),Oie=O("cell-selected");function Nie(r){var t=r.selection,e=r.doc;if(t instanceof Ol){var n=[],i=t.ranges;return i.forEach(function(a){var o=a.$from,s=a.$to;n.push(js.node(o.pos-1,s.pos+1,{class:Oie}))}),Gs.create(e,n)}return null}function Die(){return new Xe({key:Kt,state:{init:function(){return null},apply:function(r,t){var e=r.getMeta(Kt);if(e)return e===-1?null:e;if(Zi(t)||!r.docChanged)return t;var n=r.mapping.mapResult(t),i=n.deleted,a=n.pos;return i?null:a}},props:{decorations:Nie,createSelectionBetween:function(r){var t=r.state;return Zi(Kt.getState(t))?null:t.selection}},view:function(r){return new Mie(r)}})}var Sv=function(){function r(){this.keys=[],this.values=[]}return r.prototype.getKeyIndex=function(t){return Or(t,this.keys)},r.prototype.get=function(t){return this.values[this.getKeyIndex(t)]},r.prototype.set=function(t,e){var n=this.getKeyIndex(t);return n>-1?this.values[n]=e:(this.keys.push(t),this.values.push(e)),this},r.prototype.has=function(t){return this.getKeyIndex(t)>-1},r.prototype.delete=function(t){var e=this.getKeyIndex(t);return e>-1?(this.keys.splice(e,1),this.values.splice(e,1),!0):!1},r.prototype.forEach=function(t,e){var n=this;e===void 0&&(e=this),this.values.forEach(function(i,a){i&&n.keys[a]&&t.call(e,i,n.keys[a],n)})},r.prototype.clear=function(){this.keys=[],this.values=[]},r}(),Ho="en-US",Lie=function(){function r(){this.code=Ho,this.langs=new Sv}return r.prototype.setCode=function(t){this.code=t||Ho},r.prototype.setLanguage=function(t,e){var n=this;t=[].concat(t),t.forEach(function(i){if(!n.langs.has(i))n.langs.set(i,e);else{var a=n.langs.get(i);n.langs.set(i,tl(a,e))}})},r.prototype.get=function(t,e){e||(e=this.code);var n=this.langs.get(e);n||(n=this.langs.get(Ho));var i=n[t];if(!i)throw new Error('There is no text key "'+t+'" in '+e);return i},r}(),B=new Lie,Aie=[[{action:"Add row to up",command:"addRowToUp",disableInThead:!0,className:"add-row-up"},{action:"Add row to down",command:"addRowToDown",disableInThead:!0,className:"add-row-down"},{action:"Remove row",command:"removeRow",disableInThead:!0,className:"remove-row"}],[{action:"Add column to left",command:"addColumnToLeft",className:"add-column-left"},{action:"Add column to right",command:"addColumnToRight",className:"add-column-right"},{action:"Remove column",command:"removeColumn",className:"remove-column"}],[{action:"Align column to left",command:"alignColumn",payload:{align:"left"},className:"align-column-left"},{action:"Align column to center",command:"alignColumn",payload:{align:"center"},className:"align-column-center"},{action:"Align column to right",command:"alignColumn",payload:{align:"right"},className:"align-column-right"}],[{action:"Remove table",command:"removeTable",className:"remove-table"}]];function Iie(r,t){return Aie.map(function(e){return e.map(function(n){var i=n.action,a=n.command,o=n.payload,s=n.disableInThead,l=n.className;return{label:B.get(i),onClick:function(){r.emit("command",a,o)},disabled:t&&!!s,className:l}})}).concat()}function Rie(r){return new Xe({props:{handleDOMEvents:{contextmenu:function(t,e){var n=Cv(e.target,t.dom);if(n){e.preventDefault();var i=e,a=i.clientX,o=i.clientY,s=t.dom.parentNode.getBoundingClientRect(),l=s.left,u=s.top,c=n.nodeName==="TH";return r.emit("contextmenu",{pos:{left:a-l+10+"px",top:o-u+30+"px"},menuGroups:Iie(r,c),tableCell:n}),!0}return!1}}}})}function Pie(){return new Xe({props:{handleDOMEvents:{mousedown:function(r,t){var e=t,n=e.clientX,i=e.clientY,a=r.posAtCoords({left:n,top:i});if(a){var o=r.state,s=o.doc,l=o.tr,u=s.resolve(a.pos),c=Cn(u),f=t.target,d=getComputedStyle(f,":before"),h=t,p=h.offsetX,v=h.offsetY;if(!c||!cl(d,p,v))return!1;t.preventDefault();var m=u.before(c.depth),g=c.node.attrs;return l.setNodeMarkup(m,null,w(w({},g),{checked:!g.checked})),r.dispatch(l),!0}return!1}}}})}var Bie=["image","link","customBlock","frontMatter"],Hie=["strong","strike","emph","code"],Ev=["bulletList","orderedList","taskList"];function Fie(r,t){var e=r.type.name;return e==="listItem"?r.attrs.task?"taskList":t.type.name:e.indexOf("table")!==-1?"table":e}function qie(r,t){t[r]={active:!0},Ev.filter(function(e){return e!==r}).forEach(function(e){t[e]&&delete t[e]})}function _ie(r,t,e,n){Hie.forEach(function(i){var a=e.marks[i],o=r.marksAcross(t)||[],s=!!a.isInSet(o);s&&(n[i]={active:!0})})}function $ie(r,t,e){var n=r.$from,i=r.$to,a=r.from,o=r.to,s={indent:{active:!1,disabled:!0},outdent:{active:!1,disabled:!0}};return t.nodesBetween(a,o,function(l,u,c){var f=Fie(l,c);be(Bie,f)||(be(Ev,f)?(qie(f,s),s.indent.disabled=!1,s.outdent.disabled=!1):f==="paragraph"||f==="text"?_ie(n,i,e,s):s[f]={active:!0})}),s}function zie(r){return new Xe({view:function(){return{update:function(t){var e=t.state,n=e.selection,i=e.doc,a=e.schema;r.emit("changeToolbarState",{toolbarState:$ie(n,i,a)})}}}})}var Vie=function(){function r(t,e,n,i){var a=this;this.openEditor=function(){if(a.innerEditorView)throw new Error("The editor is already opened.");a.dom.draggable=!1,a.wrapper.style.display="none",a.innerViewContainer.style.display="block",a.innerEditorView=new Js(a.innerViewContainer,{state:eh.create({doc:a.node,plugins:[ei({"Mod-z":function(){return Wn(a.innerEditorView.state,a.innerEditorView.dispatch)},"Shift-Mod-z":function(){return el(a.innerEditorView.state,a.innerEditorView.dispatch)},Tab:function(o,s){return s(o.tr.insertText("	")),!0},Enter:Hh,Escape:function(){return a.cancelEditing(),!0},"Ctrl-Enter":function(){return a.saveAndFinishEditing(),!0}}),Xh()]}),dispatchTransaction:function(o){return a.dispatchInner(o)},handleDOMEvents:{mousedown:function(){return a.editorView.hasFocus()&&a.innerEditorView.focus(),!0},blur:function(){return a.saveAndFinishEditing(),!0}}}),a.innerEditorView.focus()},this.node=t,this.editorView=e,this.getPos=n,this.toDOMAdaptor=i,this.innerEditorView=null,this.canceled=!1,this.dom=document.createElement("div"),this.dom.className=O("custom-block"),this.wrapper=document.createElement("div"),this.wrapper.className=O("custom-block-view"),this.createInnerViewContainer(),this.renderCustomBlock(),this.dom.appendChild(this.innerViewContainer),this.dom.appendChild(this.wrapper)}return r.prototype.renderToolArea=function(){var t=this,e=document.createElement("div"),n=document.createElement("span"),i=document.createElement("button");e.className="tool",n.textContent=this.node.attrs.info,n.className="info",i.type="button",i.addEventListener("click",function(){return t.openEditor()}),e.appendChild(n),e.appendChild(i),this.wrapper.appendChild(e)},r.prototype.renderCustomBlock=function(){var t=this.toDOMAdaptor.getToDOMNode(this.node.attrs.info);if(t){for(var e=t(this.node);this.wrapper.hasChildNodes();)this.wrapper.removeChild(this.wrapper.lastChild);e&&this.wrapper.appendChild(e),this.renderToolArea()}},r.prototype.createInnerViewContainer=function(){this.innerViewContainer=document.createElement("div"),this.innerViewContainer.className=O("custom-block-editor"),this.innerViewContainer.style.display="none"},r.prototype.closeEditor=function(){this.innerEditorView&&(this.innerEditorView.destroy(),this.innerEditorView=null,this.innerViewContainer.style.display="none"),this.wrapper.style.display="block"},r.prototype.saveAndFinishEditing=function(){var t=this.editorView.state.selection.to,e=this.editorView.state;this.editorView.dispatch(e.tr.setSelection(K(e.tr,t))),this.editorView.focus(),this.renderCustomBlock(),this.closeEditor()},r.prototype.cancelEditing=function(){var t=qb(this.innerEditorView.state);for(this.canceled=!0;t--;)Wn(this.innerEditorView.state,this.innerEditorView.dispatch),Wn(this.editorView.state,this.editorView.dispatch);this.canceled=!1;var e=this.editorView.state.selection.to,n=this.editorView.state;this.editorView.dispatch(n.tr.setSelection(_t.create(n.doc,e))),this.editorView.focus(),this.closeEditor()},r.prototype.dispatchInner=function(t){var e=this.innerEditorView.state.applyTransaction(t),n=e.state,i=e.transactions;if(this.innerEditorView.updateState(n),!this.canceled&&Qe(this.getPos)){for(var a=this.editorView.state.tr,o=Be.offset(this.getPos()+1),s=0;s<i.length;s+=1)for(var l=i[s].steps,u=0;u<l.length;u+=1)a.step(l[u].map(o));a.docChanged&&this.editorView.dispatch(a)}},r.prototype.update=function(t){return t.sameMarkup(this.node)?(this.node=t,this.innerEditorView||this.renderCustomBlock(),!0):!1},r.prototype.stopEvent=function(t){return!!this.innerEditorView&&!!t.target&&this.innerEditorView.dom.contains(t.target)},r.prototype.ignoreMutation=function(){return!0},r.prototype.destroy=function(){this.dom.removeEventListener("dblclick",this.openEditor),this.closeEditor()},r}(),uf="image-link",Uie=function(){function r(t,e,n,i){var a=this,o;this.handleMousedown=function(s){s.preventDefault();var l=s.target,u=s.offsetX,c=s.offsetY;if(a.imageLink&&Qe(a.getPos)&&op(l,uf)){var f=getComputedStyle(l,":before");if(s.stopPropagation(),cl(f,u,c)){var d=a.view.state.tr,h=a.getPos();d.setSelection(K(d,h,h+1)),a.view.dispatch(d),a.eventEmitter.emit("openPopup","link",a.imageLink.attrs)}}},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=i,this.imageLink=(o=t.marks.filter(function(s){var l=s.type;return l.name==="link"})[0])!==null&&o!==void 0?o:null,this.dom=this.createElement(),this.bindEvent()}return r.prototype.createElement=function(){var t=this.createImageElement(this.node);if(this.imageLink){var e=document.createElement("span");return e.className=uf,e.appendChild(t),e}return t},r.prototype.createImageElement=function(t){var e=document.createElement("img"),n=t.attrs,i=n.imageUrl,a=n.altText,o=re(t.attrs);return e.src=i,a&&(e.alt=a),hl(o,e),e},r.prototype.bindEvent=function(){this.imageLink&&this.dom.addEventListener("mousedown",this.handleMousedown)},r.prototype.stopEvent=function(){return!0},r.prototype.destroy=function(){this.imageLink&&this.dom.removeEventListener("mousedown",this.handleMousedown)},r}(),Wie="toastui-editor-ww-code-block",jie="toastui-editor-ww-code-block-language",Gie=function(){function r(t,e,n,i){var a=this;this.contentDOM=null,this.input=null,this.timer=null,this.handleMousedown=function(o){var s=o.target,l=getComputedStyle(s,":after");if(l.backgroundImage!=="none"&&Qe(a.getPos)){var u=a.view.coordsAtPos(a.getPos()),c=u.top,f=u.right;a.createLanguageEditor({top:c,right:f})}},this.handleKeydown=function(o){o.key==="Enter"&&a.input&&(o.preventDefault(),a.changeLanguage())},this.node=t,this.view=e,this.getPos=n,this.eventEmitter=i,this.createElement(),this.bindDOMEvent(),this.bindEvent()}return r.prototype.createElement=function(){var t=this.node.attrs.language,e=document.createElement("div");e.setAttribute("data-language",t||"text"),e.className=Wie;var n=this.createCodeBlockElement(),i=n.firstChild;e.appendChild(n),this.dom=e,this.contentDOM=i},r.prototype.createCodeBlockElement=function(){var t=document.createElement("pre"),e=document.createElement("code"),n=this.node.attrs.language,i=re(this.node.attrs);return n&&e.setAttribute("data-language",n),hl(i,t),t.appendChild(e),t},r.prototype.createLanguageEditor=function(t){var e=this,n=t.top,i=t.right,a=document.createElement("span");a.className=jie;var o=document.createElement("input");o.type="text",o.value=this.node.attrs.language,a.appendChild(o),this.view.dom.parentElement.appendChild(a);var s=a.clientWidth;wt(a,{top:n+10+"px",left:i-s-10+"px",width:s+"px"}),this.input=o,this.input.addEventListener("blur",function(){return e.changeLanguage()}),this.input.addEventListener("keydown",this.handleKeydown),this.clearTimer(),this.timer=setTimeout(function(){e.input.focus()})},r.prototype.bindDOMEvent=function(){this.dom&&this.dom.addEventListener("click",this.handleMousedown)},r.prototype.bindEvent=function(){var t=this;this.eventEmitter.listen("scroll",function(){t.input&&t.reset()})},r.prototype.changeLanguage=function(){if(this.input&&Qe(this.getPos)){var t=this.input.value;this.reset();var e=this.getPos(),n=this.view.state.tr;n.setNodeMarkup(e,null,{language:t}),this.view.dispatch(n)}},r.prototype.reset=function(){var t;if(!((t=this.input)===null||t===void 0)&&t.parentElement){var e=this.input.parentElement;this.input=null,Dr(e)}},r.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype.stopEvent=function(){return!0},r.prototype.update=function(t){return t.sameMarkup(this.node)?(this.node=t,!0):!1},r.prototype.destroy=function(){this.reset(),this.clearTimer(),this.dom&&this.dom.removeEventListener("click",this.handleMousedown)},r}(),Jie=/MsoListParagraph/,Mv=/style=(.|\n)*mso-/,Ov=/mso-list:(.*)/,Kie=/O:P/,Qie=/^(n|u|l)/,Xie="p.MsoListParagraph";function Yie(r){return Mv.test(r)}function Zie(r){for(var t=[],e=document.createTreeWalker(r,1,null,!1);e.nextNode();){var n=e.currentNode;if(Oa(n)){var i=n,a=i.outerHTML,o=i.textContent,s=Mv.test(a),l=Ov.test(a);s&&!l&&o?t.push([n,!0]):(Kie.test(n.nodeName)||s&&!o||l)&&t.push([n,!1])}}return t.forEach(function(u){var c=u[0],f=u[1];f?yw(c):Dr(c)}),r.innerHTML.trim()}function eae(r,t){var e=r.getAttribute("style");if(e){var n=e.match(Ov),i=n[1],a=i.trim().split(" "),o=a[1],s=parseInt(o.replace("level",""),10),l=Qie.test(r.textContent||"");return{id:t,level:s,prev:null,parent:null,children:[],unordered:l,contents:Zie(r)}}return null}function tae(r,t){if(t.level<r.level)t.children.push(r),r.parent=t;else{for(;t&&t.level!==r.level;)t=t.parent;t&&(r.prev=t,r.parent=t.parent,r.parent&&r.parent.children.push(r))}}function rae(r){var t=[];return r.forEach(function(e,n){var i=t[n-1],a=eae(e,n);a&&(i&&tae(a,i),t.push(a))}),t}function Nv(r){var t=r[0].unordered?"ul":"ol",e=document.createElement(t);return r.forEach(function(n){var i=n.children,a=n.contents,o=document.createElement("li");o.innerHTML=a,e.appendChild(o),i.length&&e.appendChild(Nv(i))}),e}function nae(r){var t=rae(r),e=t.filter(function(n){var i=n.parent;return!i});return Nv(e)}function iae(r){for(;r&&!Oa(r);)r=r.nextSibling;return r?!Jie.test(r.className):!0}function aae(r){var t=document.createElement("div");t.innerHTML=r;var e=[],n=vw(t,Xie);n.forEach(function(a){var o=iae(a.nextSibling);if(e.push(a),o){var s=nae(e),l=a.nextSibling;l?gw(s,l):mw(t,s),e=[]}Dr(a)});var i=n.length?"<p></p>":"";return""+i+t.innerHTML}var cf="<!--StartFragment-->",oae="<!--EndFragment-->";function sae(r){var t=r.indexOf(cf),e=r.lastIndexOf(oae);return t>-1&&e>-1&&(r=r.slice(t+cf.length,e)),r.replace(/<br[^>]*>/g,fp)}function lae(r){return/<\/td>((?!<\/tr>)[\s\S])*$/i.test(r)&&(r="<tr>"+r+"</tr>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(r)&&(r="<table>"+r+"</table>"),r}function uae(r){return r=sae(r),r=lae(r),Yie(r)&&(r=aae(r)),r}function cae(r){var t=r.reduce(function(e,n){return e.childCount>n.childCount?e:n});return t.childCount}function Dv(r,t,e){for(var n=[],i=r.childCount,a=0;a<i;a+=1)if(!r.child(a).attrs.extended){var o=a<i?e.create(r.child(a).attrs,r.child(a).content):e.createAndFill();n.push(o)}return n}function Lv(r,t,e){var n=e.nodes,i=n.tableRow,a=n.tableHeadCell,o=Dv(r,t,a);return i.create(null,o)}function Av(r,t,e){var n=e.nodes,i=n.tableRow,a=n.tableBodyCell,o=Dv(r,t,a);return i.create(null,o)}function fae(r,t){for(var e=t.nodes,n=e.tableRow,i=e.tableBodyCell,a=[],o=0;o<r;o+=1){var s=i.createAndFill();a.push(s)}return n.create({dummyRowForPasting:!0},a)}function Iv(r){var t=[],e=[];if(r.firstChild.type.name==="tableHead"){var n=r.firstChild;n.forEach(function(a){return t.push(a)})}if(r.lastChild.type.name==="tableBody"){var i=r.lastChild;i.forEach(function(a){return e.push(a)})}return qe(qe([],t),e)}function dae(r,t,e){var n=Lv(r,t,e);return e.nodes.tableHead.create(null,n)}function ff(r,t,e){var n=r.map(function(a){return Av(a,t,e)});if(!r.length){var i=fae(t,e);n.push(i)}return e.nodes.tableBody.create(null,n)}function hae(r,t,e,n){var i=cae(r);if(e&&n)return t.nodes.table.create(null,[ff(r,i,t)]);var a=r[0],o=r.slice(1),s=[dae(a,i,t)];return o.length&&s.push(ff(o,i,t)),t.nodes.table.create(null,s)}function pae(r,t,e){var n=[],i=r.content,a=r.openStart,o=r.openEnd;return i.forEach(function(s){if(s.type.name==="table"){var l=xv(new I(L.from(s),0,0));if(l){var u=Iv(l),c=l.firstChild.type.name==="tableBody",f=hae(u,t,c,e);n.push(f)}}else n.push(s)}),new I(L.from(n),a,o)}var vae=4,mae=2;function qi(r){return r*vae}function gae(r,t,e){var n=[],i=Iv(r),a=i[0].childCount,o=i.length,s=t.startRowIdx===0,l=i.slice(0,o);if(s){var u=l.shift();if(u){var c=Lv(u,a,e).content;n.push(c)}}return l.forEach(function(f){if(!f.attrs.dummyRowForPasting){var d=Av(f,a,e).content;n.push(d)}}),n}function yae(r,t,e){for(var n=t.startRowIdx,i=t.startColIdx,a=e.length,o=0,s=function(h){var p=e[h].childCount;e[h].forEach(function(v){var m=v.attrs,g=m.colspan;g>1&&(p+=g-1)}),o=Math.max(o,p)},l=0;l<a;l+=1)s(l);var u=n+a-1,c=i+o-1,f=Math.max(u+1-r.totalRowCount,0),d=Math.max(c+1-r.totalColumnCount,0);return{startRowIdx:n,startColIdx:i,endRowIdx:u,endColIdx:c,addedRowCount:f,addedColumnCount:d}}function bae(r,t){for(var e=r.startRowIdx,n=r.startColIdx,i=r.endRowIdx,a=r.endColIdx,o=r.addedRowCount,s=r.addedColumnCount,l=e;l<=i-o;l+=1)t.push({rowIdx:l,startColIdx:n,endColIdx:a-s})}function kae(r,t,e,n,i){for(var a=n.startRowIdx,o=n.startColIdx,s=n.endRowIdx,l=n.endColIdx,u=n.addedRowCount,c=n.addedColumnCount,f=e.totalRowCount,d=0,h=0;h<f;h+=1){var p=e.getCellInfo(h,l-c),v=p.offset,m=p.nodeSize,g=r.mapping.map(v+m),k=Fi(c,h,t);if(r.insert(g,k),h>=a&&h<=s-u){var b=e.getCellInfo(h,l-c),C=r.mapping.map(b.offset),T=g+qi(c);i[d]={rowIdx:h,startColIdx:o,endColIdx:l,dummyOffsets:[C,T]},d+=1}}}function wae(r,t,e,n,i){var a=n.addedRowCount,o=n.addedColumnCount,s=n.startColIdx,l=n.endColIdx,u=r.mapping.maps.length,c=e.tableEndOffset-2,f=wv(a,e.totalColumnCount+o,t),d=c;r.insert(r.mapping.slice(u).map(d),f);for(var h=0;h<a;h+=1){var p=d+qi(s)+1,v=d+qi(l+1)+1,m=d+qi(e.totalColumnCount+o)+mae;i.push({rowIdx:h+e.totalRowCount,startColIdx:s,endColIdx:l,dummyOffsets:[p,v]}),d=m}}function Cae(r,t,e,n){var i=r.mapping.maps.length;e.forEach(function(a,o){var s=a.rowIdx,l=a.startColIdx,u=a.endColIdx,c=a.dummyOffsets,f=r.mapping.slice(i),d=new I(t[o],0,0),h=c?c[0]:n.getCellStartOffset(s,l),p=c?c[1]:n.getCellEndOffset(s,u);r.replace(f.map(h),f.map(p),d)})}function Tae(r,t){var e=r.state,n=e.selection,i=e.schema,a=e.tr,o=ht(n),s=o.anchor,l=o.head;if(s&&l){var u=xv(t);if(!u)return!1;var c=pe.create(s),f=c.getRectOffsets(s,l),d=gae(u,f,i),h=yae(c,f,d),p=[];return Sae(c,h)&&(bae(h,p),h.addedColumnCount&&kae(a,i,c,h,p),h.addedRowCount&&wae(a,i,c,h,p),Cae(a,d,p,c),r.dispatch(a),xae(r,p,c.getCellInfo(0,0).offset)),!0}return!1}function xae(r,t,e){var n=r.state,i=n.tr,a=n.doc,o=pe.create(a.resolve(e)),s=t[0],l=s.rowIdx,u=s.startColIdx,c=Ee(t),f=c.rowIdx,d=c.endColIdx,h=o.getCellInfo(l,u).offset,p=o.getCellInfo(f,d).offset;r.dispatch(i.setSelection(new Ol(a.resolve(h),a.resolve(p))))}function Sae(r,t){var e=r.getSpannedOffsets(t),n=rn(e),i=n.rowCount,a=n.columnCount,o=rn(t),s=o.rowCount,l=o.columnCount;return i===s&&a===l}var Eae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"doc"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"block+"}},enumerable:!1,configurable:!0}),t}(G),Mae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"inline*",group:"block",attrs:w({},he()),parseDOM:[{tag:"p"}],toDOM:function(e){var n=e.attrs;return["p",re(n),0]}}},enumerable:!1,configurable:!0}),t}(G),Oae=/\s{1,4}$/,Nae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{group:"inline"}},enumerable:!1,configurable:!0}),t.prototype.addSpaces=function(){return function(e,n){var i=e.selection,a=e.tr,o=i.$from,s=i.$to,l=o.blockRange(s);return l&&!wn(o)&&!ha(o)?(n(a.insertText("    ",o.pos,s.pos)),!0):!1}},t.prototype.removeSpaces=function(){return function(e,n){var i=e.selection,a=e.tr,o=i.$from,s=i.$to,l=i.from,u=o.blockRange(s);if(u&&!wn(o)&&!ha(o)){var c=o.nodeBefore;if(c&&c.isText){var f=c.text,d=f.replace(Oae,""),h=f.length-d.length;return n(a.delete(l-h,l)),!0}}return!1}},t.prototype.keymaps=function(){return{Tab:this.addSpaces(),"Shift-Tab":this.removeSpaces()}},t}(G),Dae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"heading"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"levels",{get:function(){return[1,2,3,4,5,6]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this.levels.map(function(n){return{tag:"h"+n,getAttrs:function(i){var a=i.getAttribute("data-raw-html");return w({level:n},a&&{rawHTML:a})}}});return{attrs:w({level:{default:1},headingType:{default:"atx"},rawHTML:{default:null}},he()),content:"inline*",group:"block",defining:!0,parseDOM:e,toDOM:function(n){var i=n.attrs;return["h"+i.level,re(i),0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(e){return function(n,i){var a=n.schema.nodes[e.level?"heading":"paragraph"];return Zs(a,e)(n,i)}}},t}(G),Lae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"codeBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:w({language:{default:null},rawHTML:{default:null}},he()),code:!0,defining:!0,marks:"",parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){var n=e.getAttribute("data-raw-html"),i=e.firstElementChild;return w({language:(i==null?void 0:i.getAttribute("data-language"))||null},n&&{rawHTML:n})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"pre",["code",w({"data-language":n.language},re(n)),0]]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n){return Zs(e.schema.nodes.codeBlock)(e,n)}}},t.prototype.moveCursor=function(e){var n=this;return function(i,a){var o=i.tr,s=i.doc,l=i.schema,u=i.selection.$from,c=n.context.view;if(c.endOfTextblock(e)&&u.node().type.name==="codeBlock"){var f=u.parent.textContent.split(`
`),d=e==="up"?u.start():u.end(),h=e==="up"?[d,f[0].length+d]:[d-Ee(f).length,d],p=s.resolve(e==="up"?u.before():u.after()),v=e==="up"?p.nodeBefore:p.nodeAfter;if(Hk(u.pos,h[0],h[1])&&!v){var m=ll(o,p,l);if(m)return a(m),!0}}return!1}},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-p":e,"Shift-Mod-P":e,ArrowUp:this.moveCursor("up"),ArrowDown:this.moveCursor("down")}},t}(G),Aae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"bulletList"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:w({rawHTML:{default:null}},he()),parseDOM:[Pa("ul")],toDOM:function(e){var n=e.attrs;return["ul",re(n),0]}}},enumerable:!1,configurable:!0}),t.prototype.changeList=function(){return function(e,n){return kv(e.schema.nodes.bulletList)(e,n)}},t.prototype.commands=function(){return{bulletList:this.changeList,taskList:hie}},t.prototype.keymaps=function(){var e=this.changeList(),n=Ml(),i=n.indent,a=n.outdent;return{"Mod-u":e,"Mod-U":e,Tab:i(),"Shift-Tab":a()}},t}(G),Iae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"orderedList"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"listItem+",group:"block",attrs:w({order:{default:1},rawHTML:{default:null}},he()),parseDOM:[{tag:"ol",getAttrs:function(e){var n=e.getAttribute("start"),i=e.getAttribute("data-raw-html");return w({order:e.hasAttribute("start")?Number(n):1},i&&{rawHTML:i})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"ol",w({start:n.order===1?null:n.order},re(n)),0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n){return kv(e.schema.nodes.orderedList)(e,n)}}},t.prototype.keymaps=function(){var e=this.commands()(),n=Ml(),i=n.indent,a=n.outdent;return{"Mod-o":e,"Mod-O":e,Tab:i(),"Shift-Tab":a()}},t}(G),Rae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"listItem"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"paragraph block*",selectable:!1,attrs:{task:{default:!1},checked:{default:!1},rawHTML:{default:null}},defining:!0,parseDOM:[{tag:"li",getAttrs:function(e){var n=e.getAttribute("data-raw-html");return w({task:e.hasAttribute("data-task"),checked:e.hasAttribute("data-task-checked")},n&&{rawHTML:n})}}],toDOM:function(e){var n=e.attrs,i=n.task,a=n.checked;if(!i)return[n.rawHTML||"li",0];var o=["task-list-item"];return a&&o.push("checked"),[n.rawHTML||"li",w({class:o.join(" "),"data-task":i},a&&{"data-task-checked":a}),0]}}},enumerable:!1,configurable:!0}),t.prototype.liftToPrevListItem=function(){return function(e,n){var i=e.selection,a=e.tr,o=e.schema,s=i.$from,l=i.empty,u=o.nodes.listItem,c=s.parent,f=s.node(-1);if(l&&!c.childCount&&f.type===u){if(s.index(-2)>=1)return a.delete(s.start(-1)-1,s.end(-1)),n(a),!0;var d=s.node(-3);if(d.type===u)return a.delete(s.start(-2)-1,s.end(-1)),n(a),!0}return!1}},t.prototype.keymaps=function(){var e=function(n,i){return yie(n.schema.nodes.listItem)(n,i)};return{Backspace:this.liftToPrevListItem(),Enter:e}},t}(G),Pae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"blockQuote"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:w({rawHTML:{default:null}},he()),content:"block+",group:"block",parseDOM:[Pa("blockquote")],toDOM:function(e){var n=e.attrs;return["blockquote",re(n),0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n){return mb(e.schema.nodes.blockQuote)(e,n)}}},t.prototype.keymaps=function(){var e=this.commands()();return{"Alt-q":e,"Alt-Q":e}},t}(G),Bae={left:Uae,right:Vae,up:Wae,down:jae};function Hae(r,t,e){var n=e[0],i=e[1],a=t.resolve(r.before(n-1));return i===n&&!a.nodeBefore}function Fae(r){for(var t,e=r.depth,n;e&&(n=r.node(e),n.type.name!=="tableBodyCell");){if(n.type.name==="listItem"){var i=r.node(e-1),a=i.lastChild===n,o=((t=n.lastChild)===null||t===void 0?void 0:t.type.name)!=="paragraph";return a?!o:!1}e-=1}return!1}function qae(r,t,e,n,i){var a=t[0],o=t[1],s=t[2];if(r==="left"||r==="up"){if(i&&!Hae(e,n,[a,o]))return!1;var l=e.before(s),u=n.resolve(l).nodeBefore;if(u)return!1}return!0}function _ae(r,t,e,n,i){if(r==="right"||r==="down"){if(i&&!Fae(e))return!1;var a=e.after(t),o=n.resolve(a).nodeAfter;if(o)return!1}return!0}function $ae(r,t,e,n){var i=t[0],a=t[1],o=i+3,s=a>=o,l=s?i+1:a,u=qae(r,[a,o,l],e,n,s),c=_ae(r,l,e,n,s);return u&&c}function df(r,t,e){var n=e[0],i=e[1],a=t.getRowspanStartInfo(n,i),o=r==="up"&&n===0,s=r==="down"&&((a==null?void 0:a.count)>1?n+a.count-1:n)===t.totalRowCount-1;return o||s}function zae(r,t,e){var n=r.doc.resolve(t.tableStartOffset-1);return n.nodeBefore?r.setSelection(Ct.near(n,-1)):ll(r,n,e)}function Fo(r,t,e,n){n===void 0&&(n=!1);var i=r.doc.resolve(t.tableEndOffset);return n||!i.nodeAfter?ll(r,i,e):r.setSelection(Ct.near(i,1))}function Vae(r,t){var e=r[0],n=r[1],i=t.totalRowCount,a=t.totalColumnCount,o=n===a-1,s=e===i-1&&o;if(!s){var l=n+1,u=t.getColspanStartInfo(e,n);(u==null?void 0:u.count)>1&&(l+=u.count-1),(o||l===a)&&(e+=1,l=0);var c=t.getCellInfo(e,l).offset;return c+2}return null}function Uae(r,t){var e=r[0],n=r[1],i=t.totalColumnCount,a=n===0,o=e===0&&a;if(!o){n-=1,a&&(e-=1,n=i-1);var s=t.getCellInfo(e,n),l=s.offset,u=s.nodeSize;return l+u-2}return null}function Wae(r,t){var e=r[0],n=r[1];if(e>0){var i=t.getCellInfo(e-1,n),a=i.offset,o=i.nodeSize;return a+o-2}return null}function jae(r,t){var e=r[0],n=r[1],i=t.totalRowCount;if(e<i-1){var a=e+1,o=t.getRowspanStartInfo(e,n);(o==null?void 0:o.count)>1&&(a+=o.count-1);var s=t.getCellInfo(a,n).offset;return s+2}return null}function hf(r,t,e,n){var i=Bae[r],a=i(e,n);if(a){var o=r==="right"||r==="down"?1:-1;return t.setSelection(Ct.near(t.doc.resolve(a),o))}return null}function Gae(r,t,e){var n=e[0],i=e[1];if(r==="up"||r==="down")return!1;var a=t.tableStartOffset,o=t.tableEndOffset,s=t.getCellInfo(n,i),l=s.offset,u=s.nodeSize,c=r==="left"?a:o,f=r==="left"?l-2:l+u+3;return c===f}function Jae(r,t,e){var n=r.doc.resolve(t.before(e-3));return r.setSelection(new bt(n))}function Kae(r,t,e){var n,i,a;return r==="up"?(n=e.startRowIdx,i=0,a=-1):(n=e.endRowIdx,i=t.totalColumnCount-1,a=t.getCellInfo(n,i).nodeSize+1),{targetRowIdx:n,insertColIdx:i,nodeSize:a}}function Qae(r,t,e){var n=r.getCellInfo(t,0).offset,i=r.getCellInfo(t,e-1),a=i.offset,o=i.nodeSize;return{from:n,to:a+o}}var Xae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"tableHead{1} tableBody{1}",group:"block",attrs:w({rawHTML:{default:null}},he()),parseDOM:[Pa("table")],toDOM:function(e){var n=e.attrs;return["table",re(n),0]}}},enumerable:!1,configurable:!0}),t.prototype.addTable=function(){return function(e){return e===void 0&&(e={rowCount:2,columnCount:1,data:[]}),function(n,i){var a=e.rowCount,o=e.columnCount,s=e.data,l=n.schema,u=n.selection,c=n.tr,f=u.from,d=u.to,h=u.$from,p=f===d;if(p&&!ha(h)){var v=l.nodes,m=v.tableHead,g=v.tableBody,k=s==null?void 0:s.slice(0,o),b=s==null?void 0:s.slice(o,s.length),C=xie(o,l,k),T=wv(a-1,o,l,b),S=l.nodes.table.create(null,[m.create(null,C),g.create(null,T)]);return i(c.replaceSelectionWith(S)),!0}return!1}}},t.prototype.removeTable=function(){return function(){return function(e,n){var i=e.selection,a=e.tr,o=pe.create(i.$anchor);if(o){var s=o.tableStartOffset,l=o.tableEndOffset,u=s-1,c=K(a.delete(u,l),u);return n(a.setSelection(c)),!0}return!1}}},t.prototype.addColumn=function(e){return function(){return function(n,i){var a=n.selection,o=n.tr,s=n.schema,l=ht(a),u=l.anchor,c=l.head;if(u&&c){for(var f=pe.create(u),d=f.getRectOffsets(u,c),h=e==="left"?d.startColIdx:d.endColIdx+1,p=rn(d).columnCount,v=f.totalRowCount,m=0;m<v;m+=1){var g=Fi(p,m,s);o.insert(o.mapping.map(f.posAt(m,h)),g)}return i(o),!0}return!1}}},t.prototype.removeColumn=function(){return function(){return function(e,n){var i=e.selection,a=e.tr,o=ht(i),s=o.anchor,l=o.head;if(s&&l){var u=pe.create(s),c=u.getRectOffsets(s,l),f=u.totalColumnCount,d=u.totalRowCount,h=rn(c).columnCount,p=h===f;if(p)return!1;for(var v=c.startColIdx,m=c.endColIdx,g=a.mapping.maps.length,k=0;k<d;k+=1)for(var b=m;b>=v;b-=1){var C=u.getCellInfo(k,b),T=C.offset,S=C.nodeSize,M=a.mapping.slice(g).map(T),N=M+S;a.delete(M,N)}return n(a),!0}return!1}}},t.prototype.addRow=function(e){return function(){return function(n,i){var a=n.selection,o=n.schema,s=n.tr,l=ht(a),u=l.anchor,c=l.head;if(u&&c){var f=pe.create(u),d=f.totalColumnCount,h=f.getRectOffsets(u,c),p=rn(h).rowCount,v=Kae(e,f,h),m=v.targetRowIdx,g=v.insertColIdx,k=v.nodeSize,b=m===0;if(!b){for(var C=[],T=s.mapping.map(f.posAt(m,g))+k,S=[],M=0;M<d;M+=1)S=S.concat(Fi(1,m,o));for(var N=0;N<p;N+=1)C.push(o.nodes.tableRow.create(null,S));return i(s.insert(T,C)),!0}}return!1}}},t.prototype.removeRow=function(){return function(){return function(e,n){var i=e.selection,a=e.tr,o=ht(i),s=o.anchor,l=o.head;if(s&&l){var u=pe.create(s),c=u.totalRowCount,f=u.totalColumnCount,d=u.getRectOffsets(s,l),h=rn(d).rowCount,p=d.startRowIdx,v=d.endRowIdx,m=p===0,g=h===c-1;if(g||m)return!1;for(var k=v;k>=p;k-=1){var b=Qae(u,k,f),C=b.from,T=b.to;a.delete(C-1,T+1)}return n(a),!0}return!1}}},t.prototype.alignColumn=function(){return function(e){return e===void 0&&(e={align:"center"}),function(n,i){var a=e.align,o=n.selection,s=n.tr,l=ht(o),u=l.anchor,c=l.head;if(u&&c){for(var f=pe.create(u),d=f.totalRowCount,h=f.getRectOffsets(u,c),p=h.startColIdx,v=h.endColIdx,m=0;m<d;m+=1)for(var g=p;g<=v;g+=1)if(!f.extendedRowspan(m,g)&&!f.extendedColspan(m,g)){var k=f.getNodeAndPos(m,g),b=k.node,C=k.pos,T=Sie(b,{align:a});s.setNodeMarkup(C,null,T)}return i(s),!0}return!1}}},t.prototype.moveToCell=function(e){return function(n,i){var a=n.selection,o=n.tr,s=n.schema,l=ht(a),u=l.anchor,c=l.head;if(u&&c){var f=pe.create(u),d=f.getCellIndex(u),h=void 0;if(df(e,f,d)?h=Fo(o,f,s):h=hf(e,o,d,f),h)return i(h),!0}return!1}},t.prototype.moveInCell=function(e){var n=this;return function(i,a){var o=i.selection,s=i.tr,l=i.doc,u=i.schema,c=o.$from,f=n.context.view;if(!f.endOfTextblock(e))return!1;var d=It(c,function(b){var C=b.type;return C.name==="tableHeadCell"||C.name==="tableBodyCell"});if(d){var h=It(c,function(b){var C=b.type;return C.name==="paragraph"}),p=d.depth;if(h&&$ae(e,[p,h.depth],c,l)){var v=ht(o).anchor,m=pe.create(v),g=m.getCellIndex(v),k=void 0;if(Gae(e,m,g)?k=Jae(s,c,p):df(e,m,g)?e==="up"?k=zae(s,m,u):e==="down"&&(k=Fo(s,m,u)):k=hf(e,s,g,m),k)return a(k),!0}}return!1}},t.prototype.deleteCells=function(){return function(e,n){var i=e.schema,a=e.selection,o=e.tr,s=ht(a),l=s.anchor,u=s.head,c=a instanceof _t;if(l&&u&&!c){for(var f=pe.create(l),d=f.getRectOffsets(l,u),h=d.startRowIdx,p=d.startColIdx,v=d.endRowIdx,m=d.endColIdx,g=h;g<=v;g+=1)for(var k=p;k<=m;k+=1)if(!f.extendedRowspan(g,k)&&!f.extendedColspan(g,k)){var b=f.getNodeAndPos(g,k),C=b.node,T=b.pos,S=Fi(1,g,i,C.attrs);o.replaceWith(o.mapping.map(T),o.mapping.map(T+C.nodeSize),S)}return n(o),!0}return!1}},t.prototype.exitTable=function(){return function(e,n){var i=e.selection,a=e.tr,o=e.schema,s=i.$from,l=It(s,function(d){var h=d.type;return h.name==="tableHeadCell"||h.name==="tableBodyCell"});if(l){var u=It(s,function(d){var h=d.type;return h.name==="paragraph"});if(u){var c=ht(i).anchor,f=pe.create(c);return n(Fo(a,f,o,!0)),!0}}return!1}},t.prototype.commands=function(){return{addTable:this.addTable(),removeTable:this.removeTable(),addColumnToLeft:this.addColumn("left"),addColumnToRight:this.addColumn("right"),removeColumn:this.removeColumn(),addRowToUp:this.addRow("up"),addRowToDown:this.addRow("down"),removeRow:this.removeRow(),alignColumn:this.alignColumn()}},t.prototype.keymaps=function(){var e=this.deleteCells();return{Tab:this.moveToCell("right"),"Shift-Tab":this.moveToCell("left"),ArrowUp:this.moveInCell("up"),ArrowDown:this.moveInCell("down"),ArrowLeft:this.moveInCell("left"),ArrowRight:this.moveInCell("right"),Backspace:e,"Mod-Backspace":e,Delete:e,"Mod-Delete":e,"Mod-Enter":this.exitTable()}},t}(G),Yae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"tableHead"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"tableRow{1}",attrs:w({rawHTML:{default:null}},he()),parseDOM:[Pa("thead")],toDOM:function(e){var n=e.attrs;return["thead",re(n),0]}}},enumerable:!1,configurable:!0}),t}(G),Zae=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"tableBody"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"tableRow+",attrs:w({rawHTML:{default:null}},he()),parseDOM:[{tag:"tbody",getAttrs:function(e){var n=e.querySelectorAll("tr"),i=n[0].children.length,a=e.getAttribute("data-raw-html");return i?w({},a&&{rawHTML:a}):!1}}],toDOM:function(e){var n=e.attrs;return["tbody",re(n),0]}}},enumerable:!1,configurable:!0}),t}(G),eoe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"tableRow"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"(tableHeadCell | tableBodyCell)*",attrs:w({rawHTML:{default:null}},he()),parseDOM:[{tag:"tr",getAttrs:function(e){var n=e.children.length,i=e.getAttribute("data-raw-html");return n?w({},i&&{rawHTML:i}):!1}}],toDOM:function(e){var n=e.attrs;return["tr",re(n),0]}}},enumerable:!1,configurable:!0}),t}(G),toe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"tableHeadCell"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"paragraph+",attrs:w({align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},extended:{default:null}},he()),isolating:!0,parseDOM:[gv("th")],toDOM:function(e){var n=e.attrs,i=mv(n);return["th",w(w({},i),re(n)),0]}}},enumerable:!1,configurable:!0}),t}(G),roe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"tableBodyCell"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"(paragraph | bulletList | orderedList)+",attrs:{align:{default:null},className:{default:null},rawHTML:{default:null},colspan:{default:null},rowspan:{default:null},extended:{default:null}},isolating:!0,parseDOM:[gv("td")],toDOM:function(e){var n=e.attrs,i=mv(n);return["td",i,0]}}},enumerable:!1,configurable:!0}),t}(G),noe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"image"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{inline:!0,attrs:w({imageUrl:{default:""},altText:{default:null},rawHTML:{default:null}},he()),group:"inline",selectable:!1,parseDOM:[{tag:"img[src]",getAttrs:function(e){var n=Ir(e,{RETURN_DOM_FRAGMENT:!0}).firstChild,i=n.getAttribute("src")||"",a=n.getAttribute("data-raw-html"),o=n.getAttribute("alt");return w({imageUrl:i,altText:o},a&&{rawHTML:a})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"img",w(w({src:tn(n.imageUrl)},n.altText&&{alt:n.altText}),re(n))]}}},enumerable:!1,configurable:!0}),t.prototype.addImage=function(){return function(e){return function(n,i){var a=n.schema,o=n.tr,s=e,l=s.imageUrl,u=s.altText;if(!l)return!1;var c=a.nodes.image.createAndFill(w({imageUrl:l},u&&{altText:u}));return i(o.replaceSelectionWith(c).scrollIntoView()),!0}}},t.prototype.commands=function(){return{addImage:this.addImage()}},t}(G),pf=1,ioe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"thematicBreak"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:w({rawHTML:{default:null}},he()),group:"block",parseDOM:[{tag:"hr"}],selectable:!1,toDOM:function(e){var n=e.attrs;return["div",re(n),[n.rawHTML||"hr"]]}}},enumerable:!1,configurable:!0}),t.prototype.hr=function(){var e=this;return function(){return function(n,i){var a,o=n.selection,s=o.$from,l=o.$to;if(s===l){var u=n.doc,c=n.schema.nodes,f=c.thematicBreak,d=c.paragraph,h=[f.create()],p=s.node(pf),v=u.child(u.childCount-1)===p,m=u.resolve(s.after(pf)),g=((a=s.nodeAfter)===null||a===void 0?void 0:a.type.name)===e.name;return(v||g)&&h.push(d.create()),i(n.tr.insert(m.pos,h).scrollIntoView()),!0}return!1}}},t.prototype.commands=function(){return{hr:this.hr()}},t.prototype.keymaps=function(){var e=this.hr()();return{"Mod-l":e,"Mod-L":e}},t}(G),aoe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=["b","strong"].map(function(n){return{tag:n,getAttrs:function(i){var a=i.getAttribute("data-raw-html");return w({},a&&{rawHTML:a})}}});return{attrs:w({rawHTML:{default:null}},he()),parseDOM:e,toDOM:function(n){var i=n.attrs;return[i.rawHTML||"strong",re(i)]}}},enumerable:!1,configurable:!0}),t.prototype.bold=function(){return function(){return function(e,n){return li(e.schema.marks.strong)(e,n)}}},t.prototype.commands=function(){return{bold:this.bold()}},t.prototype.keymaps=function(){var e=this.bold()();return{"Mod-b":e,"Mod-B":e}},t}(Q),ooe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"emph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=["i","em"].map(function(n){return{tag:n,getAttrs:function(i){var a=i.getAttribute("data-raw-html");return w({},a&&{rawHTML:a})}}});return{attrs:w({rawHTML:{default:null}},he()),parseDOM:e,toDOM:function(n){var i=n.attrs;return[i.rawHTML||"em",re(i)]}}},enumerable:!1,configurable:!0}),t.prototype.italic=function(){return function(){return function(e,n){return li(e.schema.marks.emph)(e,n)}}},t.prototype.commands=function(){return{italic:this.italic()}},t.prototype.keymaps=function(){var e=this.italic()();return{"Mod-i":e,"Mod-I":e}},t}(Q),soe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=["s","del"].map(function(n){return{tag:n,getAttrs:function(i){var a=i.getAttribute("data-raw-html");return w({},a&&{rawHTML:a})}}});return{attrs:w({rawHTML:{default:null}},he()),parseDOM:e,toDOM:function(n){var i=n.attrs;return[i.rawHTML||"del",re(i)]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n){return li(e.schema.marks.strike)(e,n)}}},t.prototype.keymaps=function(){var e=this.commands()();return{"Mod-s":e,"Mod-S":e}},t}(Q),loe=function(r){E(t,r);function t(e){var n=r.call(this)||this;return n.linkAttributes=e,n}return Object.defineProperty(t.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return{attrs:w({linkUrl:{default:""},title:{default:null},rawHTML:{default:null}},he()),inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(n){var i=Ir(n,{RETURN_DOM_FRAGMENT:!0}).firstChild,a=i.getAttribute("href")||"",o=i.getAttribute("title")||"",s=i.getAttribute("data-raw-html");return w({linkUrl:a,title:o},s&&{rawHTML:s})}}],toDOM:function(n){var i=n.attrs;return[i.rawHTML||"a",w(w({href:tn(i.linkUrl)},e.linkAttributes),re(i))]}}},enumerable:!1,configurable:!0}),t.prototype.addLink=function(){return function(e){return function(n,i){var a=e,o=a.linkUrl,s=a.linkText,l=s===void 0?"":s,u=n.schema,c=n.tr,f=n.selection,d=f.empty,h=f.from,p=f.to;if(h&&p&&o){var v={linkUrl:o},m=u.mark("link",v);if(d&&l){var g=ye(u,l,m);c.replaceRangeWith(h,p,g)}else c.addMark(h,p,m);return i(c.scrollIntoView()),!0}return!1}}},t.prototype.toggleLink=function(){return function(e){return function(n,i){return li(n.schema.marks.link,e)(n,i)}}},t.prototype.commands=function(){return{addLink:this.addLink(),toggleLink:this.toggleLink()}},t}(Q),uoe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"code"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{attrs:w({rawHTML:{default:null}},he()),parseDOM:[{tag:"code",getAttrs:function(e){var n=e.getAttribute("data-raw-html");return w({},n&&{rawHTML:n})}}],toDOM:function(e){var n=e.attrs;return[n.rawHTML||"code",re(n)]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n){return li(e.schema.marks.code)(e,n)}}},t.prototype.keymaps=function(){var e=this.commands()();return{"Shift-Mod-c":e,"Shift-Mod-C":e}},t}(Q),coe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"customBlock"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",attrs:{info:{default:null}},atom:!0,code:!0,defining:!0,parseDOM:[{tag:"div[data-custom-info]",getAttrs:function(e){var n=e.getAttribute("data-custom-info");return{info:n}}}],toDOM:function(e){var n=e.attrs;return["div",{"data-custom-info":n.info||null},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(e){return function(n,i){return e!=null&&e.info?Zs(n.schema.nodes.customBlock,e)(n,i):!1}}},t}(G),foe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"frontMatter"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-front-matter]"}],toDOM:function(){return["div",{"data-front-matter":"true"},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n,i){var a=e.selection.$from;return i.endOfTextblock("down")&&a.node().type.name==="frontMatter"?Ys(e,n):!1}}},t.prototype.keymaps=function(){return{Enter:this.commands()()}},t}(G),doe=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"name",{get:function(){return"htmlComment"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{preserveWhitespace:"full",tag:"div[data-html-comment]"}],toDOM:function(){return["div",{"data-html-comment":"true"},0]}}},enumerable:!1,configurable:!0}),t.prototype.commands=function(){return function(){return function(e,n,i){var a=e.selection.$from;return i.endOfTextblock("down")&&a.node().type.name==="htmlComment"?Ys(e,n):!1}}},t.prototype.keymaps=function(){return{Enter:this.commands()()}},t}(G);function hoe(r){return new kp([new Eae,new Mae,new Nae,new Dae,new Lae,new Aae,new Iae,new Rae,new Pae,new Xae,new Yae,new Zae,new eoe,new toe,new roe,new noe,new ioe,new aoe,new ooe,new soe,new loe(r),new uoe,new coe,new foe,new yp,new doe])}var poe=O("contents"),voe=function(r){E(t,r);function t(e,n){var i=r.call(this,e)||this,a=n.toDOMAdaptor,o=n.htmlSchemaMap,s=o===void 0?{}:o,l=n.linkAttributes,u=l===void 0?{}:l,c=n.useCommandShortcut,f=c===void 0?!0:c,d=n.wwPlugins,h=d===void 0?[]:d,p=n.wwNodeViews,v=p===void 0?{}:p;return i.editorType="wysiwyg",i.el.classList.add("ww-mode"),i.toDOMAdaptor=a,i.linkAttributes=u,i.extraPlugins=h,i.pluginNodeViews=v,i.specs=i.createSpecs(),i.schema=i.createSchema(s),i.context=i.createContext(),i.keymaps=i.createKeymaps(f),i.view=i.createView(),i.commands=i.createCommands(),i.specs.setContext(w(w({},i.context),{view:i.view})),i.initEvent(),i}return t.prototype.createSpecs=function(){return hoe(this.linkAttributes)},t.prototype.createContext=function(){return{schema:this.schema,eventEmitter:this.eventEmitter}},t.prototype.createSchema=function(e){return new Bd({nodes:w(w({},this.specs.nodes),e.nodes),marks:w(w({},this.specs.marks),e.marks)})},t.prototype.createPlugins=function(){return qe([Die(),Rie(this.eventEmitter),Pie(),zie(this.eventEmitter)],this.createPluginProps()).concat(this.defaultPlugins)},t.prototype.createPluginNodeViews=function(){var e=this,n=e.eventEmitter,i=e.pluginNodeViews,a={};return i&&Object.keys(i).forEach(function(o){a[o]=function(s,l,u){return i[o](s,l,u,n)}}),a},t.prototype.createView=function(){var e=this,n=this,i=n.toDOMAdaptor,a=n.eventEmitter;return new Js(this.el,{state:this.createState(),attributes:{class:poe},nodeViews:w({customBlock:function(o,s,l){return new Vie(o,s,l,i)},image:function(o,s,l){return new Uie(o,s,l,a)},codeBlock:function(o,s,l){return new Gie(o,s,l,a)},widget:gp},this.createPluginNodeViews()),dispatchTransaction:function(o){var s=e.view.state.applyTransaction(o).state;e.view.updateState(s),e.emitChangeEvent(o.scrollIntoView()),e.eventEmitter.emit("setFocusedNode",s.selection.$from.node(1))},transformPastedHTML:uae,transformPasted:function(o){return pae(o,e.schema,ha(e.view.state.selection.$from))},handlePaste:function(o,s,l){return Tae(o,l)},handleKeyDown:function(o,s){return e.eventEmitter.emit("keydown",e.editorType,s),!1},handleDOMEvents:{paste:function(o,s){var l=s.clipboardData||window.clipboardData,u=l==null?void 0:l.items;if(u){var c=Tt(u).some(function(d){return d.kind==="string"&&d.type==="text/rtf"});if(!c){var f=mp(u);f&&(s.preventDefault(),vl(e.eventEmitter,f,s.type))}}return!1},keyup:function(o,s){return e.eventEmitter.emit("keyup",e.editorType,s),!1},scroll:function(){return e.eventEmitter.emit("scroll","editor"),!0}}})},t.prototype.createCommands=function(){return this.specs.commands(this.view,Ml())},t.prototype.getHTML=function(){return pl(this.view.dom.innerHTML)},t.prototype.getModel=function(){return this.view.state.doc},t.prototype.getSelection=function(){var e=this.view.state.selection,n=e.from,i=e.to;return[n,i]},t.prototype.getSchema=function(){return this.view.state.schema},t.prototype.replaceSelection=function(e,n,i){var a=this.view.state,o=a.schema,s=a.tr,l=e.split(`
`),u=l.map(function(d){return na(o,Tr(d,o))}),c=new I(L.from(u),1,1),f=Dt(n)&&Dt(i)?s.replaceRange(n,i,c):s.replaceSelection(c);this.view.dispatch(f),this.focus()},t.prototype.deleteSelection=function(e,n){var i=this.view.state.tr,a=Dt(e)&&Dt(n)?i.deleteRange(e,n):i.deleteSelection();this.view.dispatch(a.scrollIntoView())},t.prototype.getSelectedText=function(e,n){var i=this.view.state,a=i.doc,o=i.selection,s=o.from,l=o.to;return Dt(e)&&Dt(n)&&(s=e,l=n),a.textBetween(s,l,`
`)},t.prototype.setModel=function(e,n){n===void 0&&(n=!1);var i=this.view.state,a=i.tr,o=i.doc;this.view.dispatch(a.replaceWith(0,o.content.size,e)),n&&this.moveCursorToEnd(!0)},t.prototype.setSelection=function(e,n){n===void 0&&(n=e);var i=this.view.state.tr,a=K(i,e,n);this.view.dispatch(i.setSelection(a).scrollIntoView())},t.prototype.addWidget=function(e,n,i){var a=this.view,o=a.dispatch,s=a.state;o(s.tr.setMeta("widget",{pos:i!=null?i:s.selection.to,node:e,style:n}))},t.prototype.replaceWithWidget=function(e,n,i){var a=this.view.state,o=a.tr,s=a.schema,l=Tr(i,s);this.view.dispatch(o.replaceWith(e,n,l))},t.prototype.getRangeInfoOfNode=function(e){var n=this.view.state,i=n.doc,a=n.selection,o=e?i.resolve(e):a.$from,s=o.marks(),l=o.node(),u=o.start(),c=o.end(),f=l.type.name;if(s.length||f==="paragraph"){var d=s[s.length-1],h=function(p){return p.length?be(p,d):!0};f=d?d.type.name:"text",l.forEach(function(p,v){var m=p.isText,g=p.nodeSize,k=p.marks,b=o.pos-u;m&&v<=b&&v+g>=b&&h(k)&&(u=u+v,c=u+g)})}return{range:[u,c],type:f}},t}(bp),moe=ut,goe=Zi;function yoe(r){return!moe(r)&&!goe(r)}var boe=yoe,koe=boe;function woe(r){return koe(r)&&r!==!1}var Coe=woe,Toe=Coe;function xoe(r){return!Toe(r)}var Soe=xoe,vf=["afterPreviewRender","updatePreview","changeMode","needChangeMode","command","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","scroll","contextmenu","show","hide","changeLanguage","changeToolbarState","toggleScrollSync","mixinTableOffsetMapPrototype","setFocusedNode","removePopupWidget","query","openPopup","closePopup","addImageBlobHook","beforePreviewRender","beforeConvertWysiwygToMarkdown","load","loadUI","change","caretChange","destroy","focus","blur","keydown","keyup"],Rv=function(){function r(){var t=this;this.events=new Sv,this.eventTypes=vf.reduce(function(e,n){return w(w({},e),{type:n})},{}),this.hold=!1,vf.forEach(function(e){t.addEventType(e)})}return r.prototype.listen=function(t,e){var n=this.getTypeInfo(t),i=this.events.get(n.type)||[];if(!this.hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(e.namespace=n.namespace),i.push(e),this.events.set(n.type,i)},r.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.getTypeInfo(t),a=this.events.get(i.type),o=[];return!this.hold&&a&&a.forEach(function(s){var l=s.apply(void 0,e);ut(l)||o.push(l)}),o},r.prototype.emitReduce=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var a=this.events.get(t);return!this.hold&&a&&a.forEach(function(o){var s=o.apply(void 0,qe([e],n));Soe(s)||(e=s)}),e},r.prototype.getTypeInfo=function(t){var e=t.split(".");return{type:e[0],namespace:e[1]}},r.prototype.hasEventType=function(t){return!ut(this.eventTypes[this.getTypeInfo(t).type])},r.prototype.addEventType=function(t){if(this.hasEventType(t))throw new Error("There is already have event type "+t);this.eventTypes[t]=t},r.prototype.removeEventHandler=function(t,e){var n=this,i=this.getTypeInfo(t),a=i.type,o=i.namespace;a&&e?this.removeEventHandlerWithHandler(a,e):a&&!o?this.events.delete(a):!a&&o?this.events.forEach(function(s,l){n.removeEventHandlerWithTypeInfo(l,o)}):a&&o&&this.removeEventHandlerWithTypeInfo(a,o)},r.prototype.removeEventHandlerWithHandler=function(t,e){var n=this.events.get(t);if(n){var i=n.indexOf(e);n.indexOf(e)>=0&&n.splice(i,1)}},r.prototype.removeEventHandlerWithTypeInfo=function(t,e){var n=[],i=this.events.get(t);!i||(i.map(function(a){return a.namespace!==e&&n.push(a),null}),this.events.set(t,n))},r.prototype.getEvents=function(){return this.events},r.prototype.holdEventInvoke=function(t){this.hold=!0,t(),this.hold=!1},r}(),Eoe=function(){function r(t,e,n,i){this.eventEmitter=t,this.mdCommands=e,this.wwCommands=n,this.getEditorType=i,this.initEvent()}return r.prototype.initEvent=function(){var t=this;this.eventEmitter.listen("command",function(e,n){t.exec(e,n)})},r.prototype.addCommand=function(t,e,n){t==="markdown"?this.mdCommands[e]=n:this.wwCommands[e]=n},r.prototype.deleteCommand=function(t,e){t==="markdown"?delete this.mdCommands[e]:delete this.wwCommands[e]},r.prototype.exec=function(t,e){var n=this.getEditorType();n==="markdown"?this.mdCommands[t](e):this.wwCommands[t](e)},r}();function _i(r){return r[r.length-1]===`
`?r.slice(0,r.length-1):r}function Os(r,t){var e=r.schema,n=t.literal,i=n.match(gn);if(i){var a=i[1],o=i[3],s=(a||o).toLowerCase();return t.type==="htmlInline"&&!!(e.marks[s]||e.nodes[s])}return!1}function Ns(r){var t=r.type;return be(["text","strong","emph","strike","image","link","code"],t)}function mf(r){return(r==null?void 0:r.type)==="softbreak"}function Ln(r){var t=r.type,e=r.literal,n=t==="htmlInline"&&e.match(gn);if(n){var i=n[1],a=n[3],o=i||a;if(o)return be(["ul","ol","li"],o.toLowerCase())}return!1}function Moe(r){var t=r.literal,e=/data-task/.test(t),n=/data-task-checked/.test(t);return{task:e,checked:n}}function gf(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=document.createElement("div");n.innerHTML=Ir(r);var i=n.firstChild;return t.map(function(a){return i.getAttribute(a)||""})}function Ooe(r){var t={};return Object.keys(r).forEach(function(e){var n=e.split(", ");n.forEach(function(i){var a=i.toLowerCase();t[a]=r[e]})}),t}var Noe={"b, strong":function(r,t,e){var n=r.schema.marks.strong;e?r.openMark(n.create({rawHTML:e})):r.closeMark(n)},"i, em":function(r,t,e){var n=r.schema.marks.emph;e?r.openMark(n.create({rawHTML:e})):r.closeMark(n)},"s, del":function(r,t,e){var n=r.schema.marks.strike;e?r.openMark(n.create({rawHTML:e})):r.closeMark(n)},code:function(r,t,e){var n=r.schema.marks.code;e?r.openMark(n.create({rawHTML:e})):r.closeMark(n)},a:function(r,t,e){var n=t.literal,i=r.schema.marks.link;if(e){var a=gf(n,"href")[0];r.openMark(i.create({linkUrl:a,rawHTML:e}))}else r.closeMark(i)},img:function(r,t,e){var n=t.literal;if(e){var i=gf(n,"src","alt"),a=i[0],o=i[1],s=r.schema.nodes.image;r.addNode(s,w({rawHTML:e,imageUrl:a},o&&{altText:o}))}},hr:function(r,t,e){r.addNode(r.schema.nodes.thematicBreak,{rawHTML:e})},br:function(r,t){var e=r.schema.nodes.paragraph,n=t.parent,i=t.prev,a=t.next;(n==null?void 0:n.type)==="paragraph"?(mf(i)&&r.openNode(e),mf(a)?r.closeNode():a&&(r.closeNode(),r.openNode(e))):(n==null?void 0:n.type)==="tableCell"&&(i&&(Ns(i)||Os(r,i))&&r.closeNode(),a&&(Ns(a)||Os(r,a))&&r.openNode(e))},pre:function(r,t,e){var n,i,a=document.createElement("div");a.innerHTML=t.literal;var o=(i=(n=a.firstChild)===null||n===void 0?void 0:n.firstChild)===null||i===void 0?void 0:i.textContent;r.openNode(r.schema.nodes.codeBlock,{rawHTML:e}),r.addText(_i(o)),r.closeNode()},"ul, ol":function(r,t,e){if(t.parent.type==="tableCell"){var n=r.schema.nodes,i=n.bulletList,a=n.orderedList,o=n.paragraph,s=e==="ul"?i:a;e?(t.prev&&!Ln(t.prev)&&r.closeNode(),r.openNode(s,{rawHTML:e})):(r.closeNode(),t.next&&!Ln(t.next)&&r.openNode(o))}},li:function(r,t,e){var n;if(((n=t.parent)===null||n===void 0?void 0:n.type)==="tableCell"){var i=r.schema.nodes,a=i.listItem,o=i.paragraph;if(e){var s=Moe(t);t.prev&&!Ln(t.prev)&&r.closeNode(),r.openNode(a,w({rawHTML:e},s)),t.next&&!Ln(t.next)&&r.openNode(o)}else t.prev&&!Ln(t.prev)&&r.closeNode(),r.closeNode()}}},Doe=Ooe(Noe);function yf(r){return r.type==="htmlInline"&&us.test(r.literal)}function Pv(r){Tt(r.childNodes).forEach(function(t){if(Oa(t)){var e=t.nodeName.toLowerCase();t.setAttribute("data-raw-html",e),t.childNodes&&Pv(t)}})}var bf={text:function(r,t){r.addText(t.literal||"")},paragraph:function(r,t,e,n){var i,a=e.entering;if(a){var o=r.schema.nodes.paragraph;((i=t.prev)===null||i===void 0?void 0:i.type)==="paragraph"&&(r.openNode(o,n),r.closeNode()),r.openNode(o,n)}else r.closeNode()},heading:function(r,t,e,n){var i=e.entering;if(i){var a=t,o=a.level,s=a.headingType;r.openNode(r.schema.nodes.heading,w({level:o,headingType:s},n))}else r.closeNode()},codeBlock:function(r,t,e){var n=r.schema.nodes.codeBlock,i=t,a=i.info,o=i.literal;r.openNode(n,w({language:a},e)),r.addText(_i(o||"")),r.closeNode()},list:function(r,t,e,n){var i=e.entering;if(i){var a=r.schema.nodes,o=a.bulletList,s=a.orderedList,l=t.listData,u=l.type,c=l.start;u==="bullet"?r.openNode(o,n):r.openNode(s,w({order:c},n))}else r.closeNode()},item:function(r,t,e,n){var i=e.entering,a=r.schema.nodes.listItem,o=t.listData,s=o.task,l=o.checked;if(i){var u=w(w(w({},s&&{task:s}),l&&{checked:l}),n);r.openNode(a,u)}else r.closeNode()},blockQuote:function(r,t,e,n){var i=e.entering;i?r.openNode(r.schema.nodes.blockQuote,n):r.closeNode()},image:function(r,t,e,n){var i=e.entering,a=e.skipChildren,o=r.schema.nodes.image,s=t,l=s.destination,u=s.firstChild;i&&a&&a(),r.addNode(o,w(w({imageUrl:l},u&&{altText:u.literal}),n))},thematicBreak:function(r,t,e,n){r.addNode(r.schema.nodes.thematicBreak,n)},strong:function(r,t,e,n){var i=e.entering,a=r.schema.marks.strong;i?r.openMark(a.create(n)):r.closeMark(a)},emph:function(r,t,e,n){var i=e.entering,a=r.schema.marks.emph;i?r.openMark(a.create(n)):r.closeMark(a)},link:function(r,t,e,n){var i=e.entering,a=r.schema.marks.link,o=t,s=o.destination,l=o.title;if(i){var u=w({linkUrl:s,title:l},n);r.openMark(a.create(u))}else r.closeMark(a)},softbreak:function(r,t){if(t.parent.type==="paragraph"){var e=t.prev,n=t.next;e&&!yf(e)&&r.closeNode(),n&&!yf(n)&&r.openNode(r.schema.nodes.paragraph)}},table:function(r,t,e,n){var i=e.entering;i?r.openNode(r.schema.nodes.table,n):r.closeNode()},tableHead:function(r,t,e,n){var i=e.entering;i?r.openNode(r.schema.nodes.tableHead,n):r.closeNode()},tableBody:function(r,t,e,n){var i=e.entering;i?r.openNode(r.schema.nodes.tableBody,n):r.closeNode()},tableRow:function(r,t,e,n){var i=e.entering;i?r.openNode(r.schema.nodes.tableRow,n):r.closeNode()},tableCell:function(r,t,e){var n=e.entering;if(!t.ignored){var i=function(p){return p&&(Ns(p)||Os(r,p))};if(n){var a=r.schema.nodes,o=a.tableHeadCell,s=a.tableBodyCell,l=a.paragraph,u=t.parent.parent,c=u.type==="tableHead"?o:s,f=u.parent,d=(f.columns[t.startIdx]||{}).align,h=w({},t.attrs);d&&(h.align=d),r.openNode(c,h),i(t.firstChild)&&r.openNode(l)}else i(t.lastChild)&&r.closeNode(),r.closeNode()}},strike:function(r,t,e,n){var i=e.entering,a=r.schema.marks.strike;i?r.openMark(a.create(n)):r.closeMark(a)},code:function(r,t,e,n){var i=r.schema.marks.code;r.openMark(i.create(n)),r.addText(_i(t.literal||"")),r.closeMark(i)},customBlock:function(r,t){var e=r.schema.nodes,n=e.customBlock,i=e.paragraph,a=t,o=a.info,s=a.literal;r.openNode(n,{info:o}),r.addText(_i(s||"")),r.closeNode(),t.next||(r.openNode(i),r.closeNode())},frontMatter:function(r,t){r.openNode(r.schema.nodes.frontMatter),r.addText(t.literal),r.closeNode()},htmlInline:function(r,t){var e=t.literal,n=e.match(gn),i=n[1],a=n[3],o=(i||a).toLowerCase(),s=r.schema.marks[o],l=Ir(e);if(s!=null&&s.spec.attrs.htmlInline)if(i){var u=xs(l);r.openMark(s.create({htmlAttrs:u}))}else r.closeMark(s);else{var c=Doe[o];c&&c(r,t,i)}},htmlBlock:function(r,t){var e=t.literal,n=document.createElement("div"),i=hw.test(e);if(i)r.openNode(r.schema.nodes.htmlComment),r.addText(t.literal),r.closeNode();else{var a=e.match(gn),o=a[1],s=a[3],l=(o||s).toLowerCase(),u=r.schema.nodes[l],c=Ir(e);if(u!=null&&u.spec.attrs.htmlBlock){var f=xs(c),d=hv(t,l);r.addNode(u,{htmlAttrs:f,childrenHTML:d})}else n.innerHTML=c,Pv(n),r.convertByDOMParser(n)}},customInline:function(r,t,e){var n=e.entering,i=e.skipChildren,a=t,o=a.info,s=a.firstChild,l=r.schema;if(o.indexOf("widget")!==-1&&n){var u=ip(t);i(),r.addNode(l.nodes.widget,{info:o},[l.text(rp(o,u))])}else{var c="$$";n&&(c+=s?o+" ":o),r.addText(c)}}};function Loe(r){var t=Object.keys(r),e=w({},bf),n=new Sl({gfm:!0,nodeId:!0,convertors:r}),i=n.getConvertors();return t.forEach(function(a){var o=bf[a];o&&!be(["htmlBlock","htmlInline"],a)&&(e[a]=function(s,l,u){u.origin=function(){return i[a](l,u,i)};var c=r[a](l,u),f;if(c){var d=Array.isArray(c)?c[0]:c,h=d.attributes,p=d.classNames;f={htmlAttrs:h,classNames:p}}o(s,l,u,f)})}),e}function Aoe(r,t){return r.isText&&t.isText&&ji.sameSet(r.marks,t.marks)?r.withText(r.text+t.text):!1}var Ioe=function(){function r(t,e){this.schema=t,this.convertors=e,this.stack=[{type:this.schema.topNodeType,attrs:null,content:[]}],this.marks=ji.none}return r.prototype.top=function(){return Ee(this.stack)},r.prototype.push=function(t){this.stack.length&&this.top().content.push(t)},r.prototype.addText=function(t){if(t){var e=this.top().content,n=Ee(e),i=this.schema.text(t,this.marks),a=n&&Aoe(n,i);a?e[e.length-1]=a:e.push(i)}},r.prototype.openMark=function(t){this.marks=t.addToSet(this.marks)},r.prototype.closeMark=function(t){this.marks=t.removeFromSet(this.marks)},r.prototype.addNode=function(t,e,n){var i=t.createAndFill(e,n,this.marks);return i?(this.push(i),i):null},r.prototype.openNode=function(t,e){this.stack.push({type:t,attrs:e,content:[]})},r.prototype.closeNode=function(){this.marks.length&&(this.marks=ji.none);var t=this.stack.pop(),e=t.type,n=t.attrs,i=t.content;return this.addNode(e,n,i)},r.prototype.convertByDOMParser=function(t){var e=this,n=Pd.fromSchema(this.schema).parse(t);n.content.forEach(function(i){return e.push(i)})},r.prototype.closeUnmatchedHTMLInline=function(t,e){var n;if(!e&&t.type!=="htmlInline")for(var i=this.stack.length-1,a=i;a>=0;a-=1){var o=this.stack[a];if(!((n=o.attrs)===null||n===void 0)&&n.rawHTML)o.content.length?this.closeNode():this.stack.pop();else break}},r.prototype.convert=function(t,e){for(var n=t.walker(),i=n.next(),a=function(){var s=i.node,l=i.entering,u=o.convertors[s.type],c=!1;if(u){var f={entering:l,leaf:!Gk(s),getChildrenText:Jk,options:{gfm:!0,nodeId:!1,tagFilter:!1,softbreak:`
`},skipChildren:function(){c=!0}};if(o.closeUnmatchedHTMLInline(s,l),u(o,s,f),(e==null?void 0:e.node)===s){var d=o.stack.reduce(function(h,p){return h+p.content.reduce(function(v,m){return v+m.nodeSize},0)},0)+1;e.setMappedPos(d)}}c&&(n.resumeAt(s,!1),n.next()),i=n.next()},o=this;i;)a()},r.prototype.convertNode=function(t,e){return this.convert(t,e),this.stack.length?this.closeNode():null},r}();function Roe(r,t,e){var n=e[0],i=e[1];r.write(n),r.convertInline(t),r.write(i)}function Poe(r,t,e){var n=t.node,i=t.parent,a=e[0],o=e[1];r.stopNewline=!0,r.write(a),r.convertNode(n),r.write(o),(i==null?void 0:i.type.name)==="doc"&&(r.closeBlock(n),r.stopNewline=!1)}function Boe(r,t){var e=r.length,n="",i="";return t==="left"?(n=":",e-=1):t==="right"?(i=":",e-=1):t==="center"&&(n=":",i=":",e-=2),""+n+ea("-",Math.max(e,3))+i}var Ds={text:function(r,t){var e,n=t.node,i=(e=n.text)!==null&&e!==void 0?e:"";(n.marks||[]).some(function(a){return a.type.name==="link"})?r.text(ta(i),!1):r.text(i)},paragraph:function(r,t){var e=t.node,n=t.parent,i=t.index,a=i===void 0?0:i;if(r.stopNewline)r.convertInline(e);else{var o=a===0,s=!o&&n.child(a-1),l=s&&s.childCount===0,u=a<n.childCount-1&&n.child(a+1),c=u&&u.type.name==="paragraph",f=e.childCount===0;if(f&&l)r.write(`<br>
`);else if(f&&!l&&!o){if((n==null?void 0:n.type.name)==="listItem"){var d=r.getDelim();r.setDelim(""),r.write("<br>"),r.setDelim(d)}r.write(`
`)}else r.convertInline(e),c?r.write(`
`):r.closeBlock(e)}},heading:function(r,t,e){var n=t.node,i=e.delim,a=n.attrs.headingType;a==="atx"?(r.write(i+" "),r.convertInline(n),r.closeBlock(n)):(r.convertInline(n),r.ensureNewLine(),r.write(i),r.closeBlock(n))},codeBlock:function(r,t,e){var n=t.node,i=e.delim,a=e.text,o=i,s=o[0],l=o[1];r.write(s),r.ensureNewLine(),r.text(a,!1),r.ensureNewLine(),r.write(l),r.closeBlock(n)},blockQuote:function(r,t,e){var n=t.node,i=t.parent,a=e.delim;(i==null?void 0:i.type.name)===n.type.name&&r.flushClose(1),r.wrapBlock(a,null,n,function(){return r.convertNode(n)})},bulletList:function(r,t,e){var n=t.node,i=e.delim;r.convertList(n,ea(" ",4),function(){return i+" "})},orderedList:function(r,t){var e=t.node,n=e.attrs.order||1;r.convertList(e,ea(" ",4),function(i){var a=String(n+i);return a+". "})},listItem:function(r,t){var e=t.node,n=e.attrs,i=n.task,a=n.checked;i&&r.write("["+(a?"x":" ")+"] "),r.convertNode(e)},image:function(r,t,e){var n=e.attrs;r.write("!["+(n==null?void 0:n.altText)+"]("+(n==null?void 0:n.imageUrl)+")")},thematicBreak:function(r,t,e){var n=t.node,i=e.delim;r.write(i),r.closeBlock(n)},table:function(r,t){var e=t.node;r.convertNode(e),r.closeBlock(e)},tableHead:function(r,t,e){var n=t.node,i=e.delim,a=n.firstChild;r.convertNode(n);var o=i!=null?i:"";!i&&a&&a.forEach(function(s){var l=s.textContent,u=s.attrs,c=Boe(l,u.align);o+="| "+c+" "}),r.write(o+"|"),r.ensureNewLine()},tableBody:function(r,t){var e=t.node;r.convertNode(e)},tableRow:function(r,t){var e=t.node;r.convertNode(e),r.write("|"),r.ensureNewLine()},tableHeadCell:function(r,t,e){var n=t.node,i=e.delim,a=i===void 0?"| ":i;r.write(a),r.convertTableCell(n),r.write(" ")},tableBodyCell:function(r,t,e){var n=t.node,i=e.delim,a=i===void 0?"| ":i;r.write(a),r.convertTableCell(n),r.write(" ")},customBlock:function(r,t,e){var n=t.node,i=e.delim,a=e.text,o=i,s=o[0],l=o[1];r.write(s),r.ensureNewLine(),r.text(a,!1),r.ensureNewLine(),r.write(l),r.closeBlock(n)},frontMatter:function(r,t,e){var n=t.node,i=e.text;r.text(i,!1),r.closeBlock(n)},widget:function(r,t,e){var n=e.text;r.write(n)},html:function(r,t,e){var n=t.node,i=e.text;r.write(i),n.attrs.htmlBlock&&r.closeBlock(n)},htmlComment:function(r,t,e){var n=t.node,i=e.text;r.write(i),r.closeBlock(n)}};function Hoe(r,t){var e=t.state,n=t.nodeInfo,i=t.params,a=i.rawHTML;a?Or(r,["heading","codeBlock"])>-1?Roe(e,n.node,a):Or(r,["image","thematicBreak"])>-1?e.write(a):Poe(e,n,a):Ds[r](e,n,i)}function kf(r,t){var e=r.text,n=/`+/g,i=0;if(r.isText&&e)for(var a=n.exec(e);a;)i=Math.max(i,a[0].length),a=n.exec(e);for(var o=i>0&&t>0?" `":"`",s=0;s<i;s+=1)o+="`";return i>0&&t<0&&(o+=" "),o}function et(r){return r?["<"+r+">","</"+r+">"]:null}function An(r){return r?"<"+r+">":null}function In(r){return r?"</"+r+">":null}var Rn={heading:function(r){var t=r.node,e=t.attrs,n=e.level,i=ea("#",n);return e.headingType==="setext"&&(i=n===1?"===":"---"),{delim:i,rawHTML:et(e.rawHTML)}},codeBlock:function(r){var t=r.node,e=t,n=e.attrs,i=e.textContent;return{delim:["```"+(n.language||""),"```"],rawHTML:et(n.rawHTML),text:i}},blockQuote:function(r){var t=r.node;return{delim:"> ",rawHTML:et(t.attrs.rawHTML)}},bulletList:function(r,t){var e=r.node,n=t.inTable,i=e.attrs.rawHTML;return n&&(i=i||"ul"),{delim:"*",rawHTML:et(i)}},orderedList:function(r,t){var e=r.node,n=t.inTable,i=e.attrs.rawHTML;return n&&(i=i||"ol"),{rawHTML:et(i)}},listItem:function(r,t){var e=r.node,n=t.inTable,i=e.attrs,a=i.task,o=i.checked,s=e.attrs.rawHTML;n&&(s=s||"li");var l=a?' class="task-list-item'+(o?" checked":"")+'"':"",u=a?" data-task"+(o?" data-task-checked":""):"";return{rawHTML:s?["<"+s+l+u+">","</"+s+">"]:null}},table:function(r){var t=r.node;return{rawHTML:et(t.attrs.rawHTML)}},tableHead:function(r){var t=r.node;return{rawHTML:et(t.attrs.rawHTML)}},tableBody:function(r){var t=r.node;return{rawHTML:et(t.attrs.rawHTML)}},tableRow:function(r){var t=r.node;return{rawHTML:et(t.attrs.rawHTML)}},tableHeadCell:function(r){var t=r.node;return{rawHTML:et(t.attrs.rawHTML)}},tableBodyCell:function(r){var t=r.node;return{rawHTML:et(t.attrs.rawHTML)}},image:function(r){var t=r.node,e=t.attrs,n=e.rawHTML,i=e.altText,a=e.imageUrl.replace(/&amp;/g,"&"),o=i?' alt="'+tn(i)+'"':"";return{rawHTML:n?"<"+n+' src="'+tn(a)+'"'+o+">":null,attrs:{altText:ta(i||""),imageUrl:a}}},thematicBreak:function(r){var t=r.node;return{delim:"***",rawHTML:An(t.attrs.rawHTML)}},customBlock:function(r){var t=r.node,e=t,n=e.attrs,i=e.textContent;return{delim:["$$"+n.info,"$$"],text:i}},frontMatter:function(r){var t=r.node;return{text:t.textContent}},widget:function(r){var t=r.node;return{text:t.textContent}},strong:function(r,t){var e=r.node,n=t.entering,i=e.attrs.rawHTML;return{delim:"**",rawHTML:n?An(i):In(i)}},emph:function(r,t){var e=r.node,n=t.entering,i=e.attrs.rawHTML;return{delim:"*",rawHTML:n?An(i):In(i)}},strike:function(r,t){var e=r.node,n=t.entering,i=e.attrs.rawHTML;return{delim:"~~",rawHTML:n?An(i):In(i)}},link:function(r,t){var e=r.node,n=t.entering,i=e.attrs,a=i.title,o=i.rawHTML,s=i.linkUrl.replace(/&amp;/g,"&"),l=a?' title="'+tn(a)+'"':"";return n?{delim:"[",rawHTML:o?"<"+o+' href="'+tn(s)+'"'+l+">":null}:{delim:"]("+s+(a?" "+Bk(ta(a)):"")+")",rawHTML:In(o)}},code:function(r,t){var e=r.node,n=r.parent,i=r.index,a=i===void 0?0:i,o=t.entering,s=o?kf(n.child(a),-1):kf(n.child(a-1),1),l=o?An(e.attrs.rawHTML):In(e.attrs.rawHTML);return{delim:s,rawHTML:l}},htmlComment:function(r){var t=r.node;return{text:t.textContent}},html:function(r,t){var e=r.node,n=t.entering,i=e.type.name,a=e.attrs.htmlAttrs,o="<"+i,s="</"+i+">";return Object.keys(a).forEach(function(l){o+=" "+l+'="'+a[l].replace(/"/g,"'")+'"'}),o+=">",e.attrs.htmlInline?{rawHTML:n?o:s}:{text:""+o+e.attrs.childrenHTML+s}}},wf={strong:{mixable:!0,removedEnclosingWhitespace:!0},emph:{mixable:!0,removedEnclosingWhitespace:!0},strike:{mixable:!0,removedEnclosingWhitespace:!0},code:{escape:!1},link:null,html:null};function Foe(r){var t={},e=Object.keys(Ds);return e.forEach(function(n){t[n]=function(i,a){var o=Ds[n];if(o){var s=r[n],l=s?s(a,{inTable:i.inTable}):{};Hoe(n,{state:i,nodeInfo:a,params:l})}}}),t}function qoe(r){var t={},e=Object.keys(wf);return e.forEach(function(n){t[n]=function(i,a){var o=wf[n],s=r[n],l=s&&i&&!ut(a),u=l?s(i,{entering:a}):{};return w(w({},u),o)}}),t}function _oe(r){var t=Object.keys(r);t.forEach(function(i){var a=Rn[i],o=r[i];a?Rn[i]=function(s,l){return l.origin=function(){return a(s,l)},o(s,l)}:Rn[i]=o,delete r[i]});var e=Foe(Rn),n=qoe(Rn);return{nodeTypeConvertors:e,markTypeConvertors:n}}var $oe=function(){function r(t){var e=t.nodeTypeConvertors,n=t.markTypeConvertors;this.nodeTypeConvertors=e,this.markTypeConvertors=n,this.delim="",this.result="",this.closed=!1,this.tightList=!1,this.stopNewline=!1,this.inTable=!1}return r.prototype.getMarkConvertor=function(t){var e=t.attrs.htmlInline?"html":t.type.name;return this.markTypeConvertors[e]},r.prototype.isInBlank=function(){return/(^|\n)$/.test(this.result)},r.prototype.markText=function(t,e,n,i){var a=this.getMarkConvertor(t);if(a){var o=a({node:t,parent:n,index:i},e),s=o.delim,l=o.rawHTML;return l||s}return""},r.prototype.setDelim=function(t){this.delim=t},r.prototype.getDelim=function(){return this.delim},r.prototype.flushClose=function(t){if(!this.stopNewline&&this.closed){if(this.isInBlank()||(this.result+=`
`),t||(t=2),t>1){var e=this.delim,n=/\s+$/.exec(e);n&&(e=e.slice(0,e.length-n[0].length));for(var i=1;i<t;i+=1)this.result+=e+`
`}this.closed=!1}},r.prototype.wrapBlock=function(t,e,n,i){var a=this.getDelim();this.write(e||t),this.setDelim(this.getDelim()+t),i(),this.setDelim(a),this.closeBlock(n)},r.prototype.ensureNewLine=function(){this.isInBlank()||(this.result+=`
`)},r.prototype.write=function(t){t===void 0&&(t=""),this.flushClose(),this.delim&&this.isInBlank()&&(this.result+=this.delim),t&&(this.result+=t)},r.prototype.closeBlock=function(t){this.closed=t},r.prototype.text=function(t,e){e===void 0&&(e=!0);for(var n=t.split(`
`),i=0;i<n.length;i+=1)this.write(),this.result+=e?Pk(n[i]):n[i],i!==n.length-1&&(this.result+=`
`)},r.prototype.convertBlock=function(t,e,n){var i=t.type.name,a=this.nodeTypeConvertors[i],o={node:t,parent:e,index:n};t.attrs.htmlBlock?this.nodeTypeConvertors.html(this,o):a&&a(this,o)},r.prototype.convertInline=function(t){var e=this,n=[],i="",a=function(o,s,l){var u=o?o.marks:[],c=i;i="";var f=o&&o.isText&&u.some(function(P){var V=e.getMarkConvertor(P),le=V&&V();return le&&le.removedEnclosingWhitespace});if(f&&o&&o.text){var d=/^(\s*)(.*?)(\s*)$/m.exec(o.text),h=d[1],p=d[2],v=d[3];c+=h,i=v,(h||v)&&(o=p?o.withText(p):null,o||(u=n))}for(var m=u.length&&Ee(u),g=m&&e.getMarkConvertor(m),k=g&&g(),b=k&&k.escape===!1,C=u.length-(b?1:0),T=0;T<C;T+=1){var p=u[T];if(k&&!k.mixable)break;for(var S=0;S<n.length;S+=1){var M=n[S];if(k&&!k.mixable)break;if(p.eq(M)){T>S?u=u.slice(0,S).concat(p).concat(u.slice(S,T)).concat(u.slice(T+1,C)):S>T&&(u=u.slice(0,T).concat(u.slice(T+1,S)).concat(p).concat(u.slice(S,C)));break}}}for(var N=0;N<Math.min(n.length,C)&&u[N].eq(n[N]);)N+=1;for(;N<n.length;){var R=n.pop();R&&e.text(e.markText(R,!1,t,l),!1)}if(c&&e.text(c),o){for(;n.length<C;){var p=u[n.length];n.push(p),e.text(e.markText(p,!0,t,l),!1)}b&&o.isText?e.text(e.markText(m,!0,t,l)+o.text+e.markText(m,!1,t,l+1),!1):e.convertBlock(o,t,l)}};t.forEach(a),a(null,null,t.childCount)},r.prototype.convertList=function(t,e,n){var i=this,a;this.closed&&this.closed.type===t.type?this.flushClose(3):this.tightList&&this.flushClose(1);var o=(a=t.attrs.tight)!==null&&a!==void 0?a:!0,s=this.tightList;this.tightList=o,t.forEach(function(l,u,c){c&&o&&i.flushClose(1),i.wrapBlock(e,n(c),t,function(){return i.convertBlock(l,t,c)})}),this.tightList=s},r.prototype.convertTableCell=function(t){var e=this;this.stopNewline=!0,this.inTable=!0,t.forEach(function(n,i,a){if(be(["bulletList","orderedList"],n.type.name))e.convertBlock(n,t,a),e.closed=!1;else if(e.convertInline(n),a<t.childCount-1){var o=t.child(a+1);o.type.name==="paragraph"&&e.write("<br>")}}),this.stopNewline=!1,this.inTable=!1},r.prototype.convertNode=function(t,e){var n=this;return t.forEach(function(i,a,o){if(n.convertBlock(i,t,o),(e==null?void 0:e.node)===i){var s=n.result.split(`
`);e.setMappedPos([s.length,Ee(s).length+1])}}),this.result},r}(),zoe=function(){function r(t,e,n,i){var a=this;this.setMappedPos=function(o){a.mappedPosWhenConverting=o},this.schema=t,this.eventEmitter=i,this.focusedNode=null,this.mappedPosWhenConverting=null,this.toWwConvertors=Loe(n),this.toMdConvertors=_oe(e||{}),this.eventEmitter.listen("setFocusedNode",function(o){return a.focusedNode=o})}return r.prototype.getMappedPos=function(){return this.mappedPosWhenConverting},r.prototype.getInfoForPosSync=function(){return{node:this.focusedNode,setMappedPos:this.setMappedPos}},r.prototype.toWysiwygModel=function(t){var e=new Ioe(this.schema,this.toWwConvertors);return e.convertNode(t,this.getInfoForPosSync())},r.prototype.toMarkdownText=function(t){var e=new $oe(this.toMdConvertors),n=e.convertNode(t,this.getInfoForPosSync());return n=this.eventEmitter.emitReduce("beforeConvertWysiwygToMarkdown",n),n},r}();function Voe(r){var t=r.plugin,e=r.eventEmitter,n=r.usageStatistics,i=r.instance,a={Plugin:Xe,PluginKey:ai,Selection:Ct,TextSelection:_t},o={Decoration:js,DecorationSet:Gs},s={Fragment:L},l={InputRule:jh,inputRules:Gh,undoInputRule:Lb},u={keymap:ei},c={eventEmitter:e,usageStatistics:n,instance:i,pmState:a,pmView:o,pmModel:s,pmRules:l,pmKeymap:u,i18n:B};if(xn(t)){var f=t[0],d=t[1],h=d===void 0?{}:d;return f(c,h)}return t(c)}function Bv(r){var t=r.plugins,e=r.eventEmitter,n=r.usageStatistics,i=r.instance;return e.listen("mixinTableOffsetMapPrototype",wie),(t!=null?t:[]).reduce(function(a,o){var s=Voe({plugin:o,eventEmitter:e,usageStatistics:n,instance:i});if(!s)throw new Error("The return value of the executed plugin is empty.");var l=s.markdownParsers,u=s.toHTMLRenderers,c=s.toMarkdownRenderers,f=s.markdownPlugins,d=s.wysiwygPlugins,h=s.wysiwygNodeViews,p=s.markdownCommands,v=s.wysiwygCommands,m=s.toolbarItems;return u&&(a.toHTMLRenderers=ra(a.toHTMLRenderers,u)),c&&(a.toMarkdownRenderers=ra(a.toMarkdownRenderers,c)),f&&(a.mdPlugins=a.mdPlugins.concat(f)),d&&(a.wwPlugins=a.wwPlugins.concat(d)),h&&(a.wwNodeViews=w(w({},a.wwNodeViews),h)),p&&(a.mdCommands=w(w({},a.mdCommands),p)),v&&(a.wwCommands=w(w({},a.wwCommands),v)),m&&(a.toolbarItems=a.toolbarItems.concat(m)),l&&(a.markdownParsers=w(w({},a.markdownParsers),l)),a},{toHTMLRenderers:{},toMarkdownRenderers:{},mdPlugins:[],wwPlugins:[],wwNodeViews:{},mdCommands:{},wwCommands:{},toolbarItems:[],markdownParsers:{}})}var Uoe="data-task",Woe="data-task-disabled",joe="checked";function Goe(r){["htmlBlock","htmlInline"].forEach(function(t){r[t]&&Object.keys(r[t]).forEach(function(e){return dv(e)})})}var Hv=function(){function r(t){var e=this;this.options=tl({linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,usageStatistics:!0,theme:"light"},t),this.eventEmitter=new Rv;var n=Zh(this.options.linkAttributes),i=Bv({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this})||{},a=i.toHTMLRenderers,o=i.markdownParsers,s=this.options,l=s.customHTMLRenderer,u=s.extendedAutolinks,c=s.referenceDefinition,f=s.frontMatter,d=s.customHTMLSanitizer,h={linkAttributes:n,customHTMLRenderer:w(w({},a),l),extendedAutolinks:u,referenceDefinition:c,frontMatter:f,sanitizer:d||Ir};Goe(h.customHTMLRenderer),this.options.events&&pn(this.options.events,function(b,C){e.on(C,b)});var p=this.options,v=p.el,m=p.initialValue,g=p.theme,k=v.innerHTML;g!=="light"&&v.classList.add(O(g)),v.innerHTML="",this.toastMark=new lv("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:u,referenceDefinition:c,disallowDeepHeading:!0,frontMatter:f,customParser:o}),this.preview=new vv(this.eventEmitter,w(w({},h),{isViewer:!0})),Dp(this.preview.previewContent,"mousedown",this.toggleTask.bind(this)),m?this.setMarkdown(m):k&&this.preview.setHTML(k),v.appendChild(this.preview.previewContent),this.eventEmitter.emit("load",this)}return r.prototype.toggleTask=function(t){var e=t.target,n=getComputedStyle(e,":before");!e.hasAttribute(Woe)&&e.hasAttribute(Uoe)&&cl(n,t.offsetX,t.offsetY)&&(fl(e,joe),this.eventEmitter.emit("change",{source:"viewer",date:t}))},r.prototype.setMarkdown=function(t){var e=this.toastMark.getLineTexts(),n=e.length,i=Ee(e),a=[n,i.length+1],o=this.toastMark.editMarkdown([1,1],a,t||"");this.eventEmitter.emit("updatePreview",o)},r.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},r.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},r.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},r.prototype.destroy=function(){Np(this.preview.el,"mousedown",this.toggleTask.bind(this)),this.preview.destroy(),this.eventEmitter.emit("destroy")},r.prototype.isViewer=function(){return!0},r.prototype.isMarkdownMode=function(){return!1},r.prototype.isWysiwygMode=function(){return!1},r}();function $i(r){return r instanceof Bm}function Fv(r){var t=["document","blockQuote","bulletList","orderedList","listItem","paragraph","heading","emph","strong","strike","link","image","table","tableHead","tableBody","tableRow","tableHeadCell","tableBodyCell"];return be(t,r)}function Joe(r){var t=r.attrs,e=r.type,n=e.name,i={type:n,wysiwygNode:!0,literal:!Fv(n)&&$i(r)?r.textContent:null},a={heading:{level:t.level},link:{destination:t.linkUrl,title:t.title},image:{destination:t.imageUrl},codeBlock:{info:t.language},bulletList:{type:"list",listData:{type:"bullet"}},orderedList:{type:"list",listData:{type:"ordered",start:t.order}},listItem:{type:"item",listData:{task:t.task,checked:t.checked}},tableHeadCell:{type:"tableCell",cellType:"head",align:t.align},tableBodyCell:{type:"tableCell",cellType:"body",align:t.align},customBlock:{info:t.info}},o=a[n],s=w(w({},i),o),l=r.attrs,u=l.htmlAttrs,c=l.childrenHTML;return u?w(w({},s),{attrs:u,childrenHTML:c}):s}var Koe={openTag:function(r,t){var e=r,n=e.tagName,i=e.classNames,a=e.attributes,o=document.createElement(n),s={};i&&(o.className=i.join(" ")),a&&(s=w(w({},s),a)),hl(s,o),t.push(o)},closeTag:function(r,t){if(t.length>1){var e=t.pop();Ee(t).appendChild(e)}},html:function(r,t){Ee(t).insertAdjacentHTML("beforeend",r.content)},text:function(r,t){var e=document.createTextNode(r.content);Ee(t).appendChild(e)}},Qoe=function(){function r(t,e){var n=El(t,e),i=w(w({},e.htmlBlock),e.htmlInline);this.customConvertorKeys=Object.keys(e).concat(Object.keys(i)),this.renderer=new Sl({gfm:!0,convertors:w(w({},n),i)}),this.convertors=this.renderer.getConvertors()}return r.prototype.generateTokens=function(t){var e=Joe(t),n={entering:!0,leaf:$i(t)?t.isLeaf:!1,options:this.renderer.getOptions(),getChildrenText:function(){return $i(t)?t.textContent:""},skipChildren:function(){return!1}},i=this.convertors[t.type.name],a=i(e,n,this.convertors),o=xn(a)?a:[a];return(Fv(t.type.name)||t.attrs.htmlInline)&&(n.entering=!1,o.push({type:"text",content:$i(t)?t.textContent:""}),o=o.concat(i(e,n,this.convertors))),o},r.prototype.toDOMNode=function(t){var e=this.generateTokens(t),n=[];return e.forEach(function(i){return Koe[i.type](i,n)}),n[0]},r.prototype.getToDOMNode=function(t){return be(this.customConvertorKeys,t)?this.toDOMNode.bind(this):null},r}(),Xoe=100,Yoe=15,Di=null,qo=null;function Cf(r,t){var e=t.syncScrollTop,n=t.releaseEventBlock;qo&&clearTimeout(qo),e(r),qo=setTimeout(function(){n()},Yoe)}function Zoe(r,t,e){var n=t-r,i=Date.now(),a=function(){var o=Date.now(),s=(o-i)/Xoe,l;Di&&clearTimeout(Di),s<1?(l=r+n*Math.cos((1-s)*Math.PI/2),Cf(Math.ceil(l),e),Di=setTimeout(a,1)):(Cf(t,e),Di=null)};a()}var ese=18,tse=function(){function r(t,e,n){this.latestEditorScrollTop=null,this.latestPreviewScrollTop=null,this.blockedScroll=null,this.active=!0,this.timer=null;var i=e.previewContent,a=e.el;this.previewRoot=i,this.previewEl=a,this.mdEditor=t,this.editorView=t.view,this.toastMark=t.getToastMark(),this.eventEmitter=n,this.addScrollSyncEvent()}return r.prototype.addScrollSyncEvent=function(){var t=this;this.eventEmitter.listen("afterPreviewRender",function(){t.clearTimer(),t.timer=setTimeout(function(){t.syncPreviewScrollTop(!0)},200)}),this.eventEmitter.listen("scroll",function(e,n){t.active&&(e==="editor"&&t.blockedScroll!=="editor"?t.syncPreviewScrollTop():e==="preview"&&t.blockedScroll!=="preview"&&t.syncEditorScrollTop(n))}),this.eventEmitter.listen("toggleScrollSync",function(e){t.active=e})},r.prototype.getMdNodeAtPos=function(t,e){var n=t.content.findIndex(e.pos),i=n.index;return this.toastMark.findFirstNodeAtLine(i+1)},r.prototype.getScrollTopByCaretPos=function(){var t=this.mdEditor.getSelection(),e=this.toastMark.findFirstNodeAtLine(t[0][0]),n=this.previewEl.clientHeight,i=Po(this.previewRoot,e).el,a=da(i,this.previewRoot)||i.offsetTop,o=i.clientHeight,s=a+o-n*.5;this.latestEditorScrollTop=null;var l=i.getBoundingClientRect().top-this.previewEl.getBoundingClientRect().top;return l<n?null:s},r.prototype.syncPreviewScrollTop=function(t){t===void 0&&(t=!1);var e=this,n=e.editorView,i=e.previewEl,a=e.previewRoot,o=n.dom.getBoundingClientRect(),s=o.left,l=o.top,u=n.posAtCoords({left:s,top:l}),c=n.state.doc,f=this.getMdNodeAtPos(c,u);if(!(!f||_k(f))){var d=i.scrollTop,h=n.dom,p=h.scrollTop,v=h.scrollHeight,m=h.clientHeight,g=h.children,k=v-p<=m+ese,b=k?i.scrollHeight:0;if(p&&!k){if(t){var C=this.getScrollTopByCaretPos();if(!C)return;b=C}else{var T=Po(this.previewRoot,f),S=T.el,M=T.mdNode,N=sf(c,M,g),R=N.height,P=N.rect,V=da(S,a)||S.offsetTop,le=S.clientHeight,ft=l>P.top?Math.min((l-P.top)/R,1):0;b=V+le*ft}b=this.getResolvedScrollTop("editor",p,b,d),this.latestEditorScrollTop=p}b!==d&&this.run("editor",b,d)}},r.prototype.syncEditorScrollTop=function(t){var e=this,n=e.toastMark,i=e.editorView,a=e.previewRoot,o=e.previewEl,s=i.dom,l=i.state,u=o.scrollTop,c=o.clientHeight,f=o.scrollHeight,d=f-u<=c,h=s.scrollTop,p=d?s.scrollHeight:0;if(u&&t&&!d){if(t=Xne(t,a),!t.getAttribute("data-nodeid"))return;var v=s.children,m=Number(t.getAttribute("data-nodeid")),g=Po(this.previewRoot,n.findNodeById(m)),k=g.mdNode,b=g.el,C=ui(k);p=v[C-1].offsetTop;var T=sf(l.doc,k,v).height,S=aie(b,a,m),M=S.nodeHeight,N=S.offsetTop;p+=Zne(u,N,M,T),p=this.getResolvedScrollTop("preview",u,p,h),this.latestPreviewScrollTop=u}p!==h&&this.run("preview",p,h)},r.prototype.getResolvedScrollTop=function(t,e,n,i){var a=t==="editor"?this.latestEditorScrollTop:this.latestPreviewScrollTop;return a===null?n:a<e?Math.max(n,i):Math.min(n,i)},r.prototype.run=function(t,e,n){var i=this,a;t==="editor"?(a=this.previewEl,this.blockedScroll="preview"):(a=this.editorView.dom,this.blockedScroll="editor");var o={syncScrollTop:function(s){return a.scrollTop=s},releaseEventBlock:function(){return i.blockedScroll=null}};Zoe(n,e,o)},r.prototype.clearTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype.destroy=function(){this.clearTimer(),this.eventEmitter.removeEventHandler("scroll"),this.eventEmitter.removeEventHandler("afterPreviewRender")},r}(),rse={getPopupInitialValues:function(r,t){var e=t.popupName;return e==="link"?{linkText:r.getSelectedText()}:{}}};function nse(r){r.eventEmitter.listen("query",function(t,e){return rse[t](r,e)})}var qv=function(){function r(t){var e=this;this.initialHTML=t.el.innerHTML,t.el.innerHTML="",this.options=tl({previewStyle:"tab",previewHighlight:!0,initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en-US",useCommandShortcut:!0,usageStatistics:!0,toolbarItems:[["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"],["scrollSync"]],hideModeSwitch:!1,linkAttributes:null,extendedAutolinks:!1,customHTMLRenderer:null,customMarkdownRenderer:null,referenceDefinition:!1,customHTMLSanitizer:null,frontMatter:!1,widgetRules:[],theme:"light",autofocus:!0},t);var n=this.options,i=n.customHTMLRenderer,a=n.extendedAutolinks,o=n.referenceDefinition,s=n.frontMatter,l=n.customMarkdownRenderer,u=n.useCommandShortcut,c=n.initialEditType,f=n.widgetRules,d=n.customHTMLSanitizer;this.mode=c||"markdown",this.mdPreviewStyle=this.options.previewStyle,this.i18n=B,this.i18n.setCode(this.options.language),this.eventEmitter=new Rv,Qk(f);var h=Zh(this.options.linkAttributes);this.pluginInfo=Bv({plugins:this.options.plugins,eventEmitter:this.eventEmitter,usageStatistics:this.options.usageStatistics,instance:this});var p=this.pluginInfo,v=p.toHTMLRenderers,m=p.toMarkdownRenderers,g=p.mdPlugins,k=p.wwPlugins,b=p.wwNodeViews,C=p.mdCommands,T=p.wwCommands,S=p.markdownParsers,M={linkAttributes:h,customHTMLRenderer:ra(v,i),extendedAutolinks:a,referenceDefinition:o,frontMatter:s,sanitizer:d||Ir},N=new Qoe(h,M.customHTMLRenderer),R=Une(M.customHTMLRenderer,M.sanitizer,N);this.toastMark=new lv("",{disallowedHtmlBlockTags:["br","img"],extendedAutolinks:a,referenceDefinition:o,disallowDeepHeading:!0,frontMatter:s,customParser:S}),this.mdEditor=new YC(this.eventEmitter,{toastMark:this.toastMark,useCommandShortcut:u,mdPlugins:g}),this.preview=new vv(this.eventEmitter,w(w({},M),{isViewer:!1,highlight:this.options.previewHighlight})),this.wwEditor=new voe(this.eventEmitter,{toDOMAdaptor:N,useCommandShortcut:u,htmlSchemaMap:R,linkAttributes:h,wwPlugins:k,wwNodeViews:b}),this.convertor=new zoe(this.wwEditor.getSchema(),w(w({},m),l),El(h,M.customHTMLRenderer),this.eventEmitter),this.setMinHeight(this.options.minHeight),this.setHeight(this.options.height),this.setMarkdown(this.options.initialValue,!1),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.initialValue||this.setHTML(this.initialHTML,!1),this.commandManager=new Eoe(this.eventEmitter,this.mdEditor.commands,this.wwEditor.commands,function(){return e.mode}),this.options.usageStatistics&&Lk(),this.scrollSync=new tse(this.mdEditor,this.preview,this.eventEmitter),this.addInitEvent(),this.addInitCommand(C,T),nse(this),this.options.hooks&&pn(this.options.hooks,function(P,V){return e.addHook(V,P)}),this.options.events&&pn(this.options.events,function(P,V){return e.on(V,P)}),this.eventEmitter.emit("load",this),this.moveCursorToStart(this.options.autofocus)}return r.prototype.addInitEvent=function(){var t=this;this.on("needChangeMode",this.changeMode.bind(this)),this.on("loadUI",function(){if(t.height!=="auto"){var e=Math.min(parseInt(t.minHeight,10),parseInt(t.height,10)-75)+"px";t.setMinHeight(e)}}),Cw(this.eventEmitter)},r.prototype.addInitCommand=function(t,e){var n=this,i=function(a,o){Object.keys(o).forEach(function(s){n.addCommand(a,s,o[s])})};this.addCommand("markdown","toggleScrollSync",function(a){return n.eventEmitter.emit("toggleScrollSync",a.active),!0}),i("markdown",t),i("wysiwyg",e)},r.prototype.getCurrentModeEditor=function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor},r.factory=function(t){return t.viewer?new Hv(t):new r(t)},r.setLanguage=function(t,e){B.setLanguage(t,e)},r.prototype.changePreviewStyle=function(t){this.mdPreviewStyle!==t&&(this.mdPreviewStyle=t,this.eventEmitter.emit("changePreviewStyle",t))},r.prototype.exec=function(t,e){this.commandManager.exec(t,e)},r.prototype.addCommand=function(t,e,n){var i=this,a=function(o){o===void 0&&(o={});var s=(t==="markdown"?i.mdEditor:i.wwEditor).view;n(o,s.state,s.dispatch,s)};this.commandManager.addCommand(t,e,a)},r.prototype.on=function(t,e){this.eventEmitter.listen(t,e)},r.prototype.off=function(t){this.eventEmitter.removeEventHandler(t)},r.prototype.addHook=function(t,e){this.eventEmitter.removeEventHandler(t),this.eventEmitter.listen(t,e)},r.prototype.removeHook=function(t){this.eventEmitter.removeEventHandler(t)},r.prototype.focus=function(){this.getCurrentModeEditor().focus()},r.prototype.blur=function(){this.getCurrentModeEditor().blur()},r.prototype.moveCursorToEnd=function(t){t===void 0&&(t=!0),this.getCurrentModeEditor().moveCursorToEnd(t)},r.prototype.moveCursorToStart=function(t){t===void 0&&(t=!0),this.getCurrentModeEditor().moveCursorToStart(t)},r.prototype.setMarkdown=function(t,e){if(t===void 0&&(t=""),e===void 0&&(e=!0),this.mdEditor.setMarkdown(t,e),this.isWysiwygMode()){var n=this.toastMark.getRootNode(),i=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(i,e)}},r.prototype.setHTML=function(t,e){t===void 0&&(t=""),e===void 0&&(e=!0);var n=document.createElement("div");n.innerHTML=bw(t);var i=Pd.fromSchema(this.wwEditor.schema).parse(n);this.isMarkdownMode()?this.mdEditor.setMarkdown(this.convertor.toMarkdownText(i),e):this.wwEditor.setModel(i,e)},r.prototype.getMarkdown=function(){return this.isMarkdownMode()?this.mdEditor.getMarkdown():this.convertor.toMarkdownText(this.wwEditor.getModel())},r.prototype.getHTML=function(){var t=this;this.eventEmitter.holdEventInvoke(function(){if(t.isMarkdownMode()){var i=t.toastMark.getRootNode(),a=t.convertor.toWysiwygModel(i);t.wwEditor.setModel(a)}});var e=pl(this.wwEditor.view.dom.innerHTML);if(this.placeholder){var n=new RegExp('<span class="placeholder[^>]+>'+this.placeholder+"</span>","i");return e.replace(n,"")}return e},r.prototype.insertText=function(t){this.getCurrentModeEditor().replaceSelection(t)},r.prototype.setSelection=function(t,e){this.getCurrentModeEditor().setSelection(t,e)},r.prototype.replaceSelection=function(t,e,n){this.getCurrentModeEditor().replaceSelection(t,e,n)},r.prototype.deleteSelection=function(t,e){this.getCurrentModeEditor().deleteSelection(t,e)},r.prototype.getSelectedText=function(t,e){return this.getCurrentModeEditor().getSelectedText(t,e)},r.prototype.getRangeInfoOfNode=function(t){return this.getCurrentModeEditor().getRangeInfoOfNode(t)},r.prototype.addWidget=function(t,e,n){this.getCurrentModeEditor().addWidget(t,e,n)},r.prototype.replaceWithWidget=function(t,e,n){this.getCurrentModeEditor().replaceWithWidget(t,e,n)},r.prototype.setHeight=function(t){var e=this.options.el;zt(t)&&(t==="auto"?gt(e,"auto-height"):nt(e,"auto-height"),this.setMinHeight(this.getMinHeight())),wt(e,{height:t}),this.height=t},r.prototype.getHeight=function(){return this.height},r.prototype.setMinHeight=function(t){if(t!==this.minHeight){var e=this.height||this.options.height;e!=="auto"&&this.options.el.querySelector("."+O("main"))&&(t=Math.min(parseInt(t,10),parseInt(e,10)-75)+"px");var n=parseInt(t,10);this.minHeight=t,this.wwEditor.setMinHeight(n),this.mdEditor.setMinHeight(n),this.preview.setMinHeight(n)}},r.prototype.getMinHeight=function(){return this.minHeight},r.prototype.isMarkdownMode=function(){return this.mode==="markdown"},r.prototype.isWysiwygMode=function(){return this.mode==="wysiwyg"},r.prototype.isViewer=function(){return!1},r.prototype.getCurrentPreviewStyle=function(){return this.mdPreviewStyle},r.prototype.changeMode=function(t,e){if(this.mode!==t){if(this.mode=t,this.isWysiwygMode()){var n=this.toastMark.getRootNode(),i=this.convertor.toWysiwygModel(n);this.wwEditor.setModel(i)}else{var i=this.wwEditor.getModel();this.mdEditor.setMarkdown(this.convertor.toMarkdownText(i),!e)}if(this.eventEmitter.emit("removePopupWidget"),this.eventEmitter.emit("changeMode",t),!e){var a=this.convertor.getMappedPos();this.focus(),this.isWysiwygMode()&&Dt(a)?this.wwEditor.setSelection(a):Array.isArray(a)&&this.mdEditor.setSelection(a)}}},r.prototype.destroy=function(){var t=this;this.wwEditor.destroy(),this.mdEditor.destroy(),this.preview.destroy(),this.scrollSync.destroy(),this.eventEmitter.emit("destroy"),this.eventEmitter.getEvents().forEach(function(e,n){return t.off(n)})},r.prototype.hide=function(){this.eventEmitter.emit("hide")},r.prototype.show=function(){this.eventEmitter.emit("show")},r.prototype.setScrollTop=function(t){this.getCurrentModeEditor().setScrollTop(t)},r.prototype.getScrollTop=function(){return this.getCurrentModeEditor().getScrollTop()},r.prototype.reset=function(){this.wwEditor.setModel([]),this.mdEditor.setMarkdown("")},r.prototype.getSelection=function(){return this.getCurrentModeEditor().getSelection()},r.prototype.setPlaceholder=function(t){this.placeholder=t,this.mdEditor.setPlaceholder(t),this.wwEditor.setPlaceholder(t)},r.prototype.getEditorElements=function(){return{mdEditor:this.mdEditor.getElement(),mdPreview:this.preview.getElement(),wwEditor:this.wwEditor.getElement()}},r.prototype.convertPosToMatchEditorMode=function(t,e,n){var i,a;e===void 0&&(e=t),n===void 0&&(n=this.mode);var o=this.mdEditor.view.state.doc,s=Array.isArray(t),l=Array.isArray(e),u=t,c=e;if(s!==l)throw new Error("Types of arguments must be same");return n==="markdown"&&!s&&!l?(i=Pi(o,t,e),u=i[0],c=i[1]):n==="wysiwyg"&&s&&l&&(a=dr(o,t,e),u=a[0],c=a[1]),[u,c]},r}();function ise(r){for(var t,e,n=arguments,i=1,a="",o="",s=[0],l=function(c){i===1&&(c||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(c?n[c]:a):i===3&&(c||a)?(s[1]=c?n[c]:a,i=2):i===2&&a==="..."&&c?s[2]=sl(s[2]||{},n[c]):i===2&&a&&!c?(s[2]=s[2]||{})[a]=!0:i>=5&&(i===5?((s[2]=s[2]||{})[e]=c?a?a+n[c]:n[c]:a,i=6):(c||a)&&(s[2][e]+=c?a+n[c]:a)),a=""},u=0;u<r.length;u++){u&&(i===1&&l(),l(u));for(let c=0;c<r[u].length;c++)t=r[u][c],i===1?t==="<"?(l(),s=[s,"",null],i=3):a+=t:i===4?a==="--"&&t===">"?(i=1,a=""):a=t+a[0]:o?t===o?o="":a+=t:t==='"'||t==="'"?o=t:t===">"?(l(),i=1):i&&(t==="="?(i=5,e=a,a=""):t==="/"&&(i<5||r[u][c+1]===">")?(l(),i===3&&(s=s[0]),i=s,(s=s[0]).push(this.apply(null,i.slice(1))),i=0):t===" "||t==="	"||t===`
`||t==="\r"?(l(),i=2):a+=t),i===3&&a==="!--"&&(i=4,s=s[0])}return l(),s.length>2?s.slice(1):s[1]}function ase(r){return typeof r=="boolean"||r instanceof Boolean}var ose=ase,sse=function(){function r(t){this.current=t,this.root=t,this.entering=!0}return r.prototype.walk=function(){var t=this,e=t.entering,n=t.current;return n?(e?n.firstChild?(this.current=n.firstChild,this.entering=!0):this.entering=!1:n===this.root?this.current=null:n.next?(this.current=n.next,this.entering=!0):(this.current=n.parent,this.entering=!1),{vnode:n,entering:e}):null},r}(),ot=function(){function r(t,e,n){this.parent=null,this.old=null,this.firstChild=null,this.next=null,this.skip=!1,this.type=t,this.props=e,this.children=n,this.props.children=n,e.ref&&(this.ref=e.ref,delete e.ref),e.key&&(this.key=e.key,delete e.key)}return r.prototype.walker=function(){return new sse(this)},r.removalNodes=[],r}();function lse(r){return new ot("TEXT_NODE",{nodeValue:r},[])}function Tf(r,t){var e=r;ose(r)||r==null?e=null:(zt(r)||Dt(r))&&(e=lse(String(r))),e&&t.push(e)}function use(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];var i=[];return e.forEach(function(a){Array.isArray(a)?a.forEach(function(o){Tf(o,i)}):Tf(a,i)}),new ot(r,t||{},i)}var _=ise.bind(use);function cse(r){return r===Object(r)}var fse=cse;function dse(r){var t;return r.type==="TEXT_NODE"?t=document.createTextNode(r.props.nodeValue):(t=document.createElement(r.type),$v(t,{},r.props)),t}function _v(r,t){r.node?t.removeChild(r.node):_v(r.firstChild,t)}function hse(r,t,e){Object.keys(t).forEach(function(n){if(/^on/.test(n)){if(!e[n]||t[n]!==e[n]){var i=n.slice(2).toLowerCase();r.removeEventListener(i,t[n])}}else n!=="children"&&!e[n]&&!pw(r)&&r.removeAttribute(n)}),$v(r,t,e,function(n){return!nl(t[n],e[n])})}var pse=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function $v(r,t,e,n){Object.keys(e).forEach(function(i){if(!n||n(i))if(/^on/.test(i)){var a=i.slice(2).toLowerCase();r.addEventListener(a,e[i])}else i==="nodeValue"?r[i]=e[i]:i==="style"&&fse(e[i])?vse(r,t[i],e[i]):i!=="children"&&(e[i]===!1?r.removeAttribute(i):r.setAttribute(i,e[i]))})}function vse(r,t,e){t&&Object.keys(t).forEach(function(n){r.style[n]=""}),Object.keys(e).forEach(function(n){var i=e[n];r.style[n]=Dt(i)&&!pse.test(n)?i+"px":i})}function Nl(r){if(ot.removalNodes.forEach(function(a){return Sf(a)}),r){for(var t=void 0,e=r.walker();t=e.walk();)if(r=t.vnode,t.entering)Sf(r);else if(Qe(r.type)){var n=r.component;if(!r.old&&n.mounted&&n.mounted(),r.old&&n.updated){var i=n.prevProps||{};n.updated(i)}}}}function xf(r){for(var t=r.parent;!t.node;)t=t.parent;return t.node}function Sf(r){if(!(!r||!r.parent)){if(r.node){var t=xf(r);r.effect==="A"?t.appendChild(r.node):r.effect==="U"&&hse(r.node,r.old.props,r.props)}if(r.effect==="D"){for(var e=void 0,n=r.walker();e=n.walk();)if(r=e.vnode,!e.entering)if(Qe(r.type)){var i=r.component;i.beforeDestroy&&i.beforeDestroy()}else{var t=xf(r);_v(r,t)}}r.ref&&(r.component?r.ref(r.component):r.node&&r.ref(r.node))}}function mse(r,t){var e=t.props,n=t.component;return n?(n.prevProps=n.props,n.props=t.props,n):new r(e)}function zv(r){for(var t=r;r&&!r.skip;){if(Qe(r.type)){var e=mse(r.type,r);e.vnode=r,r.component=e,r.props.children=r.children=[e.render()],Ef(r)}else r.node||(r.node=dse(r)),Ef(r);if(r.firstChild)r=r.firstChild;else{for(;r&&r.parent&&!r.next&&(r=r.parent,r!==t););r=r.next}}}function gse(r,t){return r&&t&&t.type===r.type&&(!t.key||t.key===r.key)}function Ef(r){var t=r.children,e=r.old?r.old.firstChild:null,n=null;t.forEach(function(a,o){var s=gse(e,a);s&&(a.old=e,a.parent=r,a.node=e.node,a.component=e.component,a.effect="U"),a&&!s&&(a.old=null,a.parent=r,a.node=null,a.effect="A"),e&&!s&&(ot.removalNodes.push(e),e.effect="D"),e&&(e=e.next),o===0?r.firstChild=a:a&&(n.next=a),n=a});var i=Ee(t);if(!t.length)for(;e;)ot.removalNodes.push(e),e.effect="D",e=e.next;for(;e&&i;)e&&i.old!==e&&(ot.removalNodes.push(e),e.effect="D",e=e.next)}function yse(r){r.effect="D",ot.removalNodes=[r],Nl(),ot.removalNodes=[]}function bse(r){var t=r.vnode;t.effect="U",t.old=t,t.next&&(t.next.skip=!0),ot.removalNodes=[],zv(t),Nl(t),t.next&&(t.next.skip=!1)}function kse(r,t){var e=new ot(r.tagName.toLowerCase(),{},[t]);return e.node=r,ot.removalNodes=[],zv(e),Nl(e),function(){return yse(e.firstChild)}}var Oe=function(){function r(t){this.props=t,this.state={},this.refs={}}return r.prototype.setState=function(t){var e=w(w({},this.state),t);nl(this.state,e)||(this.state=e,bse(this))},r}(),wse=function(r){E(t,r);function t(e){var n=r.call(this,e)||this;return n.state={hide:!1},n}return t.prototype.show=function(){this.setState({hide:!1})},t.prototype.hide=function(){this.setState({hide:!0})},t.prototype.render=function(){var e=this.props,n=e.editorType,i=e.eventEmitter;return _(Mf||(Mf=q([`
      <div class="`,'" style="display: ',`">
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
      </div>
    `],[`
      <div class="`,'" style="display: ',`">
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
        <div
          class="tab-item`,`"
          onClick=`,`
        >
          `,`
        </div>
      </div>
    `])),O("mode-switch"),this.state.hide?"none":"block",n==="markdown"?" active":"",function(){i.emit("needChangeMode","markdown")},B.get("Markdown"),n==="wysiwyg"?" active":"",function(){i.emit("needChangeMode","wysiwyg")},B.get("WYSIWYG"))},t}(Oe),Mf;function Cse(r,t){var e,n;t=t||0;function i(){n=Array.prototype.slice.call(arguments),window.clearTimeout(e),e=window.setTimeout(function(){r.apply(null,n)},t)}return i}var Tse=Cse,xse=Tse;function Sse(r,t){var e,n=!0,i=function(c){r.apply(null,c),e=null},a,o,s;t=t||0,a=xse(i,t);function l(){if(s=Array.prototype.slice.call(arguments),n){i(s),n=!1;return}o=Number(new Date),e=e||o,a(s),o-e>=t&&i(s)}function u(){n=!0,e=null}return l.reset=u,l}var Ese=Sse,Vv=function(){if(typeof Map!="undefined")return Map;function r(t,e){var n=-1;return t.some(function(i,a){return i[0]===e?(n=a,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(e){var n=r(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(e,n){var i=r(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},t.prototype.delete=function(e){var n=this.__entries__,i=r(n,e);~i&&n.splice(i,1)},t.prototype.has=function(e){return!!~r(this.__entries__,e)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,n){n===void 0&&(n=null);for(var i=0,a=this.__entries__;i<a.length;i++){var o=a[i];e.call(n,o[1],o[0])}},t}()}(),Ls=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,pa=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Mse=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(pa):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),Ose=2;function Nse(r,t){var e=!1,n=!1,i=0;function a(){e&&(e=!1,r()),n&&s()}function o(){Mse(a)}function s(){var l=Date.now();if(e){if(l-i<Ose)return;n=!0}else e=!0,n=!1,setTimeout(o,t);i=l}return s}var Dse=20,Lse=["top","right","bottom","left","width","height","size","weight"],Ase=typeof MutationObserver!="undefined",Ise=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Nse(this.refresh.bind(this),Dse)}return r.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},r.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},r.prototype.updateObservers_=function(){var t=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return t.forEach(function(e){return e.broadcastActive()}),t.length>0},r.prototype.connect_=function(){!Ls||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Ase?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!Ls||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=e===void 0?"":e,i=Lse.some(function(a){return!!~n.indexOf(a)});i&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),Uv=function(r,t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e];Object.defineProperty(r,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return r},Tn=function(r){var t=r&&r.ownerDocument&&r.ownerDocument.defaultView;return t||pa},Wv=Ba(0,0,0,0);function va(r){return parseFloat(r)||0}function Of(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(n,i){var a=r["border-"+i+"-width"];return n+va(a)},0)}function Rse(r){for(var t=["top","right","bottom","left"],e={},n=0,i=t;n<i.length;n++){var a=i[n],o=r["padding-"+a];e[a]=va(o)}return e}function Pse(r){var t=r.getBBox();return Ba(0,0,t.width,t.height)}function Bse(r){var t=r.clientWidth,e=r.clientHeight;if(!t&&!e)return Wv;var n=Tn(r).getComputedStyle(r),i=Rse(n),a=i.left+i.right,o=i.top+i.bottom,s=va(n.width),l=va(n.height);if(n.boxSizing==="border-box"&&(Math.round(s+a)!==t&&(s-=Of(n,"left","right")+a),Math.round(l+o)!==e&&(l-=Of(n,"top","bottom")+o)),!Fse(r)){var u=Math.round(s+a)-t,c=Math.round(l+o)-e;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return Ba(i.left,i.top,s,l)}var Hse=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof Tn(r).SVGGraphicsElement}:function(r){return r instanceof Tn(r).SVGElement&&typeof r.getBBox=="function"}}();function Fse(r){return r===Tn(r).document.documentElement}function qse(r){return Ls?Hse(r)?Pse(r):Bse(r):Wv}function _se(r){var t=r.x,e=r.y,n=r.width,i=r.height,a=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return Uv(o,{x:t,y:e,width:n,height:i,top:e,right:t+n,bottom:i+e,left:t}),o}function Ba(r,t,e,n){return{x:r,y:t,width:e,height:n}}var $se=function(){function r(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ba(0,0,0,0),this.target=t}return r.prototype.isActive=function(){var t=qse(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},r}(),zse=function(){function r(t,e){var n=_se(e);Uv(this,{target:t,contentRect:n})}return r}(),Vse=function(){function r(t,e,n){if(this.activeObservations_=[],this.observations_=new Vv,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return r.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Tn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new $se(t)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Tn(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;!e.has(t)||(e.delete(t),e.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},r.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(n){return new zse(n.target,n.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),jv=typeof WeakMap!="undefined"?new WeakMap:new Vv,Gv=function(){function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var e=Ise.getInstance(),n=new Vse(t,e,this);jv.set(this,n)}return r}();["observe","unobserve","disconnect"].forEach(function(r){Gv.prototype[r]=function(){var t;return(t=jv.get(this))[r].apply(t,arguments)}});var Use=function(){return typeof pa.ResizeObserver!="undefined"?pa.ResizeObserver:Gv}(),Wse=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.execCommand=function(e){var n=yt(e.target,"li");this.props.execCommand("heading",{level:Number(n.getAttribute("data-level"))})},t.prototype.render=function(){var e=this;return _(Df||(Df=q([`
      <ul
        onClick=`,`
        aria-role="menu"
        aria-label="`,`"
      >
        `,`
        <li data-type="Paragraph" aria-role="menuitem">
          <div>`,`</div>
        </li>
      </ul>
    `],[`
      <ul
        onClick=`,`
        aria-role="menu"
        aria-label="`,`"
      >
        `,`
        <li data-type="Paragraph" aria-role="menuitem">
          <div>`,`</div>
        </li>
      </ul>
    `])),function(n){return e.execCommand(n)},B.get("Headings"),[1,2,3,4,5,6].map(function(n){return _(Nf||(Nf=q([`
              <li data-level="`,`" data-type="Heading" aria-role="menuitem">
                <`,">"," ",`</$>
              </li>
            `],[`
              <li data-level="`,`" data-type="Heading" aria-role="menuitem">
                <`,">"," ",`</$>
              </li>
            `])),n,"h"+n,B.get("Heading"),n)}),B.get("Paragraph"))},t}(Oe),Nf,Df,Jv=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.toggleTab=function(e,n){this.props.onClick(e,n)},t.prototype.render=function(){var e=this;return _(Af||(Af=q([`
      <div class="`,`" aria-role="tabpanel">
        `,`
      </div>
    `],[`
      <div class="`,`" aria-role="tabpanel">
        `,`
      </div>
    `])),O("tabs"),this.props.tabs.map(function(n){var i=n.name,a=n.text,o=e.props.activeTab===i;return _(Lf||(Lf=q([`
            <div
              class="tab-item`,`"
              onClick=`,`
              aria-role="tab"
              aria-label="`,`"
              aria-selected="`,`"
              tabindex="`,`"
            >
              `,`
            </div>
          `],[`
            <div
              class="tab-item`,`"
              onClick=`,`
              aria-role="tab"
              aria-label="`,`"
              aria-selected="`,`"
              tabindex="`,`"
            >
              `,`
            </div>
          `])),o?" active":"",function(s){return e.toggleTab(s,i)},B.get(a),o?"true":"false",o?"0":"-1",B.get(a))}))},t}(Oe),Lf,Af,jse="ui",Gse=function(r){E(t,r);function t(e){var n=r.call(this,e)||this;return n.initialize=function(i){i===void 0&&(i="file");var a=n.refs.url;a.value="",n.refs.altText.value="",n.refs.file.value="",nt(a,"wrong"),n.setState({activeTab:i,file:null,fileNameElClassName:""})},n.execCommand=function(){n.state.activeTab==="file"?n.emitAddImageBlob():n.emitAddImage()},n.toggleTab=function(i,a){a!==n.state.activeTab&&n.initialize(a)},n.showFileSelectBox=function(){n.refs.file.click()},n.changeFile=function(i){var a=i.target.files;a!=null&&a.length&&n.setState({file:a[0]})},n.state={activeTab:"file",file:null,fileNameElClassName:""},n.tabs=[{name:"file",text:"File"},{name:"url",text:"URL"}],n}return t.prototype.emitAddImageBlob=function(){var e=this,n=this.refs.file.files,i=this.refs.altText,a=" wrong";if(n!=null&&n.length){a="";var o=n.item(0),s=function(l,u){return e.props.execCommand("addImage",{imageUrl:l,altText:u||i.value})};this.props.eventEmitter.emit("addImageBlobHook",o,s,jse)}this.setState({fileNameElClassName:a})},t.prototype.emitAddImage=function(){var e=this.refs.url,n=this.refs.altText,i=e.value,a=n.value||"image";if(nt(e,"wrong"),!i.length){gt(e,"wrong");return}i&&this.props.execCommand("addImage",{imageUrl:i,altText:a})},t.prototype.preventSelectStart=function(e){e.preventDefault()},t.prototype.updated=function(){this.props.show||this.initialize()},t.prototype.render=function(){var e=this,n=this.state,i=n.activeTab,a=n.file,o=n.fileNameElClassName;return _(If||(If=q([`
      <div aria-label="`,`">
        <`," tabs="," activeTab="," onClick=",` />
        <div style="display:`,`">
          <label for="toastuiImageUrlInput">`,`</label>
          <input
            id="toastuiImageUrlInput"
            type="text"
            ref=`,`
          />
        </div>
        <div style="display:`,`;position: relative;">
          <label for="toastuiImageFileInput">`,`</label>
          <span
            class="`,"",`"
            onClick=`,`
            onSelectstart=`,`
          >
            `,`
          </span>
          <button
            type="button"
            class="`,`"
            onClick=`,`
          >
            `,`
          </button>
          <input
            id="toastuiImageFileInput"
            type="file"
            accept="image/*"
            onChange=`,`
            ref=`,`
          />
        </div>
        <label for="toastuiAltTextInput">`,`</label>
        <input
          id="toastuiAltTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `],[`
      <div aria-label="`,`">
        <`," tabs="," activeTab="," onClick=",` />
        <div style="display:`,`">
          <label for="toastuiImageUrlInput">`,`</label>
          <input
            id="toastuiImageUrlInput"
            type="text"
            ref=`,`
          />
        </div>
        <div style="display:`,`;position: relative;">
          <label for="toastuiImageFileInput">`,`</label>
          <span
            class="`,"",`"
            onClick=`,`
            onSelectstart=`,`
          >
            `,`
          </span>
          <button
            type="button"
            class="`,`"
            onClick=`,`
          >
            `,`
          </button>
          <input
            id="toastuiImageFileInput"
            type="file"
            accept="image/*"
            onChange=`,`
            ref=`,`
          />
        </div>
        <label for="toastuiAltTextInput">`,`</label>
        <input
          id="toastuiAltTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `])),B.get("Insert image"),Jv,this.tabs,i,this.toggleTab,i==="url"?"block":"none",B.get("Image URL"),function(s){return e.refs.url=s},i==="file"?"block":"none",B.get("Select image file"),O("file-name"),a?" has-file":o,this.showFileSelectBox,this.preventSelectStart,a?a.name:B.get("No file"),O("file-select-button"),this.showFileSelectBox,B.get("Choose a file"),this.changeFile,function(s){return e.refs.file=s},B.get("Description"),function(s){return e.refs.altText=s},O("button-container"),O("close-button"),this.props.hidePopup,B.get("Cancel"),O("ok-button"),this.execCommand,B.get("OK"))},t}(Oe),If,Jse=function(r){E(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.execCommand=function(){var n=e.refs.url,i=e.refs.text;if(nt(n,"wrong"),nt(i,"wrong"),n.value.length<1){gt(n,"wrong");return}var a=ut(e.props.initialValues.linkUrl);if(a&&i.value.length<1){gt(i,"wrong");return}e.props.execCommand("addLink",{linkUrl:n.value,linkText:i.value})},e}return t.prototype.initialize=function(){var e=this.props.initialValues,n=e.linkUrl,i=e.linkText,a=this.refs.url,o=this.refs.text;nt(a,"wrong"),nt(o,"wrong","disabled"),o.removeAttribute("disabled"),n&&(gt(o,"disabled"),o.setAttribute("disabled","disabled")),a.value=n||"",o.value=i||""},t.prototype.mounted=function(){this.initialize()},t.prototype.updated=function(e){!e.show&&this.props.show&&this.initialize()},t.prototype.render=function(){var e=this;return _(Rf||(Rf=q([`
      <div aria-label="`,`">
        <label for="toastuiLinkUrlInput">`,`</label>
        <input
          id="toastuiLinkUrlInput"
          type="text"
          ref=`,`
        />
        <label for="toastuiLinkTextInput">`,`</label>
        <input
          id="toastuiLinkTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `],[`
      <div aria-label="`,`">
        <label for="toastuiLinkUrlInput">`,`</label>
        <input
          id="toastuiLinkUrlInput"
          type="text"
          ref=`,`
        />
        <label for="toastuiLinkTextInput">`,`</label>
        <input
          id="toastuiLinkTextInput"
          type="text"
          ref=`,`
        />
        <div class="`,`">
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
          <button type="button" class="`,'" onClick=',`>
            `,`
          </button>
        </div>
      </div>
    `])),B.get("Insert link"),B.get("URL"),function(n){return e.refs.url=n},B.get("Link text"),function(n){return e.refs.text=n},O("button-container"),O("close-button"),this.props.hidePopup,B.get("Cancel"),O("ok-button"),this.execCommand,B.get("OK"))},t}(Oe),Rf,Pf=20,Bf=20,Hf=5,Ff=14,qf=5,_f=9,Kse=1,Qse=1,$f=1,Xse=function(r){E(t,r);function t(e){var n=r.call(this,e)||this;return n.extendSelectionRange=function(i){var a=i.pageX,o=i.pageY,s=a-n.offsetRect.left,l=o-n.offsetRect.top,u=n.getSelectionRangeByOffset(s,l);n.setState(w({},u))},n.execCommand=function(){n.props.execCommand("addTable",{rowCount:n.state.rowIdx+1,columnCount:n.state.colIdx+1})},n.state={rowIdx:-1,colIdx:-1},n}return t.prototype.getDescription=function(){return this.state.colIdx===-1?"":this.state.colIdx+1+" x "+(this.state.rowIdx+1)},t.prototype.getBoundByRange=function(e,n){return{width:(e+1)*Pf,height:(n+1)*Bf}},t.prototype.getRangeByOffset=function(e,n){return{colIdx:Math.floor(e/Pf),rowIdx:Math.floor(n/Bf)}},t.prototype.getTableRange=function(){var e=this.state,n=e.colIdx,i=e.rowIdx,a=Math.max(n,qf),o=Math.max(i,Hf);return n>=qf&&a<_f&&(a+=1),i>=Hf&&o<Ff&&(o+=1),{colIdx:a+1,rowIdx:o+1}},t.prototype.getSelectionAreaBound=function(){var e=this.getBoundByRange(this.state.colIdx,this.state.rowIdx),n=e.width,i=e.height;return!n&&!i?{display:"none"}:{width:n-$f,height:i-$f,display:"block"}},t.prototype.getSelectionRangeByOffset=function(e,n){var i=this.getRangeByOffset(e,n);return i.rowIdx=Math.min(Math.max(i.rowIdx,Kse),Ff),i.colIdx=Math.min(Math.max(i.colIdx,Qse),_f),i},t.prototype.updated=function(){if(!this.props.show)this.setState({colIdx:-1,rowIdx:-1});else if(this.state.colIdx===-1&&this.state.rowIdx===-1){var e=this.refs.tableEl.getBoundingClientRect(),n=e.left,i=e.top;this.offsetRect={left:window.pageXOffset+n,top:window.pageYOffset+i}}},t.prototype.createTableArea=function(e){for(var n=e.colIdx,i=e.rowIdx,a=[],o=0;o<i;o+=1){for(var s=[],l=0;l<n;l+=1){var u=""+O("table-cell")+(o>0?"":" header");s.push(_(zf||(zf=q(['<div class="','"></div>'],['<div class="','"></div>'])),u))}a.push(_(Vf||(Vf=q(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),O("table-row"),s))}return _(Uf||(Uf=q(['<div class="','">',"</div>"],['<div class="','">',"</div>"])),O("table"),a)},t.prototype.render=function(){var e=this,n=this.getTableRange(),i=this.getSelectionAreaBound();return _(Wf||(Wf=q([`
      <div aria-label="`,`">
        <div
          class="`,`"
          ref=`,`
          onMousemove=`,`
          onClick=`,`
        >
          `,`
          <div class="`,'" style=',`></div>
        </div>
        <p class="`,'">',`</p>
      </div>
    `],[`
      <div aria-label="`,`">
        <div
          class="`,`"
          ref=`,`
          onMousemove=`,`
          onClick=`,`
        >
          `,`
          <div class="`,'" style=',`></div>
        </div>
        <p class="`,'">',`</p>
      </div>
    `])),B.get("Insert table"),O("table-selection"),function(a){return e.refs.tableEl=a},this.extendSelectionRange,this.execCommand,this.createTableArea(n),O("table-selection-layer"),i,O("table-description"),this.getDescription())},t}(Oe),zf,Vf,Uf,Wf,Yse=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.mounted=function(){this.refs.el.appendChild(this.props.body)},t.prototype.updated=function(e){this.refs.el.replaceChild(this.props.body,e.body)},t.prototype.render=function(){var e=this;return _(jf||(jf=q(["<div ref=","></div>"],["<div ref=","></div>"])),function(n){return e.refs.el=n})},t}(Oe),jf;function As(r){return zt(r)?ele(r):r}function Zse(){var r=document.createElement("label"),t=document.createElement("input"),e=document.createElement("span");r.className="scroll-sync active",t.type="checkbox",t.checked=!0,e.className="switch";var n=function(i){return t.addEventListener("change",function(a){var o=a.target.checked;o?gt(r,"active"):nt(r,"active"),i("toggleScrollSync",{active:o})})};return r.appendChild(t),r.appendChild(e),{name:"scrollSync",el:r,onMounted:n}}function ele(r){var t;switch(r){case"heading":t={name:"heading",className:"heading",tooltip:B.get("Headings"),state:"heading"};break;case"bold":t={name:"bold",className:"bold",command:"bold",tooltip:B.get("Bold"),state:"strong"};break;case"italic":t={name:"italic",className:"italic",command:"italic",tooltip:B.get("Italic"),state:"emph"};break;case"strike":t={name:"strike",className:"strike",command:"strike",tooltip:B.get("Strike"),state:"strike"};break;case"hr":t={name:"hr",className:"hrline",command:"hr",tooltip:B.get("Line"),state:"thematicBreak"};break;case"quote":t={name:"quote",className:"quote",command:"blockQuote",tooltip:B.get("Blockquote"),state:"blockQuote"};break;case"ul":t={name:"ul",className:"bullet-list",command:"bulletList",tooltip:B.get("Unordered list"),state:"bulletList"};break;case"ol":t={name:"ol",className:"ordered-list",command:"orderedList",tooltip:B.get("Ordered list"),state:"orderedList"};break;case"task":t={name:"task",className:"task-list",command:"taskList",tooltip:B.get("Task"),state:"taskList"};break;case"table":t={name:"table",className:"table",tooltip:B.get("Insert table"),state:"table"};break;case"image":t={name:"image",className:"image",tooltip:B.get("Insert image")};break;case"link":t={name:"link",className:"link",tooltip:B.get("Insert link")};break;case"code":t={name:"code",className:"code",command:"code",tooltip:B.get("Code"),state:"code"};break;case"codeblock":t={name:"codeblock",className:"codeblock",command:"codeBlock",tooltip:B.get("Insert CodeBlock"),state:"codeBlock"};break;case"indent":t={name:"indent",className:"indent",command:"indent",tooltip:B.get("Indent"),state:"indent"};break;case"outdent":t={name:"outdent",className:"outdent",command:"outdent",tooltip:B.get("Outdent"),state:"outdent"};break;case"scrollSync":t=Zse();break;case"more":t={name:"more",className:"more",tooltip:B.get("More")};break}return t.name!=="scrollSync"&&(t.className+=" "+O("toolbar-icons")),t}function Dl(r,t){var e=t.el,n=t.pos,i=t.popup,a=t.initialValues;switch(r){case"heading":return{render:function(o){return _(Gf||(Gf=q(["<"," ..."," />"],["<"," ..."," />"])),Wse,o)},className:O("popup-add-heading"),fromEl:e,pos:n};case"link":return{render:function(o){return _(Jf||(Jf=q(["<"," ..."," />"],["<"," ..."," />"])),Jse,o)},className:O("popup-add-link"),fromEl:e,pos:n,initialValues:a};case"image":return{render:function(o){return _(Kf||(Kf=q(["<"," ..."," />"],["<"," ..."," />"])),Gse,o)},className:O("popup-add-image"),fromEl:e,pos:n};case"table":return{render:function(o){return _(Qf||(Qf=q(["<"," ..."," />"],["<"," ..."," />"])),Xse,o)},className:O("popup-add-table"),fromEl:e,pos:n};case"customPopupBody":return i?w({render:function(o){return _(Xf||(Xf=q(["<"," ..."," body="," />"],["<"," ..."," body="," />"])),Yse,o,i.body)},fromEl:e,pos:n},i):null;default:return null}}function ma(r){r.hidden=r.length===r.filter(function(t){return t.hidden}).length}function tle(r,t){var e=function(n){return n.hidden=n.name==="scrollSync"&&t,n};return r.reduce(function(n,i){n.push(i.map(function(o){return e(As(o))}));var a=n[(n.length||1)-1];return a&&ma(a),n},[])}function rle(r,t){r.forEach(function(e){e.forEach(function(n){return n.hidden=n.name==="scrollSync"&&t}),ma(e)})}var Gf,Jf,Kf,Qf,Xf,nle=20,ile=function(r){E(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.handleMousedown=function(n){!yt(n.target,"."+O("popup"))&&!yt(n.target,e.props.info.fromEl)&&e.props.hidePopup()},e}return t.prototype.mounted=function(){document.addEventListener("mousedown",this.handleMousedown),this.props.eventEmitter.listen("closePopup",this.props.hidePopup)},t.prototype.beforeDestroy=function(){document.removeEventListener("mousedown",this.handleMousedown)},t.prototype.updated=function(e){var n=this.props,i=n.show,a=n.info;if(i&&a.pos&&e.show!==i){var o=w({},a.pos),s=this.refs.el.offsetWidth,l=yt(this.refs.el,"."+O("toolbar")),u=l.offsetWidth;o.left+s>=u&&(o.left=u-s-nle),nl(this.state.popupPos,o)||this.setState({popupPos:o})}},t.prototype.render=function(){var e=this,n=this.props,i=n.info,a=n.show,o=n.hidePopup,s=n.eventEmitter,l=n.execCommand,u=i||{},c=u.className,f=c===void 0?"":c,d=u.style,h=u.render,p=u.initialValues,v=p===void 0?{}:p,m=w(w({display:a?"block":"none"},d),this.state.popupPos);return _(Yf||(Yf=q([`
      <div
        class="`," ",`"
        style=`,`
        ref=`,`
        aria-role="dialog"
      >
        <div class="`,`">
          `,`
        </div>
      </div>
    `],[`
      <div
        class="`," ",`"
        style=`,`
        ref=`,`
        aria-role="dialog"
      >
        <div class="`,`">
          `,`
        </div>
      </div>
    `])),O("popup"),f,m,function(g){return e.refs.el=g},O("popup-body"),h&&h({eventEmitter:s,show:a,hidePopup:o,execCommand:l,initialValues:v}))},t}(Oe),Yf,Zf=6;function Ll(r){return function(t){E(e,t);function e(n){var i=t.call(this,n)||this;return i.showTooltip=function(a){var o=i.props.item.tooltip;if(!i.props.disabled&&o){var s=i.getBound(a),l=s.left+Zf+"px",u=s.top+Zf+"px";wt(i.props.tooltipRef.current,{display:"block",left:l,top:u}),i.props.tooltipRef.current.querySelector(".text").textContent=o}},i.hideTooltip=function(){wt(i.props.tooltipRef.current,"display","none")},i.state={active:!1,disabled:n.disabled},i.addEvent(),i}return e.prototype.addEvent=function(){var n=this,i=this.props,a=i.item,o=i.eventEmitter;a.state&&o.listen("changeToolbarState",function(s){var l,u=s.toolbarState,c=(l=u[a.state])!==null&&l!==void 0?l:{},f=c.active,d=c.disabled;n.setState({active:!!f,disabled:d!=null?d:n.props.disabled})})},e.prototype.getBound=function(n){var i=pp(n,yt(n,"."+O("toolbar"))),a=i.offsetLeft,o=i.offsetTop;return{left:a,top:n.offsetHeight+o}},e.prototype.render=function(){return _(ed||(ed=q([`
        <`,`
          ...`,`
          active=`,`
          showTooltip=`,`
          hideTooltip=`,`
          getBound=`,`
          disabled=`,`
        />
      `],[`
        <`,`
          ...`,`
          active=`,`
          showTooltip=`,`
          hideTooltip=`,`
          getBound=`,`
          disabled=`,`
        />
      `])),r,this.props,this.state.active,this.showTooltip,this.hideTooltip,this.getBound,this.state.disabled||this.props.disabled)},e}(Oe)}var ed,ale=80,ole=function(r){E(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.execCommand=function(){var n=e.props,i=n.item,a=n.execCommand,o=n.setPopupInfo,s=n.getBound,l=n.eventEmitter,u=i.command,c=i.name,f=i.popup;if(u)a(u);else{var d=f?"customPopupBody":c,h=l.emit("query","getPopupInitialValues",{popupName:d})[0],p=Dl(d,{el:e.refs.el,pos:s(e.refs.el),popup:f,initialValues:h});p&&o(p)}},e}return t.prototype.mounted=function(){this.setItemWidth()},t.prototype.updated=function(e){e.item.name!==this.props.item.name&&this.setItemWidth()},t.prototype.setItemWidth=function(){var e=this.props,n=e.setItemWidth,i=e.item;n&&n(i.name,dl(this.refs.el)+(i.hidden?ale:0))},t.prototype.render=function(){var e=this,n=this.props,i=n.hideTooltip,a=n.disabled,o=n.item,s=n.active,l=w({display:o.hidden?"none":null},o.style),u=""+(o.className||"")+(s?" active":"");return _(td||(td=q([`
      <button
        ref=`,`
        type="button"
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
        disabled=`,`
        aria-label=`,`
      >
        `,`
      </button>
    `],[`
      <button
        ref=`,`
        type="button"
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
        disabled=`,`
        aria-label=`,`
      >
        `,`
      </button>
    `])),function(c){return e.refs.el=c},l,u,this.execCommand,this.showTooltip,i,!!a,o.text||o.tooltip||"",o.text||"")},t}(Oe),sle=Ll(ole),td,lle=function(r){E(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.showTooltip=function(){e.props.showTooltip(e.refs.el)},e.showPopup=function(){var n=Dl("customPopupBody",{el:e.refs.el,pos:e.props.getBound(e.refs.el),popup:e.props.item.popup});n&&e.props.setPopupInfo(n)},e}return t.prototype.mounted=function(){var e=this.props,n=e.setItemWidth,i=e.item;this.refs.el.appendChild(i.el),n&&n(i.name,dl(this.refs.el)),i.onMounted&&i.onMounted(this.props.execCommand)},t.prototype.updated=function(e){var n,i=this.props,a=i.item,o=i.active,s=i.disabled;(e.active!==o||e.disabled!==s)&&((n=a.onUpdated)===null||n===void 0||n.call(a,{active:o,disabled:s}))},t.prototype.render=function(){var e=this,n=this.props,i=n.disabled,a=n.item,o={display:a.hidden?"none":"inline-block"},s=function(l){return i?null:l};return _(rd||(rd=q([`
      <div
        ref=`,`
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
      ></div>
    `],[`
      <div
        ref=`,`
        style=`,`
        class=`,`
        onClick=`,`
        onMouseover=`,`
        onMouseout=`,`
      ></div>
    `])),function(l){return e.refs.el=l},o,O("toolbar-item-wrapper"),s(this.showPopup),s(this.showTooltip),s(this.props.hideTooltip))},t}(Oe),ule=Ll(lle),rd,Kv=function(r){E(t,r);function t(){return r!==null&&r.apply(this,arguments)||this}return t.prototype.render=function(){var e=this,n=this.props,i=n.group,a=n.hiddenDivider,o=i.hidden?{display:"none"}:null,s=a?{display:"none"}:null;return _(id||(id=q([`
      <div class="`,'" style=',`>
        `,`
        <div class="`,'" style=',`></div>
      </div>
    `],[`
      <div class="`,'" style=',`>
        `,`
        <div class="`,'" style=',`></div>
      </div>
    `])),O("toolbar-group"),o,i.map(function(l){var u=l.el?ule:sle;return _(nd||(nd=q(["<"," key="," ..."," item="," />"],["<"," key="," ..."," item="," />"])),u,l.name,e.props,l)}),O("toolbar-divider"),s)},t}(Oe),nd,id,cle=4,fle=function(r){E(t,r);function t(e){var n=r.call(this,e)||this;return n.handleClickDocument=function(i){var a=i.target;!yt(a,"."+O("dropdown-toolbar"))&&!yt(a,".more")&&n.setState({showDropdown:!1,dropdownPos:null})},n.showTooltip=function(){n.props.showTooltip(n.refs.el)},n.state={showDropdown:!1,dropdownPos:null},n}return t.prototype.getBound=function(){var e=this.props.getBound(this.refs.el);return e.top+=cle,w(w({},e),{left:null,right:10})},t.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},t.prototype.updated=function(){this.state.showDropdown&&!this.state.dropdownPos&&this.setState({dropdownPos:this.getBound()})},t.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},t.prototype.render=function(){var e=this,n=this.state,i=n.showDropdown,a=n.dropdownPos,o=this.props,s=o.disabled,l=o.item,u=o.items,c=o.hideTooltip,f=u.filter(function(p){return!p.hidden}),d=f.length?null:{display:"none"},h=i?null:{display:"none"};return _(od||(od=q([`
      <div class="`,'" style=',`>
        <button
          ref=`,`
          type="button"
          class=`,`
          onClick=`,`
          onMouseover=`,`
          onMouseout=`,`
          disabled=`,`
        ></button>
        <div
          class="`,`"
          style=`,`
          ref=`,`
        >
          `,`
        </div>
      </div>
    `],[`
      <div class="`,'" style=',`>
        <button
          ref=`,`
          type="button"
          class=`,`
          onClick=`,`
          onMouseover=`,`
          onMouseout=`,`
          disabled=`,`
        ></button>
        <div
          class="`,`"
          style=`,`
          ref=`,`
        >
          `,`
        </div>
      </div>
    `])),O("toolbar-group"),d,function(p){return e.refs.el=p},l.className,function(){return e.setState({showDropdown:!0})},this.showTooltip,c,s,O("dropdown-toolbar"),w(w({},h),a),function(p){return e.refs.dropdownEl=p},f.length?f.map(function(p,v){var m;return _(ad||(ad=q([`
                  <`,`
                    group=`,`
                    hiddenDivider=`,`
                    ...`,`
                  />
                `],[`
                  <`,`
                    group=`,`
                    hiddenDivider=`,`
                    ...`,`
                  />
                `])),Kv,p,v===f.length-1||((m=f[v+1])===null||m===void 0?void 0:m.hidden),e.props)}):null)},t}(Oe),dle=Ll(fle),ad,od,hle=50,ple=function(r){E(t,r);function t(e){var n=r.call(this,e)||this;return n.toggleTab=function(i,a){var o=n.props.eventEmitter;if(n.state.activeTab!==a){var s=a==="write"?"changePreviewTabWrite":"changePreviewTabPreview";o.emit(s),n.setState({activeTab:a})}},n.setItemWidth=function(i,a){n.itemWidthMap[i]=a},n.setPopupInfo=function(i){n.setState({showPopup:!0,popupInfo:i})},n.openPopup=function(i,a){a===void 0&&(a={});var o=n.refs.el.querySelector("."+O("toolbar-group")+" ."+i);if(o){var s=pp(o,yt(o,"."+O("toolbar"))),l=s.offsetLeft,u=s.offsetTop,c=Dl(i,{el:o,pos:{left:l,top:o.offsetHeight+u},initialValues:a});c&&n.setPopupInfo(c)}},n.hidePopup=function(){n.state.showPopup&&n.setState({showPopup:!1})},n.execCommand=function(i,a){var o=n.props.eventEmitter;o.emit("command",i,a),n.hidePopup()},n.tabs=[{name:"write",text:"Write"},{name:"preview",text:"Preview"}],n.itemWidthMap={},n.initialItems=tle(e.toolbarItems||[],n.hiddenScrollSync()),n.state={items:n.initialItems,dropdownItems:[],showPopup:!1,popupInfo:{},activeTab:"write"},n.tooltipRef={current:null},n.resizeObserver=new Use(function(){return n.handleResize()}),n.addEvent(),n}return t.prototype.insertToolbarItem=function(e,n){var i=e.groupIndex,a=e.itemIndex,o=this.initialItems[i];n=As(n),o?o.splice(a,0,n):this.initialItems.push([n]),this.setState(this.classifyToolbarItems())},t.prototype.removeToolbarItem=function(e){var n=this;vn(this.initialItems,function(i){var a=!1;return vn(i,function(o,s){return o.name===e?(a=!0,i.splice(s,1),n.setState(n.classifyToolbarItems()),!1):!0}),!a})},t.prototype.addEvent=function(){var e=this,n=this.props.eventEmitter;this.handleResize=Ese(function(){e.setState({items:e.initialItems,dropdownItems:[]}),e.setState(e.classifyToolbarItems())},200),n.listen("openPopup",this.openPopup)},t.prototype.appendTooltipToRoot=function(){var e='<div class="'+O("tooltip")+`" style="display:none">
        <div class="arrow"></div>
        <span class="text"></span>
      </div>`;this.tooltipRef.current=hp(e,this.refs.el)},t.prototype.hiddenScrollSync=function(){return this.props.editorType==="wysiwyg"||this.props.previewStyle==="tab"},t.prototype.movePrevItemToDropdownToolbar=function(e,n,i,a){var o=function(l){var u=l.pop();u&&a.push(u)};if(e>1)o(i);else{var s=Ee(n);s&&o(s)}},t.prototype.classifyToolbarItems=function(){var e=this,n=0,i=this.refs.el.clientWidth,a=this.refs.el.querySelector("."+O("toolbar-divider")),o=a?dl(a):0,s=[],l=[],u=!1;return this.initialItems.forEach(function(c,f){var d=[],h=[];c.forEach(function(p,v){p.hidden||(n+=e.itemWidthMap[p.name],n>i-hle?(u||(e.movePrevItemToDropdownToolbar(v,s,d,h),u=!0),h.push(p)):d.push(p))}),d.length&&(ma(d),s.push(d)),h.length&&(ma(h),l.push(h)),f<e.state.items.length-1&&(n+=o)}),{items:s,dropdownItems:l}},t.prototype.mounted=function(){this.props.previewStyle==="tab"&&this.props.eventEmitter.emit("changePreviewTabWrite",!0),this.setState(this.classifyToolbarItems()),this.appendTooltipToRoot(),this.resizeObserver.observe(this.refs.el)},t.prototype.updated=function(e){var n=this.props,i=n.editorType,a=n.previewStyle,o=n.eventEmitter,s=a!==e.previewStyle,l=i!==e.editorType;if(s||l){rle(this.initialItems,this.hiddenScrollSync());var u=this.classifyToolbarItems();(s||a==="tab"&&i==="markdown")&&(o.emit("changePreviewTabWrite"),u.activeTab="write"),this.setState(u)}},t.prototype.beforeDestroy=function(){window.removeEventListener("resize",this.handleResize),this.resizeObserver.disconnect(),Dr(this.tooltipRef.current)},t.prototype.render=function(){var e=this,n=this.props,i=n.previewStyle,a=n.eventEmitter,o=n.editorType,s=this.state,l=s.popupInfo,u=s.showPopup,c=s.activeTab,f=s.items,d=s.dropdownItems,h={eventEmitter:a,tooltipRef:this.tooltipRef,disabled:o==="markdown"&&i==="tab"&&c==="preview",execCommand:this.execCommand,setPopupInfo:this.setPopupInfo},p=i==="tab"?{borderTopLeftRadius:0}:null;return _(ld||(ld=q([`
      <div class="`,`">
        <div
          class="`,`"
          style="display: `,`"
        >
          <`," tabs="," activeTab="," onClick=",` />
        </div>
        <div
          class="`,`"
          ref=`,`
          style=`,`
        >
          `,`
          <`,`
            item=`,`
            items=`,`
            ...`,`
          />
        </div>
        <`,`
          info=`,`
          show=`,`
          eventEmitter=`,`
          hidePopup=`,`
          execCommand=`,`
        />
      </div>
    `],[`
      <div class="`,`">
        <div
          class="`,`"
          style="display: `,`"
        >
          <`," tabs="," activeTab="," onClick=",` />
        </div>
        <div
          class="`,`"
          ref=`,`
          style=`,`
        >
          `,`
          <`,`
            item=`,`
            items=`,`
            ...`,`
          />
        </div>
        <`,`
          info=`,`
          show=`,`
          eventEmitter=`,`
          hidePopup=`,`
          execCommand=`,`
        />
      </div>
    `])),O("toolbar"),O("md-tab-container"),o==="wysiwyg"||i==="vertical"?"none":"block",Jv,this.tabs,c,this.toggleTab,O("defaultUI-toolbar"),function(v){return e.refs.el=v},p,f.map(function(v,m){var g;return _(sd||(sd=q([`
              <`,`
                group=`,`
                hiddenDivider=`,`
                setItemWidth=`,`
                ...`,`
              />
            `],[`
              <`,`
                group=`,`
                hiddenDivider=`,`
                setItemWidth=`,`
                ...`,`
              />
            `])),Kv,v,m===f.length-1||((g=f[m+1])===null||g===void 0?void 0:g.hidden),e.setItemWidth,h)}),dle,As("more"),d,h,ile,l,u,a,this.hidePopup,this.execCommand)},t}(Oe),sd,ld,vle=function(r){E(t,r);function t(e){var n=r.call(this,e)||this;return n.handleClickDocument=function(i){yt(i.target,"."+O("context-menu"))||n.setState({pos:null})},n.state={pos:null,menuGroups:[]},n.addEvent(),n}return t.prototype.addEvent=function(){var e=this;this.props.eventEmitter.listen("contextmenu",function(n){var i=n.pos,a=n.menuGroups;e.setState({pos:i,menuGroups:a})})},t.prototype.mounted=function(){document.addEventListener("click",this.handleClickDocument)},t.prototype.beforeDestroy=function(){document.removeEventListener("click",this.handleClickDocument)},t.prototype.getMenuGroupElements=function(){var e=this,n=this.state,i=n.pos,a=n.menuGroups;return i?a.reduce(function(o,s){var l=[];return s.forEach(function(u){var c=u.label,f=u.className,d=f===void 0?!1:f,h=u.disabled,p=u.onClick,v=function(){h||(p(),e.setState({pos:null}))};l.push(_(ud||(ud=q([`
                <li
                  onClick=`,`
                  class="menu-item`,`"
                  aria-role="menuitem"
                >
                  <span class="`,'">',`</span>
                </li>
              `],[`
                <li
                  onClick=`,`
                  class="menu-item`,`"
                  aria-role="menuitem"
                >
                  <span class="`,'">',`</span>
                </li>
              `])),v,h?" disabled":"",d,c))}),o.push(_(cd||(cd=q([`<ul class="menu-group">
              `,`
            </ul>`],[`<ul class="menu-group">
              `,`
            </ul>`])),l)),o},[]):[]},t.prototype.render=function(){var e=w({display:this.state.pos?"block":"none"},this.state.pos);return _(fd||(fd=q(['<div class="','" style=',` aria-role="menu">
      `,`
    </div>`],['<div class="','" style=',` aria-role="menu">
      `,`
    </div>`])),O("context-menu"),e,this.getMenuGroupElements())},t}(Oe),ud,cd,fd,mle=function(r){E(t,r);function t(e){var n=r.call(this,e)||this;n.changeMode=function(o){o!==n.state.editorType&&n.setState({editorType:o})},n.changePreviewStyle=function(o){o!==n.state.previewStyle&&n.setState({previewStyle:o})},n.hide=function(){n.setState({hide:!0})},n.show=function(){n.setState({hide:!1})};var i=e.editorType,a=e.previewStyle;return n.state={editorType:i,previewStyle:a,hide:!1},n.addEvent(),n}return t.prototype.mounted=function(){var e=this.props.slots,n=e.wwEditor,i=e.mdEditor,a=e.mdPreview;this.refs.wwContainer.appendChild(n),this.refs.mdContainer.insertAdjacentElement("afterbegin",i),this.refs.mdContainer.appendChild(a)},t.prototype.insertToolbarItem=function(e,n){this.toolbar.insertToolbarItem(e,n)},t.prototype.removeToolbarItem=function(e){this.toolbar.removeToolbarItem(e)},t.prototype.render=function(){var e=this,n=this.props,i=n.eventEmitter,a=n.hideModeSwitch,o=n.toolbarItems,s=n.theme,l=this.state,u=l.hide,c=l.previewStyle,f=l.editorType,d=u?" hidden":"",h=O(f==="markdown"?"md-mode":"ww-mode"),p=O("md")+"-"+c+"-style",v=O([s!=="light",s+" "]);return _(hd||(hd=q([`
      <div
        class="`,"","",`"
        ref=`,`
      >
        <`,`
          ref=`,`
          eventEmitter=`,`
          previewStyle=`,`
          toolbarItems=`,`
          editorType=`,`
        />
        <div
          class="`," ",`"
          ref=`,`
        >
          <div class="`,`">
            <div
              class="`," ",`"
              ref=`,`
            >
              <div class="`,`"></div>
            </div>
            <div
              class="`,`"
              ref=`,`
            />
          </div>
        </div>
        `,`
        <`," eventEmitter=",` />
      </div>
    `],[`
      <div
        class="`,"","",`"
        ref=`,`
      >
        <`,`
          ref=`,`
          eventEmitter=`,`
          previewStyle=`,`
          toolbarItems=`,`
          editorType=`,`
        />
        <div
          class="`," ",`"
          ref=`,`
        >
          <div class="`,`">
            <div
              class="`," ",`"
              ref=`,`
            >
              <div class="`,`"></div>
            </div>
            <div
              class="`,`"
              ref=`,`
            />
          </div>
        </div>
        `,`
        <`," eventEmitter=",` />
      </div>
    `])),v,O("defaultUI"),d,function(m){return e.refs.el=m},ple,function(m){return e.toolbar=m},i,c,o,f,O("main"),h,function(m){return e.refs.editorSection=m},O("main-container"),O("md-container"),p,function(m){return e.refs.mdContainer=m},O("md-splitter"),O("ww-container"),function(m){return e.refs.wwContainer=m},!a&&_(dd||(dd=q(["<"," eventEmitter="," editorType="," />"],["<"," eventEmitter="," editorType="," />"])),wse,i,f),vle,i)},t.prototype.addEvent=function(){var e=this.props.eventEmitter;e.listen("hide",this.hide),e.listen("show",this.show),e.listen("changeMode",this.changeMode),e.listen("changePreviewStyle",this.changePreviewStyle)},t}(Oe),dd,hd,ble=function(r){E(t,r);function t(e){var n,i=r.call(this,e)||this,a,o=kse(i.options.el,_(pd||(pd=q([`
        <`,`
          ref=`,`
          eventEmitter=`,`
          slots=`,`
          hideModeSwitch=`,`
          toolbarItems=`,`
          previewStyle=`,`
          editorType=`,`
          theme=`,`
        />
      `],[`
        <`,`
          ref=`,`
          eventEmitter=`,`
          slots=`,`
          hideModeSwitch=`,`
          toolbarItems=`,`
          previewStyle=`,`
          editorType=`,`
          theme=`,`
        />
      `])),mle,function(s){return a=s},i.eventEmitter,i.getEditorElements(),i.options.hideModeSwitch,i.options.toolbarItems,i.options.previewStyle,i.options.initialEditType,i.options.theme));return i.setMinHeight(i.options.minHeight),i.setHeight(i.options.height),i.defaultUI={insertToolbarItem:a.insertToolbarItem.bind(a),removeToolbarItem:a.removeToolbarItem.bind(a),destroy:o},(n=i.pluginInfo.toolbarItems)===null||n===void 0||n.forEach(function(s){var l=s.groupIndex,u=s.itemIndex,c=s.item;i.defaultUI.insertToolbarItem({groupIndex:l,itemIndex:u},c)}),i.eventEmitter.emit("loadUI",i),i}return t.factory=function(e){return e.viewer?new Hv(e):new t(e)},t.prototype.insertToolbarItem=function(e,n){this.defaultUI.insertToolbarItem(e,n)},t.prototype.removeToolbarItem=function(e){this.defaultUI.removeToolbarItem(e)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.defaultUI.destroy()},t}(qv),pd;qv.setLanguage(["en","en-US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file","Choose a file":"Choose a file","No file":"No file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row to up":"Add row to up","Add row to down":"Add row to down","Add column to left":"Add column to left","Add column to right":"Add column to right","Remove row":"Remove row","Remove column":"Remove column","Align column to left":"Align column to left","Align column to center":"Align column to center","Align column to right":"Align column to right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"});export{ble as T,Ks as a,Me as b,We as c,Je as d,Rr as e};
