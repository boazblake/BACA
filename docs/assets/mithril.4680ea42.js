function W(n,l,s,c,$,m){return{tag:n,key:l,attrs:s,children:c,text:$,dom:m,domSize:void 0,state:void 0,events:void 0,instance:void 0}}W.normalize=function(n){return Array.isArray(n)?W("[",void 0,void 0,W.normalizeChildren(n),void 0,void 0):n==null||typeof n=="boolean"?null:typeof n=="object"?n:W("#",void 0,void 0,String(n),void 0,void 0)};W.normalizeChildren=function(n){var l=[];if(n.length){for(var s=n[0]!=null&&n[0].key!=null,c=1;c<n.length;c++)if((n[c]!=null&&n[c].key!=null)!==s)throw new TypeError(s&&(n[c]!=null||typeof n[c]=="boolean")?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var c=0;c<n.length;c++)l[c]=W.normalize(n[c])}return l};var G=W,ut=G,Se=function(){var n=arguments[this],l=this+1,s;if(n==null?n={}:(typeof n!="object"||n.tag!=null||Array.isArray(n))&&(n={},l=this),arguments.length===l+1)s=arguments[l],Array.isArray(s)||(s=[s]);else for(s=[];l<arguments.length;)s.push(arguments[l++]);return ut("",n.key,n,s)},fe={}.hasOwnProperty,ct=G,st=Se,Z=fe,mt=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,Ke={};function qe(n){for(var l in n)if(Z.call(n,l))return!1;return!0}function ot(n){for(var l,s="div",c=[],$={};l=mt.exec(n);){var m=l[1],a=l[2];if(m===""&&a!=="")s=a;else if(m==="#")$.id=a;else if(m===".")c.push(a);else if(l[3][0]==="["){var o=l[6];o&&(o=o.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),l[4]==="class"?c.push(o):$[l[4]]=o===""?o:o||!0}}return c.length>0&&($.className=c.join(" ")),Ke[n]={tag:s,attrs:$}}function ht(n,l){var s=l.attrs,c=Z.call(s,"class"),$=c?s.class:s.className;if(l.tag=n.tag,l.attrs={},!qe(n.attrs)&&!qe(s)){var m={};for(var a in s)Z.call(s,a)&&(m[a]=s[a]);s=m}for(var a in n.attrs)Z.call(n.attrs,a)&&a!=="className"&&!Z.call(s,a)&&(s[a]=n.attrs[a]);($!=null||n.attrs.className!=null)&&(s.className=$!=null?n.attrs.className!=null?String(n.attrs.className)+" "+String($):$:n.attrs.className!=null?n.attrs.className:null),c&&(s.class=null);for(var a in s)if(Z.call(s,a)&&a!=="key"){l.attrs=s;break}return l}function pt(n){if(n==null||typeof n!="string"&&typeof n!="function"&&typeof n.view!="function")throw Error("The selector must be either a string or a component.");var l=st.apply(1,arguments);return typeof n=="string"&&(l.children=ct.normalizeChildren(l.children),n!=="[")?ht(Ke[n]||ot(n),l):(l.tag=n,l)}var Qe=pt,yt=G,gt=function(n){return n==null&&(n=""),yt("<",void 0,void 0,n,void 0,void 0)},wt=G,bt=Se,$t=function(){var n=bt.apply(0,arguments);return n.tag="[",n.children=wt.normalizeChildren(n.children),n},Ce=Qe;Ce.trust=gt;Ce.fragment=$t;var Tt=Ce,Ve=new WeakMap;function*At({dom:n,domSize:l},{generation:s}={}){if(n!=null)do{const{nextSibling:c}=n;Ve.get(n)===s&&(yield n,l--),n=c}while(l)}var Je={delayedRemoval:Ve,domFor:At},$e=G,Be=Je,Fe=Be.delayedRemoval,Te=Be.domFor,Ct=function(n){var l=n&&n.document,s={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},c,$;function m(t){return t.attrs&&t.attrs.xmlns||s[t.tag]}function a(t,e){if(t.state!==e)throw new Error("'vnode.state' must not be modified.")}function o(t){var e=t.state;try{return this.apply(e,arguments)}finally{a(t,e)}}function A(){try{return l.activeElement}catch{return null}}function T(t,e,r,i,f,u,g){for(var C=r;C<i;C++){var h=e[C];h!=null&&w(t,h,f,g,u)}}function w(t,e,r,i,f){var u=e.tag;if(typeof u=="string")switch(e.state={},e.attrs!=null&&me(e.attrs,e,r),u){case"#":O(t,e,f);break;case"<":y(t,e,i,f);break;case"[":M(t,e,r,i,f);break;default:J(t,e,r,i,f)}else Q(t,e,r,i,f)}function O(t,e,r){e.dom=l.createTextNode(e.children),K(t,e.dom,r)}var I={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function y(t,e,r,i){var f=e.children.match(/^\s*?<(\w+)/im)||[],u=l.createElement(I[f[1]]||"div");r==="http://www.w3.org/2000/svg"?(u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e.children+"</svg>",u=u.firstChild):u.innerHTML=e.children,e.dom=u.firstChild,e.domSize=u.childNodes.length;for(var g=l.createDocumentFragment(),C;C=u.firstChild;)g.appendChild(C);K(t,g,i)}function M(t,e,r,i,f){var u=l.createDocumentFragment();if(e.children!=null){var g=e.children;T(u,g,0,g.length,r,null,i)}e.dom=u.firstChild,e.domSize=u.childNodes.length,K(t,u,f)}function J(t,e,r,i,f){var u=e.tag,g=e.attrs,C=g&&g.is;i=m(e)||i;var h=i?C?l.createElementNS(i,u,{is:C}):l.createElementNS(i,u):C?l.createElement(u,{is:C}):l.createElement(u);if(e.dom=h,g!=null&&ke(e,g,i),K(t,h,f),!Re(e)&&e.children!=null){var z=e.children;T(h,z,0,z.length,r,null,i),e.tag==="select"&&g!=null&&tt(e,g)}}function S(t,e){var r;if(typeof t.tag.view=="function"){if(t.state=Object.create(t.tag),r=t.state.view,r.$$reentrantLock$$!=null)return;r.$$reentrantLock$$=!0}else{if(t.state=void 0,r=t.tag,r.$$reentrantLock$$!=null)return;r.$$reentrantLock$$=!0,t.state=t.tag.prototype!=null&&typeof t.tag.prototype.view=="function"?new t.tag(t):t.tag(t)}if(me(t.state,t,e),t.attrs!=null&&me(t.attrs,t,e),t.instance=$e.normalize(o.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null}function Q(t,e,r,i,f){S(e,r),e.instance!=null?(w(t,e.instance,r,i,f),e.dom=e.instance.dom,e.domSize=e.dom!=null?e.instance.domSize:0):e.domSize=0}function V(t,e,r,i,f,u){if(!(e===r||e==null&&r==null))if(e==null||e.length===0)T(t,r,0,r.length,i,f,u);else if(r==null||r.length===0)d(t,e,0,e.length);else{var g=e[0]!=null&&e[0].key!=null,C=r[0]!=null&&r[0].key!=null,h=0,z=0;if(!g)for(;z<e.length&&e[z]==null;)z++;if(!C)for(;h<r.length&&r[h]==null;)h++;if(g!==C)d(t,e,z,e.length),T(t,r,h,r.length,i,f,u);else if(C){for(var U=e.length-1,D=r.length-1,ae,H,q,_,L,pe;U>=z&&D>=h&&(_=e[U],L=r[D],_.key===L.key);)_!==L&&E(t,_,L,i,f,u),L.dom!=null&&(f=L.dom),U--,D--;for(;U>=z&&D>=h&&(H=e[z],q=r[h],H.key===q.key);)z++,h++,H!==q&&E(t,H,q,i,X(e,z,f),u);for(;U>=z&&D>=h&&!(h===D||H.key!==L.key||_.key!==q.key);)pe=X(e,z,f),B(t,_,pe),_!==q&&E(t,_,q,i,pe,u),++h<=--D&&B(t,H,f),H!==L&&E(t,H,L,i,f,u),L.dom!=null&&(f=L.dom),z++,U--,_=e[U],L=r[D],H=e[z],q=r[h];for(;U>=z&&D>=h&&_.key===L.key;)_!==L&&E(t,_,L,i,f,u),L.dom!=null&&(f=L.dom),U--,D--,_=e[U],L=r[D];if(h>D)d(t,e,z,U+1);else if(z>U)T(t,r,h,D+1,i,f,u);else{var lt=f,je=D-h+1,te=new Array(je),ye=0,j=0,ge=2147483647,we=0,ae,be;for(j=0;j<je;j++)te[j]=-1;for(j=D;j>=h;j--){ae==null&&(ae=R(e,z,U+1)),L=r[j];var Y=ae[L.key];Y!=null&&(ge=Y<ge?Y:-1,te[j-h]=Y,_=e[Y],e[Y]=null,_!==L&&E(t,_,L,i,f,u),L.dom!=null&&(f=L.dom),we++)}if(f=lt,we!==U-z+1&&d(t,e,z,U+1),we===0)T(t,r,h,D+1,i,f,u);else if(ge===-1)for(be=re(te),ye=be.length-1,j=D;j>=h;j--)q=r[j],te[j-h]===-1?w(t,q,i,u,f):be[ye]===j-h?ye--:B(t,q,f),q.dom!=null&&(f=r[j].dom);else for(j=D;j>=h;j--)q=r[j],te[j-h]===-1&&w(t,q,i,u,f),q.dom!=null&&(f=r[j].dom)}}else{var he=e.length<r.length?e.length:r.length;for(h=h<z?h:z;h<he;h++)H=e[h],q=r[h],!(H===q||H==null&&q==null)&&(H==null?w(t,q,i,u,X(e,h+1,f)):q==null?ne(t,H):E(t,H,q,i,X(e,h+1,f),u));e.length>he&&d(t,e,h,e.length),r.length>he&&T(t,r,h,r.length,i,f,u)}}}function E(t,e,r,i,f,u){var g=e.tag,C=r.tag;if(g===C){if(r.state=e.state,r.events=e.events,ft(r,e))return;if(typeof g=="string")switch(r.attrs!=null&&oe(r.attrs,r,i),g){case"#":p(e,r);break;case"<":x(t,e,r,u,f);break;case"[":b(t,e,r,i,f,u);break;default:F(e,r,i,u)}else P(t,e,r,i,f,u)}else ne(t,e),w(t,r,i,u,f)}function p(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children),e.dom=t.dom}function x(t,e,r,i,f){e.children!==r.children?(ie(t,e,void 0),y(t,r,i,f)):(r.dom=e.dom,r.domSize=e.domSize)}function b(t,e,r,i,f,u){V(t,e.children,r.children,i,f,u);var g=0,C=r.children;if(r.dom=null,C!=null){for(var h=0;h<C.length;h++){var z=C[h];z!=null&&z.dom!=null&&(r.dom==null&&(r.dom=z.dom),g+=z.domSize||1)}g!==1&&(r.domSize=g)}}function F(t,e,r,i){var f=e.dom=t.dom;i=m(e)||i,e.tag==="textarea"&&e.attrs==null&&(e.attrs={}),rt(e,t.attrs,e.attrs,i),Re(e)||V(f,t.children,e.children,r,null,i)}function P(t,e,r,i,f,u){if(r.instance=$e.normalize(o.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");oe(r.state,r,i),r.attrs!=null&&oe(r.attrs,r,i),r.instance!=null?(e.instance==null?w(t,r.instance,i,u,f):E(t,e.instance,r.instance,i,f,u),r.dom=r.instance.dom,r.domSize=r.instance.domSize):e.instance!=null?(ne(t,e.instance),r.dom=void 0,r.domSize=0):(r.dom=e.dom,r.domSize=e.domSize)}function R(t,e,r){for(var i=Object.create(null);e<r;e++){var f=t[e];if(f!=null){var u=f.key;u!=null&&(i[u]=e)}}return i}var N=[];function re(t){for(var e=[0],r=0,i=0,f=0,u=N.length=t.length,f=0;f<u;f++)N[f]=t[f];for(var f=0;f<u;++f)if(t[f]!==-1){var g=e[e.length-1];if(t[g]<t[f]){N[f]=g,e.push(f);continue}for(r=0,i=e.length-1;r<i;){var C=(r>>>1)+(i>>>1)+(r&i&1);t[e[C]]<t[f]?r=C+1:i=C}t[f]<t[e[r]]&&(r>0&&(N[f]=e[r-1]),e[r]=f)}for(r=e.length,i=e[r-1];r-- >0;)e[r]=i,i=N[i];return N.length=0,e}function X(t,e,r){for(;e<t.length;e++)if(t[e]!=null&&t[e].dom!=null)return t[e].dom;return r}function B(t,e,r){if(e.dom!=null){var i;if(e.domSize==null)i=e.dom;else{i=l.createDocumentFragment();for(var f of Te(e))i.appendChild(f)}K(t,i,r)}}function K(t,e,r){r!=null?t.insertBefore(e,r):t.appendChild(e)}function Re(t){if(t.attrs==null||t.attrs.contenteditable==null&&t.attrs.contentEditable==null)return!1;var e=t.children;if(e!=null&&e.length===1&&e[0].tag==="<"){var r=e[0].children;t.dom.innerHTML!==r&&(t.dom.innerHTML=r)}else if(e!=null&&e.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function d(t,e,r,i){for(var f=r;f<i;f++){var u=e[f];u!=null&&ne(t,u)}}function ne(t,e){var r=0,i=e.state,f,u;if(typeof e.tag!="string"&&typeof e.state.onbeforeremove=="function"){var g=o.call(e.state.onbeforeremove,e);g!=null&&typeof g.then=="function"&&(r=1,f=g)}if(e.attrs&&typeof e.attrs.onbeforeremove=="function"){var g=o.call(e.attrs.onbeforeremove,e);g!=null&&typeof g.then=="function"&&(r|=2,u=g)}a(e,i);var C;if(!r)k(e),ie(t,e,C);else{C=$;for(var h of Te(e))Fe.set(h,C);f!=null&&f.finally(function(){r&1&&(r&=2,r||(a(e,i),k(e),ie(t,e,C)))}),u!=null&&u.finally(function(){r&2&&(r&=1,r||(a(e,i),k(e),ie(t,e,C)))})}}function ie(t,e,r){if(e.dom!=null)if(e.domSize==null)Fe.get(e.dom)===r&&t.removeChild(e.dom);else for(var i of Te(e,{generation:r}))t.removeChild(i)}function k(t){if(typeof t.tag!="string"&&typeof t.state.onremove=="function"&&o.call(t.state.onremove,t),t.attrs&&typeof t.attrs.onremove=="function"&&o.call(t.attrs.onremove,t),typeof t.tag!="string")t.instance!=null&&k(t.instance);else{var e=t.children;if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r];i!=null&&k(i)}}}function ke(t,e,r){t.tag==="input"&&e.type!=null&&t.dom.setAttribute("type",e.type);var i=e!=null&&t.tag==="input"&&e.type==="file";for(var f in e)ue(t,f,null,e[f],r,i)}function ue(t,e,r,i,f,u){if(!(e==="key"||e==="is"||i==null||ze(e)||r===i&&!nt(t,e)&&typeof i!="object"||e==="type"&&t.tag==="input")){if(e[0]==="o"&&e[1]==="n")return Le(t,e,i);if(e.slice(0,6)==="xlink:")t.dom.setAttributeNS("http://www.w3.org/1999/xlink",e.slice(6),i);else if(e==="style")Pe(t.dom,r,i);else if(Ne(t,e,f)){if(e==="value"){if((t.tag==="input"||t.tag==="textarea")&&t.dom.value===""+i&&(u||t.dom===A())||t.tag==="select"&&r!==null&&t.dom.value===""+i||t.tag==="option"&&r!==null&&t.dom.value===""+i)return;if(u&&""+i!=""){console.error("`value` is read-only on file inputs!");return}}t.dom[e]=i}else typeof i=="boolean"?i?t.dom.setAttribute(e,""):t.dom.removeAttribute(e):t.dom.setAttribute(e==="className"?"class":e,i)}}function et(t,e,r,i){if(!(e==="key"||e==="is"||r==null||ze(e)))if(e[0]==="o"&&e[1]==="n")Le(t,e,void 0);else if(e==="style")Pe(t.dom,r,null);else if(Ne(t,e,i)&&e!=="className"&&e!=="title"&&!(e==="value"&&(t.tag==="option"||t.tag==="select"&&t.dom.selectedIndex===-1&&t.dom===A()))&&!(t.tag==="input"&&e==="type"))t.dom[e]=null;else{var f=e.indexOf(":");f!==-1&&(e=e.slice(f+1)),r!==!1&&t.dom.removeAttribute(e==="className"?"class":e)}}function tt(t,e){if("value"in e)if(e.value===null)t.dom.selectedIndex!==-1&&(t.dom.value=null);else{var r=""+e.value;(t.dom.value!==r||t.dom.selectedIndex===-1)&&(t.dom.value=r)}"selectedIndex"in e&&ue(t,"selectedIndex",null,e.selectedIndex,void 0)}function rt(t,e,r,i){if(e&&e===r&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),r!=null){t.tag==="input"&&r.type!=null&&t.dom.setAttribute("type",r.type);var f=t.tag==="input"&&r.type==="file";for(var u in r)ue(t,u,e&&e[u],r[u],i,f)}var g;if(e!=null)for(var u in e)(g=e[u])!=null&&(r==null||r[u]==null)&&et(t,u,g,i)}function nt(t,e){return e==="value"||e==="checked"||e==="selectedIndex"||e==="selected"&&t.dom===A()||t.tag==="option"&&t.dom.parentNode===l.activeElement}function ze(t){return t==="oninit"||t==="oncreate"||t==="onupdate"||t==="onremove"||t==="onbeforeremove"||t==="onbeforeupdate"}function Ne(t,e,r){return r===void 0&&(t.tag.indexOf("-")>-1||t.attrs!=null&&t.attrs.is||e!=="href"&&e!=="list"&&e!=="form"&&e!=="width"&&e!=="height")&&e in t.dom}var it=/[A-Z]/g;function at(t){return"-"+t.toLowerCase()}function ce(t){return t[0]==="-"&&t[1]==="-"?t:t==="cssFloat"?"float":t.replace(it,at)}function Pe(t,e,r){if(e!==r)if(r==null)t.style.cssText="";else if(typeof r!="object")t.style.cssText=r;else if(e==null||typeof e!="object"){t.style.cssText="";for(var i in r){var f=r[i];f!=null&&t.style.setProperty(ce(i),String(f))}}else{for(var i in r){var f=r[i];f!=null&&(f=String(f))!==String(e[i])&&t.style.setProperty(ce(i),f)}for(var i in e)e[i]!=null&&r[i]==null&&t.style.removeProperty(ce(i))}}function se(){this._=c}se.prototype=Object.create(null),se.prototype.handleEvent=function(t){var e=this["on"+t.type],r;typeof e=="function"?r=e.call(t.currentTarget,t):typeof e.handleEvent=="function"&&e.handleEvent(t),this._&&t.redraw!==!1&&(0,this._)(),r===!1&&(t.preventDefault(),t.stopPropagation())};function Le(t,e,r){if(t.events!=null){if(t.events._=c,t.events[e]===r)return;r!=null&&(typeof r=="function"||typeof r=="object")?(t.events[e]==null&&t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=r):(t.events[e]!=null&&t.dom.removeEventListener(e.slice(2),t.events,!1),t.events[e]=void 0)}else r!=null&&(typeof r=="function"||typeof r=="object")&&(t.events=new se,t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=r)}function me(t,e,r){typeof t.oninit=="function"&&o.call(t.oninit,e),typeof t.oncreate=="function"&&r.push(o.bind(t.oncreate,e))}function oe(t,e,r){typeof t.onupdate=="function"&&r.push(o.bind(t.onupdate,e))}function ft(t,e){do{if(t.attrs!=null&&typeof t.attrs.onbeforeupdate=="function"){var r=o.call(t.attrs.onbeforeupdate,t,e);if(r!==void 0&&!r)break}if(typeof t.tag!="string"&&typeof t.state.onbeforeupdate=="function"){var r=o.call(t.state.onbeforeupdate,t,e);if(r!==void 0&&!r)break}return!1}while(!1);return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,t.attrs=e.attrs,t.children=e.children,t.text=e.text,!0}var ee;return function(t,e,r){if(!t)throw new TypeError("DOM element being rendered to does not exist.");if(ee!=null&&t.contains(ee))throw new TypeError("Node is currently being rendered to and thus is locked.");var i=c,f=ee,u=[],g=A(),C=t.namespaceURI;ee=t,c=typeof r=="function"?r:void 0,$={};try{t.vnodes==null&&(t.textContent=""),e=$e.normalizeChildren(Array.isArray(e)?e:[e]),V(t,t.vnodes,e,u,null,C==="http://www.w3.org/1999/xhtml"?void 0:C),t.vnodes=e,g!=null&&A()!==g&&typeof g.focus=="function"&&g.focus();for(var h=0;h<u.length;h++)u[h]()}finally{c=i,ee=f}}},Ge=Ct(typeof window!="undefined"?window:null),Me=G,Ot=function(n,l,s){var c=[],$=!1,m=-1;function a(){for(m=0;m<c.length;m+=2)try{n(c[m],Me(c[m+1]),o)}catch(T){s.error(T)}m=-1}function o(){$||($=!0,l(function(){$=!1,a()}))}o.sync=a;function A(T,w){if(w!=null&&w.view==null&&typeof w!="function")throw new TypeError("m.mount expects a component, not a vnode.");var O=c.indexOf(T);O>=0&&(c.splice(O,2),O<=m&&(m-=2),n(T,[])),w!=null&&(c.push(T,w),n(T,Me(w),o))}return{mount:A,redraw:o}},xt=Ge,Oe=Ot(xt,typeof requestAnimationFrame!="undefined"?requestAnimationFrame:null,typeof console!="undefined"?console:null),We=function(n){if(Object.prototype.toString.call(n)!=="[object Object]")return"";var l=[];for(var s in n)c(s,n[s]);return l.join("&");function c($,m){if(Array.isArray(m))for(var a=0;a<m.length;a++)c($+"["+a+"]",m[a]);else if(Object.prototype.toString.call(m)==="[object Object]")for(var a in m)c($+"["+a+"]",m[a]);else l.push(encodeURIComponent($)+(m!=null&&m!==""?"="+encodeURIComponent(m):""))}},Et=fe,Xe=Object.assign||function(n,l){for(var s in l)Et.call(l,s)&&(n[s]=l[s])},Rt=We,zt=Xe,xe=function(n,l){if(/:([^\/\.-]+)(\.{3})?:/.test(n))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(l==null)return n;var s=n.indexOf("?"),c=n.indexOf("#"),$=c<0?n.length:c,m=s<0?$:s,a=n.slice(0,m),o={};zt(o,l);var A=a.replace(/:([^\/\.-]+)(\.{3})?/g,function(J,S,Q){return delete o[S],l[S]==null?J:Q?l[S]:encodeURIComponent(String(l[S]))}),T=A.indexOf("?"),w=A.indexOf("#"),O=w<0?A.length:w,I=T<0?O:T,y=A.slice(0,I);s>=0&&(y+=n.slice(s,$)),T>=0&&(y+=(s<0?"?":"&")+A.slice(T,O));var M=Rt(o);return M&&(y+=(s<0&&T<0?"?":"&")+M),c>=0&&(y+=n.slice(c)),w>=0&&(y+=(c<0?"":"&")+A.slice(w)),y},Nt=xe,De=fe,Pt=function(n,l){function s(m){return new Promise(m)}function c(m,a){return new Promise(function(o,A){m=Nt(m,a.params);var T=a.method!=null?a.method.toUpperCase():"GET",w=a.body,O=(a.serialize==null||a.serialize===JSON.serialize)&&!(w instanceof n.FormData||w instanceof n.URLSearchParams),I=a.responseType||(typeof a.extract=="function"?"":"json"),y=new n.XMLHttpRequest,M=!1,J=!1,S=y,Q,V=y.abort;y.abort=function(){M=!0,V.call(this)},y.open(T,m,a.async!==!1,typeof a.user=="string"?a.user:void 0,typeof a.password=="string"?a.password:void 0),O&&w!=null&&!$(a,"content-type")&&y.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof a.deserialize!="function"&&!$(a,"accept")&&y.setRequestHeader("Accept","application/json, text/*"),a.withCredentials&&(y.withCredentials=a.withCredentials),a.timeout&&(y.timeout=a.timeout),y.responseType=I;for(var E in a.headers)De.call(a.headers,E)&&y.setRequestHeader(E,a.headers[E]);y.onreadystatechange=function(p){if(!M&&p.target.readyState===4)try{var x=p.target.status>=200&&p.target.status<300||p.target.status===304||/^file:\/\//i.test(m),b=p.target.response,F;if(I==="json"){if(!p.target.responseType&&typeof a.extract!="function")try{b=JSON.parse(p.target.responseText)}catch{b=null}}else(!I||I==="text")&&b==null&&(b=p.target.responseText);if(typeof a.extract=="function"?(b=a.extract(p.target,a),x=!0):typeof a.deserialize=="function"&&(b=a.deserialize(b)),x){if(typeof a.type=="function")if(Array.isArray(b))for(var P=0;P<b.length;P++)b[P]=new a.type(b[P]);else b=new a.type(b);o(b)}else{var R=function(){if(p.target.responseType=="json")A(b);else{try{F=p.target.responseText}catch{F=b}var N=new Error(F);N.code=p.target.status,N.response=b,A(N)}};y.status===0?setTimeout(function(){J||R()}):R()}}catch(N){A(N)}},y.ontimeout=function(p){J=!0;var x=new Error("Request timed out");x.code=p.target.status,A(x)},typeof a.config=="function"&&(y=a.config(y,a,m)||y,y!==S&&(Q=y.abort,y.abort=function(){M=!0,Q.call(this)})),w==null?y.send():typeof a.serialize=="function"?y.send(a.serialize(w)):w instanceof n.FormData||w instanceof n.URLSearchParams?y.send(w):y.send(JSON.stringify(w))})}s.prototype=Promise.prototype,s.__proto__=Promise;function $(m,a){for(var o in m.headers)if(De.call(m.headers,o)&&o.toLowerCase()===a)return!0;return!1}return{request:function(m,a){typeof m!="string"?(a=m,m=m.url):a==null&&(a={});var o=c(m,a);if(a.background===!0)return o;var A=0;function T(){--A===0&&typeof l=="function"&&l()}return w(o);function w(O){var I=O.then;return O.constructor=s,O.then=function(){A++;var y=I.apply(O,arguments);return y.then(T,function(M){if(T(),A===0)throw M}),w(y)},O}}}},Lt=Oe,jt=Pt(typeof window!="undefined"?window:null,Lt.redraw);function ve(n){try{return decodeURIComponent(n)}catch{return n}}var Ye=function(n){if(n===""||n==null)return{};n.charAt(0)==="?"&&(n=n.slice(1));for(var l=n.split("&"),s={},c={},$=0;$<l.length;$++){var m=l[$].split("="),a=ve(m[0]),o=m.length===2?ve(m[1]):"";o==="true"?o=!0:o==="false"&&(o=!1);var A=a.split(/\]\[?|\[/),T=c;a.indexOf("[")>-1&&A.pop();for(var w=0;w<A.length;w++){var O=A[w],I=A[w+1],y=I==""||!isNaN(parseInt(I,10));if(O===""){var a=A.slice(0,w).join();s[a]==null&&(s[a]=Array.isArray(T)?T.length:0),O=s[a]++}else if(O==="__proto__")break;if(w===A.length-1)T[O]=o;else{var M=Object.getOwnPropertyDescriptor(T,O);M!=null&&(M=M.value),M==null&&(T[O]=M=y?[]:{}),T=M}}}return c},qt=Ye,Ee=function(n){var l=n.indexOf("?"),s=n.indexOf("#"),c=s<0?n.length:s,$=l<0?c:l,m=n.slice(0,$).replace(/\/{2,}/g,"/");return m?m[0]!=="/"&&(m="/"+m):m="/",{path:m,params:l<0?{}:qt(n.slice(l+1,c))}},Ft=Ee,Mt=function(n){var l=Ft(n),s=Object.keys(l.params),c=[],$=new RegExp("^"+l.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(m,a,o){return a==null?"\\"+m:(c.push({k:a,r:o==="..."}),o==="..."?"(.*)":o==="."?"([^/]+)\\.":"([^/]+)"+(o||""))})+"$");return function(m){for(var a=0;a<s.length;a++)if(l.params[s[a]]!==m.params[s[a]])return!1;if(!c.length)return $.test(m.path);var o=$.exec(m.path);if(o==null)return!1;for(var a=0;a<c.length;a++)m.params[c[a].k]=c[a].r?o[a+1]:decodeURIComponent(o[a+1]);return!0}},Ie=fe,_e=new RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$"),Ze=function(n,l){var s={};if(l!=null)for(var c in n)Ie.call(n,c)&&!_e.test(c)&&l.indexOf(c)<0&&(s[c]=n[c]);else for(var c in n)Ie.call(n,c)&&!_e.test(c)&&(s[c]=n[c]);return s},Dt=G,vt=Qe,Ue=xe,He=Ee,It=Mt,_t=Xe,Ut=Ze,Ae={};function Ht(n){try{return decodeURIComponent(n)}catch{return n}}var St=function(n,l){var s=n==null?null:typeof n.setImmediate=="function"?n.setImmediate:n.setTimeout,c=Promise.resolve(),$=!1,m=!1,a=0,o,A,T=Ae,w,O,I,y,M={onbeforeupdate:function(){return a=a?2:1,!(!a||Ae===T)},onremove:function(){n.removeEventListener("popstate",Q,!1),n.removeEventListener("hashchange",S,!1)},view:function(){if(!(!a||Ae===T)){var p=[Dt(w,O.key,O)];return T&&(p=T.render(p[0])),p}}},J=E.SKIP={};function S(){$=!1;var p=n.location.hash;E.prefix[0]!=="#"&&(p=n.location.search+p,E.prefix[0]!=="?"&&(p=n.location.pathname+p,p[0]!=="/"&&(p="/"+p)));var x=p.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,Ht).slice(E.prefix.length),b=He(x);_t(b.params,n.history.state);function F(R){console.error(R),V(A,null,{replace:!0})}P(0);function P(R){for(;R<o.length;R++)if(o[R].check(b)){var N=o[R].component,re=o[R].route,X=N,B=y=function(K){if(B===y){if(K===J)return P(R+1);w=K!=null&&(typeof K.view=="function"||typeof K=="function")?K:"div",O=b.params,I=x,y=null,T=N.render?N:null,a===2?l.redraw():(a=2,l.redraw.sync())}};N.view||typeof N=="function"?(N={},B(X)):N.onmatch?c.then(function(){return N.onmatch(b.params,x,re)}).then(B,x===A?null:F):B("div");return}if(x===A)throw new Error("Could not resolve default route "+A+".");V(A,null,{replace:!0})}}function Q(){$||($=!0,s(S))}function V(p,x,b){if(p=Ue(p,x),m){Q();var F=b?b.state:null,P=b?b.title:null;b&&b.replace?n.history.replaceState(F,P,E.prefix+p):n.history.pushState(F,P,E.prefix+p)}else n.location.href=E.prefix+p}function E(p,x,b){if(!p)throw new TypeError("DOM element being rendered to does not exist.");if(o=Object.keys(b).map(function(P){if(P[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(P))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:P,component:b[P],check:It(P)}}),A=x,x!=null){var F=He(x);if(!o.some(function(P){return P.check(F)}))throw new ReferenceError("Default route doesn't match any known routes.")}typeof n.history.pushState=="function"?n.addEventListener("popstate",Q,!1):E.prefix[0]==="#"&&n.addEventListener("hashchange",S,!1),m=!0,l.mount(p,M),S()}return E.set=function(p,x,b){y!=null&&(b=b||{},b.replace=!0),y=null,V(p,x,b)},E.get=function(){return I},E.prefix="#!",E.Link={view:function(p){var x=vt(p.attrs.selector||"a",Ut(p.attrs,["options","params","selector","onclick"]),p.children),b,F,P;return(x.attrs.disabled=Boolean(x.attrs.disabled))?(x.attrs.href=null,x.attrs["aria-disabled"]="true"):(b=p.attrs.options,F=p.attrs.onclick,P=Ue(x.attrs.href,p.attrs.params),x.attrs.href=E.prefix+P,x.attrs.onclick=function(R){var N;typeof F=="function"?N=F.call(R.currentTarget,R):F==null||typeof F!="object"||typeof F.handleEvent=="function"&&F.handleEvent(R),N!==!1&&!R.defaultPrevented&&(R.button===0||R.which===0||R.which===1)&&(!R.currentTarget.target||R.currentTarget.target==="_self")&&!R.ctrlKey&&!R.metaKey&&!R.shiftKey&&!R.altKey&&(R.preventDefault(),R.redraw=!1,E.set(P,null,b))}),x}},E.param=function(p){return O&&p!=null?O[p]:O},E},Kt=Oe,Qt=St(typeof window!="undefined"?window:null,Kt),le=Tt,Vt=jt,de=Oe,Jt=Je,v=function(){return le.apply(this,arguments)};v.m=le;v.trust=le.trust;v.fragment=le.fragment;v.Fragment="[";v.mount=de.mount;v.route=Qt;v.render=Ge;v.redraw=de.redraw;v.request=Vt.request;v.parseQueryString=Ye;v.buildQueryString=We;v.parsePathname=Ee;v.buildPathname=xe;v.vnode=G;v.censor=Ze;v.domFor=Jt.domFor;var Bt=v;export{Bt as m};
